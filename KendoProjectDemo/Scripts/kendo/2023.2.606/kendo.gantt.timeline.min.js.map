{"version":3,"file":"kendo.gantt.timeline.min.js","names":["factory","define","amd","$","Widget","kendo","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","isRtl","keys","Query","data","NS","CLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","DOT","DAY_HEADER_TEMPLATE","ref","start","toString","WEEK_HEADER_TEMPLATE","end","date","addDays","MONTH_HEADER_TEMPLATE","RESIZE_TOOLTIP_TEMPLATE","styles","messages","format","TASK_TOOLTIP_TEMPLATE","task","htmlEncode","taskDetails","title","percentComplete","defaultViews","day","type","week","month","year","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","GanttView","init","options","fn","call","this","name","header","find","gridHeader","content","gridContent","contentWidth","width","_workDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","getWorkDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","taskTemplate","template","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","dependenciesWrapper","height","rows","headers","_headers","colgroup","_colgroup","tree","className","tbody","table","headerTable","style","role","render","first","last","slot","children","slots","_timeSlots","i","length","offsetLeft","offsetWidth","tasks","contentTable","totalHeight","taskCount","rowsTable","_rowsTable","columnsTable","_columnsTable","tasksTable","_tasksTable","calculatedSize","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","tableRow","alt","tableCell","_createTable","slotSpan","cells","slotsCount","totalSpan","span","colspan","isNonWorking","nonWorking","cell","position","plannedPosition","resourcesPosition","resourceStyle","rowIndex","taskLeft","taskRight","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resource","resourceAlt","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","showPlannedTasks","l","_taskPosition","_taskPositionPlanned","borderWidth","_renderTask","left","max","clientWidth","resourcesWrap","_renderResources","isMilestone","id","cols","currentSpan","maxSpan","boundingClientRect","taskMilestone","milestone","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","taskSingle","getComputedStyles","parseFloat","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","taskOffsetWrap","offsetElement","editable","wrapClassName","taskWrap","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","taskSummaryWrap","_renderMilestone","taskMilestoneWrap","_renderSingleTask","plannedStart","plannedEnd","taskOffset","resize","update","taskActions","link","taskDelete","href","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskInnerWrap","dependencyCreate","taskDot","taskDotStart","taskDotEnd","dragPercentComplete","taskDragHandle","progressWidth","taskContent","taskChildren","classes","widthExceptDelay","taskDelayed","taskAdvanced","taskComplete","uid","taskSummary","taskSummaryProgress","taskSummaryComplete","taskPlannedMoment","taskPlannedMomentLeft","taskPlannedDuration","taskPlanned","resources","color","get","reverse","startLeft","_offset","slotOffset","_slotIndex","field","value","middle","startIdx","endIdx","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","delta","that","top","dir","rowHeight","fromTop","floor","toTop","addHorizontal","_line","line","lineHorizontal","addVertical","lineVertical","abs","minLineHeight","direction","arrowWest","arrowEast","count","j","_createDragHint","clone","addClass","dragHint","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","tooltipTop","taskTop","RESIZE_HINT","views","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","tasksWrapper","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","PERCENT_RESIZE_TOOLTIP_TEMPLATE","tooltipMiddle","arrow","callout","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","dependencyHint","transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","tooltipWrapper","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","hours","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","days","offsetTooltipDelay","offsetPrefix","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","plannedTooltip","editorMessages","editor","startDate","endDate","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","isWorkHour","getHours","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","daySlots","firstDay","calendarInfo","dayOfWeek","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","viewStyles","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","bind","reset","gridHeaderWrap","taskDetailsPercent","tooltipContent","tooltipCallout","marquee","marqueeColor","offsetTooltipAdvanced","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","endDay","rangeEnd","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculatedRowHeight","calculatedCellHeight","gridContentWrap","_calculatedSize","Tree","view","isSettings","defaultView","selected","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","window","Error","newRange","newDate","prefix","_range","sort","toArray","_render","_tasks","_taskByUid","currentStart","startOffset","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","startX","startY","hoveredHandle","hoveredTask","removeClass","hovered","origin","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","taskWrapActive","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","currentMousePosition","tooltipOptions","mouseMoveHandler","visible","relatedTarget","currentPosition","client","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","_setPlanned","jQuery"],"sources":["kendo.gantt.timeline.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.dom', 'kendo.touch', 'kendo.draganddrop', 'kendo.icons'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"gantt.timeline\",\n        name: \"Gantt Timeline\",\n        category: \"web\",\n        description: \"The Gantt Timeline\",\n        depends: [ \"dom\", \"touch\", \"draganddrop\", \"icons\" ],\n        hidden: true\n    };\n\n    (function($) {\n\n        var Widget = kendo.ui.Widget;\n        var kendoDomElement = kendo.dom.element;\n        var kendoTextElement = kendo.dom.text;\n        var kendoHtmlElement = kendo.dom.html;\n        var isPlainObject = $.isPlainObject;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var extend = $.extend;\n        var isRtl = false;\n        var keys = kendo.keys;\n        var Query = kendo.data.Query;\n        var STRING = \"string\";\n        var NS = \".kendoGanttTimeline\";\n        var CLICK = \"click\";\n        var DBLCLICK = \"dblclick\";\n        var MOUSEMOVE = \"mousemove\";\n        var MOUSEENTER = \"mouseenter\";\n        var MOUSELEAVE = \"mouseleave\";\n        var KEYDOWN = \"keydown\";\n        var DOT = \".\";\n        var TIME_HEADER_TEMPLATE = function (ref) {\n            var start = ref.start;\n\n            return kendo.toString(start, 't');\n        };\n        var DAY_HEADER_TEMPLATE = function (ref) {\n            var start = ref.start;\n\n            return kendo.toString(start, 'ddd M/dd');\n        };\n        var WEEK_HEADER_TEMPLATE = function (ref) {\n            var start = ref.start;\n            var end = ref.end;\n\n            return ((kendo.toString(start, 'ddd M/dd')) + \" - \" + (kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')));\n        };\n        var MONTH_HEADER_TEMPLATE = function (ref) {\n            var start = ref.start;\n\n            return kendo.toString(start, 'MMM');\n        };\n        var YEAR_HEADER_TEMPLATE = function (ref) {\n            var start = ref.start;\n\n            return kendo.toString(start, 'yyyy');\n        };\n        var RESIZE_HINT = function (ref) {\n            var styles = ref.styles;\n\n            return \"<div class=\\\"\" + (styles.marquee) + \"\\\">\" +\n                               \"<div class=\\\"\" + (styles.marqueeColor) + \"\\\"></div>\" +\n                           '</div>';\n        };\n        var RESIZE_TOOLTIP_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var messages = ref.messages;\n            var start = ref.start;\n            var end = ref.end;\n            var format = ref.format;\n\n            return \"<div style=\\\"z-index: 100002;\\\" class=\\\"\" + (styles.tooltipWrapper) + \" k-gantt-resize-hint\\\">\" +\n                                       \"<div class=\\\"\" + (styles.tooltipContent) + \"\\\">\" +\n                                            \"<div>\" + (messages.start) + \": \" + (kendo.toString(start, format)) + \"</div>\" +\n                                            \"<div>\" + (messages.end) + \": \" + (kendo.toString(end, format)) + \"</div>\" +\n                                       '</div>' +\n                                  '</div>';\n        };\n        var PERCENT_RESIZE_TOOLTIP_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var text = ref.text;\n\n            return \"<div style=\\\"z-index: 100002;\\\" class=\\\"\" + (styles.tooltipWrapper) + \"\\\" >\" +\n                                       \"<div class=\\\"\" + (styles.tooltipContent) + \"\\\">\" + text + \"%</div>\" +\n                                       \"<div class=\\\"\" + (styles.tooltipCallout) + \"\\\" style=\\\"left:13px;\\\"></div>\" +\n                                  '</div>';\n        };\n        var TASK_TOOLTIP_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var task = ref.task;\n            var messages = ref.messages;\n\n            return \"<div class=\\\"\" + (kendo.htmlEncode(styles.taskDetails)) + \"\\\">\" +\n                                        \"<strong>\" + (kendo.htmlEncode(task.title)) + \"</strong>\" +\n                                        \"<div class=\\\"\" + (styles.taskDetailsPercent) + \"\\\">\" + (kendo.toString(task.percentComplete, \"p0\")) + \"</div>\" +\n                                        \"<ul class=\\\"\" + (styles.reset) + \"\\\">\" +\n                                            \"<li>\" + (messages.start) + \": \" + (kendo.toString(task.start, \"h:mm tt ddd, MMM d\")) + \"</li>\" +\n                                            \"<li>\" + (messages.end) + \": \" + (kendo.toString(task.end, \"h:mm tt ddd, MMM d\")) + \"</li>\" +\n                                        '</ul>' +\n                                    '</div>';\n        };\n        var OFFSET_TOOLTIP_TEMPLATE = function (ref) {\n            var offsetPrefix = ref.offsetPrefix;\n            var offsetText = ref.offsetText;\n\n            return (\"<span>\" + offsetPrefix + \": \" + offsetText + \"</span>\");\n        };\n        var PLANNED_TOOLTIP_TEMPLATE = function (ref) {\n            var plannedStart = ref.plannedStart;\n            var plannedEnd = ref.plannedEnd;\n            var startDate = ref.startDate;\n            var endDate = ref.endDate;\n\n            return '<div class=\"k-task-content\">' +\n                \"<div>\" + plannedStart + \": \" + startDate + \"</div>\" +\n                \"<div>\" + plannedEnd + \": \" + endDate + \"</div>\" +\n            '</div>';\n        };\n        var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n            \"<tbody>\" +\n                \"<tr style='height:{0}'>\" +\n                    \"<td>&nbsp;</td>\" +\n                \"</tr>\" +\n            \"</tbody>\" +\n        \"</table>\";\n\n        var defaultViews = {\n            day: {\n                type: \"kendo.ui.GanttDayView\"\n            },\n            week: {\n                type: \"kendo.ui.GanttWeekView\"\n            },\n            month: {\n                type: \"kendo.ui.GanttMonthView\"\n            },\n            year: {\n                type: \"kendo.ui.GanttYearView\"\n            }\n        };\n\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n            delete options.views;\n\n            return options;\n        }\n\n        function getWorkDays(options) {\n            var workDays = [];\n            var dayIndex = options.workWeekStart;\n\n            workDays.push(dayIndex);\n\n            while (options.workWeekEnd != dayIndex) {\n                if (dayIndex > 6) {\n                    dayIndex -= 7;\n                } else {\n                    dayIndex++;\n                }\n                workDays.push(dayIndex);\n            }\n            return workDays;\n        }\n\n        function blurActiveElement() {\n            var activeElement = kendo._activeElement();\n\n            if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n                $(activeElement).trigger(\"blur\");\n            }\n        }\n\n        var viewStyles = {\n            alt: \"k-alt k-table-row k-table-alt-row\",\n            reset: \"k-reset\",\n            nonWorking: \"k-nonwork-hour\",\n            header: \"k-header k-table-td\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            tasksWrapper: \"k-gantt-tables\",\n            rowsTable: \"k-gantt-rows\",\n            columnsTable: \"k-gantt-columns\",\n            tasksTable: \"k-gantt-tasks\",\n            dependenciesWrapper: \"k-gantt-dependencies\",\n            resource: \"k-resource\",\n            resourceAlt: \"k-resource k-alt\",\n            headerTable: \"k-grid-header-table k-table k-table-md\",\n            table: \"k-table k-table-md\",\n            tbody: \"k-table-tbody\",\n            tableRow: \"k-table-row\",\n            tableCell: \"k-table-td\",\n            task: \"k-task\",\n            taskSingle: \"k-task-single\",\n            taskMilestone: \"k-task-milestone\",\n            taskSummary: \"k-task-summary\",\n            taskWrap: \"k-task-wrap\",\n            taskMilestoneWrap: \"k-milestone-wrap\",\n            taskSummaryWrap: \"k-summary-wrap\",\n            taskPlanned: \"k-task-planned\",\n            taskPlannedMoment: \"k-task-moment\",\n            taskPlannedDuration: \"k-task-duration\",\n            taskPlannedMomentLeft: \"k-moment-left\",\n            taskAdvanced: \"k-task-advanced\",\n            taskDelayed: \"k-task-delayed\",\n            taskOffset: \"k-task-offset\",\n            taskOffsetWrap: \"k-task-offset-wrap\",\n            taskInnerWrap: \"k-task-inner-wrap\",\n            resourcesWrap: \"k-resources-wrap\",\n            taskDot: \"k-task-dot\",\n            taskDotStart: \"k-task-start\",\n            taskDotEnd: \"k-task-end\",\n            taskDragHandle: \"k-task-draghandle\",\n            taskContent: \"k-task-content\",\n            taskTemplate: \"k-task-template\",\n            taskActions: \"k-task-actions\",\n            taskDelete: \"k-task-delete\",\n            taskComplete: \"k-task-complete\",\n            taskDetails: \"k-task-details\",\n            taskDetailsPercent: \"k-task-pct\",\n            link: \"k-link\",\n            iconDelete: \"x\",\n            taskResizeHandle: \"k-resize-handle\",\n            taskResizeHandleWest: \"k-resize-w\",\n            taskResizeHandleEast: \"k-resize-e\",\n            taskSummaryProgress: \"k-task-summary-progress\",\n            taskSummaryComplete: \"k-task-summary-complete\",\n            line: \"k-gantt-line\",\n            lineHorizontal: \"k-gantt-line-h\",\n            lineVertical: \"k-gantt-line-v\",\n            arrowWest: \"k-arrow-w\",\n            arrowEast: \"k-arrow-e\",\n            dragHint: \"k-drag-hint\",\n            dependencyHint: \"k-gantt-dependency-hint\",\n            tooltipWrapper: \"k-tooltip\",\n            tooltipContent: \"k-tooltip-content\",\n            tooltipCallout: \"k-callout k-callout-s\",\n            callout: \"k-callout\",\n            marquee: \"k-marquee k-gantt-marquee\",\n            marqueeColor: \"k-marquee-color\",\n            offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n            offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n            plannedTooltip: \"k-planned-tooltip\"\n        };\n\n        var GanttView = kendo.ui.GanttView = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this.title = this.options.title || this.options.name;\n\n                this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n                this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n                this.contentWidth = this.content.width();\n\n                this._workDays = getWorkDays(this.options);\n\n                this._headerTree = options.headerTree;\n\n                this._taskTree = options.taskTree;\n\n                this._taskTemplate = options.taskTemplate ?\n                    kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                    null;\n\n                this._dependencyTree = options.dependencyTree;\n\n                this._taskCoordinates = {};\n\n                this._currentTime();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                clearTimeout(this._tooltipTimeout);\n\n                this.headerRow = null;\n                this.header = null;\n                this.content = null;\n\n                this._dragHint = null;\n                this._resizeHint = null;\n                this._resizeTooltip = null;\n                this._taskTooltip = null;\n                this._percentCompleteResizeTooltip = null;\n\n                this._headerTree = null;\n                this._taskTree = null;\n                this._dependencyTree = null;\n            },\n\n            options: {\n                showWorkHours: false,\n                showWorkDays: false,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                hourSpan: 1,\n                slotSize: 100,\n                currentTimeMarker: {\n                    updateInterval: 10000\n                }\n            },\n\n            renderLayout: function() {\n                this._slots = this._createSlots();\n\n                this._tableWidth = this._calculateTableWidth();\n\n                this.createLayout(this._layout());\n\n                this._slotDimensions();\n\n                this._adjustHeight();\n\n                this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n            },\n\n            _adjustHeight: function() {\n                if (this.content) {\n                    this.content.height(this.element.height() - outerHeight(this.header));\n                }\n            },\n\n            createLayout: function(rows) {\n                var headers = this._headers(rows);\n                var colgroup = this._colgroup();\n                var tree = this._headerTree;\n                var header = kendoDomElement(\"tbody\", { className: GanttView.styles.tbody }, headers);\n                var table = kendoDomElement(\"table\", { className: GanttView.styles.headerTable, style: { width: this._tableWidth + \"px\" }, role: \"presentation\" }, [colgroup, header]);\n\n                tree.render([table]);\n\n                this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n            },\n\n            _slotDimensions: function() {\n                var headers = this.headerRow[0].children;\n                var slots = this._timeSlots();\n                var slot;\n                var header;\n\n                for (var i = 0, length = headers.length; i < length; i++) {\n                    header = headers[i];\n                    slot = slots[i];\n\n                    slot.offsetLeft = header.offsetLeft;\n                    slot.offsetWidth = header.offsetWidth;\n                }\n            },\n\n            render: function(tasks) {\n                var taskCount = tasks.length;\n                var styles = GanttView.styles;\n                var contentTable;\n                var rowsTable = this._rowsTable(taskCount);\n                var columnsTable = this._columnsTable(taskCount);\n                var tasksTable = this._tasksTable(tasks);\n                var currentTimeMarker = this.options.currentTimeMarker;\n                var calculatedSize = this.options.calculatedSize;\n                var totalHeight;\n\n                this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n                contentTable = this.content.find(DOT + styles.rowsTable);\n\n                if (calculatedSize) {\n                    totalHeight = calculatedSize.row * tasks.length;\n                    this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                    contentTable.height(totalHeight);\n                }\n\n                this._contentHeight = contentTable.height();\n                this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n                this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n                if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                    this._renderCurrentTime();\n                }\n            },\n\n            _rowsTable: function(rowCount) {\n                var rows = [];\n                var row;\n                var styles = GanttView.styles;\n                var attributes = [{ className: styles.tableRow }, { className: styles.alt }];\n\n                for (var i = 0; i < rowCount; i++) {\n                    row = kendoDomElement(\"tr\", attributes[i % 2], [\n                        kendoDomElement(\"td\", { className: styles.tableCell }, [\n                            kendoTextElement(\"\\u00a0\")\n                        ])\n                    ]);\n\n                    rows.push(row);\n                }\n\n                return this._createTable(1, rows, { className: styles.rowsTable + \" k-grid-table \" + styles.table });\n            },\n\n            _columnsTable: function() {\n                var cells = [];\n                var row;\n                var styles = GanttView.styles;\n                var slots = this._timeSlots();\n                var slotsCount = slots.length;\n                var slot;\n                var slotSpan;\n                var totalSpan = 0;\n                var attributes;\n\n                for (var i = 0; i < slotsCount; i++) {\n                    slot = slots[i];\n\n                    attributes = { className: styles.tableCell };\n\n                    slotSpan = slot.span;\n\n                    totalSpan += slotSpan;\n\n                    if (slotSpan !== 1) {\n                        attributes.colspan = slotSpan;\n                    }\n\n                    if (slot.isNonWorking) {\n                        attributes.className += \" \" + styles.nonWorking;\n                    }\n\n                    cells.push(kendoDomElement(\"td\", attributes, [\n                        kendoTextElement(\"\\u00a0\")\n                    ]));\n                }\n\n                row = kendoDomElement(\"tr\", { className: styles.tableRow }, cells);\n\n                return this._createTable(totalSpan, [row], { className: styles.columnsTable + \" \" + styles.table });\n            },\n\n            _tasksTable: function(tasks) {\n                var rows = [];\n                var row;\n                var cell;\n                var position;\n                var plannedPosition;\n                var task;\n                var styles = GanttView.styles;\n                var coordinates = this._taskCoordinates = {};\n                var size = this._calculateMilestoneWidth();\n                var milestoneWidth = Math.round(size.width);\n                var resourcesField = this.options.resourcesField;\n                var className = [styles.resource, styles.resourceAlt];\n                var calculatedSize = this.options.calculatedSize;\n                var resourcesPosition;\n                var resourcesMargin = this._calculateResourcesMargin();\n                var taskBorderWidth = this._calculateTaskBorderWidth();\n                var resourceStyle;\n                var showPlannedTasks = this.options.showPlannedTasks;\n                var attributes = [{ className: styles.tableRow }, { className: styles.alt }];\n\n                var addCoordinates = function(rowIndex) {\n                    var taskLeft;\n                    var taskRight;\n\n                    taskLeft = position.left;\n                    taskRight = taskLeft + position.width;\n\n                    if (task.isMilestone()) {\n                        taskLeft -= milestoneWidth / 2;\n                        taskRight = taskLeft + milestoneWidth;\n                    }\n\n                    coordinates[task.id] = {\n                        start: taskLeft,\n                        end: taskRight,\n                        rowIndex: rowIndex\n                    };\n                };\n\n                for (var i = 0, l = tasks.length; i < l; i++) {\n                    task = tasks[i];\n\n                    position = this._taskPosition(task);\n\n                    if (showPlannedTasks) {\n                        plannedPosition = this._taskPositionPlanned(task);\n                        plannedPosition.borderWidth = taskBorderWidth;\n                    }\n                    position.borderWidth = taskBorderWidth;\n\n                    row = kendoDomElement(\"tr\", attributes[i % 2]);\n                    cell = kendoDomElement(\"td\", { className: styles.tableCell });\n\n                    if (task.start <= this.end && task.end >= this.start) {\n                        cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                        if (task[resourcesField] && task[resourcesField].length) {\n                            if (isRtl) {\n                                resourcesPosition = this._tableWidth - position.left;\n                            } else {\n                                resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                            }\n\n                            resourceStyle = {\n                                width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                            };\n\n                            resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                            if (calculatedSize) {\n                                resourceStyle.height = calculatedSize.cell + \"px\";\n                            }\n\n                            cell.children.push(kendoDomElement(\"div\",\n                                {\n                                    className: styles.resourcesWrap,\n                                    style: resourceStyle\n                                },\n                                this._renderResources(task[resourcesField], className[i % 2]))\n                            );\n                        }\n\n                        addCoordinates(i);\n                    }\n                    row.children.push(cell);\n                    rows.push(row);\n                }\n\n                return this._createTable(1, rows, { className: GanttView.styles.tasksTable + \" \" + styles.table });\n            },\n\n            _createTable: function(colspan, rows, styles) {\n                var cols = [];\n                var colgroup;\n                var tbody;\n\n                for (var i = 0; i < colspan; i++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n\n                colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n                tbody = kendoDomElement(\"tbody\", { className: GanttView.styles.tbody }, rows);\n\n                if (!styles.style) {\n                    styles.style = {};\n                }\n\n                styles.style.width = this._tableWidth + \"px\";\n                styles.role = \"presentation\";\n\n                return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n            },\n\n            _calculateTableWidth: function() {\n                var slots = this._timeSlots();\n                var maxSpan = 0;\n                var totalSpan = 0;\n                var currentSpan;\n                var tableWidth;\n\n                for (var i = 0, length = slots.length; i < length; i++) {\n                    currentSpan = slots[i].span;\n\n                    totalSpan += currentSpan;\n\n                    if (currentSpan > maxSpan) {\n                        maxSpan = currentSpan;\n                    }\n                }\n\n                tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n                return tableWidth;\n            },\n\n            _calculateMilestoneWidth: function() {\n                var size;\n                var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n                var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n                var boundingClientRect;\n\n                this.content.append(milestone);\n\n                boundingClientRect = milestone[0].getBoundingClientRect();\n\n                size = {\n                    \"width\": boundingClientRect.right - boundingClientRect.left,\n                    \"clientWidth\": milestone[0].clientWidth\n                };\n\n                milestone.remove();\n\n                return size;\n            },\n\n            _calculateResourcesMargin: function() {\n                var margin;\n                var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n                this.content.append(wrapper);\n\n                margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n                wrapper.remove();\n\n                return margin;\n            },\n\n            _calculateTaskBorderWidth: function() {\n                var width;\n                var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n                var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n                var computedStyle;\n\n                this.content.append(task);\n\n                computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n                width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n                task.remove();\n\n                return width;\n            },\n\n            _renderTask: function(task, position, plannedPosition) {\n                var editable = this.options.editable;\n                var taskLeft = position.left;\n                var styles = GanttView.styles;\n                var wrapClassName = styles.taskWrap;\n                var calculatedSize = this.options.calculatedSize;\n                var dragHandleStyle = {};\n                var taskWrapAttr = {\n                    className: wrapClassName,\n                    style: { left: taskLeft + \"px\" }\n                };\n                var children = [];\n                var endTaskDotRight = 0;\n                var taskFullWidth = position.width;\n                var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n                var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n                if (calculatedSize) {\n                    taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n                }\n\n                if (plannedPosition) {\n                    if (task.isMilestone()) {\n                        plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                    } else {\n                        plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                    }\n\n                    children.push(plannedElement);\n\n                    if (isRtl && plannedPosition.left <= position.left) {\n                        taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                    }\n                }\n\n                if (task.summary) {\n                    taskElement = this._renderSummary(task, position, plannedPosition);\n                    taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n                } else if (task.isMilestone()) {\n                    taskElement = this._renderMilestone(task, position);\n                    taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n                } else {\n                    taskElement = this._renderSingleTask(task, position, plannedPosition);\n                }\n\n                if (plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                    if (isRtl) {\n                        taskFullWidth = position.left + position.width - plannedPosition.left;\n                    } else {\n                        taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                    }\n\n                    if (isRtl) {\n                        offsetWidth = plannedPosition.left - position.left;\n                    } else {\n                        offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                    }\n\n                    offsetElement = kendoDomElement(\"div\", {\n                        className: styles.taskOffset,\n                        style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                    });\n\n                    if (editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                        if (editable.destroy !== false) {\n                            offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                                kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                    kendoDomElement($(kendo.ui.icon(styles.iconDelete))[0])\n                                ])\n                            ]));\n                        }\n\n                        if (isRtl) {\n                            offsetElement.children.push(kendoDomElement(\"span\", {\n                                className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                                style: {\n                                    right: position.width - 5 + \"px\"\n                                }\n                            }));\n                        } else {\n                            offsetElement.children.push(kendoDomElement(\"span\", {\n                                className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                            }));\n                        }\n                    }\n\n                    taskOffsetWrap = kendoDomElement(\"div\", {\n                        className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                    }, [ taskElement, offsetElement ]);\n\n                    children.push(taskOffsetWrap);\n                } else if (plannedPosition) {\n                    children.push(kendoDomElement(\"div\", {\n                        className: styles.taskInnerWrap\n                    }, [ taskElement ]));\n                } else {\n                    children.push(taskElement);\n                }\n\n                taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n                if (editable && editable.dependencyCreate !== false) {\n                    if (plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                    }\n\n                    taskWrapper.children.push(kendoDomElement(\"div\", {\n                        className: styles.taskDot + \" \" + styles.taskDotStart\n                    }));\n\n                    if (isRtl) {\n                        endTaskDotRight = \"auto\";\n                        if (plannedPosition && task.plannedEnd > task.end) {\n                            endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                        }\n                    }\n\n                    taskWrapper.children.push(kendoDomElement(\"div\", {\n                        className: styles.taskDot + \" \" + styles.taskDotEnd,\n                        style: { right: endTaskDotRight, left: endTaskDotLeft }\n                    }));\n                }\n\n                if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                    progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                    dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                    taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n                }\n\n                return taskWrapper;\n            },\n\n            _renderSingleTask: function(task, position, plannedPosition) {\n                var styles = GanttView.styles;\n                var progressWidth;\n                var taskChildren = [];\n                var taskContent;\n                var editable = this.options.editable;\n                var classes = styles.task + \" \" + styles.taskSingle;\n                var widthExceptDelay = position.width;\n\n                if (plannedPosition) {\n                    if (task.plannedEnd && task.plannedEnd <= task.start) {\n                        classes += \" \" + styles.taskDelayed;\n                    } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                        classes += \" \" + styles.taskAdvanced;\n                    } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                        if (!isRtl) {\n                            widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                        } else {\n                            widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                        }\n                    }\n                }\n\n                progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n                if (this._taskTemplate !== null) {\n                    taskContent = kendoHtmlElement(this._taskTemplate(task));\n                } else {\n                    taskContent = kendoTextElement(task.title);\n                    taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" }, \"aria-hidden\": \"true\" }));\n                }\n\n                var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                    kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                        taskContent\n                    ])\n                ]);\n\n                taskChildren.push(content);\n\n                if (editable) {\n                    if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                        content.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement($(kendo.ui.icon(styles.iconDelete))[0])\n                            ])\n                        ]));\n                    }\n\n                    if (editable.resize !== false && editable.update !== false) {\n                        content.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                        }));\n                        content.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                var element = kendoDomElement(\"div\", {\n                    className: classes, \"data-uid\": task.uid, role: \"treeitem\", style:\n                        { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n                }, taskChildren);\n\n                return element;\n            },\n\n            _renderMilestone: function(task) {\n                var styles = GanttView.styles;\n                var classes = styles.task + \" \" + styles.taskMilestone;\n                var showPlanned = this.options.showPlannedTasks;\n\n                if (showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedStart && task.plannedStart > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                }\n\n                return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title });\n            },\n\n            _renderSummary: function(task, position, plannedPosition) {\n                var styles = GanttView.styles;\n                var widthExceptDelay = position.width;\n                var progressWidth;\n                var classes = styles.task + \" \" + styles.taskSummary;\n\n                if (plannedPosition) {\n                    if (task.plannedEnd && task.plannedEnd <= task.start) {\n                        classes += \" \" + styles.taskDelayed;\n                    } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                        classes += \" \" + styles.taskAdvanced;\n                    } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                        if (!isRtl) {\n                            widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                        } else {\n                            widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                        }\n                    }\n                }\n\n                progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n                var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title, style: { width: widthExceptDelay + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                        kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                    ])\n                ]);\n\n                return element;\n            },\n\n            _renderPlannedSingleTask: function(position, plannedPosition, task) {\n                var styles = GanttView.styles;\n                var children = [];\n                var style = {};\n\n                if (task.plannedStart && task.plannedEnd) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                    children.push(kendoDomElement(\"div\", {\n                        className: styles.taskPlannedDuration, style:\n                            { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                    }));\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n                } else if (task.plannedStart) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                } else if (task.plannedEnd) {\n                    children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n                }\n\n                if (isRtl) {\n                    style = {\n                        \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                    };\n                } else {\n                    style = {\n                        \"margin-left\": plannedPosition.left - position.left + \"px\"\n                    };\n                }\n\n                var element = kendoDomElement(\"div\", {\n                    className: styles.taskPlanned,\n                    style: style\n                }, children);\n\n                return element;\n            },\n\n            _renderPlannedMilestone: function(position, plannedPosition) {\n                var styles = GanttView.styles;\n                var style = {};\n                var element;\n\n                if (isRtl) {\n                    style = {\n                        \"margin-right\": position.left - plannedPosition.left + \"px\"\n                    };\n                } else {\n                    style = {\n                        \"margin-left\": plannedPosition.left - position.left + \"px\"\n                    };\n                }\n\n                element = kendoDomElement(\"div\", {\n                    className: styles.taskPlanned,\n                    style: style\n                }, [\n                    kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n                ]);\n\n                return element;\n            },\n\n            _renderResources: function(resources, className) {\n                var children = [];\n                var resource;\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n                    children.push(kendoDomElement(\"span\", {\n                        className: className,\n                        style: {\n                            \"color\": resource.get(\"color\")\n                        }\n                    }, [kendoTextElement(resource.get(\"name\"))]));\n                }\n\n                if (isRtl) {\n                    children.reverse();\n                }\n\n                return children;\n            },\n\n            _taskPosition: function(task) {\n                var round = Math.round;\n\n                var startLeft = round(this._offset(isRtl ? task.end : task.start));\n                var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n                return { left: startLeft, width: endLeft - startLeft };\n            },\n\n            _taskPositionPlanned: function(task) {\n                var round = Math.round;\n\n                var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n                var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n                return { left: startLeft, width: endLeft - startLeft };\n            },\n\n            _offset: function(date) {\n                var slots = this._timeSlots();\n                var slot;\n                var startOffset;\n                var slotDuration;\n                var slotOffset = 0;\n                var startIndex;\n\n                if (!slots.length) {\n                    return 0;\n                }\n\n                startIndex = this._slotIndex(\"start\", date);\n\n                slot = slots[startIndex];\n\n                if (slot.end < date) {\n                    slotOffset = slot.offsetWidth;\n                } else if (slot.start <= date) {\n                    startOffset = date - slot.start;\n                    slotDuration = slot.end - slot.start;\n                    slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n                }\n\n                if (isRtl) {\n                    slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n                }\n\n                return slot.offsetLeft + slotOffset;\n            },\n\n            _slotIndex: function(field, value, reverse) {\n                var slots = this._timeSlots();\n                var startIdx = 0;\n                var endIdx = slots.length - 1;\n                var middle;\n\n                if (reverse) {\n                    slots = [].slice.call(slots).reverse();\n                }\n\n                do {\n                    middle = Math.ceil((endIdx + startIdx) / 2);\n\n                    if (slots[middle][field] < value) {\n                        startIdx = middle;\n                    } else {\n                        if (middle === endIdx) {\n                            middle--;\n                        }\n\n                        endIdx = middle;\n                    }\n                } while (startIdx !== endIdx);\n\n                if (reverse) {\n                    startIdx = (slots.length - 1) - startIdx;\n                }\n\n                return startIdx;\n            },\n\n            _timeByPosition: function(x, snap, snapToEnd) {\n                var slot = this._slotByPosition(x);\n\n                if (snap) {\n                    return snapToEnd ? slot.end : slot.start;\n                }\n\n                var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n                var duration = slot.end - slot.start;\n                var slotOffset = offsetLeft - slot.offsetLeft;\n\n                if (isRtl) {\n                    slotOffset = slot.offsetWidth - slotOffset;\n                }\n\n                return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n            },\n\n            _slotByPosition: function(x) {\n                var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n                var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n                return this._timeSlots()[slotIndex];\n            },\n\n            _renderDependencies: function(dependencies) {\n                var elements = [];\n                var tree = this._dependencyTree;\n\n                for (var i = 0, l = dependencies.length; i < l; i++) {\n                    elements.push.apply(elements, this._renderDependency(dependencies[i]));\n                }\n\n                tree.render(elements);\n            },\n\n            _renderDependency: function(dependency) {\n                var predecessor = this._taskCoordinates[dependency.predecessorId];\n                var successor = this._taskCoordinates[dependency.successorId];\n                var elements;\n                var method;\n\n                if (!predecessor || !successor) {\n                    return [];\n                }\n\n                method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n                elements = this[method](predecessor, successor);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].attr[\"data-uid\"] = dependency.uid;\n                }\n\n                return elements;\n            },\n\n            _renderFF: function(from, to) {\n                var lines = this._dependencyFF(from, to, false);\n\n                lines[lines.length - 1].children[0] = this._arrow(true);\n\n                return lines;\n            },\n\n            _renderSS: function(from, to) {\n                var lines = this._dependencyFF(to, from, true);\n\n                lines[0].children[0] = this._arrow(false);\n\n                return lines.reverse();\n            },\n\n            _renderFS: function(from, to) {\n                var lines = this._dependencyFS(from, to, false);\n\n                lines[lines.length - 1].children[0] = this._arrow(false);\n\n                return lines;\n            },\n\n            _renderSF: function(from, to) {\n                var lines = this._dependencyFS(to, from, true);\n\n                lines[0].children[0] = this._arrow(true);\n\n                return lines.reverse();\n            },\n\n            _dependencyFF: function(from, to, reverse) {\n                var that = this;\n                var lines = [];\n                var left = 0;\n                var top = 0;\n                var width = 0;\n                var height = 0;\n                var dir = reverse ? \"start\" : \"end\";\n                var delta;\n                var overlap = 2;\n                var arrowOverlap = 1;\n                var rowHeight = this._rowHeight;\n                var minLineWidth = 10;\n                var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var styles = GanttView.styles;\n\n                var addHorizontal = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n                };\n                var addVertical = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n                };\n\n                left = from[dir];\n                top = fromTop;\n                width = minLineWidth;\n\n                delta = to[dir] - from[dir];\n\n                if ((delta) > 0 !== reverse) {\n                    width = Math.abs(delta) + minLineWidth;\n                }\n\n                if (reverse) {\n                    left -= width;\n                    width -= arrowOverlap;\n                    addHorizontal();\n                } else {\n                    addHorizontal();\n                    left += width - overlap;\n                }\n\n                if (toTop < top) {\n                    height = top - toTop;\n                    height += overlap;\n                    top = toTop;\n                    addVertical();\n                } else {\n                    height = toTop - top;\n                    height += overlap;\n                    addVertical();\n                    top += (height - overlap);\n                }\n\n                width = Math.abs(left - to[dir]);\n\n                if (!reverse) {\n                    width -= arrowOverlap;\n                    left -= width;\n                }\n\n                addHorizontal();\n\n                return lines;\n            },\n\n            _dependencyFS: function(from, to, reverse) {\n                var that = this;\n                var lines = [];\n                var left = 0;\n                var top = 0;\n                var width = 0;\n                var height = 0;\n                var rowHeight = this._rowHeight;\n                var minLineHeight = Math.floor(rowHeight / 2);\n                var minLineWidth = 10;\n                var minDistance = 2 * minLineWidth;\n                var delta = to.start - from.end;\n                var overlap = 2;\n                var arrowOverlap = 1;\n                var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n                var styles = GanttView.styles;\n\n                var addHorizontal = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n                };\n                var addVertical = function() {\n                    lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n                };\n\n                left = from.end;\n                top = fromTop;\n                width = minLineWidth;\n\n                if (reverse) {\n                    left += arrowOverlap;\n\n                    if (delta > minDistance) {\n                        width = delta - (minLineWidth - overlap);\n                    }\n\n                    width -= arrowOverlap;\n                }\n\n                addHorizontal();\n                left += width - overlap;\n\n                if ((delta) <= minDistance) {\n                    height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                    if (toTop < fromTop) {\n                        top -= height;\n\n                        height += overlap;\n\n                        addVertical();\n                    } else {\n                        addVertical();\n                        top += height;\n                    }\n\n                    width = (from.end - to.start) + minDistance;\n\n                    if (width < minLineWidth) {\n                        width = minLineWidth;\n                    }\n\n                    left -= width - overlap;\n\n                    addHorizontal();\n                }\n\n                if (toTop < fromTop) {\n                    height = top - toTop;\n                    top = toTop;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    height = toTop - top;\n                    addVertical();\n                    top += height;\n                }\n\n                width = to.start - left;\n\n                if (!reverse) {\n                    width -= arrowOverlap;\n                }\n\n                addHorizontal();\n\n                return lines;\n            },\n\n            _line: function(className, styles) {\n                return kendoDomElement(\"div\", { className: className, style: styles });\n            },\n\n            _arrow: function(direction) {\n                return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n            },\n\n            _colgroup: function() {\n                var slots = this._timeSlots();\n                var count = slots.length;\n                var cols = [];\n\n                for (var i = 0; i < count; i++) {\n                    for (var j = 0, length = slots[i].span; j < length; j++) {\n                        cols.push(kendoDomElement(\"col\"));\n                    }\n                }\n\n                return kendoDomElement(\"colgroup\", null, cols);\n            },\n\n            _createDragHint: function(element) {\n                var styles = GanttView.styles;\n                var plannedElement;\n\n                this._dragHint = element\n                    .clone()\n                    .addClass(styles.dragHint)\n                    .css({\n                        \"cursor\": \"move\"\n                    });\n\n                plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n                plannedElement.css({\n                    \"visibility\": \"hidden\"\n                });\n\n                if (isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                    plannedElement.css({\n                        \"margin-right\": \"auto\",\n                        \"width\": 0\n                    });\n\n                    this._dragHint.find(DOT + styles.taskDotEnd).css({\n                        \"left\": 0\n                    });\n                }\n\n                element\n                    .closest(\"td\")\n                    .append(this._dragHint);\n            },\n\n            _updateDragHint: function(start) {\n                var left = this._offset(start);\n                this._dragHint\n                    .css({\n                        \"left\": left\n                    });\n            },\n\n            _removeDragHint: function() {\n                this._dragHint.remove();\n                this._dragHint = null;\n            },\n\n            _createResizeHint: function(task) {\n                var styles = GanttView.styles;\n                var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n                var tooltipHeight;\n                var tooltipTop;\n                var options = this.options;\n                var messages = options.messages;\n\n                this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                    \"top\": 0,\n                    \"height\": this._contentHeight\n                });\n\n                this.content.append(this._resizeHint);\n\n                this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                    styles: styles,\n                    start: task.start,\n                    end: task.end,\n                    messages: messages.views,\n                    format: options.resizeTooltipFormat\n                }))\n                .css({\n                    \"top\": 0,\n                    \"left\": 0\n                });\n\n                this.content.append(this._resizeTooltip);\n\n                this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n                tooltipHeight = outerHeight(this._resizeTooltip);\n\n                tooltipTop = taskTop - tooltipHeight;\n\n                if (tooltipTop < 0) {\n                    tooltipTop = taskTop + this._rowHeight;\n                }\n\n                this._resizeTooltipTop = tooltipTop;\n            },\n\n            _updateResizeHint: function(start, end, resizeStart) {\n                var left = this._offset(isRtl ? end : start);\n                var right = this._offset(isRtl ? start : end);\n                var width = right - left;\n                var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n                var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n                var tooltipWidth = this._resizeTooltipWidth;\n                var options = this.options;\n                var messages = options.messages;\n                var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n                if (isRtl) {\n                    left += tableOffset;\n                }\n\n                this._resizeHint\n                    .css({\n                        \"left\": left,\n                        \"width\": width\n                    });\n\n                if (this._resizeTooltip) {\n                    this._resizeTooltip.remove();\n                }\n\n                tooltipLeft -= Math.round(tooltipWidth / 2);\n\n                if (tooltipLeft < 0) {\n                    tooltipLeft = 0;\n                } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                    tooltipLeft = tablesWidth - tooltipWidth;\n                }\n\n                if (isRtl) {\n                    tooltipLeft += tableOffset;\n                }\n\n                this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                    styles: GanttView.styles,\n                    start: start,\n                    end: end,\n                    messages: messages.views,\n                    format: options.resizeTooltipFormat\n                }))\n                .css({\n                    \"top\": this._resizeTooltipTop,\n                    \"left\": tooltipLeft,\n                    \"min-width\": tooltipWidth\n                })\n                .appendTo(this.content);\n            },\n\n            _removeResizeHint: function() {\n                this._resizeHint.remove();\n                this._resizeHint = null;\n\n                this._resizeTooltip.remove();\n                this._resizeTooltip = null;\n            },\n\n            _updatePercentCompleteTooltip: function(top, left, text) {\n                this._removePercentCompleteTooltip();\n\n                var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                    .appendTo(this.element);\n\n                var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n                var arrow = tooltip.find(DOT + GanttView.styles.callout);\n                var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n                tooltip.css({\n                    \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                    \"left\": left - tooltipMiddle\n                });\n\n                arrow.css(\"left\", tooltipMiddle - arrowHeight);\n            },\n\n            _removePercentCompleteTooltip: function() {\n                if (this._percentCompleteResizeTooltip) {\n                    this._percentCompleteResizeTooltip.remove();\n                }\n\n                this._percentCompleteResizeTooltip = null;\n            },\n\n            _updateDependencyDragHint: function(from, to) {\n                this._removeDependencyDragHint();\n\n                this._creteDependencyDragHint(from, to);\n            },\n\n            _creteDependencyDragHint: function(from, to) {\n                var styles = GanttView.styles;\n\n                var deltaX = to.x - from.x;\n                var deltaY = to.y - from.y;\n\n                var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n                var angle = Math.atan(deltaY / deltaX);\n\n                if (deltaX < 0) {\n                    angle += Math.PI;\n                }\n\n                $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                    .css({\n                        \"top\": from.y,\n                        \"left\": from.x,\n                        \"width\": width,\n                        \"transform-origin\": \"0% 0\",\n                        \"-ms-transform-origin\": \"0% 0\",\n                        \"-webkit-transform-origin\": \"0% 0\",\n                        \"transform\": \"rotate(\" + angle + \"rad)\",\n                        \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                        \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                    })\n                    .appendTo(this.content);\n            },\n\n            _removeDependencyDragHint: function() {\n                this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n            },\n\n            _createTaskTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var options = this.options;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = $(element).parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                       '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .appendTo(content)\n                    .find(DOT + styles.taskContent)\n                    .append(template({\n                        styles: styles,\n                        task: task,\n                        messages: options.messages.views\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removeTaskTooltip: function() {\n                if (this._taskTooltip) {\n                    this._taskTooltip.remove();\n                }\n\n                this._taskTooltip = null;\n            },\n\n            _createOffsetTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = element.parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n                var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n                var plannedTasksMessages = this.options.messages.plannedTasks;\n                var minutes = offsetValue % 60;\n                var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n                var hours, days;\n\n                if (offsetValue >= 60) {\n                    hours = offsetValue = Math.floor(offsetValue / 60);\n\n                    offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                    if (minutes !== 0) {\n                        offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                    }\n\n                    if (offsetValue >= 24) {\n                        hours = offsetValue % 24;\n                        days = offsetValue = Math.floor(offsetValue / 24);\n\n                        offsetText = days + \" \" + plannedTasksMessages.days;\n\n                        if (hours !== 0) {\n                            offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                        }\n                    }\n                }\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .addClass(styles.offsetTooltipDelay)\n                    .appendTo(content)\n                    .append(OFFSET_TOOLTIP_TEMPLATE({\n                        offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                        offsetText: offsetText\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removeOffsetTooltip: function() {\n                if (this._offsetTooltip) {\n                    this._offsetTooltip.remove();\n                }\n\n                this._offsetTooltip = null;\n            },\n\n            _createPlannedTooltip: function(task, element, mouseLeft) {\n                var styles = GanttView.styles;\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentScrollLeft = kendo.scrollLeft(content);\n                var row = element.parents(\"tr\").first();\n                var rowOffset = row.offset();\n                var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                    : mouseLeft - (contentOffset.left - contentScrollLeft);\n                var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n                var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n                var editorMessages = this.options.messages.editor;\n\n                tooltip\n                    .css({\n                        \"left\": left,\n                        \"top\": top\n                    })\n                    .appendTo(content)\n                    .append(PLANNED_TOOLTIP_TEMPLATE({\n                        plannedStart: editorMessages.plannedStart,\n                        startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                        plannedEnd: editorMessages.plannedEnd,\n                        endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                    }));\n\n                this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n            },\n\n            _removePlannedTooltip: function() {\n                if (this._plannedTooltip) {\n                    this._plannedTooltip.remove();\n                }\n\n                this._plannedTooltip = null;\n            },\n\n            _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n                var content = this.content;\n                var contentWidth = content.width();\n                var tooltipWidth;\n\n                if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                    tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n                }\n\n                tooltipWidth = outerWidth(tooltip);\n\n                if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                    left -= tooltipWidth;\n\n                    if (left < contentScrollLeft) {\n                        left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                    }\n\n                    tooltip.css(\"left\", left);\n                }\n            },\n\n            _scrollTo: function(element) {\n                var elementLeft = element.offset().left;\n                var elementWidth = element.width();\n                var elementRight = elementLeft + elementWidth;\n\n                var row = element.closest(\"tr\");\n                var rowTop = row.offset().top;\n                var rowHeight = row.height();\n                var rowBottom = rowTop + rowHeight;\n\n                var content = this.content;\n                var contentOffset = content.offset();\n                var contentTop = contentOffset.top;\n                var contentHeight = content.height();\n                var contentBottom = contentTop + contentHeight;\n                var contentLeft = contentOffset.left;\n                var contentWidth = content.width();\n                var contentRight = contentLeft + contentWidth;\n\n                var scrollbarWidth = kendo.support.scrollbar();\n\n                if (rowTop < contentTop) {\n                    content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n                } else if (rowBottom > contentBottom) {\n                    content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n                }\n\n                if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                    elementRight > contentRight && elementWidth < contentWidth) {\n                        kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n                } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                    elementLeft < contentLeft && elementWidth < contentWidth) {\n                kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n                }\n            },\n\n            _scrollToDate: function(date) {\n                var viewStart = this.start;\n                var viewEnd = this.end;\n                var offset;\n\n                if (date >= viewStart && date < viewEnd) {\n                    offset = this._offset(date);\n\n                    if (kendo.support.isRtl(this.element)) {\n                        offset = this._tableWidth - offset;\n                    }\n\n                    kendo.scrollLeft(this.content, offset);\n                }\n            },\n\n            _timeSlots: function() {\n                if (!this._slots || !this._slots.length) {\n                    return [];\n                }\n\n                return this._slots[this._slots.length - 1];\n            },\n\n            _headers: function(columnLevels) {\n                var rows = [];\n                var level;\n                var headers;\n                var column;\n                var headerText;\n                var styles = GanttView.styles;\n\n                for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                    level = columnLevels[levelIndex];\n                    headers = [];\n\n                    for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                        column = level[columnIndex];\n\n                        headerText = kendoHtmlElement(column.text);\n                        headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                    }\n\n                    rows.push(kendoDomElement(\"tr\", { className: styles.tableRow }, headers));\n                }\n\n                return rows;\n            },\n\n            _hours: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var options = this.options;\n                var workDayStart = options.workDayStart.getHours();\n                var workDayEnd = options.workDayEnd.getHours();\n                var isWorkHour;\n                var hours;\n                var hourSpan = options.hourSpan;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                if (options.showWorkHours) {\n                    start.setHours(workDayStart);\n                }\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    hours = slotEnd.getHours();\n\n                    isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                    slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                    if (hours == slotEnd.getHours()) {\n                        // Chrome DTS Fix\n                        slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                    }\n\n                    if (!options.showWorkHours || isWorkHour) {\n                        slots.push({\n                            start: start,\n                            end: slotEnd,\n                            isNonWorking: !isWorkHour,\n                            span: 1\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _days: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var isWorkDay;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                    isWorkDay = this._isWorkDay(start);\n\n                    if (!this.options.showWorkDays || isWorkDay) {\n                        slots.push({\n                            start: start,\n                            end: slotEnd,\n                            isNonWorking: !isWorkDay,\n                            span: 1\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _weeks: function(start, end) {\n                var slotEnd;\n                var slots = [];\n                var firstDay = this.calendarInfo().firstDay;\n                var daySlots;\n                var span;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                    if (slotEnd > end) {\n                        slotEnd = end;\n                    }\n\n                    daySlots = this._days(start, slotEnd);\n                    span = daySlots.length;\n\n                    if (span > 0) {\n                        slots.push({\n                            start: daySlots[0].start,\n                            end: daySlots[span - 1].end,\n                            span: span\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _months: function(start, end) {\n                var slotEnd;\n                var endMonth;\n                var slots = [];\n                var daySlots;\n                var span;\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                    slotEnd = end < endMonth ? end : endMonth;\n\n                    daySlots = this._days(start, slotEnd);\n                    span = daySlots.length;\n\n                    if (span > 0) {\n                        slots.push({\n                            start: daySlots[0].start,\n                            end: daySlots[span - 1].end,\n                            span: span\n                        });\n                    }\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _years: function(start, end) {\n                var slotEnd;\n                var monthSpan;\n                var endMonth;\n                var slots = [];\n\n                start = new Date(start);\n                end = new Date(end);\n\n                while (start < end) {\n                    slotEnd = new Date(start);\n                    slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                    if (slotEnd >= end) {\n                        slotEnd = end;\n                    }\n\n                    endMonth = slotEnd.getMonth() || 12;\n                    monthSpan = endMonth - start.getMonth();\n\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        span: monthSpan\n                    });\n\n                    start = slotEnd;\n                }\n\n                return slots;\n            },\n\n            _slotHeaders: function(slots, template) {\n                var columns = [];\n                var slot;\n\n                for (var i = 0, l = slots.length; i < l; i++) {\n                    slot = slots[i];\n\n                    columns.push({\n                        text: template(slot),\n                        isNonWorking: !!slot.isNonWorking,\n                        span: slot.span\n                    });\n                }\n\n                return columns;\n            },\n\n            _isWorkDay: function(date) {\n                var day = date.getDay();\n                var workDays = this._workDays;\n\n                for (var i = 0, l = workDays.length; i < l; i++) {\n                    if (workDays[i] === day) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            calendarInfo: function() {\n                return kendo.getCulture().calendars.standard;\n            },\n\n            _renderCurrentTime: function() {\n                var currentTime = this._getCurrentTime();\n                var timeOffset = this._offset(currentTime);\n                var element = $(\"<div class='k-current-time'></div>\");\n                var viewStyles = GanttView.styles;\n                var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n                var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n                var slot;\n\n                if (!this.content || !this._timeSlots().length) {\n                    return;\n                }\n\n                this.content.find(\".k-current-time\").remove();\n\n                slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n                if (currentTime < slot.start || currentTime > slot.end) {\n                    return;\n                }\n\n                if (tablesWrap.length && tasksTable.length) {\n                    timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n                }\n\n                element.css({\n                    left: timeOffset + \"px\",\n                    top: \"0px\",\n                    width: \"1px\",\n                    height: this._contentHeight + \"px\"\n                })\n                .appendTo(this.content);\n            },\n\n            _getCurrentTime: function() {\n                // Introduced for testing purposes\n                return new Date();\n            },\n\n            _currentTime: function() {\n                var markerOptions = this.options.currentTimeMarker;\n\n                if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                    this._renderCurrentTime();\n                    this._currentTimeUpdateTimer = setInterval(this._renderCurrentTime.bind(this), markerOptions.updateInterval);\n                }\n            }\n        });\n\n        extend(true, GanttView, { styles: viewStyles });\n\n        kendo.ui.GanttDayView = GanttView.extend({\n            name: \"day\",\n\n            options: {\n                timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n                dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                this.start = kendo.date.getDate(range.start);\n                this.end = kendo.date.getDate(range.end);\n\n                if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                    this.end = kendo.date.addDays(this.end, 1);\n                }\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                    this.start.setHours(optionsRange.start.getHours());\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    this.end = kendo.date.getDate(optionsRange.end);\n                    this.end.setHours(optionsRange.end.getHours());\n                }\n            },\n\n            _createSlots: function() {\n                var daySlots;\n                var daySlot;\n                var hourSlots;\n                var hours;\n                var slots = [];\n\n                daySlots = this._days(this.start, this.end);\n                hourSlots = [];\n\n                for (var i = 0, l = daySlots.length; i < l; i++) {\n                    daySlot = daySlots[i];\n                    hours = this._hours(daySlot.start, daySlot.end);\n\n                    daySlot.span = hours.length;\n\n                    hourSlots.push.apply(hourSlots, hours);\n                }\n\n                slots.push(daySlots);\n                slots.push(hourSlots);\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttWeekView = GanttView.extend({\n            name: \"week\",\n\n            options: {\n                dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n                weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var calendarInfo = this.calendarInfo();\n                var firstDay = calendarInfo.firstDay;\n                var rangeEnd = range.end;\n                var endDay;\n\n                if (firstDay === rangeEnd.getDay()) {\n                    rangeEnd.setDate(rangeEnd.getDate() + 7);\n                }\n\n                this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n                this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    endDay = new Date(optionsRange.end);\n\n                    if (kendo.date.getDate(endDay) < optionsRange.end) {\n                        this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                    } else {\n                        this.end = kendo.date.getDate(endDay);\n                    }\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n\n                slots.push(this._weeks(this.start, this.end));\n                slots.push(this._days(this.start, this.end));\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttMonthView = GanttView.extend({\n            name: \"month\",\n\n            options: {\n                weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n                monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var endDay;\n                this.start = kendo.date.firstDayOfMonth(range.start);\n                this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.getDate(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    endDay = new Date(optionsRange.end);\n\n                    if (kendo.date.getDate(endDay) < optionsRange.end) {\n                        this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                    } else {\n                        this.end = kendo.date.getDate(endDay);\n                    }\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n\n                slots.push(this._months(this.start, this.end));\n                slots.push(this._weeks(this.start, this.end));\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        kendo.ui.GanttYearView = GanttView.extend({\n            name: \"year\",\n\n            options: {\n                yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n                monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n                resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n            },\n\n            range: function(range) {\n                var optionsRange = this.options.range;\n                var firstDayOfMonth;\n                this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n                this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n                if (optionsRange && optionsRange.start) {\n                    this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n                }\n\n                if (optionsRange && optionsRange.end) {\n                    firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                    this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n                }\n            },\n\n            _createSlots: function() {\n                var slots = [];\n                var monthSlots = this._months(this.start, this.end);\n\n                $(monthSlots).each(function(index, slot) {\n                    slot.span = 1;\n                });\n\n                slots.push(this._years(this.start, this.end));\n                slots.push(monthSlots);\n\n                return slots;\n            },\n\n            _layout: function() {\n                var rows = [];\n                var options = this.options;\n\n                rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n                rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n                return rows;\n            }\n        });\n\n        var timelineStyles = {\n            wrapper: \"k-timeline k-grid\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            gridContentWrap: \"k-grid-content\",\n            tasksWrapper: \"k-gantt-tables\",\n            dependenciesWrapper: \"k-gantt-dependencies\",\n            task: \"k-task\",\n            taskOffset: \"k-task-offset\",\n            taskOffsetWrap: \"k-task-offset-wrap\",\n            taskPlanned: \"k-task-planned\",\n            line: \"k-gantt-line\",\n            taskResizeHandle: \"k-resize-handle\",\n            taskResizeHandleWest: \"k-resize-w\",\n            taskDragHandle: \"k-task-draghandle\",\n            taskComplete: \"k-task-complete\",\n            taskDelete: \"k-task-delete\",\n            taskWrapActive: \"k-task-wrap-active\",\n            taskWrap: \"k-task-wrap\",\n            taskDot: \"k-task-dot\",\n            taskDotStart: \"k-task-start\",\n            taskDotEnd: \"k-task-end\",\n            hovered: \"k-hover\",\n            selected: \"k-selected\",\n            origin: \"k-origin\"\n        };\n\n        var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n            init: function(element, options) {\n\n                Widget.fn.init.call(this, element, options);\n\n                if (!this.options.views || !this.options.views.length) {\n                    this.options.views = [\"day\", \"week\", \"month\"];\n                }\n\n                isRtl = kendo.support.isRtl(element);\n\n                this._wrapper();\n\n                this._domTrees();\n\n                this._views();\n\n                this._selectable();\n\n                this._draggable();\n\n                this._resizable();\n\n                this._percentResizeDraggable();\n\n                this._createDependencyDraggable();\n\n                this._attachEvents();\n\n                this._tooltip();\n            },\n\n            options: {\n                name: \"GanttTimeline\",\n                messages: {\n                    views: {\n                        day: \"Day\",\n                        week: \"Week\",\n                        month: \"Month\",\n                        year: \"Year\",\n                        start: \"Start\",\n                        end: \"End\"\n                    }\n                },\n                snap: true,\n                selectable: true,\n                editable: true\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                clearTimeout(this._tooltipTimeout);\n\n                if (this._currentTimeUpdateTimer) {\n                    clearInterval(this._currentTimeUpdateTimer);\n                }\n\n                this._unbindView(this._selectedView);\n\n                if (this._moveDraggable) {\n                    this._moveDraggable.destroy();\n                }\n\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n\n                if (this._percentDraggable) {\n                    this._percentDraggable.destroy();\n                }\n\n                if (this._dependencyDraggable) {\n                    this._dependencyDraggable.destroy();\n                }\n\n                if (this.touch) {\n                    this.touch.destroy();\n                }\n\n                this._headerTree = null;\n                this._taskTree = null;\n                this._dependencyTree = null;\n\n                this.wrapper.off(NS);\n\n                kendo.destroy(this.wrapper);\n            },\n\n            _wrapper: function() {\n                var styles = GanttTimeline.styles;\n                var that = this;\n                var options = this.options;\n                var calculateSize = function() {\n                    var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                        options.rowHeight + \"px\";\n                    var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                    var calculatedRowHeight;\n                    var calculatedCellHeight;\n                    var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                    content.append(table);\n\n                    calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                    calculatedCellHeight = table.find(\"td\").height();\n\n                    table.remove();\n\n                    return {\n                        \"row\": calculatedRowHeight,\n                        \"cell\": calculatedCellHeight\n                    };\n                };\n\n                this.wrapper = this.element\n                    .addClass(styles.wrapper)\n                    .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                    .append(\"<div role='tree' class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n                if (options.rowHeight) {\n                    this._calculatedSize = calculateSize();\n                }\n            },\n\n            _domTrees: function() {\n                var styles = GanttTimeline.styles;\n                var tree = kendo.dom.Tree;\n                var wrapper = this.wrapper;\n\n                this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n                this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n                this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n            },\n\n            _views: function() {\n                var views = this.options.views;\n                var view;\n                var isSettings;\n                var name;\n                var defaultView;\n                var selected;\n\n                this.views = {};\n\n                for (var i = 0, l = views.length; i < l; i++) {\n                    view = views[i];\n\n                    isSettings = isPlainObject(view);\n\n                    if (isSettings && view.selectable === false) {\n                        continue;\n                    }\n\n                    name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                    defaultView = defaultViews[name];\n\n                    if (defaultView) {\n                        if (isSettings) {\n                            view.type = defaultView.type;\n                        }\n\n                        defaultView.title = this.options.messages.views[name];\n                    }\n\n                    view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                    if (name) {\n                        this.views[name] = view;\n\n                        if (!selected || view.selected) {\n                            selected = name;\n                        }\n                    }\n                }\n\n                if (selected) {\n                    this._selectedViewName = selected;\n                }\n            },\n\n            view: function(name) {\n                if (name) {\n                    this._selectView(name);\n\n                    this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n                }\n\n                return this._selectedView;\n            },\n\n            _selectView: function(name) {\n                if (name && this.views[name]) {\n                    if (this._selectedView) {\n                        this._unbindView(this._selectedView);\n                    }\n\n                    this._selectedView = this._initializeView(name);\n                    this._selectedViewName = name;\n                }\n            },\n\n            _viewByIndex: function(index) {\n                var view;\n                var views = this.views;\n\n                for (view in views) {\n                    if (!index) {\n                        return view;\n                    }\n\n                    index--;\n                }\n            },\n\n            _initializeView: function(name) {\n                var view = this.views[name];\n\n                if (view) {\n                    var type = view.type;\n\n                    if (typeof type === \"string\") {\n                        type = kendo.getter(view.type)(window);\n                    }\n\n                    if (type) {\n                        var newRange = {};\n                        extend(newRange, this.options.range, view.range);\n\n                        var newDate = view.date || this.options.date;\n\n                        view = new type(this.wrapper, trimOptions(extend(true, {\n                            headerTree: this._headerTree,\n                            taskTree: this._taskTree,\n                            dependencyTree: this._dependencyTree,\n                            calculatedSize: this._calculatedSize\n                        }, view, this.options, {\n                            date: newDate,\n                            range: newRange\n                        })));\n                    } else {\n                        throw new Error(\"There is no such view\");\n                    }\n                }\n\n                return view;\n            },\n\n            _unbindView: function(view) {\n                if (view) {\n                    view.destroy();\n                }\n            },\n\n            _range: function(tasks) {\n                var startOrder = {\n                    field: \"start\",\n                    dir: \"asc\"\n                };\n                var endOrder = {\n                    field: \"end\",\n                    dir: \"desc\"\n                };\n\n                if (!tasks || !tasks.length) {\n                    return { start: new Date(), end: new Date() };\n                }\n\n                var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n                var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n                return {\n                    start: new Date(start),\n                    end: new Date(end)\n                };\n            },\n\n            _render: function(tasks) {\n                var view = this.view();\n                var range = this._range(tasks);\n                var date = view.options.date;\n\n                this._tasks = tasks;\n\n                view.range(range);\n\n                view.renderLayout();\n\n                view.render(tasks);\n\n                if (date) {\n                    view._scrollToDate(date);\n                }\n            },\n\n            _renderDependencies: function(dependencies) {\n                this.view()._renderDependencies(dependencies);\n            },\n\n            _taskByUid: function(uid) {\n                var tasks = this._tasks;\n                var length = tasks.length;\n                var task;\n\n                for (var i = 0; i < length; i++) {\n                    task = tasks[i];\n\n                    if (task.uid === uid) {\n                        return task;\n                    }\n                }\n            },\n\n            _draggable: function() {\n                var that = this;\n                var element;\n                var task;\n                var currentStart;\n                var startOffset;\n                var snap = this.options.snap;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removeDragHint();\n\n                    if (element) {\n                        element.css(\"opacity\", 1);\n                    }\n\n                    element = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                if (!editable || editable.move === false || editable.update === false) {\n                    return;\n                }\n\n                this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                    holdToDrag: kendo.support.mobileOS,\n                    ignore: DOT + styles.taskResizeHandle\n                });\n\n                this._moveDraggable\n                    .bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        element = e.currentTarget.closest(DOT + styles.taskWrap);\n                        task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                        if (that.trigger(\"moveStart\", { task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        currentStart = task.start;\n                        startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                        view._createDragHint(element);\n\n                        element.css(\"opacity\", 0.5);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        var view = that.view();\n                        var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                        var updateHintDate = date;\n\n                        if (!that.trigger(\"move\", { task: task, start: date })) {\n                            currentStart = date;\n\n                            if (isRtl) {\n                                updateHintDate = new Date(currentStart.getTime() + task.duration());\n                            }\n\n                            view._updateDragHint(updateHintDate);\n                        }\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _resizable: function() {\n                var that = this;\n                var element;\n                var task;\n                var currentStart;\n                var currentEnd;\n                var resizeStart;\n                var snap = this.options.snap;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removeResizeHint();\n                    element = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                if (!editable || editable.resize === false || editable.update === false) {\n                    return;\n                }\n\n                this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskResizeHandle,\n                    holdToDrag: false\n                });\n\n                this._resizeDraggable\n                    .bind(\"dragstart\", function(e) {\n                        resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                        if (isRtl) {\n                            resizeStart = !resizeStart;\n                        }\n\n                        element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                        task = that._taskByUid(element.attr(\"data-uid\"));\n\n                        if (that.trigger(\"resizeStart\", { task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        currentStart = task.start;\n                        currentEnd = task.end;\n\n                        that.view()._createResizeHint(task);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        var view = that.view();\n                        var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                        if (resizeStart) {\n                            if (date < currentEnd) {\n                                currentStart = date;\n                            } else {\n                                currentStart = currentEnd;\n                            }\n                        } else {\n                            if (date > currentStart) {\n                                currentEnd = date;\n                            } else {\n                                currentEnd = currentStart;\n                            }\n                        }\n\n                        if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                            view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                        }\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _percentResizeDraggable: function() {\n                var that = this;\n                var task;\n                var taskElement;\n                var taskElementOffset;\n                var timelineOffset;\n                var originalPercentWidth;\n                var maxPercentWidth;\n                var currentPercentComplete;\n                var tooltipTop;\n                var tooltipLeft;\n                var styles = GanttTimeline.styles;\n                var delta;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    that.view()._removePercentCompleteTooltip();\n                    taskElement = null;\n                    task = null;\n                    that.dragInProgress = false;\n                };\n\n                var updateElement = function(width) {\n                    var taskDragHandle = taskElement.siblings(DOT + styles.taskDragHandle);\n\n                    if (!taskDragHandle.length) {\n                        taskDragHandle = taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                    }\n\n                    taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                    taskElement\n                        .find(DOT + styles.taskComplete)\n                        .width(width);\n                };\n\n                if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                    return;\n                }\n\n                this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskDragHandle,\n                    holdToDrag: false\n                });\n\n                this._percentDraggable\n                    .bind(\"dragstart\", function(e) {\n                        if (that.trigger(\"percentResizeStart\")) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                        if (!taskElement.length) {\n                            taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n\n                        task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                        currentPercentComplete = task.percentComplete;\n\n                        taskElementOffset = taskElement.offset();\n                        timelineOffset = this.element.offset();\n\n                        originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                        maxPercentWidth = outerWidth(taskElement);\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                        var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                        currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                        updateElement(currentWidth);\n\n                        tooltipTop = taskElementOffset.top - timelineOffset.top;\n                        tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                        if (isRtl) {\n                            tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                        }\n\n                        that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        updateElement(originalPercentWidth);\n\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _createDependencyDraggable: function() {\n                var that = this;\n                var originalHandle;\n                var hoveredHandle = $();\n                var hoveredTask = $();\n                var startX;\n                var startY;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                var cleanUp = function() {\n                    originalHandle\n                        .css(\"display\", \"\")\n                        .removeClass(styles.hovered);\n\n                    originalHandle.parent().removeClass(styles.origin);\n                    originalHandle = null;\n\n                    toggleHandles(false);\n\n                    hoveredTask = $();\n                    hoveredHandle = $();\n\n                    that.view()._removeDependencyDragHint();\n\n                    that.dragInProgress = false;\n                };\n\n                var toggleHandles = function(value) {\n                    if (!hoveredTask.hasClass(styles.origin)) {\n                        hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                        hoveredHandle.toggleClass(styles.hovered, value);\n                    }\n                };\n\n                if (!editable || editable.dependencyCreate === false) {\n                    return;\n                }\n\n                this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                    distance: 0,\n                    filter: DOT + styles.taskDot,\n                    holdToDrag: false\n                });\n\n                this._dependencyDraggable\n                    .bind(\"dragstart\", function(e) {\n                        if (that.trigger(\"dependencyDragStart\")) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        originalHandle = e.currentTarget\n                            .css(\"display\", \"block\")\n                            .addClass(styles.hovered);\n\n                        originalHandle.parent().addClass(styles.origin);\n\n                        var elementOffset = originalHandle.offset();\n                        var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                        startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                        startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                        clearTimeout(that._tooltipTimeout);\n                        that.dragInProgress = true;\n                    })\n                    .bind(\"drag\", kendo.throttle(function(e) {\n                        if (!that.dragInProgress) {\n                            return;\n                        }\n\n                        that.view()._removeDependencyDragHint();\n\n                        var target = $(kendo.elementUnderCursor(e));\n                        var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                        var currentX = e.x.location - tablesOffset.left;\n                        var currentY = e.y.location - tablesOffset.top;\n\n                        that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                        toggleHandles(false);\n\n                        hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                        hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                        toggleHandles(true);\n                    }, 15))\n                    .bind(\"dragend\", function() {\n                        if (hoveredHandle.length) {\n                            var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                            var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                            var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                            var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                            if (!predecessorElement.length) {\n                                predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            }\n                            var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                            var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                            if (!successorElement.length) {\n                                successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            }\n                            var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                            if (predecessor !== successor) {\n                                that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                            }\n                        }\n\n                        cleanUp();\n                    })\n                    .bind(\"dragcancel\", function() {\n                        cleanUp();\n                    })\n                    .userEvents.bind(\"select\", function() {\n                        blurActiveElement();\n                    });\n            },\n\n            _selectable: function() {\n                var that = this;\n                var styles = GanttTimeline.styles;\n\n                if (this.options.selectable) {\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            e.stopPropagation();\n\n                            var uid = $(this).attr(\"data-uid\");\n\n                            if (!uid) {\n                                uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                            }\n\n                            if (!e.ctrlKey) {\n                                that.trigger(\"select\", { uid: uid });\n                            } else {\n                                that.trigger(\"clear\");\n                            }\n                        })\n                        .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                            e.stopPropagation();\n\n                            // Decrease z-index of wrap so the we can get to the\n                            // dependency line underneath, if there is any\n                            $(this).css(\"z-index\", \"0\");\n\n                            var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                            if (target.hasClass(styles.line)) {\n                                target.click();\n                            }\n\n                            $(this).css(\"z-index\", \"\");\n                        })\n                        .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                            if (that.selectDependency().length > 0) {\n                                that.clearSelection();\n                            } else {\n                                that.trigger(\"clear\");\n                            }\n                        })\n                        .on(CLICK + NS, DOT + styles.line, function(e) {\n                            e.stopPropagation();\n\n                            that.selectDependency(this);\n                        });\n                }\n            },\n\n            select: function(value) {\n                var element = this.wrapper.find(value);\n                var styles = GanttTimeline.styles;\n\n                if (element.length) {\n                    this.clearSelection();\n\n                    element.addClass(styles.selected);\n\n                    if (kendo.support.mobileOS) {\n                        element.parent().addClass(styles.taskWrapActive);\n                    }\n\n                    return;\n                }\n\n                return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n            },\n\n            selectDependency: function(value) {\n                var element = this.wrapper.find(value);\n                var uid;\n                var styles = GanttTimeline.styles;\n\n                if (element.length) {\n                    this.clearSelection();\n                    this.trigger(\"clear\");\n\n                    uid = $(element).attr(\"data-uid\");\n\n                    this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                    return;\n                }\n\n                return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n            },\n\n            clearSelection: function() {\n                var styles = GanttTimeline.styles;\n\n                this.wrapper\n                    .find(DOT + styles.selected)\n                    .removeClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    this.wrapper\n                        .find(DOT + styles.taskWrapActive)\n                        .removeClass(styles.taskWrapActive);\n                }\n            },\n\n            _attachEvents: function() {\n                var that = this;\n                var styles = GanttTimeline.styles;\n                var editable = this.options.editable;\n\n                if (editable) {\n                    this._tabindex();\n\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                            that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                            e.stopPropagation();\n                            e.preventDefault();\n                        })\n                        .on(KEYDOWN + NS, function(e) {\n                            var selectedDependency;\n                            var editable = that.options.editable;\n\n                            if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                                selectedDependency = that.selectDependency();\n\n                                if (selectedDependency.length) {\n                                    that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                    that.clearSelection();\n                                }\n                            }\n                        });\n\n                    if (!kendo.support.mobileOS) {\n                        this.wrapper\n                            .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                    e.stopPropagation();\n                                    e.preventDefault();\n                                }\n                            });\n                    } else {\n                        this.touch = this.wrapper\n                            .kendoTouch({\n                                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                                doubletap: function(e) {\n                                    if (that.options.editable.update !== false) {\n                                        that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                    }\n                                }\n                            }).data(\"kendoTouch\");\n                    }\n                }\n            },\n\n            _tooltip: function() {\n                var that = this;\n                var tooltipOptions = this.options.tooltip;\n                var styles = GanttTimeline.styles;\n                var currentMousePosition;\n                var mouseMoveHandler = function(e) {\n                    currentMousePosition = e.clientX;\n                };\n\n                if (tooltipOptions && tooltipOptions.visible === false) {\n                    return;\n                }\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                            .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                                var element = this;\n                                var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                                if (that.dragInProgress) {\n                                    return;\n                                }\n\n                                that._tooltipTimeout = setTimeout(function() {\n                                    that.view()._createTaskTooltip(task, element, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                                clearTimeout(that._tooltipTimeout);\n\n                                that.view()._removeTaskTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                                var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                                var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                                if (that.dragInProgress) {\n                                    return;\n                                }\n\n                                that._offsetTooltipTimeout = setTimeout(function() {\n                                    that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                                clearTimeout(that._offsetTooltipTimeout);\n\n                                that.view()._removeOffsetTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                                var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                                var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                                that._plannedTooltipTimeout = setTimeout(function() {\n                                    that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                                }, 800);\n\n                                $(this).on(MOUSEMOVE, mouseMoveHandler);\n                            })\n                            .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                                clearTimeout(that._plannedTooltipTimeout);\n\n                                that.view()._removePlannedTooltip();\n\n                                $(this).off(MOUSEMOVE, mouseMoveHandler);\n                            });\n                } else {\n                    this.wrapper\n                        .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                            e.stopPropagation();\n                            that.view()._removeTaskTooltip();\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removeTaskTooltip();\n                            }\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removeOffsetTooltip();\n                            }\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                            var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                            if (parents.length === 0) {\n                                that.view()._removePlannedTooltip();\n                            }\n                        });\n\n                    if (this.touch) {\n                        this.touch\n                            .bind(\"tap\", function(e) {\n                                var element = $(e.touch.target);\n                                var currentPosition = e.touch.x.client;\n                                var task;\n\n                                if (!element.hasClass(styles.task)) {\n                                    task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                    if (that.view()._offsetTooltip) {\n                                        that.view()._removeOffsetTooltip();\n                                    }\n\n                                    that.view()._createOffsetTooltip(task, element, currentPosition);\n                                } else {\n                                    task = that._taskByUid(element.attr(\"data-uid\"));\n                                    if (that.view()._taskTooltip) {\n                                        that.view()._removeTaskTooltip();\n                                    }\n\n                                    that.view()._createTaskTooltip(task, element, currentPosition);\n                                }\n                            })\n                            .bind(\"doubletap\", function() {\n                                that.view()._removeTaskTooltip();\n                                that.view()._removeOffsetTooltip();\n                            });\n                    }\n                }\n            },\n            _setPlanned: function(value) {\n                this.options.showPlannedTasks = value;\n                this.view().options.showPlannedTasks = value;\n            }\n        });\n\n        extend(true, GanttTimeline, { styles: timelineStyles });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}