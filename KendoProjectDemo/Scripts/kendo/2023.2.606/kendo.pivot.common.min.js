/**
 * Kendo UI v2023.2.606 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e){"function"==typeof define&&define.amd?define(["kendo.core.min"],e):e()}((function(){window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common=function(e){var n={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'},r={doesnotcontain:"doesnotcontain",in:"in",neq:"neq"};function t(e){var t="",a=String(e.value),o=e.field,i=e.operator;return i===r.in?(t+="{",t+=a,t+="}"):(t+=i===r.neq||i===r.doesnotcontain?"-":"",t+="Filter(",t+=o+".MEMBERS",t+=function(e){for(var n=arguments,r=[],t=1;t<arguments.length;t++)r[t-1]=n[t];return r.forEach((function(n,r){e=e.replace(new RegExp("\\{"+r+"\\}","g"),n)})),e}(n[i],o,a),t+=")"),t}function a(e,n,r){var t,a="",o=function(e){for(var n,r=[],t=[],a=[],o=0;o<e.length;o++){var i=e[o],u=i.name;if(n=!1,u.length>1)t.push(i);else{for(var c=l(u[0]),s=0,f=a.length;s<f;s++)if(0===a[s].name[0].indexOf(c)){n=!0;break}n||a.push(i),i.expand&&r.push(i)}}return{expanded:r=r.concat(t),root:a}}(e=e||[]),s=o.expanded,f=function(e){var n=[];return e.forEach((function(e){var r=e.name[0],t=l(r);n.some((function(e){return 0===e.indexOf(t)}))||n.push(r)})),n}(o.root),m=[],p=s.length,d=0,A=[];if(f.length>1||n.length>1){for(m.push(u(f,n));d<p;d++)A=i(t=c(s[d].name,r),f),m.push(u(A,n));a+=m.join(",")}else{for(;d<p;d++)t=c(s[d].name,r),A.push(t[0]);a+=f.concat(A).join(",")}return a}function o(e){for(var n,r=e.length,t=[],a=0;a<r;a++)n=e[a],t.push(void 0!==n.name?n.name:n);return t}function i(e,n){var r=n.length;n=n.slice(0);for(var t=0;t<e.length;t++)for(var a=e[t],o=0;o<r;o++){var i=l(n[o]);if(-1!==a.indexOf(i)){n[o]=a;break}}return n}function u(e,n){var r=e.slice(0);return n.length>1&&r.push("{"+o(n).join(",")+"}"),s(r)}function c(e,n){var r=e.length-1,t=e[r],a=function(e,n){for(var r=0,t=e.length;r<t;r++)if(0===n.indexOf(e[r].field))return e[r];return null}(n,t);return a&&a.dir?t="ORDER("+t+".Children,"+a.field+".CurrentMember.MEMBER_CAPTION,"+a.dir+")":t+=".Children",e[r]=t,e}function l(e){var n=e.split(".");return n.length>2?n[0]+"."+n[1]:e}function s(e){var n,r="CROSSJOIN({";return e.length>2?(n=e.pop(),r+=s(e)):(r+=e.shift(),n=e.pop()),r+="},{",r+=n,r+="})"}function f(e){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>',r=e.columnAxes,i=void 0===r?[]:r,u=e.rowAxes,c=void 0===u?[]:u,l=e.measureAxes,s=void 0===l?[]:l,f=e.sort,m=void 0===f?[]:f,p=e.filter,d=void 0===p?[]:p,A="rows"===e.measuresAxis;return n+="SELECT NON EMPTY {",!i.length&&c.length&&(!s.length||s.length&&A)&&(i=c,c=[],A=!1),i.length||c.length||(A=!1),i.length?n+=a(i,A?[]:s,m):s.length&&!A&&(n+=o(s).join(",")),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(c.length||A&&s.length>1)&&(n+=", NON EMPTY {",c.length?n+=a(c,A?s:[],m):n+=o(s).join(","),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),d.length?(n+=" FROM ",n+="(",n+=function(e,n){for(var r="",a="",o=e.length-1;o>=0;o--)a="SELECT (",a+=t(e[o]),a+=") ON 0",r=o===e.length-1?a+=" FROM ["+n+"]":a+" FROM ( "+r+" )";return r}(d,e.connection.cube),n+=")"):n+=" FROM ["+e.connection.cube+"]",1===s.length&&i.length&&(n+=" WHERE ("+o(s).join(",")+")"),(n+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/&/g,"&amp;")}var m=function(){return m=Object.assign||function(e){for(var n,r=arguments,t=1,a=arguments.length;t<a;t++)for(var o in n=r[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},m.apply(this,arguments)};function p(e,n,r,t){return new(r||(r=Promise))((function(a,o){function i(e){try{c(t.next(e))}catch(e){o(e)}}function u(e){try{c(t.throw(e))}catch(e){o(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,u)}c((t=t.apply(e,n||[])).next())}))}function d(e,n){var r,t,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,t=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function A(){for(var e=arguments,n=0,r=0,t=arguments.length;r<t;r++)n+=e[r].length;var a=Array(n),o=0;for(r=0;r<t;r++)for(var i=arguments[r],u=0,c=i.length;u<c;u++,o++)a[o]=i[u];return a}function h(e){var n=(new DOMParser).parseFromString(e,"text/xml"),r=Array.from(n.querySelectorAll("Axis")),t=Array.from(n.querySelectorAll("CellData > Cell")).map((function(e){return{fmtValue:O(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:O(e,"Value")}})),a={tuples:[]},o={tuples:[]},i=[];r.forEach((function(e){if("SlicerAxis"!==e.getAttribute("name")){var n=0===a.tuples.length?a.tuples:o.tuples;Array.prototype.push.apply(n,function(e){var n=Array.from(e.querySelectorAll("Tuple"));return n.map((function(e){return{members:Array.from(e.querySelectorAll("Member")).map((function(e){var n=parseInt(O(e,"LNum")||"0",10),r=parseInt(O(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:O(e,"Caption"),children:[],hasChildren:r,hierarchy:e.getAttribute("Hierarchy"),levelName:O(e,"LName"),levelNum:n,name:O(e,"UName"),parentName:O(e,"PARENT_UNIQUE_NAME")}}))}}))}(e))}}));var u=new Array(o.tuples.length*a.tuples.length).fill(null);t.forEach((function(e){u[e.ordinal]=e}));var c=0;return o.tuples.forEach((function(e){a.tuples.forEach((function(n){i.push({columnTuple:n,data:u[c],rowTuple:e}),c++}))})),{columns:a,data:i,rows:o}}function O(e,n){var r=e.querySelector(n);return r?r.textContent:""}var I={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"};function N(e){var n={},r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return r+="<RequestType>"+(I[e.command]||e.command)+"</RequestType>",r+="<Restrictions>"+v("RestrictionList",e.restrictions,!0)+"</Restrictions>",e.connection&&e.connection.catalog&&(n.Catalog=e.connection.catalog),r+="<Properties>"+v("PropertyList",n,!1)+"</Properties>",r+="</Discover></Body></Envelope>"}function v(e,n,r){var t="";if(n){t+="<"+e+">";var a=void 0;for(var o in n)n[o]&&(a=n[o],r&&(o=o.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),t+="<"+o+">"+a+"</"+o+">");t+="</"+e+">"}else t+="<"+e+"/>";return t}var g={schemaCatalogs:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"CATALOG_NAME"),description:O(e,"DESCRIPTION")}}))},schemaCubes:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"CUBE_NAME"),caption:O(e,"CUBE_CAPTION"),description:O(e,"DESCRIPTION"),type:O(e,"CUBE_TYPE")}}))},schemaDimensions:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{caption:O(e,"DIMENSION_CAPTION"),defaultHierarchy:O(e,"DEFAULT_HIERARCHY"),description:O(e,"DESCRIPTION"),name:O(e,"DIMENSION_NAME"),type:parseInt(O(e,"DIMENSION_TYPE"),10),uniqueName:O(e,"DIMENSION_UNIQUE_NAME")}}))},schemaHierarchies:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"HIERARCHY_NAME"),caption:O(e,"HIERARCHY_CAPTION"),description:O(e,"DESCRIPTION"),uniqueName:O(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:O(e,"DIMENSION_UNIQUE_NAME"),displayFolder:O(e,"HIERARCHY_DISPLAY_FOLDER"),origin:O(e,"HIERARCHY_ORIGIN"),defaultMember:O(e,"DEFAULT_MEMBER")}}))},schemaKPIs:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"KPI_NAME"),uniqueName:O(e,"KPI_NAME"),caption:O(e,"KPI_CAPTION"),value:O(e,"KPI_VALUE"),goal:O(e,"KPI_GOAL"),status:O(e,"KPI_STATUS"),trend:O(e,"KPI_TREND"),statusGraphic:O(e,"KPI_STATUS_GRAPHIC"),trendGraphic:O(e,"KPI_TREND_GRAPHIC"),description:O(e,"KPI_DESCRIPTION"),groupName:O(e,"MEASUREGROUP_NAME"),type:"kpi"}}))},schemaLevels:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"LEVEL_NAME"),caption:O(e,"LEVEL_CAPTION"),description:O(e,"DESCRIPTION"),uniqueName:O(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:O(e,"DIMENSION_UNIQUE_NAME"),displayFolder:O(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:O(e,"LEVEL_ORDERING_PROPERTY"),origin:O(e,"LEVEL_ORIGIN"),hierarchyUniqueName:O(e,"HIERARCHY_UNIQUE_NAME")}}))},schemaMeasures:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"MEASURE_NAME"),caption:O(e,"MEASURE_CAPTION"),uniqueName:O(e,"MEASURE_UNIQUE_NAME"),description:O(e,"DESCRIPTION"),aggregator:O(e,"MEASURE_AGGREGATOR"),groupName:O(e,"MEASUREGROUP_NAME"),displayFolder:O(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:O(e,"DEFAULT_FORMAT_STRING")}}))},schemaMembers:function(e){var n=(new DOMParser).parseFromString(e,"text/xml");return Array.from(n.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:O(e,"MEMBER_NAME"),caption:O(e,"MEMBER_CAPTION"),uniqueName:O(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:O(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:O(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:O(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:O(e,"CHILDREN_CARDINALITY")}}))}},T=function(e,n){return void 0===n&&(n=new Set),(e.children||[]).forEach((function(e){n.add(e.levelName),T(e,n)})),n.size},E=function(e){var n=0;return(e.children||[]).forEach((function(e){n+=E(e)||1})),n},_=function(e,n){return(n&&n.hierarchy===e.hierarchy?A((n.normalizedPath||[]).slice(0,-1),[e.name||null]):A(n&&n.normalizedPath?n.normalizedPath:[],[e.name])).filter(Boolean)},R=function(e,n,r,t,a,o,i,u){void 0===n&&(n=-1),void 0===r&&(r=0),void 0===t&&(t=void 0),void 0===a&&(a=void 0),void 0===o&&(o=void 0),void 0===i&&(i=void 0),void 0===u&&(u=void 0);var c=T(e),l=E(e),s=t||c,f=a||l,m=o?o.slice():[],p=i?i.slice():new Array(f),d=m.findIndex((function(n){return n&&n.name===e.levelName&&n.level===e.levelNum})),A=m[d],h={name:e.levelName,level:e.levelNum,index:n,cells:new Array(f).fill(null)},O=-1!==n&&-1!==r,I={caption:e.caption,name:e.name,levelName:e.levelName,levelNum:e.levelNum,hasChildren:e.hasChildren,parentName:e.parentName,hierarchy:e.hierarchy,total:void 0!==e.total&&e.total||u&&u.children.length<=1&&u.total,parent:u,rowIndex:n,colIndex:r,depth:1,breadth:1,path:e.path||[],normalizedPath:e.normalizedPath||[],children:e.children.filter((function(n){return n.hierarchy===e.hierarchy}))};if(O)if(A)A.cells[r]=I,A.index>=n&&(n=A.index);else if(m[n]&&m[n].cells.length){for(var N=n;N<m.length;N++)m[N].index++;m.splice(n,0,h),m[n].cells[r]=I}else m[n]=h,m[n].cells[r]=I;var v=0;return e.children&&e.children.length?e.children.forEach((function(e){var t=R(e,n+1,r+v,s,f,m,p,I),a=t[0],o=t[1],i=t[3];v+=i||1,m=a.slice(),p=o.slice()})):e.normalizedPath&&(p[r]={total:I.total,path:e.normalizedPath}),I.depth=c,I.breadth=l,[m,p,c,l]},y=function(e,n,r){var t;void 0===n&&(n=null),void 0===r&&(r=0);for(var a=m(m({},e),{total:!0,hasChildren:!1,children:[]}),o=0;o<e.children.length;o++){var i=y(e.children[o],e,o);t=t||i.hierarchy,i.hierarchy===t||!n||n.children.some((function(e){return e.total&&e.name===a.name}))||e.total||(a.children.push(i),e.children.splice(o,1),o--)}if(e.children.filter((function(e){return!e.total})).length>=1&&n&&!n.children.some((function(e){return e.total&&e.name===a.name}))&&!e.total){var u=e.children[0].hierarchy;e.hierarchy===u&&n.children.splice(r+1,0,a)}return e};function C(e){return JSON.parse(JSON.stringify(e))}var x=function(e,n,r){return{hierarchyUniqueName:e,uniqueName:n,caption:n,measure:n,name:n,type:r,kpi:!0}};function S(e){var n=e.name;return[x(n,e.value,"value"),x(n,e.goal,"goal"),x(n,e.status,"status"),x(n,e.trend,"trend")]}var M,P=function(e,n){return String(e.name)===String([n.defaultHierarchy?n.defaultHierarchy:n.uniqueName])},D=function(e,n){return String(e.name)===String(n.name)},U=function(e,n){for(var r=function(r){var t=e[r],a=t.name.findIndex((function(e){return P({name:[e]},n)||String(e).startsWith(n.uniqueName)}));if(-1!==a)if(a===t.name.length-1||1===t.name.length)e.splice(r,1);else{t.name.splice(a,1);var o=e.findIndex((function(e){return e!==t&&String(e.name)===String(t.name)}));-1!==o&&(e[o]=m(m(m({},e[o]),t),e[o].expand||t.expand?{expand:!0}:{}),e.splice(r,1))}},t=e.length-1;t>=0;t--)r(t)},w=function(e,n,r){var t=-1;if(r.dropTarget&&r.dropDirection){var a=r.dropDirection?"before"===r.dropDirection?0:1:0;t=e.findIndex((function(e){return D(e,r.dropTarget)}))+a}-1!==t?(e.forEach((function(e){var r;e.expand&&e.name.length>1&&e.name.length>t&&(r=e.name).splice.apply(r,A([t,0],n.name))})),e.splice(t,0,n)):e.push(n)};e.HEADERS_ACTION=void 0,(M=e.HEADERS_ACTION||(e.HEADERS_ACTION={})).toggle="HEADERS_ACTION_TOGGLE",M.expand="HEADERS_ACTION_EXPAND",M.collapse="HEADERS_ACTION_COLLAPSE";var F,b=function(e,n,r){var t=new Set;return e.children.forEach((function(e){var a=n(e);r&&t.add(String(e.path)),b(e,n,r||a).map((function(e){t.add(e)}))})),Array.from(t.values())},V=function(n,r){switch(r.type){case e.HEADERS_ACTION.toggle:var t=n.find((function(e){return String(e.name)===String(r.payload)}));return V(n,m(m({},r),{type:t&&t.expand?e.HEADERS_ACTION.collapse:e.HEADERS_ACTION.expand}));case e.HEADERS_ACTION.expand:var a=n.find((function(e){return String(e.name)===String(r.payload)}));if(a&&!0===a.expand)return n;if(!a||!1!==a.expand&&void 0!==a.expand){var o=n.slice();return o.push({name:r.payload,expand:!0}),o}return n.map((function(e){return e===a?m(m({},a),{expand:!0}):e}));case e.HEADERS_ACTION.collapse:var i=b(r.tree,(function(e){return!e.total&&String(e.path)===String(r.payload)}));return n.slice().filter((function(e){return!i.some((function(n){return n===String(e.name)}))})).map((function(e){return m(m({},e),{expand:Boolean(e.expand)})})).map((function(e){return String(e.name)===String(r.payload)?r.payload.length>1?void 0:{name:r.payload,expand:!1}:e})).filter(Boolean);default:return n}};e.PIVOT_CONFIGURATOR_ACTION=void 0,(F=e.PIVOT_CONFIGURATOR_ACTION||(e.PIVOT_CONFIGURATOR_ACTION={})).toggleSelection="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION",F.addColumnAxis="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS",F.addColumnAxes="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES",F.removeColumnAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS",F.removeColumnAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES",F.addRowAxis="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS",F.addRowAxes="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES",F.removeRowAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS",F.removeRowAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES",F.addMeasureAxis="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS",F.addMeasureAxes="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES",F.removeMeasureAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS",F.removeMeasureAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES",F.remove="PIVOT_CONFIGURATOR_ACTION_REMOVE",F.setSort="PIVOT_CONFIGURATOR_ACTION_SET_SORT",F.setFilter="PIVOT_CONFIGURATOR_ACTION_SET_FILTER",F.addFilter="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER",F.changeFilter="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER",F.removeFilter="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER",F.setDragItem="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM",F.drop="PIVOT_CONFIGURATOR_ACTION_DROP",F.setDropZone="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE",F.setDropTarget="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET",F.setDropDirection="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION";var G=function(n,r){var t,a,o,i,u,c,l,s,f;switch(r.type){case e.PIVOT_CONFIGURATOR_ACTION.toggleSelection:if(!Array.isArray(r.payload)){var p=r.payload;if(2===p.type||"aggregator"in p)return n.measureAxes.some((function(e){return P(e,p)}))?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis}));if("kpi"===p.type){var d=S(p);return d.every((function(e){return n.measureAxes.some((function(n){return P(n,e)}))}))?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes,payload:d})):G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes,payload:d.filter((function(e){return!n.measureAxes.some((function(n){return P(n,e)}))}))}))}return r.payload.kpi?n.measureAxes.some((function(e){return P(e,p)}))?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis})):n.columnAxes.some((function(e){return P(e,p)}))?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis})):n.rowAxes.some((function(e){return P(e,p)}))?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis})):!n.columnAxes||!n.columnAxes.length||n.rowAxes&&n.rowAxes.length?G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis})):G(n,m(m({},r),{type:e.PIVOT_CONFIGURATOR_ACTION.addRowAxis}))}break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis:a=A(n.columnAxes||[],[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis:a=A((n.columnAxes||[]).filter((function(e){return!P(e,r.payload)}))),U(a,r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxis:t=A(n.rowAxes||[],[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis:t=A((n.rowAxes||[]).filter((function(e){return!P(e,r.payload)}))),U(t,r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis:o=A(n.measureAxes||[],[{name:[r.payload.defaultHierarchy||r.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis:o=A((n.measureAxes||[]).filter((function(e){return!P(e,r.payload)})));break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes:o=A(n.measureAxes||[],(r.payload||[]).map((function(e){return{name:[e.defaultHierarchy||e.uniqueName]}})));break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes:o=A((n.measureAxes||[]).filter((function(e){return!r.payload.some((function(n){return P(e,n)}))})));break;case e.PIVOT_CONFIGURATOR_ACTION.remove:n.columnAxes.some((function(e){return D(e,r.payload)}))&&(a=A(n.columnAxes.filter((function(e){return!D(e,r.payload)}))),U(a,{uniqueName:r.payload.name})),n.rowAxes.some((function(e){return D(e,r.payload)}))&&(t=A(n.rowAxes.filter((function(e){return!D(e,r.payload)}))),U(t,{uniqueName:r.payload.name})),n.measureAxes.some((function(e){return D(e,r.payload)}))&&(o=A(n.measureAxes.filter((function(e){return!D(e,r.payload)}))));break;case e.PIVOT_CONFIGURATOR_ACTION.setDragItem:c=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropZone:l=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropTarget:f=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropDirection:s=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.drop:if(n.dragItem&&n.dropZone){var h=n.columnAxes.find((function(e){return D(e,r.payload)})),O=n.rowAxes.find((function(e){return D(e,r.payload)})),I=n.measureAxes.find((function(e){return D(e,r.payload)})),N=void 0;switch(h&&(N=h,a=A(n.columnAxes.filter((function(e){return!D(e,r.payload)}))),U(a,{uniqueName:r.payload.name})),O&&(N=O,t=A(n.rowAxes.filter((function(e){return!D(e,r.payload)}))),U(t,{uniqueName:r.payload.name})),I&&(N=I,o=A(n.measureAxes.filter((function(e){return!D(e,r.payload)})))),n.dropZone){case"columnAxes":a=a||n.columnAxes.slice(),w(a,N,n);break;case"rowAxes":t=t||n.rowAxes.slice(),w(t,N,n);break;case"measureAxes":o=o||n.measureAxes.slice(),w(o,N,n)}}c=null,l=null,f=null;break;case e.PIVOT_CONFIGURATOR_ACTION.setSort:i=r.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setFilter:u=Array.isArray(r.payload)?r.payload:[r.payload];break;case e.PIVOT_CONFIGURATOR_ACTION.addFilter:u=(n.filter||[]).slice(),Array.isArray(r.payload)?u.push.apply(u,r.payload):u.push(r.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.changeFilter:u=Array.isArray(r.payload)?(n.filter||[]).map((function(e){return r.payload.some((function(n){return n.field===e.field}))?r.payload.find((function(n){return n.field===e.field})):e})):(n.filter||[]).map((function(e){return e.field===r.payload.field?r.payload:e}));break;case e.PIVOT_CONFIGURATOR_ACTION.removeFilter:u=(n.filter||[]).slice(),u=Array.isArray(r.payload)?u.filter((function(e){return!r.payload.some((function(n){return n.field===e.field&&n.operator===e.operator}))})):u.filter((function(e){return!(e.field===r.payload.field&&e.operator===r.payload.operator)}))}return{dragItem:c,dropTarget:f,dropDirection:s,dropZone:l,columnAxes:a,rowAxes:t,measureAxes:o,filter:u,sort:i}},L={init:function(e){"min"in e==0&&(e.min=Number.POSITIVE_INFINITY)},merge:function(e,n){n.min=Math.min(e.min,n.min)},accumulate:function(e,n){e.min=Math.min(n,e.min)},result:function(e){return Number.isFinite(e.min)?e.min:NaN},format:function(e){return e.toFixed(2)}},H={init:function(e){"max"in e==0&&(e.max=Number.NEGATIVE_INFINITY)},merge:function(e,n){n.max=Math.max(e.max,n.max)},accumulate:function(e,n){e.max=Math.max(n,e.max)},result:function(e){return Number.isFinite(e.max)?e.max:NaN},format:function(e){return e.toFixed(2)}},k=function(e){return null!=e},q=function(e){return null==e},B=function(e){return"function"==typeof e},Y=function(e){return"string"==typeof e},K=function(e){return!function(e){return q(e)||0===e.trim().length}(e)},j=function(e){return e&&e.getTime},z=function(e,n,r){return function(t){return e(t)?n(t):r(t)}},Q=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];return function(e){return n.reduceRight((function(e,n){return n(e)}),e)}},X={},Z=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;X[void 0]=function(e){return e};var W,J=function(e,n){var r=e+n;if(X[r])return X[r];var t=[];return e.replace(Z,(function(e,n,r,a){t.push(k(n)?n:r||a)})),X[r]=function(e){for(var r=e,a=0;a<t.length;a++)if(r=r[t[a]],!k(r)&&n)return r;return r},X[r]},$=function(e){return function(n){return[e,n]}},ee=function(){return null},ne=function(e){return k(e)&&function(e){return Array.isArray(e)}(e)&&e.length>0},re=function(e,n){return function(r){return e(r).map(n).join("~")}},te=Q.apply(void 0,[['"',""],[":","-"]].map((function(e){var n=e[0],r=e[1];return function(e){return e.replace(new RegExp(n,"g"),r)}}))),ae=(W=".",function(e){return e.slice(0,e.indexOf(W))}),oe=function(e){var n=e.field,r=e.dir;return n+"-"+(void 0===r?"asc":r)},ie=J("take"),ue=J("aggregates");J("skip");var ce=J("group"),le=J("sort",!0),se=re(le,oe),fe=re(ce,oe),me=re(ue,(function(e){return e.field+"-"+e.aggregate})),pe=Q((function(e){return"datetime'"+e+"'"}),ae,te,JSON.stringify,(function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}));Q($("page"),(function(e){var n=e.skip,r=e.take;return Math.floor((n||0)/r)+1})),Q($("pageSize"),ie),Q($("group"),fe);var de,Ae=Q($("sort"),se);Q($("aggregate"),me),Q((de=le,z((function(e){return ne(de(e))}),Ae,ee)),(function(e){return Object.assign({},e,{sort:(le(e)||[]).filter((function(e){var n=e.dir;return K(n)}))})}));var he=function(e){return e.field+"~"+e.operator+"~"+e.value};z((function(e){return j(e.value)}),Q(he,(function(e){var n=e.field,r=e.value,t=e.ignoreCase,a=e.operator;return{value:pe(r),field:n,ignoreCase:t,operator:a}})),he);var Oe=function(e,n,r){return n[e]=r,n},Ie=function(e){return function(n){return Object.keys(n).reduce(e.bind(null,n),{})}},Ne=Ie((function(e,n,r){return Oe(r.toLowerCase(),n,e[r])})),ve=Ie((function(e,n,r){return Oe(r,n,Ne(e[r]))})),ge=function(e,n){return k(e)?e:n},Te=Q((function(e){var n=e.field,r=e.hasSubgroups,t=e.value,a=e.aggregates,o=e.items;return{aggregates:ve(a),field:n,items:r?o.map(Te):o,value:t}}),(function(e){return{aggregates:e.Aggregates||e.aggregates,field:e.Member||e.member||e.field,hasSubgroups:e.HasSubgroups||e.hasSubgroups||!1,items:e.Items||e.items,value:ge(e.Key,ge(e.key,e.value))}})),Ee={or:{concat:function(e,n){return function(r){return e(r)||n(r)}},identity:function(){return!1}},and:{concat:function(e,n){return function(r){return e(r)&&n(r)}},identity:function(){return!0}}},_e={contains:function(e,n){return(e||"").indexOf(n)>=0},doesnotcontain:function(e,n){return-1===(e||"").indexOf(n)},doesnotendwith:function(e,n){return(e||"").indexOf(n,(e||"").length-(n||"").length)<0},doesnotstartwith:function(e,n){return-1===(e||"").lastIndexOf(n,0)},endswith:function(e,n){return(e||"").indexOf(n,(e||"").length-(n||"").length)>=0},eq:function(e,n){return e===n},gt:function(e,n){return e>n},gte:function(e,n){return e>=n},isempty:function(e){return""===e},isnotempty:function(e){return""!==e},isnotnull:function(e){return k(e)},isnull:function(e){return q(e)},lt:function(e,n){return e<n},lte:function(e,n){return e<=n},neq:function(e,n){return e!=n},startswith:function(e,n){return 0===(e||"").lastIndexOf(n,0)}},Re=/^\/Date\((.*?)\)\/$/,ye=function(e,n,r){if(!k(n))return e;var t=e;if(Y(n)){var a=Re.exec(n);a?n=new Date(+a[1]):t=function(n){var t=e(n);return"string"==typeof t&&r?t.toLowerCase():function(e){return!isNaN(e-parseFloat(e))}(t)?t+"":t}}return j(n)?function(e){var n=t(e);return j(n)?n.getTime():n}:t},Ce=function(e){var n=e.field,r=e.ignoreCase,t=e.value,a=e.operator;n=k(n)?n:function(e){return e},r=!k(r)||r;var o=ye(B(n)?n:J(n,!0),t,r);t=function(e,n){if(null!=e&&Y(e)){var r=Re.exec(e);if(r)return new Date(+r[1]).getTime();if(n)return e.toLowerCase()}else if(null!=e&&j(e))return e.getTime();return e}(t,r);var i=B(a)?a:_e[a];return function(e){return i(o(e),t,r)}},xe=function(e){var n=Ee[e.logic];return e.filters.filter(k).map((function(e){return k(e.filters)?xe(e):Ce(e)})).reduce(n.concat,n.identity)};function Se(e,n){"filters"in e?e.filters.map((function(e){return Se(e,n)})):n(e)}var Me=function(e,n){(Array.isArray(e)?e:e.filters).forEach((function(e){return Se(e,n)}))},Pe=function(e,n,r){var t,a=r?Array.isArray(r)?{logic:"and",filters:r}:r:void 0,o=a&&(t=a)&&0!==t.filters.length?xe(t):function(){return!0},i=e.concat(n),u=[];Me(r||[],(function(e){"field"in e&&e.field&&u.push(e.field)}));var c={hasFilter:!1,predicate:o,filteringAxes:[]};if(u.some((function(e){return"function"==typeof e})))c.filteringAxes=i.slice();else if(u.length>0){var l=Array.from(new Set(u).values()),s=i.filter((function(e){return l.indexOf(e.key)>=0}));c.filteringAxes=s}return c.hasFilter=c.filteringAxes.length>0,c},De=function(e,n,r){var t=e.get(n);return t||(t=r||new Map,e.set(n,t)),t},Ue=function(e){var n=e.indexOf("&");return-1!==n?[e.substring(0,n),e.substring(n+1)]:[e,void 0]},we=function(e,n,r){e.forEach((function(t,a){if(a!==r){t.size>0&&we(t,n,r);var o=t.get(r),i=De(e,r,{});n.forEach((function(e){e.aggregate.init(i),e.aggregate.merge(o,i)}))}}))},Fe=function(e,n,r,t){e.forEach((function(e,a){var o;a!==t?(o=De(n,a),Fe(e,o,r,t)):(o=De(n,a,{}),r.forEach((function(n){n.aggregate.init(o),n.aggregate.merge(e,o)})))}))},be=function(e,n,r,t){e.forEach((function(a,o){if(o!==r){a.size>0&&be(a,n,r,t);var i=De(a,r),u=De(e,r);Fe(i,u,n,t)}}))},Ve=function(e,n,r){var t=Ue(e),a=t[0],o=t[1],i=r.slice();if(a&&o){var u=n.find((function(e){return e.key===a})),c=u?u.caption:"";return i.map((function(n){return n===c?e:n}))}return i},Ge=function(e,n,r,t,a,o,i){for(var u=i||new Map,c=t.map((function(e){return e.caption}));n.length>1&&t.some((function(e){return e.caption===n[n.length-1].caption}));)n.pop(),c.pop();var l=e;return n.forEach((function(e,n){if(c=Ve(e.name,t,c),l&&!t.some((function(n){return n.caption===e.name}))){if(!l.has(e.name)&&!u.has(c.slice(0,c.indexOf(e.name)+1).join("-")))for(var i=Array.from(l).find((function(e){return e[0]!==r})),s=i&&i[0],f=s&&Ue(s)[0],m=f?n-t.findIndex((function(e){return e.key===f})):0,p=function(n){var i=[];l.forEach((function(e,n){n!==r&&i.push.apply(i,Array.from(e).filter((function(e){return e[0]!==r})))}));var s=new Map;i.forEach((function(e){if(s.has(e[0])){var n=s.get(e[0]),r=e[1],t=new Map;Fe(n,t,a,o),Fe(r,t,a,o),s.set(e[0],t)}else s.set(e[0],new Map(e[1]))}));var f=c.slice(0,c.indexOf(e.name));s.forEach((function(e,n){u.set(Ve(n,t,f.concat([n])).join("-"),e)})),s.set(r,l.get(r)),l=s},d=0;d<m;d++)p();l=l.get(e.name)||u.get(c.slice(0,c.indexOf(e.name)+1).join("-"))}})),l},Le=function(e,n,r,t,a,o,i){var u=[],c=t.dataField,l=t.columnsData,s=new Map;return n.forEach((function(n){var t=Ge(e,n.members.slice(),l,o,i,c,s),f=t&&t.get(l);r.forEach((function(e){var r=e.members.slice(),t=i[0];if("[Measures].[MeasuresLevel]"===r[r.length-1].levelName){var o=r.pop();t=i.find((function(e){return String(e.name)===o.caption}))||t}var l=f&&Ge(f,r,c,a,i,c),s="",m="";if(l&&t){var p=t.aggregate.result(l.get(c));s=String(p),m=t.aggregate.format(p)}u.push({columnTuple:e,data:{fmtValue:m,ordinal:0,value:s},rowTuple:n})}))})),u},He=function(e,n,r){e.forEach((function(e,t){if(!r[t]){var a=De(n,t);He(e,a,r)}}))},ke=function(e){var n=new Set;return e.forEach((function(e){1!==e.name.length||Ue(e.name[0])[1]||n.add(e.name[0])})),n},qe=function(e,n,r,t,a){var o=ke(n),i=[],u=function(e,n){var r={members:[]};return e.forEach((function(e){var t=n.find((function(n){return n.key===e})),a=t?t.caption:"",o={caption:a,children:[],hasChildren:!0,parentName:"",levelNum:0,levelName:a,hierarchy:e,name:a};r.members.push(o)})),r}(o,e);i.push(u);for(var c=function(u){var c=n[u];if(1===c.name.length&&!c.expand&&o.has(c.name[0]))return"continue";var l,s=new Set(o.keys()),f=[],m=[],p=[];c.name.forEach((function(n,o){var u,d=Ue(n),A=d[0],h=d[1];if(l=e.find((function(e){return e.key===A})),h){s.delete(A),m.push(n);var O={children:[],caption:h,hierarchy:A,levelNum:1,levelName:A+" "+A,name:n,parentName:l?l.caption:""};f.push(O)}else if(c.expand&&c.name.length-1===o){s.delete(n),m.push(n);var I=function(e,n,r){for(var t,a=[],o=function(e){return Array.from(e).filter((function(e){return!r[e[0]]}))},i=new Map(e),u=function(e){if(t=i.get(n[e]))i=new Map(t);else if(e<n.length-1&&Array.from(i).some((function(r){return Ue(r[0])[0]===n[e]}))){var u=[];i.forEach((function(e,n){r[n]||u.push.apply(u,o(new Map(e)))})),i=new Map,u.forEach((function(e){if(i.has(e[0])){var n=i.get(e[0]),t=e[1],a=new Map;He(n,a,r),He(t,a,r),i.set(e[0],a)}else i.set(e[0],new Map(e[1]))}))}else 0!==e&&e!==n.length-1||Array.from(i).some((function(r){return Ue(r[0])[0]===n[e]}))&&a.push.apply(a,o(i))},c=0;c<n.length;c++)u(c);return a}(r,m,a),N=t.find((function(e){return e.field===A}));N&&N.dir&&I.sort(function(e,n){return function(r,t){var a=e.dir,o=n.sortValue(Ue(r[0])[1]),i=n.sortValue(Ue(t[0])[1]);return o<i?"asc"===a?-1:1:o>i?"asc"===a?1:-1:0}}(N,l));for(var v=0;v<I.length;v++){var g=I[v][0],T={members:[]};p.push(T);var E=Ue(g)[1];l=e.find((function(e){return e.key===n})),O={caption:E,children:[],levelName:n+" "+n,levelNum:1,parentName:l?l.caption:"",hierarchy:n,name:g},(u=T.members).push.apply(u,f),T.members.push(O)}}else if(c.expand){var _=(l=e.find((function(e){return e.key===n})))?l.caption:"";s.delete(n),m.push(n),O={children:[],caption:_,hierarchy:n,levelName:_,levelNum:0,name:_,parentName:""},f.push(O)}s.forEach((function(n){p.forEach((function(r){var t=(l=e.find((function(e){return e.key===n})))?l.caption:"",a={children:[],hasChildren:!0,caption:t,hierarchy:n,levelName:t,levelNum:0,name:t,parentName:""};r.members.push(a)}))})),i.push.apply(i,p)}))},l=0;l<n.length;l++)c(l);return i},Be=function(e,n){var r={caption:String(n.name),children:[],hasChildren:!1,hierarchy:"[Measures]",levelName:"[Measures].[MeasuresLevel]",levelNum:0,name:"[Measures].["+n.name+"]",parentName:""},t=C(e);return t.members.push(r),t},Ye=function(e,n){if(n.length<2)return e;for(var r=e.slice(),t=r.length-1;t>=0;t--){var a=r[t];r[t]=Be(r[t],n[0]);for(var o=1;o<n.length;o++){var i=Be(a,n[o]);r.splice(t+1,0,i)}}return r};return e.addKPI=function(e){for(var n,r=0;r<e.length;r++)if(2===e[r].type){n=!0;break}n&&e.splice(r+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})},e.addMultipleMeasures=Ye,e.averageAggregate={init:function(e){"count"in e==0&&(e.sumA=0,e.count=0)},merge:function(e,n){n.sumA+=e.sumA,n.count+=e.count},accumulate:function(e,n){e.sumA+=n,e.count+=1},result:function(e){return e.sumA/e.count},format:function(e){return e.toFixed(2)}},e.buildKPIMeasures=S,e.cloneDataTree=function(e,n,r){var t=new Map;return Fe(e,t,r,n),t},e.compareAxes=D,e.configuratorReducer=G,e.createAxisDescriptors=function(e){for(var n=[],r=0,t=Object.keys(e);r<t.length;r++){var a=t[r];n.push({name:JSON.parse(a),expand:e[a]})}return n},e.createDataState=function(e){return{columns:e.columns.tuples,data:e.data,rows:e.rows.tuples}},e.createDataTree=function(e,n,r,t,a,o){var i=new Map,u=new Map,c=n.concat(r),l=new Set,s=a.dataField,f=a.columnsData,m=Pe(n,r,o),p=m.hasFilter,d=m.predicate,A=m.filteringAxes;return e.forEach((function(e){if(p){var a={};if(A.forEach((function(n){a[n.key]=n.displayValue(e)})),!d(a))return}var o=c.map((function(n){return n.displayValue(e)})),m="".concat.apply("",o),h=u.get(m);if(!h){var O=i,I=function(n){var r,t;O=De(O,(r=n.key,t=n.displayValue(e),r+"&"+t))};n.forEach(I),O=De(O,f),l.add(O),r.forEach(I),h={},O.set(s,h),u.set(m,h),t.forEach((function(e){e.aggregate.init(h)}))}t.forEach((function(n){n.aggregate.accumulate(h,n.value(e))}))})),l.forEach((function(e){return we(e,t,s)})),be(i,t,f,s),i},e.createDiscoverBody=N,e.createFlatSchemaDimensions=function(e,n){var r=Object.keys(e).map((function(e){return{caption:e,defaultHierarchy:e,description:"",name:e,uniqueName:e,hierarchyUniqueName:e,measure:!0,type:1}}));return n.length&&r.push({caption:"Measures",children:n.map((function(e){return{aggregator:"1",caption:String(e.name),defaultFormat:"",description:"",displayFolder:"",groupName:String(e.name),name:String(e.name),uniqueName:String(e.name)}})),type:2,description:"",name:"Measures",uniqueName:"[Measures]"}),r},e.createLocalDataState=function(e){var n,r=e.dataTree,t=e.rowSettings,a=e.columnSettings,o=e.rowAxes,i=e.columnAxes,u=e.measures,c=e.sort,l=e.fields,s=((n={})[l.columnsData]=l.columnsData,n[l.dataField]=l.dataField,n),f=Ye(qe(a,i,r.get(l.columnsData),c,s),u),m=qe(t,o,r,c,s);return{columns:f,data:Le(r,m,f,l,a,t,u),rows:m}},e.createRequestBody=f,e.createTuples=qe,e.discoverCommands=I,e.fetchData=function(e,n){return p(void 0,void 0,void 0,(function(){var r;return d(this,(function(t){switch(t.label){case 0:return r=m({body:f(n),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,r)];case 1:return[4,t.sent().text()];case 2:return[2,h(t.sent())]}}))}))},e.fetchDiscover=function(e,n){return p(void 0,void 0,void 0,(function(){var r,t;return d(this,(function(a){switch(a.label){case 0:return r=m({body:N(n),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,r)];case 1:return[4,a.sent().text()];case 2:return t=a.sent(),[2,g[n.command](t)]}}))}))},e.headersReducer=V,e.maxAggregate=H,e.mergeTrees=Fe,e.minAggregate=L,e.parseResponse=h,e.readData=Le,e.rootFields=ke,e.setFilter=function(e,n){void 0===n&&(n=[]),e.filter=n},e.setSort=function(e,n){void 0===n&&(n=[]),e.sort=n},e.sumAggregate={init:function(e){"sum"in e==0&&(e.sum=0)},merge:function(e,n){n.sum+=e.sum},accumulate:function(e,n){e.sum+=n},result:function(e){return e.sum},format:function(e){return e.toFixed(2)}},e.toColumns=function(e){for(var n=R(e),r=n[0],t=n[1],a=n[2],o=n[3],i=0;i<o;i++)for(var u=null,c=0;c<a;c++)if(r[c]){var l=r[c].cells[i];!l&&u&&(u.rowSpan=(u.rowSpan||1)+1),u&&(u.colSpan=u.breadth||1),l&&(u=l)}return[r,t,a,o]},e.toData=function(e,n,r,t,a){var o=Array.from(new Array(a),(function(){return{cells:Array.from(new Array(t),(function(){return null}))}})),i=function(e){return e.join("|")},u=function(e){return e.members.map((function(e){return e.name}))},c=new Map,l=new Map;return n.forEach((function(e,n){c.set(i(e.path),n)})),r.forEach((function(e,n){l.set(i(e.path),n)})),e.forEach((function(e){var n=c.get(i(u(e.columnTuple))),t=l.get(i(u(e.rowTuple)));void 0!==n&&void 0!==t&&(o[t].cells[n]||(o[t].row=r[t].path,o[t].cells[n]=e))})),o},e.toRows=function(e){for(var n=R(e),r=n[0],t=n[1],a=n[2],o=n[3],i=0;i<o;i++)for(var u=null,c=0;c<a;c++)if(r[c]){var l=r[c].cells[i];!l&&u&&(u.rowSpan=(u.rowSpan||1)+1),u&&(u.colSpan=u.breadth),l&&(u=l)}return function(e,n,r,t){for(var a=new Array(t),o=0;o<t;o++)for(var i=0;i<r;i++)if(e[i]&&e[i].cells[o]){var u=e[i].cells[o];a[o]||(a[o]={cells:new Array(r).fill(null)}),a[o].cells[i]=m(m({},u),{rowSpan:u.colSpan,colSpan:u.rowSpan})}return[a,n,t,r]}(r,t,a,o)},e.toTree=function(e){for(var n={children:[]},r={},t=0;t<e.length;t++)for(var a=C(e[t]),o="",i=function(e){var t,i,u,c=a.members[e];if(n.children&&0===n.children.length)t=n;else if(r[o]&&!r[o+c.name]&&0===c.levelNum)t=r[o];else if(r[o+c.parentName]&&c.levelNum>0&&!r[o+c.parentName+c.name])t=r[o+c.parentName];else if(!r[o+c.parentName]&&c.levelNum>0&&!r[o+c.parentName+c.name]){var l=Object.keys(r).find((function(e){return c.parentName===r[e].name}));l&&(t=r[l])}if(t){c.path=(i=c,((u=t)&&u.hierarchy===i.hierarchy?A((u.path||[]).slice(0,-1),[(0===i.levelNum?i.hierarchy:i.name)||null]):A(u&&u.path?u.path:[],[0===i.levelNum?i.hierarchy:i.name])).filter(Boolean)),c.normalizedPath=_(c,t);var s=t.children.findIndex((function(e){return e.hierarchy!==t.hierarchy}));-1!==s?t.children.splice(s,0,c):t.children.push(c)}c.parentName+=c.name,o+=c.parentName,r[o]||(r[o]=c)},u=0;u<a.members.length;u++)i(u);return C(y(n))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}));
//# sourceMappingURL=kendo.pivot.common.min.js.map
