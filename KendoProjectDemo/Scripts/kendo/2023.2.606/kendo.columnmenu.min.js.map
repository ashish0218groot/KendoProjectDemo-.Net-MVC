{"version":3,"file":"kendo.columnmenu.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","encode","htmlEncode","ui","extend","grep","map","inArray","Comparer","data","ACTIVE","ASC","DESC","CHANGE","INIT","OPEN","SELECT","STICK","UNSTICK","POPUP","MENU","EXPANSIONPANEL","NS","Widget","trim","text","replace","columnsGroupFilterHandler","column","this","columns","indexOf","title","field","leafColumns","result","idx","length","concat","push","ColumnMenu","init","element","options","columnHeader","that","componentType","fn","call","owner","dataSource","attr","closest","appendTo","find","link","_createLink","wrapper","_refreshHandler","refresh","bind","_init","pane","_isMobile","_createMobileMenu","_createMenu","_muteAngularRebind","_angularItems","_sort","_columns","_filter","_lockColumns","_stickyColumns","trigger","container","events","name","messages","sortAscending","sortDescending","filter","columnVisibility","clear","cancel","done","settings","lock","unlock","stick","unstick","setColumnPosition","apply","reset","buttonTitle","sortable","filterable","animations","left","encodeTitles","flattenMenuCols","menuTemplate","_ownerColumns","_hasGroups","_groupColumns","_flattenMenuCols","_syncMenuCols","_isModernComponentType","template","modernTemplate","html","uid","guid","ns","showColumns","hasLockableColumns","hasStickableColumns","omitWrapAttribute","popup","anchor","copyAnchorStyles","open","_open","activate","_activate","deactivate","_deactivate","close","e","menu","_closing","sender","closeCallback","addClass","_createExpanders","children","orientation","closeOnClick","_updateMenuItems","appendTarget","format","append","icon","on","_click","expanderOptions","expanded","headerClass","useBareTemplate","menuCols","ownerCols","ownerCol","menuColsFields","col","i","cols","groupHeader","nest","currGroup","filterHandler","group","groupColumns","groups","mobileTemplate","hasGroups","view","state","MobileMenu","columnMenu","stopPropagation","viewElement","preventDefault","_applyChanges","_cancelChanges","_updateLockedColumns","_updateStickyColumns","initialSort","action","angular","elements","_originalObject","destroy","filterMenu","unbind","_updateColumnsMenuHandler","_updateColumnsLockedStateHandler","off","purge","is","navigate","toggle","_setMenuItemsVisibility","sort","_updateDataIndexes","_reorderMenuItems","_eachRenderedMenuItem","index","renderedListElement","matchesMedia","hide","show","renderedList","insertAfter","eq","prepend","insertElementAt","first","mappedColumns","x","each","callback","duplicateColumnIndex","fieldValue","currentColumn","columnElements","attrName","attrValue","_getRenderedList","renderedListElements","_getRenderedListElements","oldOccurances","checkBoxes","signature","columCheckbox","indexAttr","fieldAttr","columnDict","j","parseInt","oldColumnOccurrences","columnOccurrence","JSON","stringify","columnOccurrences","add","instance","menuitem","not","target","keyCode","keys","ENTER","click","ESC","widgetInstance","hasClass","visible","getKendoPopup","omitSort","menuColumns","originalField","hidden","locked","headerAttributes","id","create","dir","_sortHandler","item","_getSortItemsContainer","removeClass","_sortDataSource","parents","parent","compare","allowUnsort","mode","splice","_updateColumnsMenu","_updateColumnsLockedState","_applyColumnVisibility","input","colIdx","uidAttr","showColumn","hideColumn","checkbox","checkboxes","columnsInMenu","omitCheckState","current","checked","lockedAttr","columnIndexMap","columnsCount","visibleFields","prop","visibleDataFields","lockedCount","nonLockedCount","columnsNotInMenu","hiddenColumnsNotInMenu","switchWidget","enable","check","arr","key","len","toHash","widget","multi","checkSource","appendToElement","values","change","cycleForm","_lockableHandler","lockColumn","unlockColumn","_stickableHandler","stickColumn","unstickColumn","notLockable","lockable","lockItem","unlockItem","sticky","stickable","stickItem","unstickItem","descriptor","_filterExist","filters","found","COLUMNS_PARTIAL_MODERN","ref","join","renderButton","themeColor","LOCK_STICK_COLUMNS_PARTIAL_MODERN","LOCKABLE_COLUMNS_PARTIAL_MODERN","STICKABLE_COLUMNS_PARTIAL_MODERN","SORTABLE_PARTIAL_MODERN","COLUMNS_PARTIAL_CLASSIC","LOCK_STICK_COLUMNS_PARTIAL_CLASSIC","LOCKABLE_COLUMNS_PARTIAL_CLASSIC","STICKABLE_COLUMNS_PARTIAL_CLASSIC","SORTABLE_PARTIAL_CLASSIC","FILTERABLE_PARTIAL_CLASSIC","COLUMNS_PARTIAL_MOBILE","SORTABLE_PARTIAL_MOBILE","LOCKABLE_COLUMNS_PARTIAL_MOBILE","STICKABLE_COLUMNS_PARTIAL_MOBILE","FILTERABLE_PARTIAL_MOBILE","_createCheckBoxes","currentTarget","_updateSelectedItems","el","otherItem","otherItemId","force","selectedItems","hasOwnProperty","kendoSwitch","unchecked","_destroyCheckBoxes","plugin","jQuery"],"sources":["kendo.columnmenu.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.popup', 'kendo.filtermenu', 'kendo.menu', 'kendo.expansionpanel', 'kendo.html.button', 'kendo.icons'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"columnmenu\",\n        name: \"Column Menu\",\n        category: \"framework\",\n        depends: [ \"popup\", \"filtermenu\", \"menu\", 'expansionpanel', 'html.button', \"icons\" ],\n        advanced: true\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            encode = kendo.htmlEncode,\n            ui = kendo.ui,\n            extend = $.extend,\n            grep = $.grep,\n            map = $.map,\n            inArray = $.inArray,\n            Comparer = kendo.data.Comparer,\n            ACTIVE = \"k-selected\",\n            ASC = \"asc\",\n            DESC = \"desc\",\n            CHANGE = \"change\",\n            INIT = \"init\",\n            OPEN = \"open\",\n            SELECT = \"select\",\n            STICK = \"stick\",\n            UNSTICK = \"unstick\",\n            POPUP = \"kendoPopup\",\n            FILTERMENU = \"kendoFilterMenu\",\n            MENU = \"kendoMenu\",\n            EXPANSIONPANEL = \"kendoExpansionPanel\",\n            NS = \".kendoColumnMenu\",\n            COLUMN_HEADER_SELECTOR = \".k-table-th\",\n            Widget = ui.Widget;\n\n        function trim(text) {\n            return kendo.trim(text).replace(/&nbsp;/gi, \"\");\n        }\n\n        function toHash(arr, key) {\n            var result = {};\n            var idx, len, current;\n            for (idx = 0, len = arr.length; idx < len; idx ++) {\n                current = arr[idx];\n                result[current[key]] = current;\n            }\n            return result;\n        }\n\n        function columnsGroupFilterHandler(column) {\n            return this.columns.indexOf(column.title) >= 0 || this.columns.indexOf(column.field) >= 0;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"='\" + (attrValue || \"\").replace(/'/g, \"\\\"\") + \"']\";\n        }\n\n        function insertElementAt(index, element, container) {\n            if (index > 0) {\n                element.insertAfter(container.children().eq(index - 1));\n            } else {\n                container.prepend(element);\n            }\n        }\n\n        function columnOccurrences(columns) {\n            var columnDict = {};\n            var signature;\n\n            for (var i = 0; i < columns.length; i++) {\n                signature = JSON.stringify(columns[i]);\n\n                if (columnDict[signature]) {\n                    columnDict[signature].push(i);\n                } else {\n                    columnDict[signature] = [i];\n                }\n            }\n\n            return columnDict;\n        }\n\n        function oldColumnOccurrences(renderedListElements, checkBoxes) {\n            var indexAttr = kendo.attr(\"index\");\n            var fieldAttr = kendo.attr(\"field\");\n            var columnDict = {};\n            var signature;\n            var columCheckbox;\n            var index;\n            var field;\n            var title;\n\n            for (var j = 0; j < renderedListElements.length; j++) {\n                columCheckbox = checkBoxes.eq(j);\n                index = parseInt(columCheckbox.attr(indexAttr), 10);\n                field = columCheckbox.attr(fieldAttr);\n                title = columCheckbox.attr(\"title\");\n                signature = field ? field : title;\n\n                if (columnDict[signature]) {\n                    columnDict[signature].push(index);\n                } else {\n                    columnDict[signature] = [index];\n                }\n            }\n\n            return columnDict;\n        }\n\n        var ColumnMenu = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    columnHeader;\n\n                options = options || {};\n                options.componentType = options.componentType || \"classic\";\n                Widget.fn.init.call(that, element, options);\n\n                element = that.element;\n                options = that.options;\n                that.owner = options.owner;\n                that.dataSource = options.dataSource;\n\n                that.field = element.attr(kendo.attr(\"field\"));\n                that.title = element.attr(kendo.attr(\"title\"));\n\n                columnHeader = $(element.closest(COLUMN_HEADER_SELECTOR));\n                if (columnHeader.length) {\n                    that.appendTo = columnHeader.find(options.appendTo);\n                } else {\n                    that.appendTo = $(options.appendTo);\n                }\n\n                that.link = that._createLink();\n\n                that.wrapper = $('<div class=\"k-column-menu\"/>');\n\n                that._refreshHandler = that.refresh.bind(that);\n\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n            },\n\n            _init: function() {\n                var that = this;\n\n                that.pane = that.options.pane;\n                if (that.pane) {\n                    that._isMobile = true;\n                }\n\n                if (that._isMobile) {\n                    that._createMobileMenu();\n                } else {\n                    that._createMenu();\n                }\n\n                that.owner._muteAngularRebind(function() {\n                    that._angularItems(\"compile\");\n                });\n\n                that._sort();\n\n                that._columns();\n\n                that._filter();\n\n                that._lockColumns();\n\n                that._stickyColumns();\n\n                that.trigger(INIT, { field: that.field, container: that.wrapper });\n            },\n\n            events: [ INIT, OPEN, \"sort\", \"filtering\", STICK, UNSTICK ],\n\n            options: {\n                name: \"ColumnMenu\",\n                messages: {\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filter: \"Filter\",\n                    column: \"Column\",\n                    columns: \"Columns\",\n                    columnVisibility: \"Column Visibility\",\n                    clear: \"Clear\",\n                    cancel: \"Cancel\",\n                    done: \"Done\",\n                    settings: \"Edit Column Settings\",\n                    lock: \"Lock Column\",\n                    unlock: \"Unlock Column\",\n                    stick: \"Stick Column\",\n                    unstick: \"Unstick Column\",\n                    setColumnPosition: \"Set Column Position\",\n                    apply: \"Apply\",\n                    reset: \"Reset\",\n                    buttonTitle: \"{0} edit column settings\"\n                },\n                filter: \"\",\n                columns: true,\n                sortable: true,\n                filterable: true,\n                animations: {\n                    left: \"slide\"\n                },\n                encodeTitles: false,\n                componentType: \"classic\",\n                appendTo: null\n            },\n\n            _createMenu: function() {\n                var that = this,\n                    options = that.options,\n                    columns = that._ownerColumns(),\n                    flattenMenuCols,\n                    menuTemplate;\n\n                if (that._hasGroups()) {\n                    columns = that._groupColumns(columns);\n                    flattenMenuCols = that._flattenMenuCols(columns);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n\n                if (that._isModernComponentType()) {\n                    menuTemplate = kendo.template(modernTemplate);\n                } else {\n                    menuTemplate = kendo.template(template);\n                }\n\n                that.wrapper.html(menuTemplate({\n                    uid: kendo.guid(),\n                    ns: kendo.ns,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    encodeTitles: options.encodeTitles,\n                    omitWrapAttribute: kendo.attr(\"omit-wrap\")\n                }));\n\n                that.popup = that.wrapper[POPUP]({\n                    anchor: that.link,\n                    copyAnchorStyles: false,\n                    open: that._open.bind(that),\n                    activate: that._activate.bind(that),\n                    deactivate: that._deactivate.bind(that),\n                    close: function(e) {\n                        if (that.menu) {\n                            that.menu._closing = e.sender.element;\n                        }\n                        if (that.options.closeCallback) {\n                            that.options.closeCallback(that.element);\n                        }\n                    }\n                }).data(POPUP);\n\n                if (that._isModernComponentType()) {\n                    that.popup.element.addClass(\"k-grid-columnmenu-popup\");\n                    that._createExpanders();\n                } else {\n                    that.menu = that.wrapper.children()[MENU]({\n                        orientation: \"vertical\",\n                        closeOnClick: false,\n                        open: function() {\n                            that._updateMenuItems();\n                        }\n                    }).data(MENU);\n                }\n            },\n\n            _createLink: function() {\n                var that = this,\n                    element = that.element,\n                    appendTarget = that.appendTo.length ? element.find(that.appendTo) : element,\n                    link = element.find(\".k-grid-column-menu\"),\n                    title = kendo.format(that.options.messages.buttonTitle, that.title || that.field);\n\n                if (!link[0]) {\n                    element.addClass(\"k-filterable\");\n\n                    link = appendTarget\n                        .append('<a class=\"k-grid-column-menu k-grid-header-menu\" href=\"#\" aria-hidden=\"true\" title=\"' +\n                                    title + '\">' + kendo.ui.icon(\"more-vertical\") + '</a>')\n                        .find(\".k-grid-column-menu\");\n                }\n\n                link.attr(\"tabindex\", -1)\n                    .on(\"click\" + NS, that._click.bind(that));\n\n                return link;\n            },\n\n            _createExpanders: function() {\n                var that = this;\n                var options = that.options;\n                var expanderOptions = {\n                    expanded: false,\n                    headerClass: \"k-columnmenu-item\",\n                    useBareTemplate: true\n                };\n\n                that.wrapper.find(\".k-columns-item\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"columns\") + '<span>' + options.messages.columns + '</span>'\n                }));\n                that.wrapper.find(\".k-column-menu-filter\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"filter\") + '<span>' + options.messages.filter + '</span>'\n                }));\n                that.wrapper.find(\".k-column-menu-position\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"set-column-position\") + '<span>' + options.messages.setColumnPosition + '</span>'\n                }));\n            },\n\n            _syncMenuCols: function(menuCols, ownerCols) {\n                var length = ownerCols.length;\n                var ownerCol;\n                var menuColsFields = menuCols.map(function(col) {\n                    return col.field;\n                });\n\n                for (var i = 0; i < length; i++) {\n                    ownerCol = ownerCols[i];\n                    if (menuColsFields.indexOf(ownerCol.field) < 0) {\n                        ownerCol.menu = false;\n                    }\n                }\n            },\n\n            _flattenMenuCols: function(cols) {\n                var result = [];\n                var length = cols.length;\n\n                for (var i = 0; i < length; i++) {\n                    if (cols[i].columns) {\n                        result = result.concat(this._flattenMenuCols(cols[i].columns));\n                    } else if (!cols[i].groupHeader) {\n                        result.push(cols[i]);\n                    }\n                }\n                return result;\n            },\n\n            _groupColumns: function(columns, nest) {\n                var result = [];\n                var groups = this.options.columns.groups;\n                var length = groups.length;\n                var i;\n                var currGroup;\n                var filterHandler;\n                var group;\n                var groupColumns;\n\n                for (i = 0; i < length; i++) {\n                    currGroup = groups[i];\n                    filterHandler = columnsGroupFilterHandler.bind(currGroup);\n                    group = { title: currGroup.title, groupHeader: true };\n                    groupColumns = columns.filter(filterHandler);\n                    result.push(group);\n\n                    if (nest) {\n                        group.columns = groupColumns;\n                    } else {\n                        result = result.concat(groupColumns);\n                    }\n                }\n\n                return result;\n            },\n\n            _hasGroups: function() {\n                return this.options.columns && this.options.columns.groups && this.options.columns.groups.length;\n            },\n\n            _isModernComponentType: function() {\n                return this.options.componentType === 'modern' && !this._isMobile;\n            },\n\n            _deactivate: function() {\n                if (this.menu) {\n                    this.menu._closing = false;\n                }\n            },\n\n            _createMobileMenu: function() {\n                var that = this,\n                    options = that.options,\n                    columns = that._ownerColumns(),\n                    groups,\n                    flattenMenuCols;\n\n                if (that._hasGroups()) {\n                    groups = that._groupColumns(columns, true);\n                    flattenMenuCols = that._flattenMenuCols(groups);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n\n                var html = kendo.template(mobileTemplate)({\n                    ns: kendo.ns,\n                    field: that.field,\n                    title: that.title || that.field,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    hasGroups: that._hasGroups(),\n                    groups: groups\n                });\n\n                that.view = that.pane.append(html);\n                that.view.state = { columns: {} };\n\n                that.wrapper = that.view.element.find(\".k-column-menu\");\n\n                that.menu = new MobileMenu(that.wrapper.children(), {\n                    pane: that.pane,\n                    columnMenu: that\n                });\n\n                // The toggle animation of the switches should not propagate to the view\n                that.menu.element.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                var viewElement = that.view.wrapper && that.view.wrapper[0] ? that.view.wrapper : that.view.element;\n\n                viewElement.on(\"click\", \".k-header-done\", function(e) {\n                    e.preventDefault();\n\n                    that.menu._applyChanges();\n                    that.menu._cancelChanges(false);\n                    that.close();\n                });\n\n                viewElement.on(\"click\", \".k-header-cancel\", function(e) {\n                    e.preventDefault();\n\n                    that.menu._cancelChanges(true);\n                    that.close();\n                });\n\n                that.view.bind(\"showStart\", function() {\n                    var view = that.view || { columns: {} };\n\n                    if (that.options.hasLockableColumns) {\n                        that._updateLockedColumns();\n                    }\n\n                    if (that.options.hasStickableColumns) {\n                        that._updateStickyColumns();\n                    }\n\n                    if (view.element.find(\".k-sort-asc.k-selected\").length) {\n                        view.state.initialSort = \"asc\";\n                    } else if (view.element.find(\".k-sort-desc.k-selected\").length) {\n                        view.state.initialSort = \"desc\";\n                    }\n                });\n            },\n\n            _angularItems: function(action) {\n                var that = this;\n                that.angular(action, function() {\n                    var items = that.wrapper.find(\".k-columns-item input[\" + kendo.attr(\"field\") + \"]\").map(function() {\n                        return $(this).closest(\"li\");\n                    });\n                    var data = map(that._ownerColumns(), function(col) {\n                        return { column: col._originalObject };\n                    });\n                    return {\n                        elements: items,\n                        data: data\n                    };\n                });\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that._angularItems(\"cleanup\");\n\n                Widget.fn.destroy.call(that);\n\n                if (that.filterMenu) {\n                    that.filterMenu.destroy();\n                }\n\n                if (that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n\n                if (that.options.columns && that.owner) {\n                    if (that._updateColumnsMenuHandler) {\n                        that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n                        that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n                    }\n\n                    if (that._updateColumnsLockedStateHandler) {\n                        that.owner.unbind(\"columnLock\", that._updateColumnsLockedStateHandler);\n                        that.owner.unbind(\"columnUnlock\", that._updateColumnsLockedStateHandler);\n                    }\n                }\n\n                if (that.menu) {\n                    that.menu.element.off(NS);\n                    that.menu.destroy();\n                }\n\n                that.wrapper.off(NS);\n\n                if (that.popup) {\n                    that.popup.destroy();\n                }\n\n                if (that.view) {\n                    that.view.purge();\n                }\n\n                that.link.off(NS);\n                that.owner = null;\n                that.wrapper = null;\n                that.element = null;\n            },\n\n            close: function() {\n                if (this.menu) {\n                    this.menu.close();\n                }\n                if (this.popup) {\n                    this.popup.close();\n                    this.popup.element.off(\"keydown\" + NS);\n                }\n            },\n\n            _click: function(e) {\n                var that = this;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                var options = this.options;\n\n                if (options.filter && this.element.is(!options.filter)) {\n                    return;\n                }\n\n                if (!this.popup && !this.pane) {\n                    this._init();\n                } else {\n                    that._updateMenuItems();\n                }\n\n                if (this._isMobile) {\n                    this.pane.navigate(this.view, this.options.animations.left);\n                } else {\n                    this.popup.toggle();\n                }\n            },\n\n            _updateMenuItems: function() {\n                var that = this;\n                if (that.options.columns) {\n                    that._setMenuItemsVisibility();\n                    if (!that.options.columns.sort && !that.options.columns.groups) {\n                        that._reorderMenuItems();\n                    } else {\n                        that._updateDataIndexes();\n                    }\n                }\n            },\n\n            _setMenuItemsVisibility: function() {\n                var that = this;\n\n                that._eachRenderedMenuItem(function(index, column, renderedListElement) {\n                    if (column.matchesMedia === false) {\n                        renderedListElement.hide();\n                    } else {\n                        renderedListElement.show();\n                    }\n                });\n            },\n\n            _reorderMenuItems: function() {\n                var that = this;\n\n                that._eachRenderedMenuItem(function(index, column, renderedListElement, renderedList) {\n                    if (renderedListElement[0] && renderedListElement.index() !== index) {\n                        insertElementAt(index, renderedListElement, renderedList);\n                    }\n                });\n                that._updateDataIndexes();\n            },\n\n            _updateDataIndexes: function() {\n                var that = this;\n                var renderedList = that._isMobile && that.view ?\n                    $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                    $(that.wrapper).find(\".k-menu-group\").first(),\n                    mappedColumns = that._ownerColumns(true).map(function(x) {\n                        return x.title || x.field;\n                    });\n\n                renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\") +\n                    \" input\").each(function(i) {\n                    var columns;\n                    var index;\n                    if (that.options.columns.sort) {\n                        columns = that._ownerColumns();\n                        index = mappedColumns.indexOf(columns[i].title);\n                        $(this).attr(kendo.attr(\"index\"), index);\n                    } else {\n                        $(this).attr(kendo.attr(\"index\"), i);\n                    }\n                });\n            },\n\n            _eachRenderedMenuItem: function(callback) {\n                var that = this;\n                var renderedListElement;\n                var duplicateColumnIndex;\n                var fieldValue;\n                var currentColumn;\n                var columns = grep(leafColumns(that.owner.columns), function(col) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    return result;\n                }).map(function(col) {\n                    return {\n                         field: col.field,\n                         title: col.title,\n                         matchesMedia: col.matchesMedia\n                       };\n                });\n                var renderedList = that._getRenderedList();\n                var renderedListElements = that._getRenderedListElements(renderedList);\n                var oldOccurances = oldColumnOccurrences(renderedListElements, renderedList.find(\"input[type=checkbox]\"));\n                var columnOccurrence = columnOccurrences(columns);\n                var columnElements;\n\n                for (var i = 0; i < columns.length; i++) {\n                    currentColumn = columns[i];\n                    fieldValue = currentColumn.field ? currentColumn.field : currentColumn.title;\n                    duplicateColumnIndex = $.inArray(i, columnOccurrence[JSON.stringify(currentColumn)]);\n                    columnElements = $();\n\n                    for (var idx = 0; idx < oldOccurances[fieldValue].length; idx++) {\n                        columnElements = columnElements.add(renderedListElements.eq(oldOccurances[fieldValue][idx]));\n                    }\n                    renderedListElement = columnElements.find(attrEquals(\"field\", fieldValue)).closest(that._isModernComponentType() ? \"label\" : \"li\").eq(duplicateColumnIndex);\n                    callback(i, currentColumn, renderedListElement, renderedList);\n                }\n            },\n\n            _getRenderedList: function() {\n                var that = this;\n\n                if (that._isModernComponentType()) {\n                    return $(that.wrapper).find('.k-columns-item');\n                } else {\n                    return that._isMobile && that.view ?\n                    $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                    $(that.wrapper).find(\".k-menu-group\").first();\n                }\n            },\n\n            _getRenderedListElements: function(renderedList) {\n                var that = this;\n\n                if (that._isModernComponentType()) {\n                    return renderedList.find('label');\n                } else {\n                    return renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\"));\n                }\n            },\n\n            _open: function() {\n                var that = this,\n                    instance, menuitem;\n\n                $(\".k-column-menu\").not(that.wrapper).each(function() {\n                    $(this).data(POPUP).close();\n                });\n                that.popup.element.on(\"keydown\" + NS, function(e) {\n                    var target = $(e.target);\n\n                    if (that._isModernComponentType() && e.keyCode === kendo.keys.ENTER) {\n                        target.click();\n                    }\n                    if (e.keyCode == kendo.keys.ESC) {\n                        instance = kendo.widgetInstance(target.find(\"select\"));\n\n                        if (target.hasClass(\"k-picker\") &&\n                            instance &&\n                            instance.popup.visible()) {\n                                e.stopPropagation();\n                                return;\n                        }\n\n                        menuitem = target.closest(\".k-popup\").closest(\".k-menu-item\");\n\n                        if (menuitem.length > 0) {\n                            menuitem.addClass(\"k-focus\");\n\n                            if (that.menu) {\n                                that.menu.element.trigger(\"focus\");\n                            } else {\n                                that.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n                            }\n                        }\n\n                        target.closest(\".k-popup\").getKendoPopup().close();\n                    }\n                });\n\n                if (that.options.hasLockableColumns) {\n                    that._updateLockedColumns();\n                }\n\n                if (that.options.hasStickableColumns) {\n                    that._updateStickyColumns();\n                }\n            },\n\n            _activate: function() {\n                if (this.menu) {\n                    this.menu.element.trigger(\"focus\");\n                } else {\n                    this.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n                }\n\n                this.trigger(OPEN, { field: this.field, container: this.wrapper });\n            },\n\n            _ownerColumns: function(omitSort) {\n                var columns = leafColumns(this.owner.columns),\n                    menuColumns = grep(columns, function(col) {\n                        var result = true,\n                            title = trim(col.title || \"\");\n\n                        if (col.menu === false || (!col.field && !title.length)) {\n                            result = false;\n                        }\n\n                        return result;\n                    }),\n                    result,\n                    sort = this.options.columns.sort;\n\n                result = map(menuColumns, function(col) {\n                    return {\n                        originalField: col.field,\n                        field: col.field || col.title,\n                        title: col.title || col.field,\n                        hidden: col.hidden,\n                        matchesMedia: col.matchesMedia,\n                        index: inArray(col, columns),\n                        locked: !!col.locked,\n                        _originalObject: col,\n                        uid: col.headerAttributes.id\n                    };\n                });\n\n                if (sort && !omitSort) {\n                    result.sort(Comparer.create({ field: \"title\", dir: sort }));\n                }\n\n                return result;\n            },\n\n            _sort: function() {\n                var that = this;\n\n                if (that.options.sortable) {\n                    that.refresh();\n\n                    if (that._isModernComponentType()) {\n                        that.wrapper.on(\"click\" + NS, \".k-sort-asc, .k-sort-desc\", that._sortHandler.bind(that));\n                    } else {\n                        that.menu.bind(SELECT, that._sortHandler.bind(that));\n                    }\n                }\n            },\n\n            _sortHandler: function(e) {\n                var that = this,\n                    item = e.item ? $(e.item) : $(e.target),\n                    dir;\n\n                if (item.hasClass(\"k-sort-asc\")) {\n                    dir = ASC;\n                } else if (item.hasClass(\"k-sort-desc\")) {\n                    dir = DESC;\n                }\n\n                if (!dir) {\n                    return;\n                }\n\n                that._getSortItemsContainer(item).find(\".k-sort-\" + (dir == ASC ? DESC : ASC)).removeClass(ACTIVE);\n\n                that._sortDataSource(item, dir);\n\n                if (!that._isMobile) {\n                    that.close();\n                }\n            },\n\n            _getSortItemsContainer: function(item) {\n                return this._isModernComponentType() ? item.parents('.k-columnmenu-item-wrapper').first() : item.parent();\n            },\n\n            _sortDataSource: function(item, dir) {\n                var that = this,\n                    sortable = that.options.sortable,\n                    compare = sortable.compare === null ? undefined$1 : sortable.compare,\n                    dataSource = that.dataSource,\n                    idx,\n                    length,\n                    sort = dataSource.sort() || [];\n\n                var removeClass = item.hasClass(ACTIVE) && sortable && sortable.allowUnsort !== false;\n\n                dir = !removeClass ? dir : undefined$1;\n\n                if (that.trigger(\"sort\", { sort: { field: that.field, dir: dir, compare: compare } })) {\n                    return;\n                }\n\n                if (removeClass) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n\n                if (sortable.mode === \"multiple\") {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === that.field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: that.field, dir: dir, compare: compare });\n                } else {\n                    sort = [ { field: that.field, dir: dir, compare: compare } ];\n                }\n\n                dataSource.sort(sort);\n            },\n\n            _columns: function() {\n                var that = this;\n\n                if (that.options.columns) {\n\n                    that._updateColumnsMenu();\n\n                    that._updateColumnsMenuHandler = that._updateColumnsMenu.bind(that);\n\n                    that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n\n                    that._updateColumnsLockedStateHandler = that._updateColumnsLockedState.bind(that);\n\n                    that.owner.bind([\"columnUnlock\", \"columnLock\" ], that._updateColumnsLockedStateHandler);\n\n                    if (that._isModernComponentType()) {\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button:not(.k-button-solid-primary)', function() {\n                            that._updateColumnsMenu();\n                        });\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button.k-button-solid-primary', that._applyColumnVisibility.bind(that));\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-checkbox', function() {\n                            that._updateColumnsMenu(true);\n                        });\n                    } else {\n                        that.menu.bind(SELECT, function(e) {\n                            var item = $(e.item),\n                                input,\n                                column,\n                                uidAttr = kendo.attr(\"uid\"),\n                                colIdx = 0,\n                                columns = grep(leafColumns(that.owner.columns), function(col) {\n                                    var result = true,\n                                        title = trim(col.title || \"\");\n\n                                    if (col.menu === false || (!col.field && !title.length)) {\n                                        result = false;\n                                    }\n\n                                    return result;\n                                });\n\n                            if (that._isMobile) {\n                                e.preventDefault();\n                            }\n\n                            if (!item.parent().closest(\"li.k-columns-item\")[0]) {\n                                return;\n                            }\n\n                            input = item.find(\":checkbox\");\n                            if (input.attr(\"disabled\")) {\n                                return;\n                            }\n\n                            colIdx = columns.map(function(col) {\n                                return col.headerAttributes.id;\n                            }).indexOf(input.attr(uidAttr));\n                            column = columns[colIdx];\n\n                            if (column.hidden === true) {\n                                that.owner.showColumn(column);\n                            } else {\n                                that.owner.hideColumn(column);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _applyColumnVisibility: function() {\n                var that = this;\n                var fieldAttr = kendo.attr(\"field\");\n                var uidAttr = kendo.attr(\"uid\");\n                var checkboxes = that.wrapper.find(\".k-columns-item input[\" + fieldAttr + \"]\");\n                var columnsInMenu = grep(leafColumns(this.owner.columns), function(col) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    return result;\n                });\n                var length = checkboxes.length;\n                var idx;\n                var colIdx;\n                var checkbox;\n                var column;\n\n                that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n                that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n\n                for (idx = 0; idx < length; idx++) {\n                    checkbox = $(checkboxes[idx]);\n                    colIdx = columnsInMenu.map(function(col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(checkbox.attr(uidAttr));\n                    column = columnsInMenu[colIdx];\n\n                   if (checkbox.is(\":checked\") && column.hidden) {\n                       that.owner.showColumn(column);\n                   } else if (checkbox.is(\":not(:checked)\") && !column.hidden) {\n                       that.owner.hideColumn(column);\n                   }\n                }\n                that.popup.close();\n                that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n            },\n\n            _updateColumnsMenu: function(omitCheckState) {\n                var idx, length, current, checked, locked, that = this;\n                var fieldAttr = kendo.attr(\"field\"),\n                    lockedAttr = kendo.attr(\"locked\"),\n                    uidAttr = kendo.attr(\"uid\"),\n                    columnIndexMap = {},\n                    columnsCount = 0,\n                    colIdx = 0;\n                    omitCheckState = omitCheckState === true;\n                    var columnsInMenu = grep(leafColumns(this.owner.columns), function(col, idx) {\n                        var result = true,\n                            title = trim(col.title || \"\");\n\n                        if (col.menu === false || (!col.field && !title.length)) {\n                            result = false;\n                        }\n\n                        if (result) {\n                            columnIndexMap[idx] = columnsCount;\n                            columnsCount++;\n                        }\n\n                        return result;\n                    }),\n                    visibleFields = grep(this._ownerColumns(), function(field) {\n                        if (omitCheckState) {\n                             return that.wrapper.find(\"[role='menuitemcheckbox'] [\" + uidAttr + \"='\" + field.uid + \"']\").prop('checked');\n                        }\n                        return !field.hidden && field.matchesMedia !== false;\n                    }),\n                    visibleDataFields = grep(visibleFields, function(field) {\n                        return field.originalField;\n                    }),\n                    lockedCount = grep(visibleDataFields, function(col) {\n                        return col.locked === true;\n                    }).length,\n                    nonLockedCount = grep(visibleDataFields, function(col) {\n                        return col.locked !== true;\n                    }).length,\n                    columnsNotInMenu = grep(this.owner.columns, function(col) {\n                        return col.menu === false;\n                    }),\n                    hiddenColumnsNotInMenu = grep(columnsNotInMenu, function(col) {\n                        return col.hidden;\n                    });\n\n                this.wrapper.find(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", false);\n\n                var checkboxes = this.wrapper\n                    .find(\".k-columns-item input[\" + fieldAttr + \"]\")\n                    .prop(\"disabled\", false);\n\n                if (!omitCheckState) {\n                    checkboxes.prop(\"checked\", false);\n                }\n\n                var switchWidget;\n\n                for (idx = 0, length = checkboxes.length; idx < length; idx ++) {\n                    current = checkboxes.eq(idx);\n                    locked = current.attr(lockedAttr) === \"true\";\n                    checked = false;\n                    switchWidget = current.data(\"kendoSwitch\");\n                    colIdx = columnsInMenu.map(function(col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(current.attr(uidAttr));\n\n                    checked = omitCheckState ? current.prop('checked') : !columnsInMenu[colIdx].hidden && columnsInMenu[colIdx].matchesMedia !== false;\n                    current.prop(\"checked\", checked);\n\n                    if (switchWidget) {\n                        switchWidget.enable(true);\n                        switchWidget.check(checked);\n                    }\n\n                    current.closest(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", checked);\n\n                    if (checked) {\n                        if (lockedCount == 1 && locked) {\n                            current.prop(\"disabled\", true);\n\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n\n                        if ((columnsNotInMenu.length === 0 || (columnsNotInMenu.length === hiddenColumnsNotInMenu.length)) && nonLockedCount == 1 && !locked) {\n                            current.prop(\"disabled\", true);\n\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _updateColumnsLockedState: function() {\n                var idx, length, current, column;\n                var fieldAttr = kendo.attr(\"field\");\n                var lockedAttr = kendo.attr(\"locked\");\n                var columns = toHash(this._ownerColumns(), \"field\");\n                var checkboxes = this.wrapper\n                    .find(\".k-columns-item input[type=checkbox]\");\n\n                for (idx = 0, length = checkboxes.length; idx < length; idx ++ ) {\n                    current = checkboxes.eq(idx);\n                    column = columns[current.attr(fieldAttr)];\n                    if (column) {\n                        current.attr(lockedAttr, column.locked);\n                    }\n                }\n\n                this._updateColumnsMenu();\n            },\n\n            _filter: function() {\n                var that = this,\n                    widget = FILTERMENU,\n                    options = that.options;\n\n                if (options.filterable !== false) {\n\n                    if (options.filterable.multi) {\n                        widget = \"kendoFilterMultiCheck\";\n                        if (options.filterable.dataSource) {\n                            options.filterable.checkSource = options.filterable.dataSource;\n                            delete options.filterable.dataSource;\n                        }\n                    }\n                    that.filterMenu = that.wrapper.find(\".k-filterable\")[widget](\n                        extend(true, {}, {\n                            appendToElement: true,\n                            dataSource: options.dataSource,\n                            values: options.values,\n                            field: that.field,\n                            title: that.title,\n                            change: function(e) {\n                                if (that.trigger(\"filtering\", { filter: e.filter, field: e.field })) {\n                                    e.preventDefault();\n                                }\n                            },\n                            componentType: that.options.componentType,\n                            cycleForm: !that._isModernComponentType()\n                        },\n                        options.filterable)\n                        ).data(widget);\n\n                    if (that._isMobile) {\n                        that.menu.bind(SELECT, function(e) {\n                            var item = $(e.item);\n\n                            if (item.hasClass(\"k-filter-item\")) {\n                                that.pane.navigate(that.filterMenu.view, that.options.animations.left);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _lockColumns: function() {\n                var that = this;\n\n                if (that._isModernComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-lock, .k-unlock\", that._lockableHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._lockableHandler.bind(that));\n                }\n            },\n\n            _lockableHandler: function(e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n\n                if (item.hasClass(\"k-lock\")) {\n                    that.owner.lockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass(\"k-unlock\")) {\n                    that.owner.unlockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._isModernComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-stick, .k-unstick\", that._stickableHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._stickableHandler.bind(that));\n                }\n            },\n\n            _stickableHandler: function(e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n                var field = that.field;\n                var columns = that.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (item.hasClass(\"k-stick\")) {\n                    that.owner.stickColumn(that.field);\n                    that.trigger(STICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass(\"k-unstick\")) {\n                    that.owner.unstickColumn(that.field);\n                    that.trigger(UNSTICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _updateLockedColumns: function() {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (!column) {\n                    return;\n                }\n\n                var locked = column.locked === true;\n                var length = grep(columns, function(column) {\n                    return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n                }).length;\n                var notLockable = column.lockable === false;\n\n                var lockItem = this.wrapper.find(\".k-lock\").removeClass(\"k-disabled\");\n                var unlockItem = this.wrapper.find(\".k-unlock\").removeClass(\"k-disabled\");\n\n                if (locked || length == 1 || notLockable) {\n                    lockItem.addClass(\"k-disabled\");\n                }\n\n                if (!locked || length == 1 || notLockable) {\n                    unlockItem.addClass(\"k-disabled\");\n                }\n\n                this._updateColumnsLockedState();\n            },\n\n            _updateStickyColumns: function() {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (!column) {\n                    return;\n                }\n\n                var sticky = column.sticky === true;\n                var stickable = column.stickable === true;\n                var locked = column.locked === true;\n                var length = grep(columns, function(column) {\n                    return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n                }).length;\n\n                var stickItem = this.wrapper.find(\".k-stick\").removeClass(\"k-disabled\");\n                var unstickItem = this.wrapper.find(\".k-unstick\").removeClass(\"k-disabled\");\n\n                if (sticky || !stickable || (locked && length === 1)) {\n                    stickItem.addClass(\"k-disabled\");\n                }\n\n                if (!sticky || !stickable) {\n                    unstickItem.addClass(\"k-disabled\");\n                }\n            },\n\n            refresh: function() {\n                var that = this,\n                    sort = that.options.dataSource.sort() || [],\n                    descriptor,\n                    field = that.field,\n                    idx,\n                    length;\n\n                that.wrapper.find(\".k-sort-asc, .k-sort-desc\").removeClass(ACTIVE);\n\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                   descriptor = sort[idx];\n\n                   if (field == descriptor.field) {\n                        that.wrapper.find(\".k-sort-\" + descriptor.dir).addClass(ACTIVE);\n                   }\n                }\n\n                that.link[that._filterExist(that.dataSource.filter()) ? \"addClass\" : \"removeClass\"](\"k-active\");\n            },\n\n            _filterExist: function(filters) {\n                var found = false;\n                var filter;\n\n                if (!filters) {\n                    return;\n                }\n\n                filters = filters.filters;\n\n                for (var idx = 0, length = filters.length; idx < length; idx++) {\n                    filter = filters[idx];\n\n                    if (filter.field == this.field) {\n                        found = true;\n                    } else if (filter.filters) {\n                        found = found || this._filterExist(filter);\n                    }\n                }\n\n                return found;\n            }\n        });\n\n        /* ------------------------- MODERN TEMPLATE ------------------------- */\n\n        function modernColumnsTemplateIterator(columns, encodeTitles, ns) {\n            return columns.map(function (column) {\n                if (column.groupHeader) {\n                    return (\"<span class=\\\"k-column-menu-group-header\\\"><span class=\\\"k-column-menu-group-header-text\\\">\" + (column.title) + \"</span></span>\");\n                } else {\n                    return (\"<label class=\\\"k-column-list-item\\\" role=\\\"menuitemcheckbox\\\" aria-checked=\\\"false\\\" \" + (column.matchesMedia === false ? \"style=\\'display:none;\\'\" : \"\") + \"><input class=\\\"k-checkbox k-checkbox-md k-rounded-md\\\" type=\\\"checkbox\\\" title=\\\"\" + (encodeTitles ? encode(column.title) : column.title) + \"\\\" data-\" + ns + \"field=\\\"\" + (column.field.replace(/\\\"/g, \"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (column.index) + \" data-\" + ns + \"locked=\\\"\" + (column.locked) + \"\\\" data-\" + ns + \"uid=\\\"\" + (column.uid) + \"\\\" /><span class=\\\"k-checkbox-label\\\">\" + (encodeTitles ? encode(column.title) : column.title) + \"</span></label>\");\n                }\n            }).join(\"\");\n        }\n\n        var SORTABLE_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item k-sort-asc\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + (messages.sortAscending) + \"</div></div><div><div class=\\\"k-columnmenu-item k-sort-desc\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + (messages.sortDescending) + \"</div></div></div>\");\n        };\n\n        var COLUMNS_PARTIAL_MODERN = function (ref) {\n            var columns = ref.columns;\n            var messages = ref.messages;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n\n            return \"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item-content k-columns-item\\\"><div class=\\\"k-column-list-wrapper\\\"><div class=\\\"k-column-list\\\" role=\\\"menu\\\">\" + (modernColumnsTemplateIterator(columns, encodeTitles, ns)) + \"</div></div><div class=\\\"k-actions-stretched k-columnmenu-actions\\\">\" +\n    kendo.html.renderButton((\"<button>\" + (messages.apply) + \"</button>\"), { themeColor: \"primary\", icon: \"check\" }) +\n    kendo.html.renderButton((\"<button>\" + (messages.reset) + \"</button>\"), { icon: \"undo\" }) +\n    \"</div></div></div></div>\";\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item k-lock\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"lock\")) + (messages.lock) + \"</div><div class=\\\"k-columnmenu-item k-unlock\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"unlock\")) + (messages.unlock) + \"</div>\");\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item k-stick\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"stick\")) + (messages.stick) + \"</div><div class=\\\"k-columnmenu-item k-unstick\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"unstick\")) + (messages.unstick) + \"</div>\");\n        };\n\n        var LOCK_STICK_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div class=\\\"k-column-menu-position\\\">\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MODERN({ messages: messages }) : '') + \"</div></div>\");\n        };\n\n        var modernTemplate = function (ref) {\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var messages = ref.messages;\n            var columns = ref.columns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n\n            return (\"\" + (sortable ? SORTABLE_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (showColumns ? COLUMNS_PARTIAL_MODERN({ columns: columns, messages: messages, encodeTitles: encodeTitles, ns: ns }) : '') + \"\" + (filterable ? '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' : '') + \"\" + (hasLockableColumns || hasStickableColumns ? LOCK_STICK_COLUMNS_PARTIAL_MODERN({ hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns, messages: messages }) : ''));\n        };\n\n        /* ------------------------- CLASSIC TEMPLATE ------------------------- */\n\n        function classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute) {\n            return columns.map(function (column) {\n                if (column.groupHeader) {\n                    return (\"<li class=\\\"k-column-menu-group-header\\\" \" + omitWrapAttribute + \"=\\\"true\\\" ><span class=\\\"k-column-menu-group-header-text\\\">\" + (column.title) + \"</span></li>\");\n                } else {\n                    return (\"<li role=\\\"menuitemcheckbox\\\" aria-checked=\\\"false\\\" \" + (column.matchesMedia === false ? \"style='display:none;'\" : \"\") + \"><input type=\\\"checkbox\\\" class=\\\"k-checkbox k-checkbox-md k-rounded-md\\\" title=\\\"\" + (encodeTitles ? encode(column.title) : column.title) + \"\\\" data-\" + ns + \"field=\\\"\" + (column.field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (column.index) + \"\\\" data-\" + ns + \"locked=\\\"\" + (column.locked) + \"\\\" data-\" + ns + \"uid=\\\"\" + (column.uid) + \"\\\"/>\" + (encodeTitles ? encode(column.title) : column.title) + \"</li>\");\n                }\n            }).join(\"\");\n        }\n\n        var SORTABLE_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var showColumns = ref.showColumns;\n            var filterable = ref.filterable;\n\n            return (\"<li class=\\\"k-item k-menu-item k-sort-asc\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.sortAscending) + \"</span></span></li><li class=\\\"k-item k-menu-item k-sort-desc\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.sortDescending) + \"</span></span></li>\" + (showColumns || filterable ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var columns = ref.columns;\n            var messages = ref.messages;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var omitWrapAttribute = ref.omitWrapAttribute;\n            var filterable = ref.filterable;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n\n            return (\"<li class=\\\"k-item k-menu-item k-columns-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"columns\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.columns) + \"</span></span><ul>\" + (classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute)) + \"</ul></li>\" + (filterable || hasLockableColumns || hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n    var FILTERABLE_PARTIAL_CLASSIC = function (ref) {\n        var messages = ref.messages;\n        var hasLockableColumns = ref.hasLockableColumns;\n        var hasStickableColumns = ref.hasStickableColumns;\n\n        return (\"<li class=\\\"k-item k-menu-item k-filter-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"filter\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.filter) + \"</span></span><ul><li><div class=\\\"k-filterable\\\"></div></li></ul></li>\" + (hasLockableColumns || hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var hasStickableColumns = ref.hasStickableColumns;\n\n            return (\"<li class=\\\"k-item k-menu-item k-lock\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"lock\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.lock) + \"</span></span></li><li class=\\\"k-item k-menu-item k-unlock\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"unlock\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.unlock) + \"</span></span></li>\" + (hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li class=\\\"k-item k-menu-item k-stick\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"stick\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.stick) + \"</span></span></li><li class=\\\"k-item k-menu-item k-unstick\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"unstick\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.unstick) + \"</span></span></li>\");\n        };\n\n        var LOCK_STICK_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n\n            return (\"<li class=\\\"k-item k-menu-item k-position-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"set-column-position\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (messages.setColumnPosition) + \"</span></span><ul>\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_CLASSIC({ messages: messages, hasStickableColumns: hasStickableColumns }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_CLASSIC({ messages: messages }) : '') + \"</ul></li>\");\n        };\n\n        var template = function (ref) {\n            var uid = ref.uid;\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var messages = ref.messages;\n            var columns = ref.columns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var omitWrapAttribute = ref.omitWrapAttribute;\n\n            return (\"<ul id=\\\"\" + uid + \"\\\">\" + (sortable ? SORTABLE_PARTIAL_CLASSIC({ messages: messages, showColumns: showColumns, filterable: filterable }) : '') + \"\" + (showColumns ? COLUMNS_PARTIAL_CLASSIC({ columns: columns, messages: messages, encodeTitles: encodeTitles, ns: ns, omitWrapAttribute: omitWrapAttribute, filterable: filterable, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns }) : '') + \"\" + (filterable ? FILTERABLE_PARTIAL_CLASSIC({ messages: messages, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns }) : '') + \"\" + (hasLockableColumns || hasStickableColumns ? LOCK_STICK_COLUMNS_PARTIAL_CLASSIC({ messages: messages, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns }) : '') + \"\\n</ul>\");\n        };\n\n        /* ------------------------- MOBILE TEMPLATE ------------------------- */\n\n        function mobileColumnsTemplateIterator(columns, groups, ns, hasGroups) {\n            var result = \"\";\n\n            if (hasGroups) {\n                for (var i = 0; i < groups.length; i++) {\n                    result += \"<span class=\\\"k-list-group-header k-pb-1\\\">\" + (encode(groups[i].title)) + \"</span><ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\";\n\n                    for (var idx = 0; idx < groups[i].columns.length; idx++) {\n                        result += \"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item\\\"><span class=\\\"k-listgroup-form-row\\\"><span class=\\\"k-listgroup-form-field-label k-item-title\\\">\" + (groups[i].columns[idx].title) + \"</span><span class=\\\"k-listgroup-form-field-wrapper\\\"><input type=\\\"checkbox\\\" title=\\\"\" + (groups[i].columns[idx].title) + \"\\\" data-\" + ns + \"field=\\\"\" + (groups[i].columns[idx].field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (groups[i].columns[idx].index) + \"\\\" data-\" + ns + \"uid=\\\"\" + (groups[i].columns[idx].uid) + \"\\\" data-\" + ns + \"locked=\\\"\" + (groups[i].columns[idx].locked) + \"\\\"/></span></span></li>\\\"\";\n                    }\n\n                    result += \"</ul>\";\n                }\n            } else {\n                result += \"<ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\";\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    result += \"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item\\\"><span class=\\\"k-listgroup-form-row\\\"><span class=\\\"k-listgroup-form-field-label k-item-title\\\">\" + (columns[idx].title) + \"</span><span class=\\\"k-listgroup-form-field-wrapper\\\"><input type=\\\"checkbox\\\" title=\\\"\" + (columns[idx].title) + \"\\\" data-\" + ns + \"field=\\\"\" + (columns[idx].field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (columns[idx].index) + \"\\\" data-\" + ns + \"uid=\\\"\" + (columns[idx].uid) + \"\\\" data-\" + ns + \"locked=\\\"\" + (columns[idx].locked) + \"\\\"/></span></span></li>\";\n                }\n\n                result += \"</ul>\";\n            }\n\n            return result;\n        }\n\n        var SORTABLE_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-sort-asc\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.sortAscending) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-sort-desc\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.sortDescending) + \"</span></span></li>\");\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-lock\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"lock\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.lock) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-unlock\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"unlock\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.unlock) + \"</span></span></li>\");\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-stick\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"stick\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.stick) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-unstick\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"unstick\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.unstick) + \"</span></span></li>\");\n        };\n\n        var FILTERABLE_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-filter-item\\\"><span class=\\\"k-link k-filterable\\\">\" + (kendo.ui.icon(\"filter\")) + \"<span class=\\\"k-item-title\\\">\" + (messages.filter) + \"</span><span class=\\\"k-select\\\">\" + (kendo.ui.icon(\"chevron-right\")) + \"</span></span></li>\");\n        };\n\n        var COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n            var hasGroups = ref.hasGroups;\n            var columns = ref.columns;\n            var groups = ref.groups;\n            var ns = ref.ns;\n\n            return (\"<li class=\\\"k-columns-item\\\"><span class=\\\"k-list-title\\\">\" + (messages.columnVisibility) + \"</span>\" + (mobileColumnsTemplateIterator(columns, groups, ns, hasGroups)) + \"</li>\");\n        };\n\n        var mobileTemplate = function (ref) {\n            var messages = ref.messages;\n            var title = ref.title;\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var hasGroups = ref.hasGroups;\n            var columns = ref.columns;\n            var groups = ref.groups;\n            var ns = ref.ns;\n\n            return (\"<div data-\" + ns + \"role=\\\"view\\\" class=\\\"k-grid-column-menu\\\"><div data-\" + ns + \"role=\\\"header\\\" class=\\\"k-header\\\"><a href=\\\"#\\\" class=\\\"k-header-cancel k-link\\\" title=\\\"\" + (messages.cancel) + \"\\\" aria-label=\\\"\" + (messages.cancel) + \"\\\">\" + (kendo.ui.icon(\"chevron-left\")) + \"</a>\" + (messages.settings) + \"<a href=\\\"#\\\" class=\\\"k-header-done k-link\\\" title=\\\"\" + (messages.done) + \"\\\" aria-label=\\\"\" + (messages.done) + \"\\\">\" + (kendo.ui.icon(\"check\")) + \"</a></div><div class=\\\"k-column-menu\\\"><ul class=\\\"k-reset\\\"><li><span class=\\\"k-list-title\\\">\" + (messages.column) + \": \" + title + \"</span><ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\" + (sortable ? SORTABLE_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (filterable ? FILTERABLE_PARTIAL_MOBILE({ messages: messages }) : '') + \"</ul></li>\" + (showColumns ? COLUMNS_PARTIAL_MOBILE({ messages: messages, hasGroups: hasGroups, columns: columns, groups: groups, ns: ns }) : '') + \"<li class=\\\"k-item k-clear-wrap\\\"><ul class=\\\"k-listgroup k-listgroup-flush\\\"><li class=\\\"k-listgroup-item\\\"><span class=\\\"k-link k-label k-clear\\\" title=\\\"\" + (messages.clear) + \"\\\" aria-label=\\\"\" + (messages.clear) + \"\\\">\" + (messages.clear) + \"</span></li></ul></li></ul></div></div>\");\n        };\n\n        var MobileMenu = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                that._createCheckBoxes();\n\n                that.element.on(\"click\" + NS, \"li.k-item:not(.k-separator):not(.k-disabled):not(:has(.k-switch))\", \"_click\");\n            },\n\n            events: [ SELECT ],\n\n            _click: function(e) {\n                var that = this;\n\n                if (!$(e.target).is(\"[type=checkbox]\")) {\n                    e.preventDefault();\n                }\n\n                if ($(e.target).hasClass(\"k-clear\")) {\n                    that._cancelChanges(true);\n\n                    return;\n                }\n\n                if ($(e.target).hasClass(\"k-filterable\")) {\n                    that._cancelChanges(true);\n                    that.trigger(SELECT, { item: e.currentTarget });\n\n                    return;\n                }\n\n                that._updateSelectedItems(e.currentTarget);\n            },\n\n            _updateSelectedItems: function(el) {\n                var that = this;\n                var item = $(el);\n                var state = that.options.columnMenu.view.state || { columns: {} };\n                var id = item.prop(\"id\");\n\n                if (item.hasClass(\"k-filter-item\")) {\n                    return;\n                }\n\n                if (state[id]) {\n                    state[id] = false;\n                } else {\n                    state[id] = true;\n                }\n\n                if (item.hasClass(\"k-sort-asc\") || item.hasClass(\"k-sort-desc\")) {\n                    var dir;\n                    var otherItem;\n                    var otherItemId;\n\n                    if (item.hasClass(\"k-sort-asc\")) {\n                        dir = \"asc\";\n                        otherItem = that.element.find(\".k-sort-desc\");\n                    } else {\n                        dir = \"desc\";\n                        otherItem = that.element.find(\".k-sort-asc\");\n                    }\n\n                    otherItemId = otherItem.prop(\"id\");\n\n                    if (dir === state.initialSort && !item.hasClass(\"k-selected\")) {\n                        state[id] = false;\n                    }\n\n                    if (state[otherItemId]) {\n                        state[otherItemId] = false;\n                    }\n\n                    otherItem.removeClass(ACTIVE);\n                }\n\n                if (item.hasClass(ACTIVE)) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n            },\n\n            _cancelChanges: function(force) {\n                var that = this;\n                var menu = that.options.columnMenu;\n                var view = menu.view;\n                var state = view.state || { columns: {} };\n                var columns = state.columns;\n\n                that.element.find(\".\" + ACTIVE).removeClass(ACTIVE);\n                menu.refresh();\n\n                if (force) {\n                    var selectedItems = [];\n\n                    for (var key in columns) {\n                        if (columns.hasOwnProperty(key)) {\n                            if (columns[key] === true) {\n                                var item = view.element.find(\"#\" + key);\n\n                                selectedItems.push(item[0]);\n                            }\n                        }\n                    }\n                    // In order to use the columns hide/show validation,\n                    // triggering the Select event must be done backwards\n                    for (var i = selectedItems.length - 1; i >= 0; i--) {\n                        that.trigger(SELECT, { item: selectedItems[i] });\n                    }\n\n                    if (menu.options.hasLockableColumns) {\n                        menu._updateLockedColumns();\n                    }\n\n                    if (menu.options.hasStickableColumns) {\n                        menu._updateStickyColumns();\n                    }\n                }\n\n                that.options.columnMenu.view.state = { columns: {} };\n            },\n\n            _applyChanges: function() {\n                var that = this;\n                var view = that.options.columnMenu.view;\n                var state = view.state || { columns: {} };\n\n                for (var key in state) {\n                    if (state.hasOwnProperty(key)) {\n                        if (key !== \"initialSort\" && key !== \"columns\" && state[key] === true) {\n                            var item = view.element.find(\"#\" + key);\n\n                            if (item.hasClass(ACTIVE)) {\n                                item.removeClass(ACTIVE);\n                            } else {\n                                item.addClass(ACTIVE);\n                            }\n\n                            that.trigger(SELECT, { item: item[0] });\n                        }\n                    }\n                }\n            },\n\n            _createCheckBoxes: function() {\n                var that = this;\n\n                that.element.find(\".k-columns-item\").find(\"[type='checkbox']\").kendoSwitch({\n                    messages: {\n                        checked: \"\",\n                        unchecked: \"\"\n                    },\n                    change: function(e) {\n                        var item = e.sender.element.closest(\".k-item\");\n                        var state = that.options.columnMenu.view.state || { columns: {} };\n                        var id = item.prop(\"id\");\n\n                        if (state.columns[id]) {\n                            state.columns[id] = false;\n                        } else {\n                            state.columns[id] = true;\n                        }\n\n                        that.trigger(SELECT, { item: item });\n                    }\n                });\n            },\n\n            _destroyCheckBoxes: function() {\n                var that = this;\n                var elements = that.element.find(\".k-columns-item\").find(\"[type='checkbox']\");\n                var switchWidget;\n\n                for (var i = 0; i < elements.length; i++) {\n                    switchWidget = elements.eq(i).data(\"kendoSwitch\");\n\n                    if (switchWidget) {\n                        switchWidget.destroy();\n                    }\n                }\n            },\n\n            close: function() {\n                this.options.pane.navigate(\"\");\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.element.off(NS);\n                that._destroyCheckBoxes();\n            }\n        });\n\n        ui.plugin(ColumnMenu);\n    })(window.kendo.jQuery);\n\n}));\n"]}