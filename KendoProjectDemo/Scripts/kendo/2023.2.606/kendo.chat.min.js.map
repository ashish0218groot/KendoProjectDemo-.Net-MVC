{"version":3,"file":"kendo.chat.min.js","names":["factory","define","amd","$","kendo","Widget","extend","NS","keys","ChatMessageBox","window","jQuery","ui","init","element","options","fn","call","this","_wrapper","_attachEvents","_typing","events","messages","placeholder","toggleButton","sendButton","destroy","input","off","remove","empty","styles","inputId","guid","addClass","hidden","html","attr","appendTo","inputWrapper","inputSuffix","toolbar","toggleable","buttons","length","button","buttonFlat","iconButton","buttonToggle","type","title","toolbarId","append","buttonSend","on","_keydown","bind","_input","_inputFocusout","_buttonClick","_toggleToolbar","start","val","_triggerTyping","e","keyCode","ENTER","preventDefault","_sendMessage","F10","trigger","value","args","text","ev","originalEvent","buttonIcon","chat","undefined$1","DATA_K_BUTTON_NAME","SCROLL_LEFT_NAME","SCROLL_RIGHT_NAME","VISIBLE","TABINDEX","DEFAULT_ANIMATION","effects","duration","NO_ANIMATION","expand","show","collapse","hide","ChatToolBar","toolbarOptions","name","buttonsDefined","_createButtonList","scrollable","buttonsWidth","width","_initScrolling","_setupAnimation","toggle","_onClick","_onKeydown","buttonList","i","_createButton","first","removeAttr","btnOptions","attributes","buttonElm","tabindex","data","buttonDefaults","icon","iconClass","prepend","renderIcon","target","closest","is","scrollButton","_scrolling","_scroll","key","LEFT","_focusButton","RIGHT","dir","current","not","candidate","index","removeAttribute","focus","scrollButtonLeft","scrollButtonLeftIcon","class","scrollButtonRight","scrollButtonRightIcon","_refreshScrollButtons","commandName","that","buttonWidth","maxScrollSize","scrollAmmount","scrollValue","currentScrollLeft","Math","min","max","scrollLeft","isNaN","parseInt","animation","defaultExpandAnimation","defaultCollapseAnimation","reverse","_animationComplete","_animationCompleteExpand","round","scrollWidth","clientWidth","children","last","outerWidth","skipAnimation","complete","kendoStop","kendoAnimate","encode","htmlEncode","DOT","IMG_TEMPLATE","ref","url","MESSAGE_GROUP_TEMPLATE","noAvatar","SELF_MESSAGE_GROUP_TEMPLATE","TEXT_MESSAGE_TEMPLATE","timestamp","toString","parseDate","TYPING_INDICATOR_TEMPLATE","CARD_ACTIONS_TEMPLATE","map","CARD_ACTION_BUTTON_TEMPLATE","join","HERO_CARD_TEMPLATE","images","subtitle","HERO_IMG_TEMPLATE","Templates","Components","registerTemplate","templateName","template","getTemplate","suggestedActions","action","SUGGESTED_ACTION_TEMPLATE","registerComponent","componentName","component","getComponent","Component","Class","view","Calendar","kendoCalendar","change","viewStyles","wrapper","messageList","messageListContent","messageTime","messageGroup","message","only","middle","author","avatar","self","buttonPrimary","scrollButtonIconLeft","scrollButtonIconRight","typingIndicator","typingIndicatorBubble","bubble","suggestedAction","cardWrapper","cardDeckScrollWrap","cardDeck","cardList","card","cardRich","cardBody","cardImage","cardTitle","cardSubtitle","cardActions","cardActionsVertical","cardAction","selected","ChatView","_list","_lastSender","typingParticipants","_scrollable","isTyping","areTyping","and","_scrollDraggable","list","messageListLabel","_listClick","_messageClick","_suggestedActionClick","_cardActionClick","_suggestedActionKeydown","_scrollButtonClick","currentTarget","scrollToLeft","find","scrollContainer","siblings","cardWidth","renderMessage","sender","Date","bubbleElement","_renderTemplate","_renderBubble","_removeTypingParticipant","id","renderSuggestedActions","_removeSuggestedActions","_scrollToBottom","renderAttachments","_renderAttachmentWrapper","attachmentLayout","cardContainer","attachments","cardElement","contentType","content","_removeTypingIndicator","renderComponent","layout","buttonLeft","_renderScrollButton","buttonRight","directionClass","targetElement","hasClass","parents","_clearSelection","SPACEBAR","messageType","group","_getMessageGroup","_appendToGroup","componentType","templateOptions","_getMessageGroupTemplate","appendTarget","iconUrl","user","messageElement","childrenCount","filter","removeClass","_renderTypingIndicator","participants","indicator","_addTypingParticipant","_composeTypingParticipantsText","found","push","splice","typingAction","typingText","replace","trimRight","selectedClass","scrollTop","prop","chatStyles","canvas","viewWrapper","messageBoxWrapper","toolbarBoxWrapper","Chat","_events","_user","_view","_toolbar","_messageBox","notify","setOptions","_setEvents","messageBox","unbind","_resetToolbarButtons","getUser","height","uiElements","css","postMessage","toggleToolbar","postArgs","from","renderUserTypingIndicator","clearUserTypingIndicator","removeTypingIndicator","plugin"],"sources":["kendo.chat.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.icons', 'kendo.draganddrop'], factory) :\n    factory();\n})((function () {\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var NS = \".kendoChat\";\n        var keys = kendo.keys;\n        var SEND_ICON = '<svg version=\"1.1\" ixmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 16 16\" xml:space=\"preserve\"><path d=\"M0,14.3c-0.1,0.6,0.3,0.8,0.8,0.6l14.8-6.5c0.5-0.2,0.5-0.6,0-0.8L0.8,1.1C0.3,0.9-0.1,1.1,0,1.7l0.7,4.2C0.8,6.5,1.4,7,1.9,7.1l8.8,0.8c0.6,0.1,0.6,0.1,0,0.2L1.9,8.9C1.4,9,0.8,9.5,0.7,10.1L0,14.3z\"/></svg>';\n        var TOGGLE_ICON = '<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512;\" xml:space=\"preserve\"><g>   <path d=\"M128,240c0-26.4-21.6-48-48-48s-48,21.6-48,48s21.6,48,48,48S128,266.4,128,240z\"/>   <path d=\"M192,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C213.6,192,192,213.6,192,240z\"/>   <path d=\"M352,240c0,26.4,21.6,48,48,48c26.4,0,48-21.6,48-48s-21.6-48-48-48C373.6,192,352,213.6,352,240z\"/></g></svg>';\n\n        var messageBoxStyles = {\n            input: \"k-input-inner\",\n            inputWrapper: \"k-textbox k-input k-input-lg k-input-solid\",\n            button: \"k-button\",\n            buttonFlat: \"k-button-lg k-button-flat k-button-flat-base\",\n            iconButton: \"k-icon-button\",\n            buttonIcon: \"k-button-icon\",\n            buttonSend: \"k-button-send\",\n            buttonToggle: \"k-button-toggle\",\n            hidden: \"k-hidden\",\n            inputSuffix: \"k-input-suffix\"\n        };\n\n        var ChatMessageBox = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._wrapper();\n\n                this._attachEvents();\n\n                this._typing = false;\n            },\n\n            events: [\n                \"focusToolbar\",\n                \"sendMessage\",\n                \"toggleToolbar\",\n                \"typingEnd\",\n                \"typingStart\"\n            ],\n\n            options: {\n                messages: {\n                    placeholder: \"Type a message...\",\n                    toggleButton: \"Toggle toolbar\",\n                    sendButton: \"Send message\"\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.input) {\n                    this.input.off(NS);\n                    this.input.remove();\n                    this.input = null;\n                }\n\n                this.element.off(NS);\n                this.element.empty();\n            },\n\n            _wrapper: function() {\n                var styles = ChatMessageBox.styles;\n                var options = this.options;\n                var messages = options.messages;\n                var inputId = \"inputId_\" + kendo.guid();\n\n                $(\"<label>\")\n                    .addClass(styles.hidden)\n                    .html(messages.placeholder)\n                    .attr(\"for\", inputId)\n                    .appendTo(this.element);\n\n                this.inputWrapper = this.element\n                    .addClass(styles.inputWrapper)\n                    .appendTo(this.element);\n\n                this.input = $(\"<input type='text'>\")\n                    .addClass(styles.input)\n                    .attr(\"id\", inputId)\n                    .attr(\"placeholder\", messages.placeholder)\n                    .appendTo(this.inputWrapper);\n\n                this.inputSuffix = $(\"<span></span>\")\n                    .addClass(styles.inputSuffix)\n                    .appendTo(this.inputWrapper);\n\n                if (options.toolbar && options.toolbar.toggleable && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    $(\"<button>\")\n                        .addClass(styles.button)\n                        .addClass(styles.buttonFlat)\n                        .addClass(styles.iconButton)\n                        .addClass(styles.buttonToggle)\n                        .attr({\n                            type: \"button\",\n                            title: messages.toggleButton,\n                            \"aria-label\": messages.toggleButton,\n                            \"aria-controls\": options.toolbarId\n                        })\n                        .append($(TOGGLE_ICON))\n                        .appendTo(this.inputSuffix);\n                }\n\n                $(\"<button>\")\n                    .addClass(styles.button)\n                    .addClass(styles.buttonFlat)\n                    .addClass(styles.iconButton)\n                    .addClass(styles.buttonSend)\n                    .append($(SEND_ICON))\n                    .appendTo(this.inputSuffix)\n                    .attr(\"title\", messages.sendButton)\n                    .attr(\"aria-label\", messages.sendButton);\n            },\n\n            _attachEvents: function() {\n                var styles = ChatMessageBox.styles;\n\n                this.input\n                    .on(\"keydown\" + NS, this._keydown.bind(this))\n                    .on(\"input\" + NS, this._input.bind(this))\n                    .on(\"focusout\" + NS, this._inputFocusout.bind(this));\n\n                this.element\n                    .on(\"click\" + NS, DOT + styles.buttonSend, this._buttonClick.bind(this));\n\n                this.element\n                    .on(\"click\" + NS, DOT + styles.buttonToggle, this._toggleToolbar.bind(this));\n            },\n\n            _input: function() {\n                var currentValue = this.input.val();\n                var start = currentValue.length > 0;\n\n                this._triggerTyping(start);\n            },\n\n            _keydown: function(e) {\n                var key = e.keyCode;\n\n                switch (key) {\n                    case keys.ENTER:\n                        e.preventDefault();\n\n                        this._sendMessage();\n                        break;\n                    case keys.F10:\n                        e.preventDefault();\n\n                        this.trigger(\"focusToolbar\");\n                        break;\n                }\n            },\n\n            _buttonClick: function(e) {\n                e.preventDefault();\n\n                this._sendMessage();\n            },\n\n            _sendMessage: function() {\n                var value = this.input.val();\n\n                if (!value.length) {\n                    return;\n                }\n\n                this._triggerTyping(false);\n\n                var args = {\n                    text: value\n                };\n\n                this.trigger(\"sendMessage\", args);\n\n                this.input.val(\"\");\n            },\n\n            _inputFocusout: function() {\n                this._triggerTyping(false);\n            },\n\n            _triggerTyping: function(start) {\n                if (start) {\n                    if (!this._typing) {\n                        this.trigger(\"typingStart\", {});\n                        this._typing = true;\n                    }\n                } else {\n                    if (this._typing) {\n                        this.trigger(\"typingEnd\", {});\n                        this._typing = false;\n                    }\n                }\n            },\n\n            _toggleToolbar: function(ev) {\n                this.trigger(\"toggleToolbar\", { originalEvent: ev });\n            }\n        });\n\n        extend(true, ChatMessageBox, { styles: messageBoxStyles });\n        extend(kendo, {\n            chat: {\n                ChatMessageBox: ChatMessageBox\n            }\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var NS = \".kendoChat\";\n\n        var DATA_K_BUTTON_NAME = \"kButtonName\";\n        var SCROLL_LEFT_NAME = \"chatToolbarScrollLeft\";\n        var SCROLL_RIGHT_NAME = \"chatToolbarScrollRight\";\n        var VISIBLE = \":visible\";\n        var TABINDEX = \"tabindex\";\n\n        var DEFAULT_ANIMATION = {\n            effects: \"expand:vertical\",\n            duration: 200\n        };\n        var NO_ANIMATION = {\n            expand: {\n                show: true\n            },\n            collapse: {\n                hide: true\n            }\n        };\n\n        var toolbarStyles = {\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            buttonList: \"k-button-list\",\n            scrollButton: \"k-scroll-button\",\n            scrollButtonLeft: \"k-scroll-button-left\",\n            scrollButtonRight: \"k-scroll-button-right\",\n            scrollButtonLeftIcon: \"chevron-left\",\n            scrollButtonRightIcon: \"chevron-right\",\n            iconButton: \"k-icon-button\"\n        };\n\n        var ChatToolBar = Widget.extend({\n            init: function(element, options) {\n                options = extend({}, options, { name: \"ChatToolbar\" });\n                var toolbarOptions = options.toolbar;\n                var buttonsDefined = toolbarOptions.buttons && toolbarOptions.buttons.length;\n\n                Widget.fn.init.call(this, element, options);\n\n                if (buttonsDefined) {\n                    this._createButtonList();\n                }\n\n                if (buttonsDefined && toolbarOptions.scrollable &&\n                        this.buttonsWidth() > this.element.width()) {\n                    this._initScrolling();\n                }\n\n                this._setupAnimation();\n\n                if (buttonsDefined && toolbarOptions.toggleable) {\n                    this.toggle(true);\n                }\n\n                this.element\n                    .on(\"click\" + NS, this._onClick.bind(this))\n                    .on(\"keydown\" + NS, this._onKeydown.bind(this));\n            },\n\n            events: [\n                \"click\"\n            ],\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                this.element.off(NS);\n                this.element.empty();\n            },\n\n            _createButtonList: function() {\n                var that = this;\n                var styles = ChatToolBar.styles;\n                var buttons = that.options.toolbar.buttons;\n                var buttonList = $(\"<div class='\" + styles.buttonList + \"'></div>\");\n\n                for (var i = 0; i < buttons.length; i++) {\n                    var button = that._createButton(buttons[i]);\n                    buttonList.append(button);\n                }\n\n                buttonList.appendTo(this.element);\n\n                this.buttonList = buttonList;\n                this.buttons().first().removeAttr(TABINDEX);\n            },\n\n            _createButton: function(btnOptions) {\n                var styles = ChatToolBar.styles;\n                var buttonElm = $(\"<button>\");\n                var attributes;\n\n                if (typeof btnOptions === \"string\") {\n                    btnOptions = {\n                        name: btnOptions\n                    };\n                }\n\n                attributes = $.extend({}, btnOptions.attr || {}, {\n                    title: btnOptions.text || btnOptions.name,\n                    \"aria-label\": btnOptions.text || btnOptions.name,\n                    type: \"button\",\n                    tabindex: -1\n                });\n\n                buttonElm\n                    .attr(attributes)\n                    .addClass(btnOptions.name)\n                    .data(DATA_K_BUTTON_NAME, btnOptions.name)\n                    .addClass(styles.button)\n                    .addClass(styles.buttonDefaults);\n\n                if (btnOptions.icon || btnOptions.iconClass) {\n                    buttonElm.addClass(styles.iconButton);\n                    buttonElm.prepend(kendo.html.renderIcon({ icon: btnOptions.icon, iconClass: \"k-button-icon\" + (btnOptions.iconClass ? (\" \" + (btnOptions.iconClass)) : \"\") }));\n                }\n\n                return buttonElm;\n            },\n\n            _onClick: function(ev) {\n                var styles = ChatToolBar.styles;\n                var target = $(ev.target).closest(DOT + styles.button);\n\n                if (target.is(DOT + styles.scrollButton) && !this._scrolling) {\n                    this._scroll(target.data(DATA_K_BUTTON_NAME));\n                }\n\n                if (target.data(DATA_K_BUTTON_NAME)) {\n                    this.buttons().attr(TABINDEX, -1);\n                    target.removeAttr(TABINDEX);\n\n                    this.trigger(\"click\", {\n                        button: target[0],\n                        name: target.data(DATA_K_BUTTON_NAME),\n                        originalEvent: ev\n                    });\n                }\n            },\n\n            _onKeydown: function(e) {\n                var key = e.keyCode,\n                    keys = kendo.keys;\n\n                switch (key) {\n                    case keys.LEFT:\n                        this._focusButton(-1);\n                        break;\n                    case keys.RIGHT:\n                        this._focusButton(1);\n                        break;\n                }\n            },\n\n            _focusButton: function(dir) {\n                var buttons = this.buttons(),\n                    current = buttons.not(\"[tabindex=-1]\"),\n                    candidateIndex = current.index() + dir,\n                    candidate = buttons[candidateIndex];\n\n                if (candidate) {\n                    current.attr(TABINDEX, -1);\n                    candidate.removeAttribute(TABINDEX);\n                    candidate.focus();\n                }\n            },\n\n            _initScrolling: function() {\n                var styles = ChatToolBar.styles;\n\n                this.scrollButtonLeft = this._createButton({\n                    name: SCROLL_LEFT_NAME,\n                    icon: styles.scrollButtonLeftIcon,\n                    attr: {\n                        \"class\": styles.scrollButton + \" \" + styles.scrollButtonLeft\n                    }\n                });\n\n                this.scrollButtonRight = this._createButton({\n                    name: SCROLL_RIGHT_NAME,\n                    icon: styles.scrollButtonRightIcon,\n                    attr: {\n                        \"class\": styles.scrollButton + \" \" + styles.scrollButtonRight\n                    }\n                });\n\n                this.element.prepend(this.scrollButtonLeft);\n                this.element.append(this.scrollButtonRight);\n                this._refreshScrollButtons();\n\n                this.element.on(\"keydown\" + NS, this._refreshScrollButtons.bind(this));\n            },\n\n            _scroll: function(commandName) {\n                var that = this;\n                var buttonWidth = that.buttonWidth();\n                var maxScrollSize = this.maxScrollSize();\n                var scrollAmmount = commandName === SCROLL_LEFT_NAME ? buttonWidth * -1 : buttonWidth;\n                var currentScroll = this.currentScrollLeft();\n                var scrollValue = currentScroll + scrollAmmount;\n                scrollValue = Math.min(Math.max(scrollValue, 0), maxScrollSize);\n\n                if (commandName !== SCROLL_LEFT_NAME && commandName !== SCROLL_RIGHT_NAME) {\n                    return;\n                }\n\n                kendo.scrollLeft(that.buttonList, scrollValue);\n                that._refreshScrollButtons(scrollValue);\n            },\n\n            _refreshScrollButtons: function(value) {\n                var maxScrollSize = this.maxScrollSize();\n                var currentScrollLeft = value === undefined$1 || isNaN(parseInt(value, 10)) ? this.currentScrollLeft() : value;\n\n                if (!this.scrollButtonLeft && !this.scrollButtonRight) {\n                    return;\n                }\n\n                this.scrollButtonLeft.toggle(currentScrollLeft !== 0);\n                this.scrollButtonRight.toggle(currentScrollLeft !== maxScrollSize);\n            },\n\n            _setupAnimation: function() {\n                var animation = this.options.toolbar.animation;\n                var defaultExpandAnimation = extend({}, DEFAULT_ANIMATION);\n                var defaultCollapseAnimation = extend({\n                    reverse: true,\n                    hide: true\n                }, DEFAULT_ANIMATION);\n\n                if (animation === false) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                } else {\n                    animation = extend(true, {\n                        expand: defaultExpandAnimation,\n                        collapse: defaultCollapseAnimation\n                    }, animation);\n                }\n\n                this.options.toolbar.animation = animation;\n            },\n\n            _animationComplete: function() {\n                this._refreshScrollButtons();\n            },\n\n            _animationCompleteExpand: function() {\n                this._animationComplete();\n                this.buttons().not(\"[tabindex=-1]\").trigger(\"focus\");\n            },\n\n            currentScrollLeft: function() {\n                return Math.round(kendo.scrollLeft(this.buttonList));\n            },\n\n            maxScrollSize: function() {\n                return Math.round(this.buttonList[0].scrollWidth - this.buttonList[0].clientWidth);\n            },\n\n            buttons: function() {\n                var styles = ChatToolBar.styles;\n                return this.buttonList ? this.buttonList.children(DOT + styles.button) : null;\n            },\n\n            buttonWidth: function() {\n                return Math.round(this.buttons().last().outerWidth(true));\n            },\n\n            buttonsWidth: function() {\n                var width = 0;\n\n                if (this.buttons()) {\n                    width = this.buttonWidth() * this.buttons().length;\n                }\n\n                return width;\n            },\n\n            toggle: function(skipAnimation) {\n                var animation = this.options.toolbar.animation;\n\n                if (skipAnimation) {\n                    animation = extend(true, {}, NO_ANIMATION);\n                }\n\n                animation.expand.complete = this._animationCompleteExpand.bind(this);\n                animation.collapse.complete = this._animationComplete.bind(this);\n\n                if (this.element.is(VISIBLE)) {\n                    this.element.kendoStop().kendoAnimate(animation.collapse);\n                } else {\n                    this.element.kendoStop().kendoAnimate(animation.expand);\n                }\n\n            },\n\n            focus: function() {\n                if (!this.element.is(VISIBLE)) {\n                    this.toggle();\n                } else {\n                    this.buttons().not(\"[tabindex=-1]\").trigger(\"focus\");\n                }\n            }\n        });\n\n        extend(true, ChatToolBar, { styles: toolbarStyles });\n        extend(kendo.chat, {\n            ChatToolBar: ChatToolBar\n        });\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var encode = kendo.htmlEncode;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n        var SPACE = \" \";\n        var NS = \".kendoChat\";\n\n        var IMG_TEMPLATE = function (ref) {\n            var url = ref.url;\n            var text = ref.text;\n            var styles = ref.styles;\n\n            return (\"<img src=\\\"\" + url + \"\\\" alt=\\\"\" + (encode(text)) + \"\\\" class=\\\"\" + (styles.avatar) + \"\\\">\");\n        };\n\n        var MESSAGE_GROUP_TEMPLATE = function (ref) {\n            var text = ref.text;\n            var url = ref.url;\n            var styles = ref.styles;\n\n            return (\"<div \" + (encode(text)) + \" class=\\\"\" + (styles.messageGroup) + \" \" + (url ? \"\" : styles.noAvatar) + \"\\\">\\n            <p class=\\\"\" + (styles.author) + \"\\\">\" + (encode(text)) + \"</p>\\n            \" + (url ? IMG_TEMPLATE({ url: url, text: text, styles: styles }) : '') + \"\\n        </div>\");\n        };\n\n        var SELF_MESSAGE_GROUP_TEMPLATE = function (ref) {\n            var url = ref.url;\n            var text = ref.text;\n            var styles = ref.styles;\n\n            return (\"<div me class=\\\"\" + (styles.messageGroup) + \" \" + (styles.self) + \" \" + (url ? \"\" : styles.noAvatar) + \"\\\">\\n        \" + (url ? IMG_TEMPLATE({ url: url, text: text, styles: styles }) : '') + \"\\n    </div>\");\n        };\n\n        var TEXT_MESSAGE_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var text = ref.text;\n            var timestamp = ref.timestamp;\n\n            return (\"<div class=\\\"\" + (styles.message) + \"\\\">\\n        <time class=\\\"\" + (styles.messageTime) + \"\\\">\" + (kendo.toString(kendo.parseDate(timestamp), \"HH:mm:ss\")) + \"</time>\\n        <div class=\\\"\" + (styles.bubble) + \"\\\">\" + (encode(text)) + \"</div>\\n    </div>\");\n        };\n\n        var TYPING_INDICATOR_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var text = ref.text;\n\n            return (\"<div class=\\\"\" + (styles.messageListContent) + \" \" + (styles.typingIndicatorBubble) + \"\\\">\\n        <p class=\\\"\" + (styles.author) + \"\\\">\" + (encode(text)) + \"</p>\\n        <div class=\\\"\" + (styles.message) + \"\\\">\\n            <div class=\\\"\" + (styles.bubble) + \"\\\">\\n                <div class=\\\"\" + (styles.typingIndicator) + \"\\\">\\n                    <span></span><span></span><span></span>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\");\n        };\n\n        var SUGGESTED_ACTION_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var action = ref.action;\n\n            return (\"<span role=\\\"button\\\" tabindex=\\\"0\\\" class=\\\"\" + (styles.suggestedAction) + \"\\\" data-value=\\\"\" + (encode(action.value)) + \"\\\">\" + (encode(action.title)) + \"</span>\");\n        };\n\n        var SUGGESTED_ACTIONS_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var suggestedActions = ref.suggestedActions;\n\n            return (\"<div class=\\\"\" + (styles.suggestedActions) + \"\\\">\\n        \" + (suggestedActions.map(function (action) { return SUGGESTED_ACTION_TEMPLATE({ styles: styles, action: action }); }).join('')) + \"\\n    </div>\");\n        };\n\n        var HERO_IMG_TEMPLATE = function (ref) {\n            var images = ref.images;\n            var styles = ref.styles;\n\n            return (\"<img src=\\\"\" + (encode(images[0].url)) + \"\\\" alt=\\\"\" + (images[0].alt) + \"\\\" class=\\\"\" + (styles.cardImage) + \"\\\" />\");\n        };\n\n        var CARD_ACTION_BUTTON_TEMPLATE = function (ref) {\n            var button = ref.button;\n            var styles = ref.styles;\n\n            return (\"<span class=\\\"\" + (styles.cardAction) + \"\\\"><span class=\\\"\" + (styles.button) + \" \" + (styles.buttonPrimary) + \"\\\" data-value=\\\"\" + (encode(button.value)) + \"\\\">\" + (encode(button.title)) + \"</span></span>\");\n        };\n\n        var CARD_ACTIONS_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var buttons = ref.buttons;\n\n            return (\"<div class=\\\"\" + (styles.cardActions) + \" \" + (styles.cardActionsVertical) + \"\\\">\\n        \" + (buttons.map(function (button) { return CARD_ACTION_BUTTON_TEMPLATE({ styles: styles, button: button }); }).join('')) + \"\\n    </div>\");\n        };\n\n        var HERO_CARD_TEMPLATE = function (ref) {\n            var styles = ref.styles;\n            var images = ref.images;\n            var buttons = ref.buttons;\n            var title = ref.title;\n            var subtitle = ref.subtitle;\n            var text = ref.text;\n\n            return (\"<div class=\\\"\" + (styles.card) + \" \" + (styles.cardRich) + \"\\\">\\n        \" + ((typeof images !== \"undefined\" && images.length > 0) ? HERO_IMG_TEMPLATE({ images: images, styles: styles }) : '') + \"\\n        <div class=\\\"\" + (styles.cardBody) + \"\\\">\\n            \" + (typeof title !== \"undefined\" ? (function () { return (\"<h5 class=\\\"\" + (styles.cardTitle) + \"\\\">\" + (encode(title)) + \"</h5>\"); })() : '') + \"\\n            \" + (typeof subtitle !== \"undefined\" ? (function () { return (\"<h6 class=\\\"\" + (styles.cardSubtitle) + \"\\\">\" + (encode(subtitle)) + \"</h6>\"); })() : '') + \"\\n            \" + (typeof text !== \"undefined\" ? (function () { return (\"<p>\" + (encode(text)) + \"</p>\"); })() : '') + \"\\n        </div>\\n        \" + ((typeof buttons !== \"undefined\" && buttons.length > 0) ? CARD_ACTIONS_TEMPLATE({ buttons: buttons, styles: styles }) : '') + \"\\n    </div>\");\n        };\n\n        extend(kendo.chat, {\n            Templates: {},\n            Components: {}\n        });\n\n        kendo.chat.registerTemplate = function(templateName, template) {\n            kendo.chat.Templates[templateName] = kendo.template(template);\n        };\n\n        kendo.chat.getTemplate = function(templateName) {\n            return kendo.chat.Templates[templateName] || TEXT_MESSAGE_TEMPLATE;\n        };\n\n        kendo.chat.registerTemplate(\"text\", TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate(\"message\", TEXT_MESSAGE_TEMPLATE);\n        kendo.chat.registerTemplate(\"typing\", TYPING_INDICATOR_TEMPLATE);\n        kendo.chat.registerTemplate(\"suggestedAction\", SUGGESTED_ACTIONS_TEMPLATE);\n        kendo.chat.registerTemplate(\"heroCard\", HERO_CARD_TEMPLATE);\n        kendo.chat.registerTemplate(\"application/vnd.microsoft.card.hero\", HERO_CARD_TEMPLATE);\n\n        kendo.chat.registerComponent = function(componentName, component) {\n            kendo.chat.Components[componentName] = component;\n        };\n\n        kendo.chat.getComponent = function(componentName) {\n            return kendo.chat.Components[componentName] || null;\n        };\n\n        var Component = kendo.chat.Component = kendo.Class.extend({\n            init: function(options, view) {\n                this.element = $('<div></div>');\n                this.options = options;\n                this.view = view;\n            },\n\n            destroy: function() {\n                kendo.destroy(this.element);\n            }\n        });\n\n        var Calendar = Component.extend({\n            init: function(options, view) {\n                Component.fn.init.call(this, options, view);\n\n                this.element.kendoCalendar({\n                    change: function() {\n                        view.trigger(\"suggestedAction\", { text: kendo.toString(this.value(), 'd'), type: \"message\" });\n                    }\n                });\n            },\n\n            destroy: function() {\n            }\n        });\n        kendo.chat.registerComponent(\"calendar\", Calendar);\n\n        var viewStyles = {\n            wrapper: \"k-widget k-chat\",\n            messageList: \"k-avatars\",\n            messageListContent: \"k-message-list-content\",\n            messageTime: \"k-message-time\",\n            messageGroup: \"k-message-group\",\n            message: \"k-message\",\n            only: \"k-only\",\n            first: \"k-first\",\n            middle: \"k-middle\",\n            last: \"k-last\",\n            author: \"k-author\",\n            avatar: \"k-avatar\",\n            noAvatar: \"k-no-avatar\",\n            self: \"k-alt\",\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            iconButton: \"k-icon-button\",\n            buttonIcon: \"k-button-icon\",\n            buttonPrimary: \"k-button-md k-rounded-md k-button-flat k-button-flat-primary\",\n            scrollButtonIconLeft: \"chevron-left\",\n            scrollButtonIconRight: \"chevron-right\",\n            typingIndicator: \"k-typing-indicator\",\n            typingIndicatorBubble: \"k-typing-indicator-bubble\",\n            bubble: \"k-bubble\",\n            suggestedActions: \"k-quick-replies\",\n            suggestedAction: \"k-quick-reply\",\n            cardWrapper: \"k-card-container\",\n            cardDeckScrollWrap: \"k-card-deck-scrollwrap\",\n            cardDeck: \"k-card-deck\",\n            cardList: \"k-card-list\",\n            card: \"k-card\",\n            cardRich: \"k-card-type-rich\",\n            cardBody: \"k-card-body\",\n            cardImage: \"k-card-image\",\n            cardTitle: \"k-card-title\",\n            cardSubtitle: \"k-card-subtitle\",\n            cardActions: \"k-card-actions\",\n            cardActionsVertical: \"k-card-actions-vertical\",\n            cardAction: \"k-card-action\",\n            selected: \"k-selected\"\n        };\n\n        var ChatView = kendo.chat.ChatView = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                this._list();\n\n                this._lastSender = null;\n\n                this.typingParticipants = [];\n\n                this._attachEvents();\n\n                this._scrollable();\n            },\n\n            events: [\n            ],\n\n            options: {\n                messages: {\n                    isTyping: \" is typing.\",\n                    areTyping: \" are typing.\",\n                    and: \" and \"\n                }\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this._scrollDraggable) {\n                    this._scrollDraggable.destroy();\n                }\n\n                this.element.empty();\n                this.element.off(NS);\n\n                this.list = null;\n                this._lastSender = null;\n            },\n\n            _list: function() {\n                var viewStyles = ChatView.styles;\n\n                this.element\n                    .addClass(viewStyles.messageList)\n                    .attr(\"role\", \"log\")\n                    .attr(\"aria-label\", this.options.messages.messageListLabel);\n\n                this.list = $(\"<div>\")\n                    .addClass(viewStyles.messageListContent)\n                    .appendTo(this.element);\n            },\n\n            _attachEvents: function() {\n                var styles = ChatView.styles;\n\n                this.element\n                    .on(\"click\" + NS, this._listClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.message, this._messageClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.suggestedAction, this._suggestedActionClick.bind(this))\n                    .on(\"click\" + NS, DOT + styles.cardAction + SPACE + DOT + styles.button, this._cardActionClick.bind(this));\n\n                this.element.on(\"keydown\" + NS, DOT + styles.suggestedAction, this._suggestedActionKeydown.bind(this));\n            },\n\n            _scrollable: function() {\n                var viewStyles = ChatView.styles;\n\n                this.element\n                    .on(\"click\" + NS, DOT + viewStyles.cardDeckScrollWrap + SPACE + DOT + viewStyles.button, this._scrollButtonClick.bind(this));\n            },\n\n            _scrollButtonClick: function(e) {\n                var viewStyles = ChatView.styles;\n                var button = $(e.currentTarget);\n                var scrollToLeft = button.find(((DOT + viewStyles.buttonIcon) + \"[class*=\" + (viewStyles.scrollButtonIconLeft) + \"]\")).length !== 0;\n                var scrollContainer = button.siblings(DOT + viewStyles.cardDeck);\n                var lastCard = scrollContainer.find(DOT + viewStyles.card).last();\n                var cardWidth = lastCard.outerWidth(true);\n\n                if (scrollToLeft) {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) - cardWidth);\n                } else {\n                    kendo.scrollLeft(scrollContainer, kendo.scrollLeft(scrollContainer) + cardWidth);\n                }\n            },\n\n            getTemplate: function(templateName) {\n                return kendo.chat.getTemplate(templateName);\n            },\n\n            getComponent: function(type) {\n               return kendo.chat.getComponent(type);\n            },\n\n            renderMessage: function(message, sender) {\n                if (!message.timestamp) {\n                    message.timestamp = new Date();\n                }\n\n                if (!message.text) {\n                    message.text = \"\";\n                }\n\n                var bubbleElement = this._renderTemplate(message.type, message);\n\n                this._renderBubble(message.type, bubbleElement, sender);\n\n                if (message.type == \"typing\") {\n                    if (this.typingParticipants.length > 0) {\n                        this._removeTypingParticipant(sender);\n                    }\n                } else {\n                    this._lastSender = sender.id;\n                }\n            },\n\n            renderSuggestedActions: function(suggestedActions) {\n                this._removeSuggestedActions();\n\n                var element = this._renderTemplate(\"suggestedAction\", { suggestedActions: suggestedActions });\n\n                this.list.append(element);\n\n                this._scrollToBottom();\n            },\n\n            renderAttachments: function(options) {\n                var wrapper = this._renderAttachmentWrapper(options.attachmentLayout);\n                var cardContainer = options.attachmentLayout === \"carousel\" ? wrapper.find(DOT + ChatView.styles.cardDeck) : wrapper;\n                var attachments = options.attachments;\n\n                if (!attachments.length) {\n                    return;\n                }\n\n                for (var i = 0; i < attachments.length; i++) {\n                    var cardElement = this._renderTemplate(attachments[i].contentType, attachments[i].content);\n\n                    cardContainer.append(cardElement);\n                }\n\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n\n                this.list.append(wrapper);\n\n                this._lastSender = null;\n            },\n\n            renderComponent: function(type) {\n                var componentType = this.getComponent(type);\n                var component = new componentType({}, this);\n\n                this.list.append(component.element);\n\n                this._scrollToBottom();\n            },\n\n            _renderAttachmentWrapper: function(layout) {\n                var viewStyles = ChatView.styles;\n                var wrapper = $(\"<div>\");\n\n                if (layout === \"carousel\") {\n                    wrapper.addClass(viewStyles.cardDeckScrollWrap);\n\n                    var buttonLeft = this._renderScrollButton(viewStyles.scrollButtonIconLeft);\n                    wrapper.append(buttonLeft);\n\n                    wrapper.append($(\"<div>\").addClass(viewStyles.cardDeck));\n\n                    var buttonRight = this._renderScrollButton(viewStyles.scrollButtonIconRight);\n                    wrapper.append(buttonRight);\n                } else {\n                    wrapper.addClass(viewStyles.cardList);\n                }\n\n                return wrapper;\n            },\n\n            _renderScrollButton: function(directionClass) {\n                var viewStyles = ChatView.styles;\n\n                return $(\"<button>\")\n                    .addClass(viewStyles.button)\n                    .addClass(viewStyles.buttonDefaults)\n                    .addClass(viewStyles.iconButton)\n                    .append(kendo.html.renderIcon({ icon: directionClass, iconClass: viewStyles.buttonIcon }));\n            },\n\n            _removeSuggestedActions: function() {\n                this.list.find(DOT + ChatView.styles.suggestedActions).remove();\n            },\n\n            _listClick: function(e) {\n                var styles = ChatView.styles;\n                var targetElement = $(e.target);\n\n                if (targetElement.hasClass(styles.message) || targetElement.parents(DOT + styles.message).length) {\n                    return;\n                }\n\n                this._clearSelection();\n            },\n\n            _messageClick: function(e) {\n                this._clearSelection();\n\n                $(e.currentTarget).addClass(ChatView.styles.selected);\n            },\n\n            _suggestedActionClick: function(e) {\n                var text = $(e.target).data(\"value\") || \"\";\n\n                this.trigger(\"actionClick\", { text: text });\n\n                this._removeSuggestedActions();\n            },\n\n            _suggestedActionKeydown: function(e) {\n                if (e.keyCode === kendo.keys.SPACEBAR || e.keyCode === kendo.keys.ENTER) {\n                    this._suggestedActionClick(e);\n                }\n            },\n\n            _cardActionClick: function(e) {\n                var text = $(e.target).data(\"value\") || \"\";\n\n                this.trigger(\"actionClick\", { text: text });\n            },\n\n            _renderBubble: function(messageType, bubbleElement, sender) {\n                this._removeSuggestedActions();\n                this._removeTypingIndicator();\n\n                var group = this._getMessageGroup(sender, messageType);\n\n                this._appendToGroup(group, bubbleElement, messageType);\n\n                this._scrollToBottom();\n            },\n\n            _renderTemplate: function(type, options) {\n                var componentType = this.getComponent(type);\n                var element;\n\n                if (componentType) {\n                    var component = new componentType(options, this);\n\n                    element = component.element;\n                } else {\n                    var template = this.getTemplate(type);\n                    var templateOptions = extend(true, {}, options, { styles: ChatView.styles });\n\n                    element = $(template(templateOptions));\n                }\n\n                return element;\n            },\n\n            _getMessageGroup: function(sender, messageType) {\n                var viewStyles = ChatView.styles;\n                var template = this._getMessageGroupTemplate(sender, messageType);\n                var appendTarget = messageType == \"typing\" ? this.element : this.list;\n                var group;\n\n                if (sender.id === this._lastSender && this._lastSender !== null && messageType !== \"typing\") {\n                    group = this.list.find(DOT + viewStyles.messageGroup).last();\n\n                    if (group.length) {\n                        return group;\n                    }\n                }\n\n                return $(template({ text: sender.name, url: sender.iconUrl, styles: viewStyles })).appendTo(appendTarget);\n            },\n\n            _getMessageGroupTemplate: function(sender, messageType) {\n                var isOwnMessage = sender.id === this.options.user.id;\n                var template = isOwnMessage ?\n                    SELF_MESSAGE_GROUP_TEMPLATE :\n                    MESSAGE_GROUP_TEMPLATE;\n\n                if (messageType == \"typing\") {\n                    template = TYPING_INDICATOR_TEMPLATE;\n                }\n\n                return template;\n            },\n\n            _appendToGroup: function(group, messageElement, messageType) {\n                var viewStyles = ChatView.styles;\n                var children = group.find(DOT + viewStyles.message);\n                var childrenCount = children.length;\n                var indicator = this.element.find(DOT + viewStyles.typingIndicator);\n\n                if (indicator.length && messageType == \"typing\") {\n                    return;\n                }\n\n                messageElement.addClass(childrenCount === 0 ? viewStyles.only : viewStyles.last);\n\n                children.filter(DOT + viewStyles.only)\n                    .removeClass(viewStyles.only)\n                    .addClass(viewStyles.first);\n\n                children.filter(DOT + viewStyles.last)\n                    .removeClass(viewStyles.last)\n                    .addClass(viewStyles.middle);\n\n                group.append(messageElement);\n            },\n\n            _renderTypingIndicator: function(sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble),\n                    indicatorList,\n                    participants;\n\n                this._addTypingParticipant(sender);\n\n                if (indicator.length) {\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n\n                    indicatorList = indicator.find(DOT + viewStyles.author).first();\n                    indicatorList.text(participants);\n\n                } else {\n                    $(TYPING_INDICATOR_TEMPLATE({\n                        text: sender.name + this.options.messages.isTyping,\n                        styles: viewStyles\n                    })).appendTo(this.element);\n                }\n\n                this._scrollToBottom();\n            },\n\n            _addTypingParticipant: function(sender) {\n                var found = false;\n                for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                    if (this.typingParticipants[i].id == sender.id) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found) {\n                    this.typingParticipants.push(sender);\n                }\n            },\n\n            _removeTypingParticipant: function(sender) {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble),\n                    indicatorList,\n                    participants;\n\n                if (indicator.length) {\n                    for (var i = 0; i < this.typingParticipants.length; i += 1) {\n                        if (this.typingParticipants[i].id == sender.id) {\n                            this.typingParticipants.splice(i, 1);\n                        }\n                    }\n\n                    participants = this._composeTypingParticipantsText(this.typingParticipants);\n\n                    if (participants === \"\") {\n                        indicator.remove();\n                    } else {\n                        indicatorList = indicator.find(DOT + viewStyles.author).first();\n                        indicatorList.text(participants);\n                    }\n                }\n            },\n\n            _composeTypingParticipantsText: function(participants) {\n                var messages = this.options.messages,\n                    typingAction = participants.length == 1 ? messages.isTyping : messages.areTyping,\n                    typingText = \"\";\n\n                if (participants.length === 0) {\n                    return typingText;\n                }\n\n                typingText = this.typingParticipants.map(function(author) {\n                    return author.name;\n                }).join(', ').replace(/,(?!.*,)/gmi, messages.and.trimRight()) + typingAction;\n\n                return typingText;\n            },\n\n            _removeTypingIndicator: function() {\n                var indicator = this.element.find(DOT + viewStyles.typingIndicatorBubble);\n\n                if (indicator.length) {\n                    this.typingParticipants = [];\n                    indicator.remove();\n                }\n            },\n\n            _clearSelection: function() {\n                var selectedClass = ChatView.styles.selected;\n\n                this.element.find(DOT + selectedClass).removeClass(selectedClass);\n            },\n\n            _scrollToBottom: function() {\n                this.element.scrollTop(this.element.prop(\"scrollHeight\"));\n            }\n        });\n\n        extend(true, ChatView, { styles: viewStyles });\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"chat\",\n        name: \"Chat\",\n        category: \"web\",\n        description: \"The Chat component.\",\n        depends: [ \"core\", \"draganddrop\" ]\n    };\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var Widget = kendo.ui.Widget;\n        var extend = $.extend;\n        var DOT = \".\";\n\n        var chatStyles = {\n            wrapper: \"k-widget k-chat\",\n            canvas: \"k-chat-canvas\",\n            viewWrapper: \"k-message-list\",\n            messageBoxWrapper: \"k-message-box\",\n            toolbarBoxWrapper: \"k-toolbar-box\"\n        };\n\n        var Chat = Widget.extend({\n            init: function(element, options, events) {\n                Widget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                this._user();\n\n                this._wrapper();\n\n                this._view();\n\n                if (options && options.toolbar && options.toolbar.buttons) {\n                    this._toolbar();\n                }\n\n                this._messageBox();\n\n                kendo.notify(this);\n            },\n\n            events: [\n                \"typingStart\",\n                \"typingEnd\",\n                \"post\",\n                \"sendMessage\",\n                \"actionClick\",\n                \"toolClick\"\n            ],\n\n            options: {\n                user: {\n                    name: \"User\",\n                    iconUrl: \"\"\n                },\n                name: \"Chat\",\n                messages: {\n                    messageListLabel: \"Message list\",\n                    placeholder: \"Type a message...\",\n                    toggleButton: \"Toggle toolbar\",\n                    sendButton: \"Send message\"\n                },\n                toolbar: false\n            },\n\n            setOptions: function(options) {\n                this._setEvents(options);\n                $.extend(true, this.options, options);\n\n                if (this.toolbar && \"toolbar\" in options) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n\n                this._messageBox();\n\n                if (\"toolbar\" in options) {\n                    this._resetToolbarButtons(options);\n                    this._toolbar();\n                }\n            },\n\n            _resetToolbarButtons: function(options) {\n                var toolbarBoxWrapper = this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper);\n\n                if (!toolbarBoxWrapper.is(\":visible\")) {\n                    toolbarBoxWrapper.show();\n                }\n\n                if (options.toolbar && typeof options.toolbar == \"object\" && \"buttons\" in options.toolbar) {\n                    this.options.toolbar.buttons = options.toolbar.buttons;\n                }\n            },\n\n            destroy: function() {\n                if (this.view) {\n                    this.view.unbind();\n                    this.view.destroy();\n                    this.view = null;\n                }\n\n                if (this.messageBox) {\n                    this.messageBox.unbind();\n                    this.messageBox.destroy();\n                    this.messageBox = null;\n                }\n\n                if (this.toolbar) {\n                    this.toolbar.destroy();\n                    this.toolbar = null;\n                }\n\n                Widget.fn.destroy.call(this);\n            },\n\n            _user: function() {\n                this.options.user.id = kendo.guid();\n            },\n\n            getUser: function() {\n                return extend(true, {}, this.options.user);\n            },\n\n            _wrapper: function() {\n                var chatStyles = Chat.styles;\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n                var uiElements = \"<div class='\" + chatStyles.viewWrapper + \"'></div>\" +\n                                 \"<span class='\" + chatStyles.messageBoxWrapper + \"'></span>\" +\n                                 \"<div class='\" + chatStyles.toolbarBoxWrapper + \"' role='toolbar' style='display:none;'></div>\";\n\n                this.wrapper = this.element\n                    .addClass(chatStyles.wrapper)\n                    .append(uiElements);\n\n                if (options.toolbar && options.toolbar.buttons && options.toolbar.buttons.length) {\n                    this.wrapper.find(DOT + chatStyles.toolbarBoxWrapper).show();\n                }\n\n                if (height) {\n                    this.wrapper.height(height);\n                }\n\n                if (width) {\n                    this.wrapper.css(\"max-width\", width);\n                }\n            },\n\n            _view: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n\n                var element = this.wrapper.find(DOT + chatStyles.viewWrapper + \"\");\n\n                this.view = new kendo.chat.ChatView(element, options);\n\n                this.view\n                    .bind(\"actionClick\", function(args) {\n                        that.trigger(\"actionClick\", args);\n\n                        that.postMessage(args.text);\n                    });\n            },\n\n            _messageBox: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, this.options);\n                var element = this.wrapper.find(DOT + chatStyles.messageBoxWrapper + \"\");\n\n                this.messageBox = new kendo.chat.ChatMessageBox(element, options);\n\n                this.messageBox\n                    .bind(\"typingStart\", function(args) {\n                        that.trigger(\"typingStart\", args);\n                    })\n                    .bind(\"typingEnd\", function(args) {\n                        that.trigger(\"typingEnd\", args);\n                    })\n                    .bind(\"sendMessage\", function(args) {\n                        that.trigger(\"sendMessage\", args);\n\n                        that.postMessage(args.text);\n                    })\n                    .bind(\"toggleToolbar\", function() {\n                        that.toggleToolbar();\n                    })\n                    .bind(\"focusToolbar\", function() {\n                        if (that.toolbar) {\n                            that.toolbar.focus();\n                        }\n                    });\n            },\n\n            _toolbar: function() {\n                var that = this;\n                var chatStyles = Chat.styles;\n                var options = extend(true, {}, that.options);\n                var element = that.wrapper.find(DOT + chatStyles.toolbarBoxWrapper + \"\");\n\n                that.options.toolbarId = kendo.guid();\n                element.attr(\"id\", that.options.toolbarId);\n\n                if (options.toolbar.scrollable === undefined$1) {\n                    this.options.toolbar.scrollable = options.toolbar.scrollable = true;\n                }\n\n                if (options.toolbar.toggleable === undefined$1) {\n                    this.options.toolbar.toggleable = options.toolbar.toggleable = false;\n                }\n\n                that.toolbar = new kendo.chat.ChatToolBar(element, options);\n\n                that.toolbar.bind(\"click\", function(ev) {\n                    that.trigger(\"toolClick\", {\n                        sender: that,\n                        name: ev.name,\n                        button: ev.button,\n                        messageBox: that.messageBox.input[0],\n                        originalEvent: ev.originalEvent\n                    });\n                });\n            },\n\n            postMessage: function(message) {\n                var postArgs = extend(true, {}, { text: message, type: \"message\", timestamp: new Date(), from: this.getUser() });\n\n                this.trigger(\"post\", postArgs);\n\n                this.renderMessage(postArgs, postArgs.from);\n            },\n\n            // TEST calling View renderMessage\n            renderMessage: function(message, sender) {\n                this.view.renderMessage(message, sender);\n            },\n\n            // TEST calling View renderSuggestedActions\n            renderSuggestedActions: function(suggestedActions) {\n                this.view.renderSuggestedActions(suggestedActions);\n            },\n\n            // TEST calling View renderCard\n            renderAttachments: function(options, sender) {\n                this.view.renderAttachments(options, sender);\n            },\n\n            toggleToolbar: function(skipAnimation) {\n                this.toolbar.toggle(skipAnimation);\n            },\n\n            renderUserTypingIndicator: function(sender) {\n                this.view._renderTypingIndicator(sender);\n            },\n\n            clearUserTypingIndicator: function(sender) {\n                this.view._removeTypingParticipant(sender);\n            },\n\n            removeTypingIndicator: function() {\n                this.view._removeTypingIndicator();\n            }\n        });\n\n        kendo.ui.plugin(Chat);\n\n        extend(true, Chat, { styles: chatStyles });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}