{"version":3,"file":"kendo.dataviz.core.min.js","names":["factory","define","amd","$","dataviz","services","draw","window","kendo","drawing","util","Path","Group","Class","support","geometry","Rect","Circle","geometryTransform","transform","Segment","deepExtend","isFunction","__common_getter_js","getter","ARC","AXIS_LABEL_CLICK","BLACK","BOTTOM","CENTER","CIRCLE","CROSS","DATE","DEFAULT_FONT","DEFAULT_PRECISION","FORMAT_REGEX","HEIGHT","INSIDE","LEFT","MAX_VALUE","Number","MIN_VALUE","NONE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","OBJECT","OUTSIDE","RIGHT","ROUNDED_RECT","STRING","TOP","TRIANGLE","WHITE","WIDTH","X","Y","constants","COORD_PRECISION","DEFAULT_HEIGHT","DEFAULT_WIDTH","END","HIGHLIGHT_ZINDEX","START","VALUE","DEFAULT_SERIES_OPACITY","isArray","value","Array","SPACE_REGEX","alignPathToPixel","path","offset","options","stroke","defined","width","i","segments","length","anchor","round","translate","clockwise","angle1","angle2","x","y","isNumber","isNaN","isString","isObject","styleValue","SIZE_STYLES_REGEX","isSizeField","field","test","getSpacing","defaultSpacing","spacing","top","right","bottom","left","current","compile","template","TemplateService","extend","getTemplate","content","grep","array","callback","result","idx","push","register","userImplementation","HashMap","this","_map","inArray","indexOf","prototype","get","name","_key","set","Date","getTime","TRIGGER","InstanceObserver","init","observer","handlers","handlerMap","trigger","args","isDefaultPrevented","callObserver","fnName","arguments$1","arguments","len","apply","requiresHandlers","names","map","browser","ref","append","bindEvents","deg","elementOffset","elementSize","eventCoordinates","eventElement","hashKey","last","limitValue","objectKey","rad","unbindEvents","valueOrDefault","FontLoader","setDefaultOptions","type","proto","sparseArrayLimits","arr","min","max","isFinite","Math","undefined","fetchFonts","fonts","state","depth","document","Object","keys","forEach","key","loadFonts","promises","font","load","e","logToConsole","Promise","all","then","preloadFonts","Matrix","matrixRegexp","transformMatrix","element","getComputedStyle","unit","matrixString","match","members","split","parseFloat","Function","bind","concat","parseMatrix","DELETED","LegacySet","values","_index","_values","slice","filter","item","has","add","delete","index","clear","defineProperties","fn","size","SetWrapper","_set","Set","from","autoMajorUnit","diff","abs","scale","pow","floor","log","relativeValue","Point","clone","equals","point","rotate","center","degrees","theta","cosT","cos","sinT","sin","cx","cy","multiply","a","distanceTo","dx","dy","sqrt","onCircle","angle","radius","radians","Box","x1","y1","x2","y2","box","height","move","wrap","targetBox","wrapPoint","arrayPoint","snapTo","axis","alignTo","targetCenter","shrink","dw","dh","expand","pad","padding","unpad","containsPoint","points","getHash","join","overlaps","rotation","r1","rotatePoint","r2","r3","r4","toRect","hasSize","align","alignment","c1","c2","sizeFunc","Ring","innerRadius","startAngle","middle","setRadius","newRadius","radianAngle","ax","ay","adjacentBox","distance","sector","midAndle","midPoint","hw","hh","sa","ca","p","endAngle","vector","startPoint","startVector","endPoint","endVector","dist","getBBox","angles","allAngles","sort","numericComparer","startAngleIndex","endAngleIndex","b","Sector","call","ShapeBuilder","createRing","arc","Arc","radiusX","radiusY","fromArc","close","innerEnd","pointAt","lineTo","ChartElement","children","initUserOptions","reflow","currentChild","destroy","animation","getRoot","parent","getSender","service","getService","sender","chartService","translateChildren","childrenCount","renderVisual","visible","createVisual","addVisual","renderChildren","createAnimation","renderComplete","visual","chartElement","appendVisual","zIndex","Animation","create","childVisual","noclip","clipRoot","stackRoot","stackVisual","isStackRoot","pos","visuals","sibling","insert","traverse","child","closest","matched","hasHighlight","highlight","createHighlight","toggleHighlight","show","opacity","this$1$1","customVisual","_highlight","highlightOptions","fill","color","highlightVisualArgs","series","dataItem","category","percentage","runningTotal","total","createGradientOverlay","gradientOptions","overlay","createGradient","closed","elements","supportsPointInactiveOpacity","BoxElement","margin","shrinkToFit","hasSetSize","borderWidth","border","reflowPaddingBox","vAlign","paddingBox","contentBox","hasBox","background","fromRect","visualStyle","dashType","cursor","ShapeElement","pointData","getElement","halfWidth","halfHeight","style","fromPoints","MultiPath","moveTo","rect","borderRadius","setCornerRadius","createElement","visualOptions","RADIAL","GRADIENTS","glass","stops","sharpBevel","roundedBevel","roundedGlass","supportVML","sharpGlass","bubbleShadow","boxDiff","r","s","c","d","f","g","h","boxes","RootElement","rootOptions","parseInt","gradients","currentBox","createBackground","drawingGradient","hashCode","gradient","LinearGradient","usedSpace","currentStops","currentStop","innerRadialStops","RadialGradient","cleanGradients","_observers","FloatElement","_initDirection","vertical","groupAxis","elementAxis","groupSizeField","elementSizeField","groupSpacing","elementSpacing","vSpacing","reflowChildren","ref$1","groupOptions","groups","groupsSize","maxGroupElementsSize","groupsCount","groupsStart","alignStart","groupStart","groupIdx","group","groupElements","elementStart","groupElementsCount","elementSize$$1","groupElementStart","groupSize","elementBox","maxSize","start","groupElementsSize","DrawingText","Text","measureText","baseline","topLeft","rectToBox","origin","bottomRight","ROWS_SPLIT_REGEX","TextBox","data","_initContainer","_autoReflow","rows","String","floatElement","textOptions","container","rowIdx","text","trim","visualFn","_boxReflow","visualBox","visualContext","clippedBBox","normalBox","rotatedBox","rotationTransform","context","getDefaultVisual","boxCenter","Title","_textBox","position","collapseVerticalMargins","items","prevBox","buildTitle","defaultOptions","title","titleOptions","orderTitles","titles","reverse","AxisLabel","format","culture","click","widget","alignRotation","bbox","matrix","rotationMatrix","rotationOrigin","alignAxis","distanceAxis","axisAnchor","transformCopy","topRight","bottomLeft","alignEnd","distanceLeft","distanceRight","alignCenter","Note","fields","render","hide","label","icon","childAlias","noteTemplate","auto","aliasFor","marker","wrapperBox","lineStart","line","linePoints","createLine","defaultVisual","eventArgs","preventDefault","over","out","current$1","toString","parseDate","firstDay","IntlService","implementation","FORMAT_REPLACE_REGEX","FormatService","intlService","_intlService","formatString","intl","localeAuto","locale","replace","placeholderFormat","substring","current$2","ChartService","chart","rtl","Boolean","notify","isPannable","pannable","lock","DomEventsBuilder","events","createAxisTick","tickOptions","tickX","tickY","tick","createAxisGridLine","gridLine","lineEnd","Axis","labels","majorTickSize","minorTickSize","minorTicks","minorTickType","majorTicks","majorTickType","initFields","_deferLabels","createLabels","createTitle","createNotes","labelsRange","skip","labelsCount","normalizeLabelRotation","labelOptions","step","clearLabels","autoRotateLabels","range","labelContext","count","createAxisLabel","clearTitle","lineBox","mirror","axisX","axisY","lineWidth","visualSize","notes","parseNoteValue","note","createPlotBands","gridLinesVisual","gridLines","_gridLines","createTicks","lineGroup","majorUnit","tickLineOptions","tickPositions","skipUnit","getMajorTickPositions","getMinorTickPositions","minorUnit","_alignLines","_lineGroup","getActualTickSize","tickSize","_backgroundPath","plotBands","plotArea","_plotbandGroup","altAxis","pane","axes","slotX","slotY","getSlot","to","createPlotBandLabel","bandRect","textbox","labelTemplate","createGridLines","minorGridLines","majorGridLines","axisLineVisible","linePos","lineOptions","sizeFn","titleSize","space","boxSize","maxLabelSize","labelSize","arrangeTitle","arrangeLabels","arrangeNotes","getLabelsTickPositions","labelTickIndex","labelsBetweenTicks","tickIx","firstTickPosition","nextTickPosition","positionStart","positionEnd","positionLabel","labelBox","labelOffset","labelX","labelY","autoRotateLabelAngle","slotWidth","limit","labelAngle","idx$1","slot","shouldRenderNote","noteSlot","secondAxis","axisLabelText","tmpl","defaultText","maxLabelOffset","end","lastLabel","offsetField","startPosition","endPosition","maxStartOffset","maxEndOffset","startTick","endTick","limitRange","rangeSize","minValue","maxValue","valueRange","seriesMin","seriesMax","lineDir","lineInfo","lineSize","axisDir","axisOrigin","pointOffset","scaleToDelta","rawScale","justified","prepareUserOptions","axisCrossingValue","MILLISECONDS","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS","TIME_PER_SECOND","TIME_PER_MINUTE","TIME_PER_HOUR","TIME_PER_DAY","TIME_PER_WEEK","TIME_PER_MONTH","TIME_PER_YEAR","TIME_PER_UNIT","years","months","weeks","days","hours","minutes","seconds","milliseconds","absoluteDateDiff","getTimezoneOffset","addTicks","date","ticks","toDate","startOfWeek","weekStartDay","daysToSubtract","day","getDay","adjustDST","getHours","setHours","addDuration","dateValue","getFullYear","getMonth","getDate","roundedDate","setMinutes","tzDiff","addHours","getSeconds","setSeconds","getMilliseconds","setMilliseconds","floorDate","ceilDate","dateComparer","dateDiff","toTime","dateEquals","timeIndex","baseUnit","dateIndex","baseUnitStep","startDate","duration","parseDates","dates","CategoryAxis","_ticks","categoriesHash","copy","categories","srcCategories","definedMin","definedMax","ceil","rangeIndices","totalRange","totalRangeIndices","roundedRange","_seriesMax","scaleOptions","hideOutOfRangeLabels","valueAxis","firstLabel","getTicks","labelTicks","tickIndices","stepSize","indices","getTickPositions","positions","cache","hash","_hash","hasMinor","filterOutOfRangePositions","inRange","startIndex","endIndex","slotBox","singleSlot","p1","p2","limitSlot","limittedSlot","categoryIndex","pointCategoryIndex","startValue","getCategory","totalIndex","categoryAt","categoriesCount","translateRange","delta","scaleRange","minDelta","maxDelta","zoomRange","totalMin","totalMax","dataItems","hideOutOfRangeNotes","pan","pointsRange","diffStart","diffEnd","rangeMin","rangeMax","_categoriesMap","currentRangeIndices","totalCount","mapCategories","map$$1","COORDINATE_LIMIT","DateLabelFormats","ZERO_THRESHOLD","BASE_UNITS","FIT","categoryRange","_range","EmptyDateRange","displayIndices","displayRange","valueIndex","valuesCount","dateAt","DateRange","roundToBaseUnit","lowerEnd","roundToTotalStep","expandEnd","justifyEnd","valueStart","displayStart","next","valueEnd","displayEnd","_indices","minIdx","maxIdx","upper","roundedStep","autoBaseUnit","startUnit","startStep","unitSteps","nextStep","categoryLimits","span","autoBaseUnitSteps","maxDateGroups","autoUnit","autoUnitIx","units","totalUnits","shift","initUnit","toLowerCase","lastCategory","minDiff","categoryIx","defaultBaseUnit","DateCategoryAxis","dataRange","_parsed","panning","userSetBaseUnit","userSetBaseUnitStep","maxDivisions","divisionOptions","dataRangeOptions","divisionRange","rangeLabels","last$$1","splice","isEmpty","totalLimits","panRange","datesRange","indicesRange","fit","autoBaseUnitStep","maxDiff","rangeDiff","baseUnitIndex","stepIndex","createRangeLabels","arrangeRangeLabels","position$1","autoRotateRangeLabels","hideOverlappingLabels","firstRangeLabel","clip","lastRangeLabel","i$1","rangeLabel","unitFormat","dateFormats","createLabel","rotateLabel","dateRange","limitCoordinate","MIN_VALUE_RANGE$1","NumericAxis","autoOptions","narrowRange","autoMin","narrow","axisMin","autoAxisMin","autoMax","axisMax","autoAxisMax","roundToMajorUnit","remainderClose","autoAxisOptions","totalOptions","totalAxisOptions","userOptions","userSetMin","userSetMax","clearNullValues","userSetLimits","axisOptions","totalMajorUnit","getDivisions","stepValue","divisions","skipStep","getValue","endValue","isValidRange","divisor","ratio","remainder","DateValueAxis","timeUnits","baseUnitTime","userMajorUnit","actualUnits","unitsToAdd","head","tail","applyDefaults","axisCrossingValues","dir","limittedRange","MIN_VALUE_RANGE$2","LogarithmicAxis","base","logMaxRemainder","autoAxisMax$1","autoAxisMin$1","throwNegativeValuesError","initRange","logMin","logMax","floorMax","traverseMajorTicksPositions","tickPosition","traverseMinorTicksPositions","power","minorOptions","_minorIntervalOptions","minorStep","info","Error","GridLinesMixin","majorAngles","minorAngles","skipMajor","majorGridLineAngles","renderMajorGridLines","minorGridLineAngles","renderMinorGridLines","renderGridLines","radiusCallback","circle","gridLineAngles","skipAngles","divs","intervals","altAxisVisible","alpha","intervalAngle","RadarCategoryAxis","reflowLabels","measureBox","skipOption","stepOption","divCount","divAngle","majorIntervals","minorIntervals","interval","minorAngle","minorRadius","band","plotBandSlot","ring","totalDivs","slotAngle","fromValue","slotStart","PolarAxis","instanceOptions","tmp","atan2","PI","RadarNumericAxisMixin","polarAxis","bandStyle","shape","plotBandPoints","innerPoints","outerPoints","innerCircle","outerCircle","radarMajorGridLinePositions","radarMinorGridLinePositions","tickRadius","angleIx","angularDistance","gamma","beta","axisType","RadarNumericAxis","minorSkipStep","RadarLogarithmicAxis","CurveProcessor","process","dataPoints","removeDuplicates","initialControlPoint","lastControlPoint","p0","pop","tangent","controlOut","firstControlPoint","secondControlPoint","controlPoints","tangent$1","cp0","controlPoints$1","cp1","controlPoints$2","tangent$2","invertAxis","lineFunction","calculateFunction","isLine","xField","yField","restrict","switchOrientation","monotonic","isMonotonicByField","numberSign","oldXField","restrictControlPoint","cp","p3","t1","t2","xValue","yValue","controlPoint","Gradients","addClass","classes","classArray","className","removeClass","convertableToNumber","elementStyles","styles","stylesArray","field$1","hasClasses","classNames","interpolateValue","progress","mousewheelDelta","wheelDelta","webkit","devicePixelRatio","detail","find","predicate","elementScale","parentElement","parentMatrix","multiplyCopy","autoTextColor","Color","isDark","createHashSet","supported","defaultErrorHandler","error","INSERT","DELETE","BACKSPACE","TAB","ENTER","ESC","UP","DOWN","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","lteDateIndex","sortedDates","low","high","currentDate","jQuery","SASS_THEMES","ExportMixin","skipLegacy","exportVisual","exportSVG","exportImage","exportPDF","svg","imageDataURL","Surface","exportGroup","canvas","css","display","appendTo","body","surface","image","_rootElement","toDataURL","remove","calendars","standard","Point2D","Box2D","mwDelta","originalEvent"],"sources":["kendo.dataviz.core.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.drawing'], factory) :\n    factory();\n})((function () {\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-charts` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\n    window.kendo.dataviz = window.kendo.dataviz || {};\n    var drawing = kendo.drawing;\n    var util = drawing.util;\n    var Path = drawing.Path;\n    var Group = drawing.Group;\n    var Class = kendo.Class;\n    var support = kendo.support;\n    var geometry = kendo.geometry;\n    var Rect = geometry.Rect;\n    var Circle = geometry.Circle;\n    var geometryTransform = geometry.transform;\n    var Segment = geometry.Segment;\n    var dataviz = kendo.dataviz;\n\n    var deepExtend = kendo.deepExtend;\n    var isFunction = kendo.isFunction;\n    var __common_getter_js = kendo.getter;\n\n    var ARC = \"arc\";\n    var AXIS_LABEL_CLICK = \"axisLabelClick\";\n    var BLACK = \"#000\";\n    var BOTTOM = \"bottom\";\n    var CENTER = \"center\";\n    var CIRCLE = \"circle\";\n    var COORD_PRECISION = 3;\n    var CROSS = \"cross\";\n    var DATE = \"date\";\n    var DEFAULT_FONT = \"12px sans-serif\";\n    var DEFAULT_HEIGHT = 400;\n    var DEFAULT_PRECISION = 10;\n    var DEFAULT_WIDTH = 600;\n    var END = \"end\";\n    var FORMAT_REGEX = /\\{\\d+:?/;\n    var HEIGHT = \"height\";\n    var HIGHLIGHT_ZINDEX = 100;\n    var INSIDE = \"inside\";\n    var LEFT = \"left\";\n    var MAX_VALUE = Number.MAX_VALUE;\n    var MIN_VALUE = -Number.MAX_VALUE;\n    var NONE = \"none\";\n    var NOTE_CLICK = \"noteClick\";\n    var NOTE_HOVER = \"noteHover\";\n    var NOTE_LEAVE = \"noteLeave\";\n    var OBJECT = \"object\";\n    var OUTSIDE = \"outside\";\n    var RIGHT = \"right\";\n    var ROUNDED_RECT = \"roundedRect\";\n    var START = \"start\";\n    var STRING = \"string\";\n    var TOP = \"top\";\n    var TRIANGLE = \"triangle\";\n    var VALUE = \"value\";\n    var WHITE = \"#fff\";\n    var WIDTH = \"width\";\n    var X = \"x\";\n    var Y = \"y\";\n    var DEFAULT_SERIES_OPACITY = 1;\n\n    var constants = {\n    \tARC: ARC,\n    \tAXIS_LABEL_CLICK: AXIS_LABEL_CLICK,\n    \tBLACK: BLACK,\n    \tBOTTOM: BOTTOM,\n    \tCENTER: CENTER,\n    \tCIRCLE: CIRCLE,\n    \tCOORD_PRECISION: COORD_PRECISION,\n    \tCROSS: CROSS,\n    \tDATE: DATE,\n    \tDEFAULT_FONT: DEFAULT_FONT,\n    \tDEFAULT_HEIGHT: DEFAULT_HEIGHT,\n    \tDEFAULT_PRECISION: DEFAULT_PRECISION,\n    \tDEFAULT_WIDTH: DEFAULT_WIDTH,\n    \tEND: END,\n    \tFORMAT_REGEX: FORMAT_REGEX,\n    \tHEIGHT: HEIGHT,\n    \tHIGHLIGHT_ZINDEX: HIGHLIGHT_ZINDEX,\n    \tINSIDE: INSIDE,\n    \tLEFT: LEFT,\n    \tMAX_VALUE: MAX_VALUE,\n    \tMIN_VALUE: MIN_VALUE,\n    \tNONE: NONE,\n    \tNOTE_CLICK: NOTE_CLICK,\n    \tNOTE_HOVER: NOTE_HOVER,\n    \tNOTE_LEAVE: NOTE_LEAVE,\n    \tOBJECT: OBJECT,\n    \tOUTSIDE: OUTSIDE,\n    \tRIGHT: RIGHT,\n    \tROUNDED_RECT: ROUNDED_RECT,\n    \tSTART: START,\n    \tSTRING: STRING,\n    \tTOP: TOP,\n    \tTRIANGLE: TRIANGLE,\n    \tVALUE: VALUE,\n    \tWHITE: WHITE,\n    \tWIDTH: WIDTH,\n    \tX: X,\n    \tY: Y,\n    \tDEFAULT_SERIES_OPACITY: DEFAULT_SERIES_OPACITY\n    };\n\n    function isArray(value) {\n        return Array.isArray(value);\n    }\n\n    function addClass(element, classes) {\n        var classArray = isArray(classes) ? classes : [ classes ];\n\n        for (var idx = 0; idx < classArray.length; idx++) {\n            var className = classArray[idx];\n            if (element.className.indexOf(className) === -1) {\n                element.className += \" \" + className;\n            }\n        }\n    }\n\n    var SPACE_REGEX = /\\s+/g;\n\n    function removeClass(element, className) {\n        if (element && element.className) {\n            element.className = element.className.replace(className, \"\").replace(SPACE_REGEX, \" \");\n        }\n    }\n\n    function alignPathToPixel(path) {\n        var offset = 0.5;\n        if (path.options.stroke && kendo.drawing.util.defined(path.options.stroke.width)) {\n            if (path.options.stroke.width % 2 === 0) {\n                offset = 0;\n            }\n        }\n\n        for (var i = 0; i < path.segments.length; i++) {\n            path.segments[i].anchor().round(0).translate(offset, offset);\n        }\n\n        return path;\n    }\n\n    function clockwise(angle1, angle2) {\n        // True if angle2 is clockwise of angle1\n        // assuming angles grow in clock-wise direction\n        // (as in the pie and radar charts)\n        return -angle1.x * angle2.y + angle1.y * angle2.x < 0;\n    }\n\n    function isNumber(value) {\n        return typeof value === \"number\" && !isNaN(value);\n    }\n\n    function isString(value) {\n        return typeof value === STRING;\n    }\n\n    function convertableToNumber(value) {\n        return isNumber(value) || (isString(value) && isFinite(value));\n    }\n\n    function isObject(value) {\n        return typeof value === \"object\";\n    }\n\n    function styleValue(value) {\n        if (isNumber(value)) {\n            return value + \"px\";\n        }\n        return value;\n    }\n\n    var SIZE_STYLES_REGEX = /width|height|top|left|bottom|right/i;\n\n    function isSizeField(field) {\n        return SIZE_STYLES_REGEX.test(field);\n    }\n\n    function elementStyles(element, styles) {\n        var stylesArray = isString(styles) ? [ styles ] : styles;\n\n        if (isArray(stylesArray)) {\n            var result = {};\n            var style = window.getComputedStyle(element);\n\n            for (var idx = 0; idx < stylesArray.length; idx++) {\n                var field = stylesArray[idx];\n                result[field] = isSizeField(field) ? parseFloat(style[field]) : style[field];\n            }\n\n            return result;\n        } else if (isObject(styles)) {\n            for (var field$1 in styles) {\n                element.style[field$1] = styleValue(styles[field$1]);\n            }\n        }\n    }\n\n    function getSpacing(value, defaultSpacing) {\n        if (defaultSpacing === void 0) { defaultSpacing = 0; }\n\n        var spacing = { top: 0, right: 0, bottom: 0, left: 0 };\n\n        if (typeof(value) === \"number\") {\n            spacing[TOP] = spacing[RIGHT] = spacing[BOTTOM] = spacing[LEFT] = value;\n        } else {\n            spacing[TOP] = value[TOP] || defaultSpacing;\n            spacing[RIGHT] = value[RIGHT] || defaultSpacing;\n            spacing[BOTTOM] = value[BOTTOM] || defaultSpacing;\n            spacing[LEFT] = value[LEFT] || defaultSpacing;\n        }\n\n        return spacing;\n    }\n\n    var current = {\n        compile: function(template) {\n            return template;\n        }\n    };\n\n    var TemplateService = Class.extend({\n\n    });\n\n    TemplateService.register = function(userImplementation) {\n        current = userImplementation;\n    };\n\n    TemplateService.compile = function(template, options) {\n        return current.compile(template, options);\n    };\n\n    function getTemplate(options) {\n        if (options === void 0) { options = {}; }\n\n        var template;\n        if (options.template) {\n            options.template = template = TemplateService.compile(options.template);\n        } else if (isFunction(options.content)) {\n            template = options.content;\n        }\n\n        return template;\n    }\n\n    function grep(array, callback) {\n        var length = array.length;\n        var result = [];\n        for (var idx = 0; idx < length; idx++) {\n            if (callback(array[idx])) {\n                result .push(array[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function hasClasses(element, classNames) {\n        if (element.className) {\n            var names = classNames.split(\" \");\n            for (var idx = 0; idx < names.length; idx++) {\n                if (element.className.indexOf && element.className.indexOf(names[idx]) !== -1) {\n                    return true;\n                }\n            }\n        }\n    }\n\n    var HashMap = function HashMap() {\n        this._map = {};\n    };\n\n    HashMap.prototype.get = function get (name) {\n        return this._map[this._key(name)];\n    };\n\n    HashMap.prototype.set = function set (name, value) {\n        this._map[this._key(name)] = value;\n    };\n\n    HashMap.prototype._key = function _key (name) {\n        return name instanceof Date ? name.getTime() : name;\n    };\n\n    function inArray(value, array) {\n        if (array) {\n            return array.indexOf(value) !== -1;\n        }\n    }\n\n    function interpolateValue(start, end, progress) {\n        return kendo.drawing.util.round(start + (end - start) * progress, COORD_PRECISION);\n    }\n\n    var TRIGGER = 'trigger';\n\n    var InstanceObserver = Class.extend({\n        init: function(observer, handlers) {\n            this.observer = observer;\n            this.handlerMap = deepExtend({}, this.handlerMap, handlers);\n        },\n\n        trigger: function(name, args) {\n            var ref = this;\n            var observer = ref.observer;\n            var handlerMap = ref.handlerMap;\n            var isDefaultPrevented;\n            if (handlerMap[name]) {\n                isDefaultPrevented = this.callObserver(handlerMap[name], args);\n            } else if (observer[TRIGGER]) {\n                isDefaultPrevented = this.callObserver(TRIGGER, name, args);\n            }\n\n            return isDefaultPrevented;\n        },\n\n        callObserver: function(fnName) {\n            var arguments$1 = arguments;\n\n            var args = [], len = arguments.length - 1;\n            while ( len-- > 0 ) { args[ len ] = arguments$1[ len + 1 ]; }\n\n            return this.observer[fnName].apply(this.observer, args);\n        },\n\n        requiresHandlers: function(names) {\n            var this$1$1 = this;\n\n            if (this.observer.requiresHandlers) {\n                return this.observer.requiresHandlers(names);\n            }\n\n            for (var idx = 0; idx < names.length; idx++) {\n                if (this$1$1.handlerMap[names[idx]]) {\n                    return true;\n                }\n            }\n        }\n    });\n\n    function map(array, callback) {\n        var length = array.length;\n        var result = [];\n        for (var idx = 0; idx < length; idx++) {\n            var value = callback(array[idx]);\n            if (kendo.drawing.util.defined(value)) {\n                result.push(value);\n            }\n        }\n        return result;\n    }\n\n    var browser = support.browser || {};\n\n    function mousewheelDelta(e) {\n        var delta = 0;\n\n        if (e.wheelDelta) {\n            delta = -e.wheelDelta / 120;\n\n            if (browser.webkit) {\n                // Webkit browsers scale the delta by twice the device resolution.\n                // Possibly related to https://bugs.webkit.org/show_bug.cgi?id=196339\n                //\n                // Low device resolutions (e.g. zoom-out to 30%) also behave strangely.\n                delta = delta / (2 * Math.max(window.devicePixelRatio, 0.625));\n            }\n        } else if (e.detail) {\n            delta = e.detail / 3;\n        }\n\n        delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\n        return delta;\n    }\n\n    var ref = kendo.drawing.util;\n    var append = ref.append;\n    var bindEvents = ref.bindEvents;\n    var defined = ref.defined;\n    var deg = ref.deg;\n    var elementOffset = ref.elementOffset;\n    var elementSize = ref.elementSize;\n    var eventCoordinates = ref.eventCoordinates;\n    var eventElement = ref.eventElement;\n    var hashKey = ref.hashKey;\n    var last = ref.last;\n    var limitValue = ref.limitValue;\n    var objectKey = ref.objectKey;\n    var rad = ref.rad;\n    var round = ref.round;\n    var unbindEvents = ref.unbindEvents;\n    var valueOrDefault = ref.valueOrDefault;\n\n    var FontLoader = Class.extend({\n\n    });\n\n    FontLoader.fetchFonts = function(options, fonts, state) {\n        if (state === void 0) { state = { depth: 0 }; }\n\n        var MAX_DEPTH = 5;\n\n        if (!options || state.depth > MAX_DEPTH || !document.fonts) {\n            return;\n        }\n\n        Object.keys(options).forEach(function(key) {\n            var value = options[key];\n            if (key === \"dataSource\" || key[0] === \"$\" || !value) {\n                return;\n            }\n\n            if (key === \"font\") {\n                fonts.push(value);\n            } else if (typeof value === \"object\") {\n                state.depth++;\n                FontLoader.fetchFonts(value, fonts, state);\n                state.depth--;\n            }\n        });\n    };\n\n    FontLoader.loadFonts = function(fonts, callback) {\n        var promises = [];\n\n        if (fonts.length > 0 && document.fonts) {\n            try {\n                promises = fonts.map(function(font) {\n                    return document.fonts.load(font);\n                });\n            } catch (e) {\n                // Silence font-loading errors\n                kendo.logToConsole(e);\n            }\n\n            Promise.all(promises).then(callback, callback);\n        } else {\n            callback();\n        }\n    };\n\n    FontLoader.preloadFonts = function(options, callback) {\n        var fonts = [];\n        FontLoader.fetchFonts(options, fonts);\n\n        FontLoader.loadFonts(fonts, callback);\n    };\n\n    function setDefaultOptions(type, options) {\n        var proto = type.prototype;\n        if (proto.options) {\n            proto.options = deepExtend({}, proto.options, options);\n        } else {\n            proto.options = options;\n        }\n    }\n\n    function sparseArrayLimits(arr) {\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var idx = 0, length = arr.length; idx < length; idx++) {\n            var value = arr[idx];\n            if (value !== null && isFinite(value)) {\n                min = Math.min(min, value);\n                max = Math.max(max, value);\n            }\n        }\n\n        return {\n            min: min === MAX_VALUE ? undefined : min,\n            max: max === MIN_VALUE ? undefined : max\n        };\n    }\n\n    function find(array, predicate) {\n        for (var i = 0; i < array.length; i++) {\n            var item = array[i];\n            if (predicate(item, i, array)) {\n                return item;\n            }\n        }\n    }\n\n    var Matrix = geometry.Matrix;\n    var matrixRegexp = /matrix\\((.*)\\)/;\n\n    function parseMatrix(matrixString) {\n        var match = matrixString.match(matrixRegexp);\n        if (match === null || match.length !== 2) {\n            return Matrix.unit();\n        }\n\n        var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n        return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n    }\n\n    function transformMatrix(element) {\n        var transform = getComputedStyle(element).transform;\n\n        if (transform === 'none') {\n            return Matrix.unit();\n        }\n\n        return parseMatrix(transform);\n    }\n\n    function elementScale(element) {\n        if (!element) {\n            return Matrix.unit();\n        }\n\n        var matrix = transformMatrix(element);\n        var parent = element.parentElement;\n        while (parent) {\n            var parentMatrix = transformMatrix(parent);\n            matrix = matrix.multiplyCopy(parentMatrix);\n            parent = parent.parentElement;\n        }\n\n        matrix.b = matrix.c = matrix.e = matrix.f = 0;\n        return matrix;\n    }\n\n    function autoTextColor(color) {\n        var isDark = new kendo.Color(color).isDark();\n        if (isDark) {\n            return WHITE;\n        }\n\n        return BLACK;\n    }\n\n    var DELETED = {};\n\n    var LegacySet = Class.extend({\n        init: function(values) {\n            var this$1$1 = this;\n\n            this._index = {};\n            this._values = values ? values.slice(0) : [];\n\n            for (var i = 0; i < this._values.length; i++) {\n                this$1$1._index[this$1$1._values[i]] = i;\n            }\n        },\n\n        values: function() {\n            return this._values.filter(function (item) { return item !== DELETED; });\n        },\n\n        has: function(value) {\n            return this._index[value] !== undefined;\n        },\n\n        add: function(value) {\n            if (!this.has(value)) {\n                this._index[value] = this._values.length;\n                this._values.push(value);\n            }\n        },\n\n        delete: function(value) {\n            var index = this._index[value];\n            if (index !== undefined) {\n                this._values[index] = DELETED;\n                delete this._index[value];\n            }\n        },\n\n        clear: function() {\n            this._index = {};\n            this._values = [];\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(LegacySet.fn, {\n            size: {\n                get: function() {\n                    return this._values.length;\n                }\n            }\n        });\n    }\n\n    var SetWrapper = Class.extend({\n        init: function(values) {\n            this._set = new Set(values);\n        },\n\n        values: function() {\n            return Array.from(this._set);\n        },\n\n        has: function(value) {\n            return this._set.has(value);\n        },\n\n        add: function(value) {\n            this._set.add(value);\n        },\n\n        delete: function(value) {\n            this._set.delete(value);\n        },\n\n        clear: function() {\n            this._set.clear();\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(SetWrapper.fn, {\n            size: {\n                get: function() {\n                    return this._set.size;\n                }\n            }\n        });\n    }\n\n    // TODO: Drop LegacySet when removing support for IE10\n    var supportsSet = function () {\n        var supported = false;\n\n        if (typeof Set === 'function') {\n            var set = new Set([1]);\n            supported = set.has(1);\n        }\n\n        return supported;\n    };\n\n    function createHashSet(values) {\n        if (supportsSet()) {\n            return new SetWrapper(values);\n        }\n\n        return new LegacySet(values);\n    }\n\n    function defaultErrorHandler(error) {\n        throw error;\n    }\n\n    var keys = {\n        INSERT: 45,\n        DELETE: 46,\n        BACKSPACE: 8,\n        TAB: 9,\n        ENTER: 13,\n        ESC: 27,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40,\n        END: 35,\n        HOME: 36,\n        SPACEBAR: 32,\n        PAGEUP: 33,\n        PAGEDOWN: 34,\n        F2: 113,\n        F10: 121,\n        F12: 123,\n        NUMPAD_PLUS: 107,\n        NUMPAD_MINUS: 109,\n        NUMPAD_DOT: 110\n    };\n\n    function autoMajorUnit(min, max) {\n        var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n        if (diff === 0) {\n            if (max === 0) {\n                return 0.1;\n            }\n\n            diff = Math.abs(max);\n        }\n\n        var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n        var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n        var scaleMultiplier = 1;\n\n        if (relativeValue < 1.904762) {\n            scaleMultiplier = 0.2;\n        } else if (relativeValue < 4.761904) {\n            scaleMultiplier = 0.5;\n        } else if (relativeValue < 9.523809) {\n            scaleMultiplier = 1;\n        } else {\n            scaleMultiplier = 2;\n        }\n\n        return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n    }\n\n    var Point = Class.extend({\n        init: function(x, y) {\n\n            this.x = x || 0;\n            this.y = y || 0;\n        },\n\n        clone: function() {\n            return new Point(this.x, this.y);\n        },\n\n        equals: function(point) {\n            return point && this.x === point.x && this.y === point.y;\n        },\n\n        rotate: function(center, degrees) {\n            var theta = rad(degrees);\n            var cosT = Math.cos(theta);\n            var sinT = Math.sin(theta);\n            var cx = center.x;\n            var cy = center.y;\n            var ref = this;\n            var x = ref.x;\n            var y = ref.y;\n\n            this.x = round(\n                cx + (x - cx) * cosT + (y - cy) * sinT,\n                COORD_PRECISION\n            );\n\n            this.y = round(\n                cy + (y - cy) * cosT - (x - cx) * sinT,\n                COORD_PRECISION\n            );\n\n            return this;\n        },\n\n        multiply: function(a) {\n\n            this.x *= a;\n            this.y *= a;\n\n            return this;\n        },\n\n        distanceTo: function(point) {\n            var dx = this.x - point.x;\n            var dy = this.y - point.y;\n\n            return Math.sqrt(dx * dx + dy * dy);\n        }\n    });\n\n    Point.onCircle = function(center, angle, radius) {\n        var radians = rad(angle);\n\n        return new Point(\n            center.x - radius * Math.cos(radians),\n            center.y - radius * Math.sin(radians)\n        );\n    };\n\n    var Box = Class.extend({\n        init: function(x1, y1, x2, y2) {\n\n            this.x1 = x1 || 0;\n            this.y1 = y1 || 0;\n            this.x2 = x2 || 0;\n            this.y2 = y2 || 0;\n        },\n\n        equals: function(box) {\n            return this.x1 === box.x1 && this.x2 === box.x2 &&\n                this.y1 === box.y1 && this.y2 === box.y2;\n        },\n\n        width: function() {\n            return this.x2 - this.x1;\n        },\n\n        height: function() {\n            return this.y2 - this.y1;\n        },\n\n        translate: function(dx, dy) {\n            this.x1 += dx;\n            this.x2 += dx;\n            this.y1 += dy;\n            this.y2 += dy;\n\n            return this;\n        },\n\n        move: function(x, y) {\n            var height = this.height();\n            var width = this.width();\n\n            if (defined(x)) {\n                this.x1 = x;\n                this.x2 = this.x1 + width;\n            }\n\n            if (defined(y)) {\n                this.y1 = y;\n                this.y2 = this.y1 + height;\n            }\n\n            return this;\n        },\n\n        wrap: function(targetBox) {\n            this.x1 = Math.min(this.x1, targetBox.x1);\n            this.y1 = Math.min(this.y1, targetBox.y1);\n            this.x2 = Math.max(this.x2, targetBox.x2);\n            this.y2 = Math.max(this.y2, targetBox.y2);\n\n            return this;\n        },\n\n        wrapPoint: function(point) {\n            var arrayPoint = isArray(point);\n            var x = arrayPoint ? point[0] : point.x;\n            var y = arrayPoint ? point[1] : point.y;\n            this.wrap(new Box(x, y, x, y));\n\n            return this;\n        },\n\n        snapTo: function(targetBox, axis) {\n\n            if (axis === X || !axis) {\n                this.x1 = targetBox.x1;\n                this.x2 = targetBox.x2;\n            }\n\n            if (axis === Y || !axis) {\n                this.y1 = targetBox.y1;\n                this.y2 = targetBox.y2;\n            }\n\n            return this;\n        },\n\n        alignTo: function(targetBox, anchor) {\n            var height = this.height();\n            var width = this.width();\n            var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n            var offset = axis === Y ? height : width;\n\n            if (anchor === CENTER) {\n                var targetCenter = targetBox.center();\n                var center = this.center();\n\n                this.x1 += targetCenter.x - center.x;\n                this.y1 += targetCenter.y - center.y;\n            } else if (anchor === TOP || anchor === LEFT) {\n                this[axis + 1] = targetBox[axis + 1] - offset;\n            } else {\n                this[axis + 1] = targetBox[axis + 2];\n            }\n\n            this.x2 = this.x1 + width;\n            this.y2 = this.y1 + height;\n\n            return this;\n        },\n\n        shrink: function(dw, dh) {\n\n            this.x2 -= dw;\n            this.y2 -= dh;\n\n            return this;\n        },\n\n        expand: function(dw, dh) {\n            this.shrink(-dw, -dh);\n            return this;\n        },\n\n        pad: function(padding) {\n            var spacing = getSpacing(padding);\n\n            this.x1 -= spacing.left;\n            this.x2 += spacing.right;\n            this.y1 -= spacing.top;\n            this.y2 += spacing.bottom;\n\n            return this;\n        },\n\n        unpad: function(padding) {\n            var spacing = getSpacing(padding);\n\n            spacing.left = -spacing.left;\n            spacing.top = -spacing.top;\n            spacing.right = -spacing.right;\n            spacing.bottom = -spacing.bottom;\n\n            return this.pad(spacing);\n        },\n\n        clone: function() {\n            return new Box(this.x1, this.y1, this.x2, this.y2);\n        },\n\n        center: function() {\n            return new Point(\n                this.x1 + this.width() / 2,\n                this.y1 + this.height() / 2\n            );\n        },\n\n        containsPoint: function(point) {\n\n            return point.x >= this.x1 && point.x <= this.x2 &&\n                   point.y >= this.y1 && point.y <= this.y2;\n        },\n\n        points: function() {\n            return [\n                new Point(this.x1, this.y1),\n                new Point(this.x2, this.y1),\n                new Point(this.x2, this.y2),\n                new Point(this.x1, this.y2)\n            ];\n        },\n\n        getHash: function() {\n            return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n        },\n\n        overlaps: function(box) {\n            return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n        },\n\n        rotate: function(rotation) {\n            var width = this.width();\n            var height = this.height();\n            var ref = this.center();\n            var cx = ref.x;\n            var cy = ref.y;\n\n            var r1 = rotatePoint(0, 0, cx, cy, rotation);\n            var r2 = rotatePoint(width, 0, cx, cy, rotation);\n            var r3 = rotatePoint(width, height, cx, cy, rotation);\n            var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n            width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n            height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n            this.x2 = this.x1 + width;\n            this.y2 = this.y1 + height;\n\n            return this;\n        },\n\n        toRect: function() {\n            return new Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n        },\n\n        hasSize: function() {\n            return this.width() !== 0 && this.height() !== 0;\n        },\n\n        align: function(targetBox, axis, alignment) {\n            var c1 = axis + 1;\n            var c2 = axis + 2;\n            var sizeFunc = axis === X ? WIDTH : HEIGHT;\n            var size = this[sizeFunc]();\n\n            if (inArray(alignment, [ LEFT, TOP ])) {\n                this[c1] = targetBox[c1];\n                this[c2] = this[c1] + size;\n            } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n                this[c2] = targetBox[c2];\n                this[c1] = this[c2] - size;\n            } else if (alignment === CENTER) {\n                this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n                this[c2] = this[c1] + size;\n            }\n        }\n    });\n\n    function rotatePoint(x, y, cx, cy, angle) {\n        var theta = rad(angle);\n\n        return new Point(\n            cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n            cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n        );\n    }\n\n    var Ring = Class.extend({\n        init: function(center, innerRadius, radius, startAngle, angle) {\n\n            this.center = center;\n            this.innerRadius = innerRadius;\n            this.radius = radius;\n            this.startAngle = startAngle;\n            this.angle = angle;\n        },\n\n        clone: function() {\n            return new Ring(this.center, this.innerRadius, this.radius, this.startAngle, this.angle);\n        },\n\n        middle: function() {\n            return this.startAngle + this.angle / 2;\n        },\n\n        setRadius: function(newRadius, innerRadius) {\n            if (innerRadius) {\n                this.innerRadius = newRadius;\n            } else {\n                this.radius = newRadius;\n            }\n\n            return this;\n        },\n\n        point: function(angle, innerRadius) {\n            var radianAngle = rad(angle);\n            var ax = Math.cos(radianAngle);\n            var ay = Math.sin(radianAngle);\n            var radius = innerRadius ? this.innerRadius : this.radius;\n            var x = round(this.center.x - (ax * radius), COORD_PRECISION);\n            var y = round(this.center.y - (ay * radius), COORD_PRECISION);\n\n            return new Point(x, y);\n        },\n\n        adjacentBox: function(distance, width, height) {\n            var sector = this.clone().expand(distance);\n            var midAndle = sector.middle();\n            var midPoint = sector.point(midAndle);\n            var hw = width / 2;\n            var hh = height / 2;\n            var sa = Math.sin(rad(midAndle));\n            var ca = Math.cos(rad(midAndle));\n            var x = midPoint.x - hw;\n            var y = midPoint.y - hh;\n\n            if (Math.abs(sa) < 0.9) {\n                x += hw * -ca / Math.abs(ca);\n            }\n\n            if (Math.abs(ca) < 0.9) {\n                y += hh * -sa / Math.abs(sa);\n            }\n\n            return new Box(x, y, x + width, y + height);\n        },\n\n        containsPoint: function(p) {\n            var center = this.center;\n            var innerRadius = this.innerRadius;\n            var radius = this.radius;\n            var startAngle = this.startAngle;\n            var endAngle = this.startAngle + this.angle;\n            var dx = p.x - center.x;\n            var dy = p.y - center.y;\n            var vector = new Point(dx, dy);\n            var startPoint = this.point(startAngle);\n            var startVector = new Point(startPoint.x - center.x, startPoint.y - center.y);\n            var endPoint = this.point(endAngle);\n            var endVector = new Point(endPoint.x - center.x, endPoint.y - center.y);\n            var dist = round(dx * dx + dy * dy, COORD_PRECISION);\n\n            return (startVector.equals(vector) || clockwise(startVector, vector)) &&\n                   !clockwise(endVector, vector) &&\n                   dist >= innerRadius * innerRadius && dist <= radius * radius;\n        },\n\n        getBBox: function() {\n            var this$1$1 = this;\n\n            var box = new Box(MAX_VALUE, MAX_VALUE, MIN_VALUE, MIN_VALUE);\n            var startAngle = round(this.startAngle % 360);\n            var endAngle = round((startAngle + this.angle) % 360);\n            var innerRadius = this.innerRadius;\n            var allAngles = [ 0, 90, 180, 270, startAngle, endAngle ].sort(numericComparer);\n            var startAngleIndex = allAngles.indexOf(startAngle);\n            var endAngleIndex = allAngles.indexOf(endAngle);\n            var angles;\n\n            if (startAngle === endAngle) {\n                angles = allAngles;\n            } else {\n                if (startAngleIndex < endAngleIndex) {\n                    angles = allAngles.slice(startAngleIndex, endAngleIndex + 1);\n                } else {\n                    angles = [].concat(\n                        allAngles.slice(0, endAngleIndex + 1),\n                        allAngles.slice(startAngleIndex, allAngles.length)\n                    );\n                }\n            }\n\n            for (var i = 0; i < angles.length; i++) {\n                var point = this$1$1.point(angles[i]);\n                box.wrapPoint(point);\n                box.wrapPoint(point, innerRadius);\n            }\n\n            if (!innerRadius) {\n                box.wrapPoint(this.center);\n            }\n\n            return box;\n        },\n\n        expand: function(value) {\n            this.radius += value;\n            return this;\n        }\n    });\n\n    function numericComparer(a, b) {\n        return a - b;\n    }\n\n    var Sector = Ring.extend({\n        init: function(center, radius, startAngle, angle) {\n            Ring.fn.init.call(this, center, 0, radius, startAngle, angle);\n        },\n\n        expand: function(value) {\n            return Ring.fn.expand.call(this, value);\n        },\n\n        clone: function() {\n            return new Sector(this.center, this.radius, this.startAngle, this.angle);\n        },\n\n        setRadius: function(newRadius) {\n            this.radius = newRadius;\n\n            return this;\n        }\n    });\n\n    var DIRECTION_ANGLE = 0.001; //any value that will make the endAngle bigger than the start angle will work here.\n\n    var ShapeBuilder = Class.extend({\n        createRing: function(sector, options) {\n            var startAngle = sector.startAngle + 180;\n            var endAngle = sector.angle + startAngle;\n\n            //required in order to avoid reversing the arc direction in cases like 0.000000000000001 + 100 === 100\n            if (sector.angle > 0 && startAngle === endAngle) {\n                endAngle += DIRECTION_ANGLE;\n            }\n\n            var center = new geometry.Point(sector.center.x, sector.center.y);\n            var radius = Math.max(sector.radius, 0);\n            var innerRadius = Math.max(sector.innerRadius, 0);\n            var arc = new geometry.Arc(center, {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: radius,\n                radiusY: radius\n            });\n            var path = Path.fromArc(arc, options).close();\n\n            if (innerRadius) {\n                arc.radiusX = arc.radiusY = innerRadius;\n                var innerEnd = arc.pointAt(endAngle);\n                path.lineTo(innerEnd.x, innerEnd.y);\n                path.arc(endAngle, startAngle, innerRadius, innerRadius, true);\n            } else {\n                path.lineTo(center.x, center.y);\n            }\n\n            return path;\n        }\n    });\n\n    ShapeBuilder.current = new ShapeBuilder();\n\n    var ChartElement = Class.extend({\n        init: function(options) {\n\n            this.children = [];\n\n            this.options = deepExtend({}, this.options, this.initUserOptions(options));\n        },\n\n        initUserOptions: function(options) {\n            return options;\n        },\n\n        reflow: function(targetBox) {\n            var children = this.children;\n            var box;\n\n            for (var i = 0; i < children.length; i++) {\n                var currentChild = children[i];\n                currentChild.reflow(targetBox);\n\n                box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n            }\n\n            this.box = box || targetBox;\n        },\n\n        destroy: function() {\n            var children = this.children;\n\n            if (this.animation) {\n                this.animation.destroy();\n            }\n\n            for (var i = 0; i < children.length; i++) {\n                children[i].destroy();\n            }\n        },\n\n        getRoot: function() {\n            var parent = this.parent;\n\n            return parent ? parent.getRoot() : null;\n        },\n\n        getSender: function() {\n            var service = this.getService();\n            if (service) {\n                return service.sender;\n            }\n        },\n\n        getService: function() {\n            var element = this;\n            while (element) {\n                if (element.chartService) {\n                    return element.chartService;\n                }\n                element = element.parent;\n            }\n        },\n\n        translateChildren: function(dx, dy) {\n            var children = this.children;\n            var childrenCount = children.length;\n\n            for (var i = 0; i < childrenCount; i++) {\n                children[i].box.translate(dx, dy);\n            }\n        },\n\n        append: function() {\n            var arguments$1 = arguments;\n            var this$1$1 = this;\n\n            for (var i = 0; i < arguments.length; i++) {\n                var item = arguments$1[i];\n                this$1$1.children.push(item);\n                item.parent = this$1$1;\n            }\n        },\n\n        renderVisual: function() {\n            if (this.options.visible === false) {\n                return;\n            }\n\n            this.createVisual();\n\n            this.addVisual();\n\n            this.renderChildren();\n\n            this.createAnimation();\n            this.renderComplete();\n        },\n\n        addVisual: function() {\n            if (this.visual) {\n                this.visual.chartElement = this;\n\n                if (this.parent) {\n                    this.parent.appendVisual(this.visual);\n                }\n            }\n        },\n\n        renderChildren: function() {\n            var children = this.children;\n            var length = children.length;\n            for (var i = 0; i < length; i++) {\n                children[i].renderVisual();\n            }\n        },\n\n        createVisual: function() {\n            this.visual = new Group({\n                zIndex: this.options.zIndex,\n                visible: valueOrDefault(this.options.visible, true)\n            });\n        },\n\n        createAnimation: function() {\n            if (this.visual && this.options.animation) {\n                this.animation = drawing.Animation.create(\n                    this.visual, this.options.animation\n                );\n            }\n        },\n\n        appendVisual: function(childVisual) {\n            if (!childVisual.chartElement) {\n                childVisual.chartElement = this;\n            }\n\n            if (childVisual.options.noclip) {\n                this.clipRoot().visual.append(childVisual);\n            } else if (defined(childVisual.options.zIndex)) {\n                this.stackRoot().stackVisual(childVisual);\n            } else if (this.isStackRoot) {\n                this.stackVisual(childVisual);\n            } else if (this.visual) {\n                this.visual.append(childVisual);\n            } else {\n                // Allow chart elements without visuals to\n                // pass through child visuals\n                this.parent.appendVisual(childVisual);\n            }\n        },\n\n        clipRoot: function() {\n            if (this.parent) {\n                return this.parent.clipRoot();\n            }\n\n            return this;\n        },\n\n        stackRoot: function() {\n            if (this.parent) {\n                return this.parent.stackRoot();\n            }\n\n            return this;\n        },\n\n        stackVisual: function(childVisual) {\n            var zIndex = childVisual.options.zIndex || 0;\n            var visuals = this.visual.children;\n            var length = visuals.length;\n            var pos;\n\n            for (pos = 0; pos < length; pos++) {\n                var sibling = visuals[pos];\n                var here = valueOrDefault(sibling.options.zIndex, 0);\n                if (here > zIndex) {\n                    break;\n                }\n            }\n\n            this.visual.insert(pos, childVisual);\n        },\n\n        traverse: function(callback) {\n            var children = this.children;\n            var length = children.length;\n\n            for (var i = 0; i < length; i++) {\n                var child = children[i];\n\n                callback(child);\n                if (child.traverse) {\n                    child.traverse(callback);\n                }\n            }\n        },\n\n        closest: function(match) {\n            var element = this;\n            var matched = false;\n\n            while (element && !matched) {\n                matched = match(element);\n\n                if (!matched) {\n                    element = element.parent;\n                }\n            }\n\n            if (matched) {\n                return element;\n            }\n        },\n\n        renderComplete: function() {},\n\n        hasHighlight: function() {\n            var options = (this.options || {}).highlight;\n            return !(!this.createHighlight || (options && options.visible === false));\n        },\n\n        toggleHighlight: function(show, opacity) {\n            var this$1$1 = this;\n\n            var options = (this.options || {}).highlight || {};\n            var customVisual = options.visual;\n            var highlight = this._highlight;\n\n            if (!highlight) {\n                var highlightOptions = {\n                    fill: {\n                        color: WHITE,\n                        opacity: opacity || 0.2\n                    },\n                    stroke: {\n                        color: WHITE,\n                        width: 1,\n                        opacity: opacity || 0.2\n                    }\n                };\n\n                if (customVisual) {\n                    highlight = this._highlight = customVisual(\n                        $.extend(this.highlightVisualArgs(), {\n                            createVisual: function () { return this$1$1.createHighlight(highlightOptions); },\n                            sender: this.getSender(),\n                            series: this.series,\n                            dataItem: this.dataItem,\n                            category: this.category,\n                            value: this.value,\n                            percentage: this.percentage,\n                            runningTotal: this.runningTotal,\n                            total: this.total\n                        }\n                    ));\n\n                    if (!highlight) {\n                        return;\n                    }\n                } else {\n                    highlight = this._highlight = this.createHighlight(highlightOptions);\n                }\n\n                if (!defined(highlight.options.zIndex)) {\n                    highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n                }\n\n                this.appendVisual(highlight);\n            }\n\n            highlight.visible(show);\n        },\n\n        createGradientOverlay: function(element, options, gradientOptions) {\n            var overlay = new Path($.extend({\n                stroke: {\n                    color: \"none\"\n                },\n                fill: this.createGradient(gradientOptions),\n                closed: element.options.closed\n            }, options));\n\n            overlay.segments.elements(element.segments.elements());\n\n            return overlay;\n        },\n\n        createGradient: function(options) {\n            if (this.parent) {\n                return this.parent.createGradient(options);\n            }\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return true;\n        }\n    });\n\n    ChartElement.prototype.options = { };\n\n    var BoxElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.options.margin = getSpacing(this.options.margin);\n            this.options.padding = getSpacing(this.options.padding);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var width = options.width;\n            var height = options.height;\n            var shrinkToFit = options.shrinkToFit;\n            var hasSetSize = width && height;\n            var margin = options.margin;\n            var padding = options.padding;\n            var borderWidth = options.border.width;\n            var box;\n\n            var reflowPaddingBox = function () {\n                this$1$1.align(targetBox, X, options.align);\n                this$1$1.align(targetBox, Y, options.vAlign);\n                this$1$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n            };\n\n            var contentBox = targetBox.clone();\n            if (hasSetSize) {\n                contentBox.x2 = contentBox.x1 + width;\n                contentBox.y2 = contentBox.y1 + height;\n            }\n\n            if (shrinkToFit) {\n                contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n            }\n\n            ChartElement.fn.reflow.call(this, contentBox);\n\n            if (hasSetSize) {\n                box = this.box = new Box(0, 0, width, height);\n            } else {\n                box = this.box;\n            }\n\n            if (shrinkToFit && hasSetSize) {\n                reflowPaddingBox();\n                contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n            } else {\n                contentBox = this.contentBox = box.clone();\n                box.pad(padding).pad(borderWidth).pad(margin);\n                reflowPaddingBox();\n            }\n\n            this.translateChildren(\n                box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n                box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n            );\n\n            var children = this.children;\n            for (var i = 0; i < children.length; i++) {\n                var item = children[i];\n                item.reflow(item.box);\n            }\n        },\n\n        align: function(targetBox, axis, alignment) {\n            this.box.align(targetBox, axis, alignment);\n        },\n\n        hasBox: function() {\n            var options = this.options;\n            return options.border.width || options.background;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            if (options.visible && this.hasBox()) {\n                this.visual.append(Path.fromRect(\n                    this.paddingBox.toRect(),\n                    this.visualStyle()\n                ));\n            }\n        },\n\n        visualStyle: function() {\n            var options = this.options;\n            var border = options.border || {};\n\n            return {\n                stroke: {\n                    width: border.width,\n                    color: border.color,\n                    opacity: valueOrDefault(border.opacity, options.opacity),\n                    dashType: border.dashType\n                },\n                fill: {\n                    color: options.background,\n                    opacity: options.opacity\n                },\n                cursor: options.cursor\n            };\n        }\n    });\n\n    setDefaultOptions(BoxElement, {\n        align: LEFT,\n        vAlign: TOP,\n        margin: {},\n        padding: {},\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        background: \"\",\n        shrinkToFit: false,\n        width: 0,\n        height: 0,\n        visible: true\n    });\n\n    var ShapeElement = BoxElement.extend({\n        init: function(options, pointData) {\n            BoxElement.fn.init.call(this, options);\n\n            this.pointData = pointData;\n        },\n\n        getElement: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.paddingBox;\n            var type = options.type;\n            var rotation = options.rotation;\n            var center = box.center();\n            var halfWidth = box.width() / 2;\n            var halfHeight = box.height() / 2;\n\n            if (!options.visible || !this.hasBox()) {\n                return null;\n            }\n\n            var style = this.visualStyle();\n            var element;\n\n            if (type === CIRCLE) {\n                element = new drawing.Circle(\n                    new Circle([\n                        round(box.x1 + halfWidth, COORD_PRECISION),\n                        round(box.y1 + halfHeight, COORD_PRECISION)\n                    ], Math.min(halfWidth, halfHeight)),\n                    style\n                );\n            } else if (type === TRIANGLE) {\n                element = Path.fromPoints([\n                    [ box.x1 + halfWidth, box.y1 ],\n                    [ box.x1, box.y2 ],\n                    [ box.x2, box.y2 ]\n                ], style).close();\n            } else if (type === CROSS) {\n                element = new drawing.MultiPath(style);\n\n                element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n                element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n            } else {\n                var rect = box.toRect();\n                if (type === ROUNDED_RECT) {\n                    var borderRadius = valueOrDefault(options.borderRadius, rect.width() / 5);\n                    rect.setCornerRadius(borderRadius);\n                }\n\n                element = Path.fromRect(rect, style);\n            }\n\n            if (rotation) {\n                element.transform(geometryTransform()\n                    .rotate(-rotation, [ center.x, center.y ])\n                );\n            }\n\n            element.options.zIndex = options.zIndex;\n\n            return element;\n        },\n\n        createElement: function() {\n            var this$1$1 = this;\n\n            var customVisual = this.options.visual;\n            var pointData = this.pointData || {};\n            var visual;\n\n            if (customVisual) {\n                visual = customVisual({\n                    value: pointData.value,\n                    dataItem: pointData.dataItem,\n                    sender: this.getSender(),\n                    series: pointData.series,\n                    category: pointData.category,\n                    rect: this.paddingBox.toRect(),\n                    options: this.visualOptions(),\n                    createVisual: function () { return this$1$1.getElement(); }\n                });\n            } else {\n                visual = this.getElement();\n            }\n\n            return visual;\n        },\n\n        visualOptions: function() {\n            var options = this.options;\n            return {\n                background: options.background,\n                border: options.border,\n                margin: options.margin,\n                padding: options.padding,\n                type: options.type,\n                size: options.width,\n                visible: options.visible\n            };\n        },\n\n        createVisual: function() {\n            this.visual = this.createElement();\n        }\n    });\n\n    setDefaultOptions(ShapeElement, {\n        type: CIRCLE,\n        align: CENTER,\n        vAlign: CENTER\n    });\n\n    var LINEAR = \"linear\";\n    var RADIAL = \"radial\";\n\n    var GRADIENTS = {\n        glass: {\n            type: LINEAR,\n            rotation: 0,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.25,\n                color: WHITE,\n                opacity: 0.3\n            }, {\n                offset: 1,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        sharpBevel: {\n            type: RADIAL,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0.55\n            }, {\n                offset: 0.65,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.95,\n                color: WHITE,\n                opacity: 0.25\n            } ]\n        },\n        roundedBevel: {\n            type: RADIAL,\n            stops: [ {\n                offset: 0.33,\n                color: WHITE,\n                opacity: 0.06\n            }, {\n                offset: 0.83,\n                color: WHITE,\n                opacity: 0.2\n            }, {\n                offset: 0.95,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        roundedGlass: {\n            type: RADIAL,\n            supportVML: false,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.5,\n                color: WHITE,\n                opacity: 0.3\n            }, {\n                offset: 0.99,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        sharpGlass: {\n            type: RADIAL,\n            supportVML: false,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0.2\n            }, {\n                offset: 0.15,\n                color: WHITE,\n                opacity: 0.15\n            }, {\n                offset: 0.17,\n                color: WHITE,\n                opacity: 0.35\n            }, {\n                offset: 0.85,\n                color: WHITE,\n                opacity: 0.05\n            }, {\n                offset: 0.87,\n                color: WHITE,\n                opacity: 0.15\n            }, {\n                offset: 0.99,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        bubbleShadow: {\n            type: RADIAL,\n            center: [ 0.5, 0.5 ],\n            radius: 0.5\n        }\n    };\n\n    function boxDiff(r, s) {\n        if (r.x1 === s.x1 && r.y1 === s.y1 && r.x2 === s.x2 && r.y2 === s.y2) {\n            return s;\n        }\n\n        var a = Math.min(r.x1, s.x1);\n        var b = Math.max(r.x1, s.x1);\n        var c = Math.min(r.x2, s.x2);\n        var d = Math.max(r.x2, s.x2);\n        var e = Math.min(r.y1, s.y1);\n        var f = Math.max(r.y1, s.y1);\n        var g = Math.min(r.y2, s.y2);\n        var h = Math.max(r.y2, s.y2);\n        var boxes = [];\n\n        // X = intersection, 0-7 = possible difference areas\n        // h +-+-+-+\n        // . |5|6|7|\n        // g +-+-+-+\n        // . |3|X|4|\n        // f +-+-+-+\n        // . |0|1|2|\n        // e +-+-+-+\n        // . a b c d\n\n        // we'll always have rectangles 1, 3, 4 and 6\n        boxes[0] = new Box(b, e, c, f);\n        boxes[1] = new Box(a, f, b, g);\n        boxes[2] = new Box(c, f, d, g);\n        boxes[3] = new Box(b, g, c, h);\n\n        // decide which corners\n        if (r.x1 === a && r.y1 === e || s.x1 === a && s.y1 === e) { // corners 0 and 7\n            boxes[4] = new Box(a, e, b, f);\n            boxes[5] = new Box(c, g, d, h);\n        } else { // corners 2 and 5\n            boxes[4] = new Box(c, e, d, f);\n            boxes[5] = new Box(a, g, b, h);\n        }\n\n        return grep(boxes, function(box) {\n            return box.height() > 0 && box.width() > 0;\n        })[0];\n    }\n\n    var RootElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            var rootOptions = this.options;\n            rootOptions.width = parseInt(rootOptions.width, 10);\n            rootOptions.height = parseInt(rootOptions.height, 10);\n\n            this.gradients = {};\n        },\n\n        reflow: function() {\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var currentBox = new Box(0, 0, options.width, options.height);\n\n            this.box = currentBox.unpad(options.margin);\n\n            for (var i = 0; i < children.length; i++) {\n                children[i].reflow(currentBox);\n                currentBox = boxDiff(currentBox, children[i].box) || new Box();\n            }\n        },\n\n        createVisual: function() {\n            this.visual = new Group();\n            this.createBackground();\n        },\n\n        createBackground: function() {\n            var options = this.options;\n            var border = options.border || {};\n            var box = this.box.clone().pad(options.margin).unpad(border.width);\n\n            var background = Path.fromRect(box.toRect(), {\n                stroke: {\n                    color: border.width ? border.color : \"\",\n                    width: border.width,\n                    dashType: border.dashType\n                },\n                fill: {\n                    color: options.background,\n                    opacity: options.opacity\n                },\n                zIndex: -10\n            });\n\n            this.visual.append(background);\n        },\n\n        getRoot: function() {\n            return this;\n        },\n\n        createGradient: function(options) {\n            var gradients = this.gradients;\n            var hashCode = objectKey(options);\n            var gradient = GRADIENTS[options.gradient];\n            var drawingGradient;\n\n            if (gradients[hashCode]) {\n                drawingGradient = gradients[hashCode];\n            } else {\n                var gradientOptions = $.extend({}, gradient, options);\n                if (gradient.type === \"linear\") {\n                    drawingGradient = new drawing.LinearGradient(gradientOptions);\n                } else {\n                    if (options.innerRadius) {\n                        gradientOptions.stops = innerRadialStops(gradientOptions);\n                    }\n                    drawingGradient = new drawing.RadialGradient(gradientOptions);\n                    drawingGradient.supportVML = gradient.supportVML !== false;\n                }\n                gradients[hashCode] = drawingGradient;\n            }\n\n            return drawingGradient;\n        },\n\n        cleanGradients: function() {\n            var gradients = this.gradients;\n            for (var hashCode in gradients) {\n                gradients[hashCode]._observers = [];//add clear observers method in drawing ObserversMixin\n            }\n        },\n\n        size: function() {\n            var options = this.options;\n            return new Box(0, 0, options.width, options.height);\n        }\n    });\n\n    setDefaultOptions(RootElement, {\n        width: DEFAULT_WIDTH,\n        height: DEFAULT_HEIGHT,\n        background: WHITE,\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        margin: getSpacing(5),\n        zIndex: -2\n    });\n\n    function innerRadialStops(options) {\n        var stops = options.stops;\n        var usedSpace = ((options.innerRadius / options.radius) * 100);\n        var length = stops.length;\n        var currentStops = [];\n\n        for (var i = 0; i < length; i++) {\n            var currentStop = $.extend({}, stops[i]);\n            currentStop.offset = (currentStop.offset * (100 - usedSpace) + usedSpace) / 100;\n            currentStops.push(currentStop);\n        }\n\n        return currentStops;\n    }\n\n    var FloatElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n            this._initDirection();\n        },\n\n        _initDirection: function() {\n            var options = this.options;\n            if (options.vertical) {\n                this.groupAxis = X;\n                this.elementAxis = Y;\n                this.groupSizeField = WIDTH;\n                this.elementSizeField = HEIGHT;\n                this.groupSpacing = options.spacing;\n                this.elementSpacing = options.vSpacing;\n            } else {\n                this.groupAxis = Y;\n                this.elementAxis = X;\n                this.groupSizeField = HEIGHT;\n                this.elementSizeField = WIDTH;\n                this.groupSpacing = options.vSpacing;\n                this.elementSpacing = options.spacing;\n            }\n        },\n\n        reflow: function(targetBox) {\n            this.box = targetBox.clone();\n            this.reflowChildren();\n        },\n\n        reflowChildren: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var elementAxis = ref.elementAxis;\n            var groupAxis = ref.groupAxis;\n            var elementSizeField = ref.elementSizeField;\n            var groupSizeField = ref.groupSizeField;\n            var ref$1 = this.groupOptions();\n            var groups = ref$1.groups;\n            var groupsSize = ref$1.groupsSize;\n            var maxGroupElementsSize = ref$1.maxGroupElementsSize;\n            var groupsCount = groups.length;\n            var groupsStart = box[groupAxis + 1] + this.alignStart(groupsSize, box[groupSizeField]());\n\n            if (groupsCount) {\n                var groupStart = groupsStart;\n\n                for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                    var group = groups[groupIdx];\n                    var groupElements = group.groupElements;\n                    var elementStart = box[elementAxis + 1];\n                    var groupElementsCount = groupElements.length;\n\n                    for (var idx = 0; idx < groupElementsCount; idx++) {\n                        var element = groupElements[idx];\n                        var elementSize$$1 = this$1$1.elementSize(element);\n                        var groupElementStart = groupStart + this$1$1.alignStart(elementSize$$1[groupSizeField], group.groupSize);\n\n                        var elementBox = new Box();\n                        elementBox[groupAxis + 1] = groupElementStart;\n                        elementBox[groupAxis + 2] = groupElementStart + elementSize$$1[groupSizeField];\n                        elementBox[elementAxis + 1] = elementStart;\n                        elementBox[elementAxis + 2] = elementStart + elementSize$$1[elementSizeField];\n\n                        element.reflow(elementBox);\n\n                        elementStart += elementSize$$1[elementSizeField] + this$1$1.elementSpacing;\n                    }\n                    groupStart += group.groupSize + this$1$1.groupSpacing;\n                }\n                box[groupAxis + 1] = groupsStart;\n                box[groupAxis + 2] = groupsStart + groupsSize;\n                box[elementAxis + 2] = box[elementAxis + 1] + maxGroupElementsSize;\n            }\n        },\n\n        alignStart: function(size, maxSize) {\n            var start = 0;\n            var align = this.options.align;\n            if (align === RIGHT || align === BOTTOM) {\n                start = maxSize - size;\n            } else if (align === CENTER) {\n                start = (maxSize - size) / 2;\n            }\n            return start;\n        },\n\n        groupOptions: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var children = ref.children;\n            var elementSizeField = ref.elementSizeField;\n            var groupSizeField = ref.groupSizeField;\n            var elementSpacing = ref.elementSpacing;\n            var groupSpacing = ref.groupSpacing;\n            var maxSize = round(box[elementSizeField]());\n            var childrenCount = children.length;\n            var groups = [];\n\n            var groupSize = 0;\n            var groupElementsSize = 0;\n            var groupsSize = 0;\n            var maxGroupElementsSize = 0;\n            var groupElements = [];\n\n            for (var idx = 0; idx < childrenCount; idx++) {\n                var element = children[idx];\n                if (!element.box) {\n                    element.reflow(box);\n                }\n\n                var elementSize$$1 = this$1$1.elementSize(element);\n                if (this$1$1.options.wrap && round(groupElementsSize + elementSpacing + elementSize$$1[elementSizeField]) > maxSize) {\n                    groups.push({\n                        groupElements: groupElements,\n                        groupSize: groupSize,\n                        groupElementsSize: groupElementsSize\n                    });\n                    maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n                    groupsSize += groupSpacing + groupSize;\n                    groupSize = 0;\n                    groupElementsSize = 0;\n                    groupElements = [];\n                }\n                groupSize = Math.max(groupSize, elementSize$$1[groupSizeField]);\n                if (groupElementsSize > 0) {\n                    groupElementsSize += elementSpacing;\n                }\n                groupElementsSize += elementSize$$1[elementSizeField];\n                groupElements.push(element);\n            }\n\n            groups.push({\n                groupElements: groupElements,\n                groupSize: groupSize,\n                groupElementsSize: groupElementsSize\n            });\n            maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n            groupsSize += groupSize;\n\n            return {\n                groups: groups,\n                groupsSize: groupsSize,\n                maxGroupElementsSize: maxGroupElementsSize\n            };\n        },\n\n        elementSize: function(element) {\n            return {\n                width: element.box.width(),\n                height: element.box.height()\n            };\n        },\n\n        createVisual: function() {}\n    });\n\n    setDefaultOptions(FloatElement, {\n        vertical: true,\n        wrap: true,\n        vSpacing: 0,\n        spacing: 0\n    });\n\n    var DrawingText = drawing.Text;\n\n    var Text = ChartElement.extend({\n        init: function(content, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.content = content;\n\n            // Calculate size\n            this.reflow(new Box());\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var size = options.size = util.measureText(this.content, { font: options.font });\n\n            this.baseline = size.baseline;\n\n            this.box = new Box(targetBox.x1, targetBox.y1,\n                    targetBox.x1 + size.width, targetBox.y1 + size.height);\n        },\n\n        createVisual: function() {\n            var ref = this.options;\n            var font = ref.font;\n            var color = ref.color;\n            var opacity = ref.opacity;\n            var cursor = ref.cursor;\n\n            this.visual = new DrawingText(this.content, this.box.toRect().topLeft(), {\n                font: font,\n                fill: { color: color, opacity: opacity },\n                cursor: cursor\n            });\n        }\n    });\n\n    setDefaultOptions(Text, {\n        font: DEFAULT_FONT,\n        color: BLACK\n    });\n\n    function rectToBox(rect) {\n        var origin = rect.origin;\n        var bottomRight = rect.bottomRight();\n\n        return new Box(origin.x, origin.y, bottomRight.x, bottomRight.y);\n    }\n\n    var ROWS_SPLIT_REGEX = /\\n/m;\n\n    var TextBox = BoxElement.extend({\n        init: function(content, options, data) {\n            BoxElement.fn.init.call(this, options);\n            this.content = content;\n            this.data = data;\n\n            this._initContainer();\n            if (this.options._autoReflow !== false) {\n                this.reflow(new Box());\n            }\n        },\n\n        _initContainer: function() {\n            var options = this.options;\n            var rows = String(this.content).split(ROWS_SPLIT_REGEX);\n            var floatElement = new FloatElement({ vertical: true, align: options.align, wrap: false });\n            var textOptions = deepExtend({ }, options, { opacity: 1, animation: null });\n\n            this.container = floatElement;\n            this.append(floatElement);\n\n            for (var rowIdx = 0; rowIdx < rows.length; rowIdx++) {\n                var text = new Text(rows[rowIdx].trim(), textOptions);\n                floatElement.append(text);\n            }\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var visualFn = options.visual;\n            this.container.options.align = options.align;\n\n            if (visualFn && !this._boxReflow) {\n                var visualBox = targetBox;\n                if (!visualBox.hasSize()) {\n                    this._boxReflow = true;\n                    this.reflow(visualBox);\n                    this._boxReflow = false;\n                    visualBox = this.box;\n                }\n                var visual = this.visual = visualFn(this.visualContext(visualBox));\n\n                if (visual) {\n                    visualBox = rectToBox(visual.clippedBBox() || new Rect());\n\n                    visual.options.zIndex = options.zIndex;\n                }\n\n                this.box = this.contentBox = this.paddingBox = visualBox;\n            } else {\n                BoxElement.fn.reflow.call(this, targetBox);\n\n                if (options.rotation) {\n                    var margin = getSpacing(options.margin);\n                    var box = this.box.unpad(margin);\n\n                    this.targetBox = targetBox;\n                    this.normalBox = box.clone();\n\n                    box = this.rotate();\n                    box.translate(margin.left - margin.right, margin.top - margin.bottom);\n\n                    this.rotatedBox = box.clone();\n\n                    box.pad(margin);\n                }\n            }\n        },\n\n        createVisual: function() {\n            var options = this.options;\n\n            this.visual = new Group({\n                transform: this.rotationTransform(),\n                zIndex: options.zIndex,\n                noclip: options.noclip\n            });\n\n            if (this.hasBox()) {\n                var box = Path.fromRect(this.paddingBox.toRect(), this.visualStyle());\n                this.visual.append(box);\n            }\n        },\n\n        renderVisual: function() {\n            if (!this.options.visible) {\n                return;\n            }\n\n            if (this.options.visual) {\n                var visual = this.visual;\n                if (visual && !defined(visual.options.noclip)) {\n                    visual.options.noclip = this.options.noclip;\n                }\n                this.addVisual();\n                this.createAnimation();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        },\n\n        visualContext: function(targetBox) {\n            var this$1$1 = this;\n\n            var context = {\n                text: this.content,\n                rect: targetBox.toRect(),\n                sender: this.getSender(),\n                options: this.options,\n                createVisual: function () {\n                    this$1$1._boxReflow = true;\n                    this$1$1.reflow(targetBox);\n                    this$1$1._boxReflow = false;\n                    return this$1$1.getDefaultVisual();\n                }\n            };\n            if (this.data) {\n                $.extend(context, this.data);\n            }\n\n            return context;\n        },\n\n        getDefaultVisual: function() {\n            this.createVisual();\n            this.renderChildren();\n            var visual = this.visual;\n            delete this.visual;\n            return visual;\n        },\n\n        rotate: function() {\n            var options = this.options;\n            this.box.rotate(options.rotation);\n            this.align(this.targetBox, X, options.align);\n            this.align(this.targetBox, Y, options.vAlign);\n            return this.box;\n        },\n\n        rotationTransform: function() {\n            var rotation = this.options.rotation;\n            if (!rotation) {\n                return null;\n            }\n\n            var ref = this.normalBox.center();\n            var cx = ref.x;\n            var cy = ref.y;\n            var boxCenter = this.rotatedBox.center();\n\n            return geometryTransform()\n                       .translate(boxCenter.x - cx, boxCenter.y - cy)\n                       .rotate(rotation, [ cx, cy ]);\n        }\n    });\n\n    var Title = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this._textBox = new TextBox(this.options.text, $.extend({}, this.options, {\n                vAlign: this.options.position\n            }));\n\n            this.append(this._textBox);\n        },\n\n        reflow: function(targetBox) {\n            ChartElement.fn.reflow.call(this, targetBox);\n            this.box.snapTo(targetBox, X);\n        }\n    });\n\n    Title.buildTitle = function(options, defaultOptions) {\n        var titleOptions = options;\n\n        if (typeof options === \"string\") {\n            titleOptions = { text: options };\n        }\n\n        titleOptions = $.extend({ visible: true }, defaultOptions, titleOptions);\n\n        var title;\n        if (titleOptions && titleOptions.visible && titleOptions.text) {\n            title = new Title(titleOptions);\n        }\n\n        return title;\n    };\n\n    Title.orderTitles = function(titles) {\n        var items = [].concat(titles);\n        var top = items.filter(function (item) { return item && item.options.position !== BOTTOM; });\n        var bottom = items.filter(function (item) { return item && item.options.position === BOTTOM; });\n\n        collapseVerticalMargins(top);\n        collapseVerticalMargins(bottom);\n\n        bottom.reverse();\n        return top.concat(bottom);\n    };\n\n    function collapseVerticalMargins(items) {\n        for (var i = 1; i < items.length; i++) {\n            var box = items[i]._textBox;\n            var prevBox = items[i - 1]._textBox;\n            prevBox.options.margin = $.extend(getSpacing(prevBox.options.margin), { bottom: 0 });\n            box.options.margin = $.extend(getSpacing(box.options.margin), { top: 0 });\n        }\n    }\n\n    setDefaultOptions(Title, {\n        color: BLACK,\n        position: TOP,\n        align: CENTER,\n        margin: getSpacing(5),\n        padding: getSpacing(5)\n    });\n\n    var AxisLabel = TextBox.extend({\n        init: function(value, text, index, dataItem, options) {\n            TextBox.fn.init.call(this, text, options);\n\n            this.text = text;\n            this.value = value;\n            this.index = index;\n            this.dataItem = dataItem;\n            this.reflow(new Box());\n        },\n\n        visualContext: function(targetBox) {\n            var context = TextBox.fn.visualContext.call(this, targetBox);\n\n            context.value = this.value;\n            context.dataItem = this.dataItem;\n            context.format = this.options.format;\n            context.culture = this.options.culture;\n\n            return context;\n        },\n\n        click: function(widget, e) {\n\n            widget.trigger(AXIS_LABEL_CLICK, {\n                element: eventElement(e),\n                value: this.value,\n                text: this.text,\n                index: this.index,\n                dataItem: this.dataItem,\n                axis: this.parent.options\n            });\n        },\n\n        rotate: function() {\n            if (this.options.alignRotation !== CENTER) {\n                var box = this.normalBox.toRect();\n                var transform = this.rotationTransform();\n\n                this.box = rectToBox(box.bbox(transform.matrix()));\n            } else {\n                TextBox.fn.rotate.call(this);\n            }\n\n            return this.box;\n        },\n\n        rotationTransform: function() {\n            var options = this.options;\n            var rotation = options.rotation;\n            if (!rotation) {\n                return null;\n            }\n\n            if (options.alignRotation === CENTER) {\n                return TextBox.fn.rotationTransform.call(this);\n            }\n\n            var rotationMatrix = geometryTransform().rotate(rotation).matrix();\n            var box = this.normalBox.toRect();\n            var rect = this.targetBox.toRect();\n\n            var rotationOrigin = options.rotationOrigin || TOP;\n            var alignAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? X : Y;\n            var distanceAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? Y : X;\n            var axisAnchor = rotationOrigin === TOP || rotationOrigin === LEFT ? rect.origin : rect.bottomRight();\n\n            var topLeft = box.topLeft().transformCopy(rotationMatrix);\n            var topRight = box.topRight().transformCopy(rotationMatrix);\n            var bottomRight = box.bottomRight().transformCopy(rotationMatrix);\n            var bottomLeft = box.bottomLeft().transformCopy(rotationMatrix);\n            var rotatedBox = Rect.fromPoints(topLeft, topRight, bottomRight, bottomLeft);\n\n            var translate = {};\n            translate[distanceAxis] = rect.origin[distanceAxis] - rotatedBox.origin[distanceAxis];\n\n            var distanceLeft = Math.abs(topLeft[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n            var distanceRight = Math.abs(topRight[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n\n            var alignStart, alignEnd;\n\n            if (round(distanceLeft, DEFAULT_PRECISION) === round(distanceRight, DEFAULT_PRECISION)) {\n                alignStart = topLeft;\n                alignEnd = topRight;\n            } else if (distanceRight < distanceLeft) {\n                alignStart = topRight;\n                alignEnd = bottomRight;\n            } else {\n                alignStart = topLeft;\n                alignEnd = bottomLeft;\n            }\n\n            var alignCenter = alignStart[alignAxis] + (alignEnd[alignAxis] - alignStart[alignAxis]) / 2;\n            translate[alignAxis] = rect.center()[alignAxis] - alignCenter;\n\n            return geometryTransform()\n                .translate(translate.x, translate.y)\n                .rotate(rotation);\n        }\n    });\n\n    setDefaultOptions(AxisLabel, {\n        _autoReflow: false\n    });\n\n    var DEFAULT_ICON_SIZE = 7;\n    var DEFAULT_LABEL_COLOR = \"#fff\";\n\n    var Note = BoxElement.extend({\n        init: function(fields, options, chartService) {\n            BoxElement.fn.init.call(this, options);\n\n            this.fields = fields;\n            this.chartService = chartService;\n\n            this.render();\n        },\n\n        hide: function() {\n            this.options.visible = false;\n        },\n\n        show: function() {\n            this.options.visible = true;\n        },\n\n        render: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n\n            if (options.visible) {\n                var label = options.label;\n                var icon = options.icon;\n                var box = new Box();\n                var childAlias = function () { return this$1$1; };\n                var size = icon.size;\n                var text = this.fields.text;\n                var width, height;\n\n                if (defined(label) && label.visible) {\n                    var noteTemplate = getTemplate(label);\n                    if (noteTemplate) {\n                        text = noteTemplate(this.fields);\n                    } else if (label.format) {\n                        text = this.chartService.format.auto(label.format, text);\n                    }\n\n                    if (!label.color) {\n                        label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                    }\n\n                    this.label = new TextBox(text, deepExtend({}, label));\n                    this.label.aliasFor = childAlias;\n\n                    if (label.position === INSIDE && !defined(size)) {\n                        if (icon.type === CIRCLE) {\n                            size = Math.max(this.label.box.width(), this.label.box.height());\n                        } else {\n                            width = this.label.box.width();\n                            height = this.label.box.height();\n                        }\n                        box.wrap(this.label.box);\n                    }\n                }\n\n                icon.width = width || size || DEFAULT_ICON_SIZE;\n                icon.height = height || size || DEFAULT_ICON_SIZE;\n\n                var marker = new ShapeElement(deepExtend({}, icon));\n                marker.aliasFor = childAlias;\n\n                this.marker = marker;\n                this.append(marker);\n\n                if (this.label) {\n                    this.append(this.label);\n                }\n\n                marker.reflow(new Box());\n                this.wrapperBox = box.wrap(marker.box);\n            }\n        },\n\n        reflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var label = ref.label;\n            var marker = ref.marker;\n            var wrapperBox = ref.wrapperBox;\n            var center = targetBox.center();\n            var length = options.line.length;\n            var position = options.position;\n\n            // TODO: Review\n            if (options.visible) {\n                var lineStart, box, contentBox;\n\n                if (inArray(position, [ LEFT, RIGHT ])) {\n                    if (position === LEFT) {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                        if (options.line.visible) {\n                            lineStart = [ targetBox.x1, center.y ];\n                            this.linePoints = [\n                                lineStart,\n                                [ contentBox.x2, center.y ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    } else {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                        if (options.line.visible) {\n                            lineStart = [ targetBox.x2, center.y ];\n                            this.linePoints = [\n                                lineStart,\n                                [ contentBox.x1, center.y ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    }\n                } else {\n                    if (position === BOTTOM) {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                        if (options.line.visible) {\n                            lineStart = [ center.x, targetBox.y2 ];\n                            this.linePoints = [\n                                lineStart,\n                                [ center.x, contentBox.y1 ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    } else {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                        if (options.line.visible) {\n                            lineStart = [ center.x, targetBox.y1 ];\n                            this.linePoints = [\n                                lineStart,\n                                [ center.x, contentBox.y2 ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    }\n                }\n\n                if (marker) {\n                    marker.reflow(contentBox);\n                }\n\n                if (label) {\n                    label.reflow(contentBox);\n                    if (marker) {\n                        if (options.label.position === OUTSIDE) {\n                            label.box.alignTo(marker.box, position);\n                        }\n                        label.reflow(label.box);\n                    }\n                }\n\n                this.contentBox = contentBox;\n                this.targetBox = targetBox;\n                this.box = box || contentBox;\n            }\n        },\n\n        createVisual: function() {\n            BoxElement.fn.createVisual.call(this);\n            this.visual.options.noclip = this.options.noclip;\n\n            if (this.options.visible) {\n                this.createLine();\n            }\n        },\n\n        renderVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var customVisual = options.visual;\n            if (options.visible && customVisual) {\n                this.visual = customVisual($.extend(this.fields, {\n                    sender: this.getSender(),\n                    rect: this.targetBox.toRect(),\n                    options: {\n                        background: options.background,\n                        border: options.background,\n                        icon: options.icon,\n                        label: options.label,\n                        line: options.line,\n                        position: options.position,\n                        visible: options.visible\n                    },\n                    createVisual: function () {\n                        this$1$1.createVisual();\n                        this$1$1.renderChildren();\n                        var defaultVisual = this$1$1.visual;\n                        delete this$1$1.visual;\n                        return defaultVisual;\n                    }\n                }));\n                this.addVisual();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        },\n\n        createLine: function() {\n            var options = this.options.line;\n\n            if (this.linePoints) {\n                var path = Path.fromPoints(this.linePoints, {\n                    stroke: {\n                        color: options.color,\n                        width: options.width,\n                        dashType: options.dashType\n                    }\n                });\n\n                alignPathToPixel(path);\n                this.visual.append(path);\n            }\n        },\n\n        click: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(NOTE_CLICK, args)) {\n                e.preventDefault();\n            }\n        },\n\n        over: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(NOTE_HOVER, args)) {\n                e.preventDefault();\n            }\n        },\n\n        out: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            widget.trigger(NOTE_LEAVE, args);\n        },\n\n        eventArgs: function(e) {\n            var options = this.options;\n\n            return $.extend(this.fields, {\n                element: eventElement(e),\n                text: defined(options.label) ? options.label.text : \"\",\n                visual: this.visual\n            });\n        }\n    });\n\n    setDefaultOptions(Note, {\n        icon: {\n            visible: true,\n            type: CIRCLE\n        },\n        label: {\n            position: INSIDE,\n            visible: true,\n            align: CENTER,\n            vAlign: CENTER\n        },\n        line: {\n            visible: true\n        },\n        visible: true,\n        position: TOP,\n        zIndex: 2\n    });\n\n    var defaultImplementation = {\n        format: function (format, value) { return value; },\n\n        toString: function (value) { return value; },\n\n        parseDate: function (value) { return new Date(value); },\n\n        firstDay: function () { return 0; }\n    };\n\n    var current$1 = defaultImplementation;\n\n    var IntlService = Class.extend({\n\n    });\n\n    IntlService.register = function(userImplementation) {\n        current$1 = userImplementation;\n    };\n\n    if (Object.defineProperties) {\n        Object.defineProperties(IntlService, {\n            implementation: {\n                get: function() {\n                    return current$1;\n                }\n            }\n        });\n    }\n\n    var FORMAT_REPLACE_REGEX = /\\{(\\d+)(:[^\\}]+)?\\}/g;\n\n    var FormatService = Class.extend({\n        init: function(intlService) {\n            this._intlService = intlService;\n        },\n\n        auto: function(formatString) {\n            var arguments$1 = arguments;\n\n            var values = [], len = arguments.length - 1;\n            while ( len-- > 0 ) { values[ len ] = arguments$1[ len + 1 ]; }\n\n            var intl = this.intl;\n\n            if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n                return intl.format.apply(intl, [ formatString ].concat( values ));\n            }\n\n            return intl.toString(values[0], formatString);\n        },\n\n        localeAuto: function(formatString, values, locale) {\n            var intl = this.intl;\n            var result;\n\n            if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n                result = formatString.replace(FORMAT_REPLACE_REGEX, function(match, index, placeholderFormat) {\n                    var value = values[parseInt(index, 10)];\n\n                    return intl.toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\", locale);\n                });\n            } else {\n                result = intl.toString(values[0], formatString, locale);\n            }\n\n            return result;\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(FormatService.fn, {\n            intl: {\n                get: function() {\n                    return this._intlService || IntlService.implementation;\n                },\n                set: function(value) {\n                    this._intlService = value;\n                }\n            }\n        });\n    }\n\n    var ChartService = Class.extend({\n        init: function(chart, context) {\n            if (context === void 0) { context = {}; }\n\n            this._intlService = context.intlService;\n            this.sender = context.sender || chart;\n            this.format = new FormatService(context.intlService);\n            this.chart = chart;\n            this.rtl = Boolean(context.rtl);\n        },\n\n        notify: function(name, args) {\n            if (this.chart) {\n                this.chart.trigger(name, args);\n            }\n        },\n\n        isPannable: function(axis) {\n            var pannable = ((this.chart || {}).options || {}).pannable;\n            return pannable && pannable.lock !== axis;\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(ChartService.fn, {\n            intl: {\n                get: function() {\n                    return this._intlService || IntlService.implementation;\n                },\n                set: function(value) {\n                    this._intlService = value;\n                    this.format.intl = value;\n                }\n            }\n        });\n    }\n\n    var current$2;\n\n    var DomEventsBuilder = Class.extend({\n\n    });\n\n    DomEventsBuilder.register = function(userImplementation) {\n        current$2 = userImplementation;\n    };\n\n    DomEventsBuilder.create = function(element, events) {\n        if (current$2) {\n            return current$2.create(element, events);\n        }\n    };\n\n    var services = {\n    \tChartService: ChartService,\n    \tDomEventsBuilder: DomEventsBuilder,\n    \tFormatService: FormatService,\n    \tIntlService: IntlService,\n    \tTemplateService: TemplateService\n    };\n\n    function createAxisTick(options, tickOptions) {\n        var tickX = options.tickX;\n        var tickY = options.tickY;\n        var position = options.position;\n\n        var tick = new Path({\n            stroke: {\n                width: tickOptions.width,\n                color: tickOptions.color\n            }\n        });\n\n        if (options.vertical) {\n            tick.moveTo(tickX, position)\n                .lineTo(tickX + tickOptions.size, position);\n        } else {\n            tick.moveTo(position, tickY)\n                .lineTo(position, tickY + tickOptions.size);\n        }\n\n        alignPathToPixel(tick);\n\n        return tick;\n    }\n\n    function createAxisGridLine(options, gridLine) {\n        var lineStart = options.lineStart;\n        var lineEnd = options.lineEnd;\n        var position = options.position;\n\n        var line = new Path({\n            stroke: {\n                width: gridLine.width,\n                color: gridLine.color,\n                dashType: gridLine.dashType\n            }\n        });\n\n        if (options.vertical) {\n            line.moveTo(lineStart, position)\n                .lineTo(lineEnd, position);\n        } else {\n            line.moveTo(position, lineStart)\n                .lineTo(position, lineEnd);\n        }\n\n        alignPathToPixel(line);\n\n        return line;\n    }\n\n    var Axis = ChartElement.extend({\n        init: function(options, chartService) {\n            if (chartService === void 0) { chartService = new ChartService(); }\n\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n\n            if (!this.options.visible) {\n                this.options = deepExtend({}, this.options, {\n                    labels: {\n                        visible: false\n                    },\n                    line: {\n                        visible: false\n                    },\n                    margin: 0,\n                    majorTickSize: 0,\n                    minorTickSize: 0\n                });\n            }\n\n            this.options.minorTicks = deepExtend({}, {\n                color: this.options.line.color,\n                width: this.options.line.width,\n                visible: this.options.minorTickType !== NONE\n            }, this.options.minorTicks, {\n                size: this.options.minorTickSize,\n                align: this.options.minorTickType\n            });\n\n            this.options.majorTicks = deepExtend({}, {\n                color: this.options.line.color,\n                width: this.options.line.width,\n                visible: this.options.majorTickType !== NONE\n            }, this.options.majorTicks, {\n                size: this.options.majorTickSize,\n                align: this.options.majorTickType\n            });\n\n            this.initFields();\n\n            if (!this.options._deferLabels) {\n                this.createLabels();\n            }\n\n            this.createTitle();\n            this.createNotes();\n        },\n\n        initFields: function() {\n        },\n\n        labelsRange: function() {\n            return {\n                min: this.options.labels.skip,\n                max: this.labelsCount()\n            };\n        },\n\n        normalizeLabelRotation: function(labelOptions) {\n            var rotation = labelOptions.rotation;\n\n            if (isObject(rotation)) {\n                labelOptions.alignRotation = rotation.align;\n                labelOptions.rotation = rotation.angle;\n            }\n        },\n\n        createLabels: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var align = options.vertical ? RIGHT : CENTER;\n            var labelOptions = deepExtend({ }, options.labels, {\n                align: align,\n                zIndex: options.zIndex\n            });\n            var step = Math.max(1, labelOptions.step);\n\n            this.clearLabels();\n\n            if (labelOptions.visible) {\n                this.normalizeLabelRotation(labelOptions);\n                if (labelOptions.rotation === \"auto\") {\n                    labelOptions.rotation = 0;\n                    options.autoRotateLabels = true;\n                }\n\n                var range = this.labelsRange();\n                for (var idx = range.min; idx < range.max; idx += step) {\n                    var labelContext = { index: idx, count: range.max };\n                    var label = this$1$1.createAxisLabel(idx, labelOptions, labelContext);\n                    if (label) {\n                        this$1$1.append(label);\n                        this$1$1.labels.push(label);\n                    }\n                }\n            }\n        },\n\n        clearLabels: function() {\n            this.children = grep(this.children, function (child) { return !(child instanceof AxisLabel); });\n            this.labels = [];\n        },\n\n        clearTitle: function() {\n            var this$1$1 = this;\n\n            if (this.title) {\n                this.children = grep(this.children, function (child) { return child !== this$1$1.title; });\n                this.title = undefined;\n            }\n        },\n\n        clear: function() {\n            this.clearLabels();\n            this.clearTitle();\n        },\n\n        lineBox: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var axisX = mirror ? box.x1 : box.x2;\n            var axisY = mirror ? box.y2 : box.y1;\n            var lineWidth = options.line.width || 0;\n\n            return vertical ?\n                new Box(axisX, box.y1, axisX, box.y2 - lineWidth) :\n                new Box(box.x1, axisY, box.x2 - lineWidth, axisY);\n        },\n\n        createTitle: function() {\n            var options = this.options;\n            var titleOptions = deepExtend({\n                rotation: options.vertical ? -90 : 0,\n                text: \"\",\n                zIndex: 1,\n                visualSize: true\n            }, options.title);\n\n            if (titleOptions.visible && titleOptions.text) {\n                var title = new TextBox(titleOptions.text, titleOptions);\n                this.append(title);\n                this.title = title;\n            }\n        },\n\n        createNotes: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var notes = options.notes;\n            var items = notes.data || [];\n\n            this.notes = [];\n\n            for (var i = 0; i < items.length; i++) {\n                var item = deepExtend({}, notes, items[i]);\n                item.value = this$1$1.parseNoteValue(item.value);\n\n                var note = new Note({\n                    value: item.value,\n                    text: item.label.text,\n                    dataItem: item\n                }, item, this$1$1.chartService);\n\n                if (note.options.visible) {\n                    if (defined(note.options.position)) {\n                        if (options.vertical && !inArray(note.options.position, [ LEFT, RIGHT ])) {\n                            note.options.position = options.reverse ? LEFT : RIGHT;\n                        } else if (!options.vertical && !inArray(note.options.position, [ TOP, BOTTOM ])) {\n                            note.options.position = options.reverse ? BOTTOM : TOP;\n                        }\n                    } else {\n                        if (options.vertical) {\n                            note.options.position = options.reverse ? LEFT : RIGHT;\n                        } else {\n                            note.options.position = options.reverse ? BOTTOM : TOP;\n                        }\n                    }\n                    this$1$1.append(note);\n                    this$1$1.notes.push(note);\n                }\n            }\n        },\n\n        parseNoteValue: function(value) {\n            return value;\n        },\n\n        renderVisual: function() {\n            ChartElement.fn.renderVisual.call(this);\n\n            this.createPlotBands();\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            this.createBackground();\n            this.createLine();\n        },\n\n        gridLinesVisual: function() {\n            var gridLines = this._gridLines;\n            if (!gridLines) {\n                gridLines = this._gridLines = new Group({\n                    zIndex: -2\n                });\n                this.appendVisual(this._gridLines);\n            }\n\n            return gridLines;\n        },\n\n        createTicks: function(lineGroup) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var mirror = options.labels.mirror;\n            var majorUnit = options.majorTicks.visible ? options.majorUnit : 0;\n            var tickLineOptions = {\n                // TODO\n                // _alignLines: options._alignLines,\n                vertical: options.vertical\n            };\n\n            function render(tickPositions, tickOptions, skipUnit) {\n                var count = tickPositions.length;\n                var step = Math.max(1, tickOptions.step);\n\n                if (tickOptions.visible) {\n                    for (var i = tickOptions.skip; i < count; i += step) {\n                        if (defined(skipUnit) && (i % skipUnit === 0)) {\n                            continue;\n                        }\n\n                        tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                        tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                        tickLineOptions.position = tickPositions[i];\n\n                        lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n                    }\n                }\n            }\n\n            render(this.getMajorTickPositions(), options.majorTicks);\n            render(this.getMinorTickPositions(), options.minorTicks, majorUnit / options.minorUnit);\n        },\n\n        createLine: function() {\n            var options = this.options;\n            var line = options.line;\n            var lineBox = this.lineBox();\n\n            if (line.width > 0 && line.visible) {\n                var path = new Path({\n                    stroke: {\n                        width: line.width,\n                        color: line.color,\n                        dashType: line.dashType\n                    }\n\n                    /* TODO\n                    zIndex: line.zIndex,\n                    */\n                });\n\n                path.moveTo(lineBox.x1, lineBox.y1)\n                    .lineTo(lineBox.x2, lineBox.y2);\n\n                if (options._alignLines) {\n                    alignPathToPixel(path);\n                }\n\n                var group = this._lineGroup = new Group();\n                group.append(path);\n\n                this.visual.append(group);\n                this.createTicks(group);\n            }\n        },\n\n        getActualTickSize: function() {\n            var options = this.options;\n            var tickSize = 0;\n\n            if (options.majorTicks.visible && options.minorTicks.visible) {\n                tickSize = Math.max(options.majorTicks.size, options.minorTicks.size);\n            } else if (options.majorTicks.visible) {\n                tickSize = options.majorTicks.size;\n            } else if (options.minorTicks.visible) {\n                tickSize = options.minorTicks.size;\n            }\n\n            return tickSize;\n        },\n\n        createBackground: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var background = options.background;\n\n            if (background) {\n                this._backgroundPath = Path.fromRect(box.toRect(), {\n                    fill: {\n                        color: background\n                    },\n                    stroke: null\n                });\n\n                this.visual.append(this._backgroundPath);\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var plotBands = options.plotBands || [];\n            var vertical = options.vertical;\n            var plotArea = this.plotArea;\n\n            if (plotBands.length === 0) {\n                return;\n            }\n\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            var altAxis = grep(this.pane.axes, function (axis) { return axis.options.vertical !== this$1$1.options.vertical; })[0];\n\n            for (var idx = 0; idx < plotBands.length; idx++) {\n                var item = plotBands[idx];\n                var slotX = (void 0), slotY = (void 0);\n                var labelOptions = item.label;\n                var label = (void 0);\n\n                if (vertical) {\n                    slotX = (altAxis || plotArea.axisX).lineBox();\n                    slotY = this$1$1.getSlot(item.from, item.to, true);\n                } else {\n                    slotX = this$1$1.getSlot(item.from, item.to, true);\n                    slotY = (altAxis || plotArea.axisY).lineBox();\n                }\n\n                if (labelOptions) {\n                    labelOptions.vAlign = labelOptions.position || LEFT;\n                    label = this$1$1.createPlotBandLabel(\n                        labelOptions,\n                        item,\n                        new Box(\n                            slotX.x1,\n                            slotY.y1,\n                            slotX.x2,\n                            slotY.y2\n                        )\n\n                    );\n                }\n\n                if (slotX.width() !== 0 && slotY.height() !== 0) {\n                    var bandRect = new Rect(\n                        [ slotX.x1, slotY.y1 ],\n                        [ slotX.width(), slotY.height() ]\n                    );\n\n                    var path = Path.fromRect(bandRect, {\n                        fill: {\n                            color: item.color,\n                            opacity: item.opacity\n                        },\n                        stroke: null\n                    });\n\n                    group.append(path);\n                    if (label) {\n                        group.append(label);\n                    }\n                }\n            }\n\n            this.appendVisual(group);\n        },\n\n        createPlotBandLabel: function(label, item, box) {\n\n            if (label.visible === false) {\n                return null;\n            }\n\n            var text = label.text;\n            var textbox;\n\n            if (defined(label) && label.visible) {\n                var labelTemplate = getTemplate(label);\n                if (labelTemplate) {\n                    text = labelTemplate({ text: text, item: item });\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = this.options.labels.color;\n                }\n            }\n\n            textbox = new TextBox(text, label);\n            textbox.reflow(box);\n            textbox.renderVisual();\n\n            return textbox.visual;\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var minorUnit = options.minorUnit;\n            var vertical = options.vertical;\n            var axisLineVisible = altAxis.options.line.visible;\n            var majorUnit = majorGridLines.visible ? options.majorUnit : 0;\n            var lineBox = altAxis.lineBox();\n            var linePos = lineBox[vertical ? \"y1\" : \"x1\"];\n            var lineOptions = {\n                lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n                lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n                vertical: vertical\n            };\n            var majorTicks = [];\n\n            var container = this.gridLinesVisual();\n\n            function render(tickPositions, gridLine, skipUnit) {\n                var count = tickPositions.length;\n                var step = Math.max(1, gridLine.step);\n\n                if (gridLine.visible) {\n                    for (var i = gridLine.skip; i < count; i += step) {\n                        var pos = round(tickPositions[i]);\n                        if (!inArray(pos, majorTicks)) {\n                            if (i % skipUnit !== 0 && (!axisLineVisible || linePos !== pos)) {\n                                lineOptions.position = pos;\n                                container.append(createAxisGridLine(lineOptions, gridLine));\n\n                                majorTicks.push(pos);\n                            }\n                        }\n                    }\n                }\n            }\n\n            render(this.getMajorTickPositions(), majorGridLines);\n            render(this.getMinorTickPositions(), minorGridLines, majorUnit / minorUnit);\n\n            return container.children;\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var title = ref.title;\n            var vertical = options.vertical;\n            var count = labels.length;\n            var sizeFn = vertical ? WIDTH : HEIGHT;\n            var titleSize = title ? title.box[sizeFn]() : 0;\n            var space = this.getActualTickSize() + options.margin + titleSize;\n            var rootBox = (this.getRoot() || {}).box || box;\n            var boxSize = rootBox[sizeFn]();\n            var maxLabelSize = 0;\n\n            for (var i = 0; i < count; i++) {\n                var labelSize = labels[i].box[sizeFn]();\n                if (labelSize + space <= boxSize) {\n                    maxLabelSize = Math.max(maxLabelSize, labelSize);\n                }\n            }\n\n            if (vertical) {\n                this.box = new Box(\n                    box.x1, box.y1,\n                    box.x1 + maxLabelSize + space, box.y2\n                );\n            } else {\n                this.box = new Box(\n                    box.x1, box.y1,\n                    box.x2, box.y1 + maxLabelSize + space\n                );\n            }\n\n            this.arrangeTitle();\n            this.arrangeLabels();\n            this.arrangeNotes();\n        },\n\n        getLabelsTickPositions: function() {\n            return this.getMajorTickPositions();\n        },\n\n        labelTickIndex: function(label) {\n            return label.index;\n        },\n\n        arrangeLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var labelsBetweenTicks = this.labelsBetweenTicks();\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var tickPositions = this.getLabelsTickPositions();\n\n            for (var idx = 0; idx < labels.length; idx++) {\n                var label = labels[idx];\n                var tickIx = this$1$1.labelTickIndex(label);\n                var labelSize = vertical ? label.box.height() : label.box.width();\n                var firstTickPosition = tickPositions[tickIx];\n                var nextTickPosition = tickPositions[tickIx + 1];\n                var positionStart = (void 0), positionEnd = (void 0);\n\n                if (vertical) {\n                    if (labelsBetweenTicks) {\n                        var middle = firstTickPosition + (nextTickPosition - firstTickPosition) / 2;\n                        positionStart = middle - (labelSize / 2);\n                    } else {\n                        positionStart = firstTickPosition - (labelSize / 2);\n                    }\n\n                    positionEnd = positionStart;\n                } else {\n                    if (labelsBetweenTicks) {\n                        positionStart = firstTickPosition;\n                        positionEnd = nextTickPosition;\n                    } else {\n                        positionStart = firstTickPosition - (labelSize / 2);\n                        positionEnd = positionStart + labelSize;\n                    }\n                }\n\n                this$1$1.positionLabel(label, mirror, positionStart, positionEnd);\n            }\n        },\n\n        positionLabel: function(label, mirror, positionStart, positionEnd) {\n            if (positionEnd === void 0) { positionEnd = positionStart; }\n\n            var options = this.options;\n            var vertical = options.vertical;\n            var lineBox = this.lineBox();\n            var labelOffset = this.getActualTickSize() + options.margin;\n            var labelBox;\n\n            if (vertical) {\n                var labelX = lineBox.x2;\n\n                if (mirror) {\n                    labelX += labelOffset;\n                    label.options.rotationOrigin = LEFT;\n                } else {\n                    labelX -= labelOffset + label.box.width();\n                    label.options.rotationOrigin = RIGHT;\n                }\n\n                labelBox = label.box.move(labelX, positionStart);\n            } else {\n                var labelY = lineBox.y1;\n\n                if (mirror) {\n                    labelY -= labelOffset + label.box.height();\n                    label.options.rotationOrigin = BOTTOM;\n                } else {\n                    labelY += labelOffset;\n                    label.options.rotationOrigin = TOP;\n                }\n\n                labelBox = new Box(\n                    positionStart, labelY,\n                    positionEnd, labelY + label.box.height()\n                );\n            }\n\n            label.reflow(labelBox);\n        },\n\n        autoRotateLabelAngle: function(labelBox, slotWidth) {\n            if (labelBox.width() < slotWidth) {\n                return 0;\n            }\n\n            if (labelBox.height() > slotWidth) {\n                return -90;\n            }\n\n            return -45;\n        },\n\n        autoRotateLabels: function() {\n            var this$1$1 = this;\n\n            if (!this.options.autoRotateLabels || this.options.vertical) {\n                return false;\n            }\n\n            var tickPositions = this.getMajorTickPositions();\n            var labels = this.labels;\n            var limit = Math.min(labels.length, tickPositions.length - 1);\n            var angle = 0;\n\n            for (var idx = 0; idx < limit; idx++) {\n                var width = Math.abs(tickPositions[idx + 1] - tickPositions[idx]);\n                var labelBox = labels[idx].box;\n                var labelAngle = this$1$1.autoRotateLabelAngle(labelBox, width);\n\n                if (labelAngle !== 0) {\n                    angle = labelAngle;\n                }\n\n                if (angle === -90) {\n                    break;\n                }\n            }\n\n            if (angle !== 0) {\n                for (var idx$1 = 0; idx$1 < labels.length; idx$1++) {\n                    labels[idx$1].options.rotation = angle;\n                    labels[idx$1].reflow(new Box());\n                }\n\n                return true;\n            }\n        },\n\n        arrangeTitle: function() {\n            var ref = this;\n            var options = ref.options;\n            var title = ref.title;\n            var mirror = options.labels.mirror;\n            var vertical = options.vertical;\n\n            if (title) {\n                if (vertical) {\n                    title.options.align = mirror ? RIGHT : LEFT;\n                    title.options.vAlign = title.options.position;\n                } else {\n                    title.options.align = title.options.position;\n                    title.options.vAlign = mirror ? TOP : BOTTOM;\n                }\n\n                title.reflow(this.box);\n            }\n        },\n\n        arrangeNotes: function() {\n            var this$1$1 = this;\n\n            for (var idx = 0; idx < this.notes.length; idx++) {\n                var item = this$1$1.notes[idx];\n                var value = item.options.value;\n                var slot = (void 0);\n\n                if (defined(value)) {\n                    if (this$1$1.shouldRenderNote(value)) {\n                        item.show();\n                    } else {\n                        item.hide();\n                    }\n\n                    slot = this$1$1.noteSlot(value);\n                } else {\n                    item.hide();\n                }\n\n                item.reflow(slot || this$1$1.lineBox());\n            }\n        },\n\n        noteSlot: function(value) {\n            return this.getSlot(value);\n        },\n\n        alignTo: function(secondAxis) {\n            var lineBox = secondAxis.lineBox();\n            var vertical = this.options.vertical;\n            var pos = vertical ? Y : X;\n\n            this.box.snapTo(lineBox, pos);\n            if (vertical) {\n                this.box.shrink(0, this.lineBox().height() - lineBox.height());\n            } else {\n                this.box.shrink(this.lineBox().width() - lineBox.width(), 0);\n            }\n            this.box[pos + 1] -= this.lineBox()[pos + 1] - lineBox[pos + 1];\n            this.box[pos + 2] -= this.lineBox()[pos + 2] - lineBox[pos + 2];\n        },\n\n        axisLabelText: function(value, options, context) {\n            var this$1$1 = this;\n\n            var text;\n            var tmpl = getTemplate(options);\n            var defaultText = function () {\n                if (!options.format) {\n                    return value;\n                }\n\n                return this$1$1.chartService.format.localeAuto(\n                    options.format, [ value ], options.culture\n                );\n            };\n\n            if (tmpl) {\n                var templateContext = $.extend({}, context, {\n                    get text() { return defaultText(); },\n                    value: value,\n                    format: options.format,\n                    culture: options.culture\n                });\n\n                text = tmpl(templateContext);\n            } else {\n                text = defaultText();\n            }\n\n            return text;\n        },\n\n        slot: function(from , to, limit) {\n            var slot = this.getSlot(from, to, limit);\n            if (slot) {\n                return slot.toRect();\n            }\n        },\n\n        contentBox: function() {\n            var box = this.box.clone();\n            var labels = this.labels;\n            if (labels.length) {\n                var axis = this.options.vertical ? Y : X;\n                if (this.chartService.isPannable(axis)) {\n                    var offset = this.maxLabelOffset();\n                    box[axis + 1] -= offset.start;\n                    box[axis + 2] += offset.end;\n                } else {\n                    if (labels[0].options.visible) {\n                        box.wrap(labels[0].box);\n                    }\n                    var lastLabel = labels[labels.length - 1];\n                    if (lastLabel.options.visible) {\n                        box.wrap(lastLabel.box);\n                    }\n                }\n            }\n\n            return box;\n        },\n\n        maxLabelOffset: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var labelsBetweenTicks = this.labelsBetweenTicks();\n            var tickPositions = this.getLabelsTickPositions();\n            var offsetField = vertical ? Y : X;\n            var labels = this.labels;\n            var startPosition = reverse ? 1 : 0;\n            var endPosition = reverse ? 0 : 1;\n            var maxStartOffset = 0;\n            var maxEndOffset = 0;\n\n            for (var idx = 0; idx < labels.length; idx++) {\n                var label = labels[idx];\n                var tickIx = this$1$1.labelTickIndex(label);\n                var startTick = (void 0), endTick = (void 0);\n\n                if (labelsBetweenTicks) {\n                    startTick = tickPositions[tickIx + startPosition];\n                    endTick = tickPositions[tickIx + endPosition];\n                } else {\n                    startTick = endTick = tickPositions[tickIx];\n                }\n\n                maxStartOffset = Math.max(maxStartOffset, startTick - label.box[offsetField + 1]);\n                maxEndOffset = Math.max(maxEndOffset, label.box[offsetField + 2] - endTick);\n            }\n\n            return {\n                start: maxStartOffset,\n                end: maxEndOffset\n            };\n        },\n\n        limitRange: function(from, to, min, max, offset) {\n            var options = this.options;\n\n            if ((from < min && offset < 0 && (!defined(options.min) || options.min <= min)) || (max < to && offset > 0 && (!defined(options.max) || max <= options.max))) {\n                return null;\n            }\n\n            if ((to < min && offset > 0) || (max < from && offset < 0)) {\n                return {\n                    min: from,\n                    max: to\n                };\n            }\n\n            var rangeSize = to - from;\n            var minValue = from;\n            var maxValue = to;\n\n            if (from < min && offset < 0) {\n                minValue = limitValue(from, min, max);\n                maxValue = limitValue(from + rangeSize, min + rangeSize, max);\n            } else if (to > max && offset > 0) {\n                maxValue = limitValue(to, min, max);\n                minValue = limitValue(to - rangeSize, min, max - rangeSize);\n            }\n\n            return {\n                min: minValue,\n                max: maxValue\n            };\n        },\n\n        valueRange: function() {\n            return {\n                min: this.seriesMin,\n                max: this.seriesMax\n            };\n        },\n\n        lineDir: function() {\n            /*\n             * Axis line direction:\n             *   * Vertical: up.\n             *   * Horizontal: right.\n             */\n\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            return (vertical ? -1 : 1) * (reverse ? -1 : 1);\n        },\n\n        lineInfo: function() {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var lineBox = this.lineBox();\n            var lineSize = vertical ? lineBox.height() : lineBox.width();\n            var axis = vertical ? Y : X;\n            var axisDir = this.lineDir();\n            var startEdge = axisDir === 1 ? 1 : 2;\n            var axisOrigin = axis + startEdge.toString();\n            var lineStart = lineBox[axisOrigin];\n\n            return {\n                axis: axis,\n                axisOrigin: axisOrigin,\n                axisDir: axisDir,\n                lineBox: lineBox,\n                lineSize: lineSize,\n                lineStart: lineStart\n            };\n        },\n\n        pointOffset: function(point) {\n            var ref = this.lineInfo();\n            var axis = ref.axis;\n            var axisDir = ref.axisDir;\n            var axisOrigin = ref.axisOrigin;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var relative = axisDir > 0 ? point[axis] - lineBox[axisOrigin] : lineBox[axisOrigin] - point[axis];\n            var offset = relative / lineSize;\n\n            return offset;\n        },\n\n        scaleToDelta: function(rawScale, range) {\n            // Scale >= 1 would result in axis range of 0.\n            // Scale <= -1 would reverse the scale direction.\n            var MAX_SCALE = 0.999;\n            var scale = limitValue(rawScale, -MAX_SCALE, MAX_SCALE);\n\n            var delta;\n            if (scale > 0) {\n                delta = range * Math.min(1, scale);\n            } else {\n                delta = range - (range / (1 + scale));\n            }\n\n            return delta;\n        },\n\n        labelsBetweenTicks: function() {\n            return !this.options.justified;\n        },\n\n        prepareUserOptions: function() {\n        }\n    });\n\n    setDefaultOptions(Axis, {\n        labels: {\n            visible: true,\n            rotation: 0,\n            mirror: false,\n            step: 1,\n            skip: 0\n        },\n        line: {\n            width: 1,\n            color: BLACK,\n            visible: true\n        },\n        title: {\n            visible: true,\n            position: CENTER\n        },\n        majorTicks: {\n            align: OUTSIDE,\n            size: 4,\n            skip: 0,\n            step: 1\n        },\n        minorTicks: {\n            align: OUTSIDE,\n            size: 3,\n            skip: 0,\n            step: 1\n        },\n        axisCrossingValue: 0,\n        majorTickType: OUTSIDE,\n        minorTickType: NONE,\n        majorGridLines: {\n            skip: 0,\n            step: 1\n        },\n        minorGridLines: {\n            visible: false,\n            width: 1,\n            color: BLACK,\n            skip: 0,\n            step: 1\n        },\n        // TODO: Move to line or labels options\n        margin: 5,\n        visible: true,\n        reverse: false,\n        justified: true,\n        notes: {\n            label: {\n                text: \"\"\n            }\n        },\n\n        _alignLines: true,\n        _deferLabels: false\n    });\n\n    var MILLISECONDS = \"milliseconds\";\n    var SECONDS = \"seconds\";\n    var MINUTES = \"minutes\";\n    var HOURS = \"hours\";\n    var DAYS = \"days\";\n    var WEEKS = \"weeks\";\n    var MONTHS = \"months\";\n    var YEARS = \"years\";\n\n    var TIME_PER_MILLISECOND = 1;\n    var TIME_PER_SECOND = 1000;\n    var TIME_PER_MINUTE = 60 * TIME_PER_SECOND;\n    var TIME_PER_HOUR = 60 * TIME_PER_MINUTE;\n    var TIME_PER_DAY = 24 * TIME_PER_HOUR;\n    var TIME_PER_WEEK = 7 * TIME_PER_DAY;\n    var TIME_PER_MONTH = 31 * TIME_PER_DAY;\n    var TIME_PER_YEAR = 365 * TIME_PER_DAY;\n    var TIME_PER_UNIT = {\n        \"years\": TIME_PER_YEAR,\n        \"months\": TIME_PER_MONTH,\n        \"weeks\": TIME_PER_WEEK,\n        \"days\": TIME_PER_DAY,\n        \"hours\": TIME_PER_HOUR,\n        \"minutes\": TIME_PER_MINUTE,\n        \"seconds\": TIME_PER_SECOND,\n        \"milliseconds\": TIME_PER_MILLISECOND\n    };\n\n    function absoluteDateDiff(a, b) {\n        var diff = a.getTime() - b;\n        var offsetDiff = a.getTimezoneOffset() - b.getTimezoneOffset();\n\n        return diff - (offsetDiff * TIME_PER_MINUTE);\n    }\n\n    function addTicks(date, ticks) {\n        return new Date(date.getTime() + ticks);\n    }\n\n    function toDate(value) {\n        var result;\n\n        if (value instanceof Date) {\n            result = value;\n        } else if (value) {\n            result = new Date(value);\n        }\n\n        return result;\n    }\n\n    function startOfWeek(date, weekStartDay) {\n        if (weekStartDay === void 0) { weekStartDay = 0; }\n\n        var daysToSubtract = 0;\n        var day = date.getDay();\n\n        if (!isNaN(day)) {\n            while (day !== weekStartDay) {\n                if (day === 0) {\n                    day = 6;\n                } else {\n                    day--;\n                }\n\n                daysToSubtract++;\n            }\n        }\n\n        return addTicks(date, -daysToSubtract * TIME_PER_DAY);\n    }\n\n    function adjustDST(date, hours) {\n        if (hours === 0 && date.getHours() === 23) {\n            date.setHours(date.getHours() + 2);\n            return true;\n        }\n\n        return false;\n    }\n\n    function addHours(date, hours) {\n        var roundedDate = new Date(date);\n\n        roundedDate.setMinutes(0, 0, 0);\n\n        var tzDiff = (date.getTimezoneOffset() - roundedDate.getTimezoneOffset()) * TIME_PER_MINUTE;\n\n        return addTicks(roundedDate, tzDiff + hours * TIME_PER_HOUR);\n    }\n\n    function addDuration(dateValue, value, unit, weekStartDay) {\n        var result = dateValue;\n\n        if (dateValue) {\n            var date = toDate(dateValue);\n            var hours = date.getHours();\n\n            if (unit === YEARS) {\n                result = new Date(date.getFullYear() + value, 0, 1);\n                adjustDST(result, 0);\n            } else if (unit === MONTHS) {\n                result = new Date(date.getFullYear(), date.getMonth() + value, 1);\n                adjustDST(result, hours);\n            } else if (unit === WEEKS) {\n                result = addDuration(startOfWeek(date, weekStartDay), value * 7, DAYS);\n                adjustDST(result, hours);\n            } else if (unit === DAYS) {\n                result = new Date(date.getFullYear(), date.getMonth(), date.getDate() + value);\n                adjustDST(result, hours);\n            } else if (unit === HOURS) {\n                result = addHours(date, value);\n            } else if (unit === MINUTES) {\n                result = addTicks(date, value * TIME_PER_MINUTE);\n\n                if (result.getSeconds() > 0) {\n                    result.setSeconds(0);\n                }\n            } else if (unit === SECONDS) {\n                result = addTicks(date, value * TIME_PER_SECOND);\n            } else if (unit === MILLISECONDS) {\n                result = addTicks(date, value);\n            }\n\n            if (unit !== MILLISECONDS && result.getMilliseconds() > 0) {\n                result.setMilliseconds(0);\n            }\n        }\n\n        return result;\n    }\n\n    function floorDate(date, unit, weekStartDay) {\n        return addDuration(toDate(date), 0, unit, weekStartDay);\n    }\n\n    function ceilDate(dateValue, unit, weekStartDay) {\n        var date = toDate(dateValue);\n\n        if (date && floorDate(date, unit, weekStartDay).getTime() === date.getTime()) {\n            return date;\n        }\n\n        return addDuration(date, 1, unit, weekStartDay);\n    }\n\n    function dateComparer(a, b) {\n        if (a && b) {\n            return a.getTime() - b.getTime();\n        }\n\n        return -1;\n    }\n\n    function dateDiff(a, b) {\n        return a.getTime() - b;\n    }\n\n    function toTime(value) {\n        if (isArray(value)) {\n            var result = [];\n            for (var idx = 0; idx < value.length; idx++) {\n                result.push(toTime(value[idx]));\n            }\n\n            return result;\n        } else if (value) {\n            return toDate(value).getTime();\n        }\n    }\n\n    function dateEquals(a, b) {\n        if (a && b) {\n            return toTime(a) === toTime(b);\n        }\n\n        return a === b;\n    }\n\n    function timeIndex(date, start, baseUnit) {\n        return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n    }\n\n    function dateIndex(value, start, baseUnit, baseUnitStep) {\n        var date = toDate(value);\n        var startDate = toDate(start);\n        var index;\n\n        if (baseUnit === MONTHS) {\n            index = (date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12) +\n                timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n        } else if (baseUnit === YEARS) {\n            index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n        } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n            index = timeIndex(date, startDate, baseUnit);\n        } else {\n            index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n        }\n\n        return index / baseUnitStep;\n    }\n\n    function duration(a, b, unit) {\n        var diff;\n\n        if (unit === YEARS) {\n            diff = b.getFullYear() - a.getFullYear();\n        } else if (unit === MONTHS) {\n            diff = duration(a, b, YEARS) * 12 + b.getMonth() - a.getMonth();\n        } else if (unit === DAYS) {\n            diff = Math.floor(dateDiff(b, a) / TIME_PER_DAY);\n        } else {\n            diff = Math.floor(dateDiff(b, a) / TIME_PER_UNIT[unit]);\n        }\n\n        return diff;\n    }\n\n    function lteDateIndex(date, sortedDates) {\n        var low = 0;\n        var high = sortedDates.length - 1;\n        var index;\n\n        while (low <= high) {\n            index = Math.floor((low + high) / 2);\n            var currentDate = sortedDates[index];\n\n            if (currentDate < date) {\n                low = index + 1;\n                continue;\n            }\n\n            if (currentDate > date) {\n                high = index - 1;\n                continue;\n            }\n\n            while (dateEquals(sortedDates[index - 1], date)) {\n                index--;\n            }\n\n            return index;\n        }\n\n        if (sortedDates[index] <= date) {\n            return index;\n        }\n\n        return index - 1;\n    }\n\n    function parseDate(intlService, date) {\n        var result;\n        if (isString(date)) {\n            result = intlService.parseDate(date) || toDate(date);\n        } else {\n            result = toDate(date);\n        }\n        return result;\n    }\n\n    function parseDates(intlService, dates) {\n        if (isArray(dates)) {\n            var result = [];\n            for (var idx = 0; idx < dates.length; idx++) {\n                result.push(parseDate(intlService, dates[idx]));\n            }\n\n            return result;\n        }\n\n        return parseDate(intlService, dates);\n    }\n\n    function firstDay(options, intlService) {\n        if (isNumber(options.weekStartDay)) {\n            return options.weekStartDay;\n        }\n\n        if (intlService && intlService.firstDay) {\n            return intlService.firstDay();\n        }\n\n        return 0;\n    }\n\n    var MIN_CATEGORY_POINTS_RANGE = 0.01;\n    var MIN_CATEGORY_RANGE = 0.1;\n\n    function indexOf(value, arr) {\n        if (value instanceof Date) {\n            var length = arr.length;\n            for (var idx = 0; idx < length; idx++) {\n                if (dateEquals(arr[idx], value)) {\n                    return idx;\n                }\n            }\n\n            return -1;\n        }\n\n        return arr.indexOf(value);\n    }\n\n    var CategoryAxis = Axis.extend({\n        initFields: function() {\n            this._ticks = {};\n        },\n\n        categoriesHash: function() {\n            return \"\";\n        },\n\n        clone: function() {\n            var copy = new CategoryAxis($.extend({}, this.options, {\n                categories: this.options.srcCategories\n            }), this.chartService);\n            copy.createLabels();\n\n            return copy;\n        },\n\n        initUserOptions: function(options) {\n            var categories = options.categories || [];\n            var definedMin = defined(options.min);\n            var definedMax = defined(options.max);\n            options.srcCategories = options.categories = categories;\n\n            if ((definedMin || definedMax) && categories.length) {\n                var min = definedMin ? Math.floor(options.min) : 0;\n                var max;\n\n                if (definedMax) {\n                    max = options.justified ? Math.floor(options.max) + 1 : Math.ceil(options.max);\n                } else {\n                    max = categories.length;\n                }\n\n                options.categories = options.categories.slice(min, max);\n            }\n\n            return options;\n        },\n\n        rangeIndices: function() {\n            var options = this.options;\n            var length = options.categories.length || 1;\n            var min = isNumber(options.min) ? options.min % 1 : 0;\n            var max;\n\n            if (isNumber(options.max) && options.max % 1 !== 0 && options.max < this.totalRange().max) {\n                max = length - (1 - options.max % 1);\n            } else {\n                max = length - (options.justified ? 1 : 0);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        totalRangeIndices: function(limit) {\n            var options = this.options;\n            var min = isNumber(options.min) ? options.min : 0;\n            var max;\n\n            if (isNumber(options.max)) {\n                max = options.max;\n            } else if (isNumber(options.min)) {\n                max = min + options.categories.length;\n            } else {\n                max = this.totalRange().max || 1;\n            }\n\n            if (limit) {\n                var totalRange = this.totalRange();\n                min = limitValue(min, 0, totalRange.max);\n                max = limitValue(max, 0, totalRange.max);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        range: function() {\n            var options = this.options;\n            var min = isNumber(options.min) ? options.min : 0;\n            var max = isNumber(options.max) ? options.max : this.totalRange().max;\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        roundedRange: function() {\n            return this.range();\n        },\n\n        totalRange: function() {\n            var options = this.options;\n            return { min: 0, max: Math.max(this._seriesMax || 0, options.srcCategories.length) - (options.justified ? 1 : 0) };\n        },\n\n        scaleOptions: function() {\n            var ref = this.rangeIndices();\n            var min = ref.min;\n            var max = ref.max;\n            var lineBox = this.lineBox();\n            var size = this.options.vertical ? lineBox.height() : lineBox.width();\n            var scale = size / ((max - min) || 1);\n\n            return {\n                scale: scale * (this.options.reverse ? -1 : 1),\n                box: lineBox,\n                min: min,\n                max: max\n            };\n        },\n\n        arrangeLabels: function() {\n            Axis.fn.arrangeLabels.call(this);\n            this.hideOutOfRangeLabels();\n        },\n\n        hideOutOfRangeLabels: function() {\n            var ref = this;\n            var box = ref.box;\n            var labels = ref.labels;\n\n            if (labels.length > 0) {\n                var valueAxis = this.options.vertical ? Y : X;\n                var start = box[valueAxis + 1];\n                var end = box[valueAxis + 2];\n                var firstLabel = labels[0];\n                var lastLabel = last(labels);\n\n                if (firstLabel.box[valueAxis + 1] > end || firstLabel.box[valueAxis + 2] < start) {\n                    firstLabel.options.visible = false;\n                }\n                if (lastLabel.box[valueAxis + 1] > end || lastLabel.box[valueAxis + 2] < start) {\n                    lastLabel.options.visible = false;\n                }\n            }\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTicks().majorTicks;\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTicks().minorTicks;\n        },\n\n        getLabelsTickPositions: function() {\n            return this.getTicks().labelTicks;\n        },\n\n        tickIndices: function(stepSize) {\n            var ref = this.rangeIndices();\n            var min = ref.min;\n            var max = ref.max;\n            var limit = Math.ceil(max);\n            var current = Math.floor(min);\n            var indices = [];\n\n            while (current <= limit) {\n                indices.push(current);\n                current += stepSize;\n            }\n\n            return indices;\n        },\n\n        getTickPositions: function(stepSize) {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var min = ref$1.min;\n            var pos = box[(vertical ? Y : X) + (reverse ? 2 : 1)];\n            var indices = this.tickIndices(stepSize);\n            var positions = [];\n\n            for (var idx = 0; idx < indices.length; idx++) {\n                positions.push(pos + round(scale * (indices[idx] - min), COORD_PRECISION));\n            }\n\n            return positions;\n        },\n\n        getTicks: function() {\n            var options = this.options;\n            var cache = this._ticks;\n            var range = this.rangeIndices();\n            var lineBox = this.lineBox();\n            var hash = lineBox.getHash() + range.min + \",\" + range.max + options.reverse + options.justified;\n\n            if (cache._hash !== hash) {\n                var hasMinor = options.minorTicks.visible || options.minorGridLines.visible;\n                cache._hash = hash;\n                cache.labelTicks = this.getTickPositions(1);\n                cache.majorTicks = this.filterOutOfRangePositions(cache.labelTicks, lineBox);\n                cache.minorTicks = hasMinor ? this.filterOutOfRangePositions(this.getTickPositions(0.5), lineBox) : [];\n            }\n\n            return cache;\n        },\n\n        filterOutOfRangePositions: function(positions, lineBox) {\n            if (!positions.length) {\n                return positions;\n            }\n\n            var axis = this.options.vertical ? Y : X;\n            var inRange = function (position) { return lineBox[axis + 1] <= position && position <= lineBox[axis + 2]; };\n\n            var end = positions.length - 1;\n            var startIndex = 0;\n            while (!inRange(positions[startIndex]) && startIndex <= end) {\n                startIndex++;\n            }\n\n            var endIndex = end;\n\n            while (!inRange(positions[endIndex]) && endIndex >= 0) {\n                endIndex--;\n            }\n\n            return positions.slice(startIndex, endIndex + 1);\n        },\n\n        lineInfo: function() {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var lineBox = this.lineBox();\n            var lineSize = vertical ? lineBox.height() : lineBox.width();\n            var axis = vertical ? Y : X;\n            var axisDir = reverse ? -1 : 1;\n            var startEdge = axisDir === 1 ? 1 : 2;\n            var axisOrigin = axis + startEdge.toString();\n            var lineStart = lineBox[axisOrigin];\n\n            return {\n                axis: axis,\n                axisOrigin: axisOrigin,\n                axisDir: axisDir,\n                lineBox: lineBox,\n                lineSize: lineSize,\n                lineStart: lineStart\n            };\n        },\n\n        lineDir: function() {\n            /*\n             *  Category axis line direction:\n             *    * Vertical: down.\n             *    * Horizontal: right.\n             */\n\n            var ref = this.options;\n            var reverse = ref.reverse;\n            return reverse ? -1 : 1;\n        },\n\n        getSlot: function(from, to, limit) {\n            var options = this.options;\n            var reverse = options.reverse;\n            var justified = options.justified;\n            var ref = this.scaleOptions();\n            var scale = ref.scale;\n            var box = ref.box;\n            var min = ref.min;\n            var ref$1 = this.lineInfo();\n            var valueAxis = ref$1.axis;\n            var lineStart = ref$1.lineStart;\n\n            var slotBox = box.clone();\n            var singleSlot = !defined(to);\n\n            var start = valueOrDefault(from, 0);\n            var end = valueOrDefault(to, start);\n            end = Math.max(end - 1, start);\n\n            // Fixes transient bug caused by iOS 6.0 JIT\n            // (one can never be too sure)\n            end = Math.max(start, end);\n\n            var p1 = lineStart + (start - min) * scale;\n            var p2 = lineStart + (end + 1 - min) * scale;\n\n            if (singleSlot && justified) {\n                p2 = p1;\n            }\n\n            if (limit) {\n                p1 = limitValue(p1, box[valueAxis + 1], box[valueAxis + 2]);\n                p2 = limitValue(p2, box[valueAxis + 1], box[valueAxis + 2]);\n            }\n\n            slotBox[valueAxis + 1] = reverse ? p2 : p1;\n            slotBox[valueAxis + 2] = reverse ? p1 : p2;\n\n            return slotBox;\n        },\n\n        limitSlot: function(slot) {\n            var vertical = this.options.vertical;\n            var valueAxis = vertical ? Y : X;\n            var lineBox = this.lineBox();\n            var limittedSlot = slot.clone();\n\n            limittedSlot[valueAxis + 1] = limitValue(slot[valueAxis + 1], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n            limittedSlot[valueAxis + 2] = limitValue(slot[valueAxis + 2], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n\n            return limittedSlot;\n        },\n\n        slot: function(from, to, limit) {\n            var min = Math.floor(this.options.min || 0);\n            var start = from;\n            var end = to;\n\n            if (typeof start === \"string\") {\n                start = this.categoryIndex(start);\n            } else if (isNumber(start)) {\n                start -= min;\n            }\n\n            if (typeof end === \"string\") {\n                end = this.categoryIndex(end);\n            } else if (isNumber(end)) {\n                end -= min;\n            }\n\n            return Axis.fn.slot.call(this, start, end, limit);\n        },\n\n        pointCategoryIndex: function(point) {\n            var ref = this.options;\n            var reverse = ref.reverse;\n            var justified = ref.justified;\n            var vertical = ref.vertical;\n            var valueAxis = vertical ? Y : X;\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var min = ref$1.min;\n            var max = ref$1.max;\n            var startValue = reverse ? max : min;\n            var lineStart = box[valueAxis + 1];\n            var lineEnd = box[valueAxis + 2];\n            var pos = point[valueAxis];\n\n            if (pos < lineStart || pos > lineEnd) {\n                return null;\n            }\n\n            var value = startValue + (pos - lineStart) / scale;\n            var diff = value % 1;\n\n            if (justified) {\n                value = Math.round(value);\n            } else if (diff === 0 && value > 0) {\n                value--;\n            }\n\n            return Math.floor(value);\n        },\n\n        getCategory: function(point) {\n            var index = this.pointCategoryIndex(point);\n\n            if (index === null) {\n                return null;\n            }\n\n            return this.options.categories[index];\n        },\n\n        categoryIndex: function(value) {\n            return this.totalIndex(value) - Math.floor(this.options.min || 0);\n        },\n\n        categoryAt: function(index, total) {\n            var options = this.options;\n\n            return (total ? options.srcCategories : options.categories)[index];\n        },\n\n        categoriesCount: function() {\n            return (this.options.categories || []).length;\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var size = options.vertical ? lineBox.height() : lineBox.width();\n            var range = options.categories.length;\n            var scale = size / range;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            return {\n                min: offset,\n                max: range + offset\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var rangeIndices = this.totalRangeIndices();\n            var range = rangeIndices.max - rangeIndices.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = rangeIndices.min + minDelta;\n            var max = rangeIndices.max - maxDelta;\n\n            if (max - min < MIN_CATEGORY_RANGE) {\n                max = min + MIN_CATEGORY_RANGE;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var ref = this.totalRange();\n            var totalMin = ref.min;\n            var totalMax = ref.max;\n            var range = this.scaleRange(scale, cursor);\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax)\n            };\n        },\n\n        labelsCount: function() {\n            var labelsRange = this.labelsRange();\n\n            return labelsRange.max - labelsRange.min;\n        },\n\n        labelsRange: function() {\n            var options = this.options;\n            var justified = options.justified;\n            var labelOptions = options.labels;\n            var ref = this.totalRangeIndices(true);\n            var min = ref.min;\n            var max = ref.max;\n            var start = Math.floor(min);\n\n            if (!justified) {\n                min = Math.floor(min);\n                max = Math.ceil(max);\n            } else {\n                min = Math.ceil(min);\n                max = Math.floor(max);\n            }\n\n            var skip;\n\n            if (min > labelOptions.skip) {\n                skip = labelOptions.skip + labelOptions.step * Math.ceil((min - labelOptions.skip) / labelOptions.step);\n            } else {\n                skip = labelOptions.skip;\n            }\n\n            return {\n                min: skip - start,\n                max: (options.categories.length ? max + (justified ? 1 : 0) : 0) - start\n            };\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var dataItem = options.dataItems ? options.dataItems[index] : null;\n            var category = valueOrDefault(options.categories[index], \"\");\n\n            labelContext.dataItem = dataItem;\n            var text = this.axisLabelText(category, labelOptions, labelContext);\n\n            return new AxisLabel(category, text, index, dataItem, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.totalRangeIndices();\n\n            return Math.floor(range.min) <= value && value <= Math.ceil(range.max);\n        },\n\n        noteSlot: function(value) {\n            var options = this.options;\n            var index = value - Math.floor(options.min || 0);\n            return this.getSlot(index);\n        },\n\n        arrangeNotes: function() {\n            Axis.fn.arrangeNotes.call(this);\n            this.hideOutOfRangeNotes();\n        },\n\n        hideOutOfRangeNotes: function() {\n            var ref = this;\n            var notes = ref.notes;\n            var box = ref.box;\n            if (notes && notes.length) {\n                var valueAxis = this.options.vertical ? Y : X;\n                var start = box[valueAxis + 1];\n                var end = box[valueAxis + 2];\n\n                for (var idx = 0; idx < notes.length; idx++) {\n                    var note = notes[idx];\n                    if (note.box && (end < note.box[valueAxis + 1] || note.box[valueAxis + 2] < start)) {\n                        note.hide();\n                    }\n                }\n            }\n        },\n\n        pan: function(delta) {\n            var range = this.totalRangeIndices(true);\n            var ref = this.scaleOptions();\n            var scale = ref.scale;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n            var totalRange = this.totalRange();\n            var min = range.min + offset;\n            var max = range.max + offset;\n\n            return this.limitRange(min, max, 0, totalRange.max, offset);\n        },\n\n        pointsRange: function(start, end) {\n            var ref = this.options;\n            var reverse = ref.reverse;\n            var vertical = ref.vertical;\n            var valueAxis = vertical ? Y : X;\n            var range = this.totalRangeIndices(true);\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var lineStart = box[valueAxis + (reverse ? 2 : 1)];\n\n            var diffStart = start[valueAxis] - lineStart;\n            var diffEnd = end[valueAxis] - lineStart;\n\n            var min = range.min + diffStart / scale;\n            var max = range.min + diffEnd / scale;\n            var rangeMin = Math.min(min, max);\n            var rangeMax = Math.max(min, max);\n\n            if (rangeMax - rangeMin >= MIN_CATEGORY_POINTS_RANGE) {\n                return {\n                    min: rangeMin,\n                    max: rangeMax\n                };\n            }\n        },\n\n        valueRange: function() {\n            return this.range();\n        },\n\n        totalIndex: function(value) {\n            var options = this.options;\n            var index = this._categoriesMap ?\n                this._categoriesMap.get(value) : indexOf(value, options.srcCategories);\n\n            return index;\n        },\n\n        currentRangeIndices: function() {\n            var options = this.options;\n            var min = 0;\n\n            if (isNumber(options.min)) {\n                min = Math.floor(options.min);\n            }\n\n            var max;\n            if (isNumber(options.max)) {\n                max = options.justified ? Math.floor(options.max) : Math.ceil(options.max) - 1;\n            } else {\n                max = this.totalCount() - 1;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        mapCategories: function() {\n            if (!this._categoriesMap) {\n                var map$$1 = this._categoriesMap = new HashMap();\n                var srcCategories = this.options.srcCategories;\n                for (var idx = 0; idx < srcCategories.length; idx++) {\n                    map$$1.set(srcCategories[idx], idx);\n                }\n            }\n        },\n\n        totalCount: function() {\n            return Math.max(this.options.srcCategories.length, this._seriesMax || 0);\n        }\n    });\n\n    setDefaultOptions(CategoryAxis, {\n        type: \"category\",\n        vertical: false,\n        majorGridLines: {\n            visible: false,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            zIndex: 1\n        },\n        justified: false,\n        _deferLabels: true\n    });\n\n    var COORDINATE_LIMIT = 300000;\n\n    var DateLabelFormats = {\n        milliseconds: \"HH:mm:ss.fff\",\n        seconds: \"HH:mm:ss\",\n        minutes: \"HH:mm\",\n        hours: \"HH:mm\",\n        days: \"M/d\",\n        weeks: \"M/d\",\n        months: \"MMM 'yy\",\n        years: \"yyyy\"\n    };\n\n    var ZERO_THRESHOLD = 0.2;\n\n    var AUTO = \"auto\";\n    var BASE_UNITS = [\n        MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS\n    ];\n    var FIT = \"fit\";\n\n    function categoryRange(categories) {\n        var range = categories._range;\n        if (!range) {\n            range = categories._range = sparseArrayLimits(categories);\n            range.min = toDate(range.min);\n            range.max = toDate(range.max);\n        }\n\n        return range;\n    }\n\n    var EmptyDateRange = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        displayIndices: function() {\n            return {\n                min: 0,\n                max: 1\n            };\n        },\n\n        displayRange: function() {\n            return {};\n        },\n\n        total: function() {\n            return {};\n        },\n\n        valueRange: function() {\n            return {};\n        },\n\n        valueIndex: function() {\n            return -1;\n        },\n\n        values: function() {\n            return [];\n        },\n\n        totalIndex: function() {\n            return -1;\n        },\n\n        valuesCount: function() {\n            return 0;\n        },\n\n        totalCount: function() {\n            return 0;\n        },\n\n        dateAt: function() {\n            return null;\n        }\n    });\n\n    var DateRange = Class.extend({\n        init: function(start, end, options) {\n            this.options = options;\n            options.baseUnitStep = options.baseUnitStep || 1;\n\n            var roundToBaseUnit = options.roundToBaseUnit;\n            var justified = options.justified;\n\n            this.start = addDuration(start, 0, options.baseUnit, options.weekStartDay);\n            var lowerEnd = this.roundToTotalStep(end);\n            var expandEnd = !justified && dateEquals(end, lowerEnd) && !options.justifyEnd;\n\n            this.end = this.roundToTotalStep(end, !justified, expandEnd ? 1 : 0);\n\n            var min = options.min || start;\n            this.valueStart = this.roundToTotalStep(min);\n            this.displayStart = roundToBaseUnit ? this.valueStart : min;\n\n            var max = options.max;\n            if (!max) {\n                this.valueEnd = lowerEnd;\n                this.displayEnd = roundToBaseUnit || expandEnd ? this.end : end;\n            } else {\n                var next = !justified && dateEquals(max, this.roundToTotalStep(max)) ? -1 : 0;\n                this.valueEnd = this.roundToTotalStep(max, false, next);\n                this.displayEnd = roundToBaseUnit ? this.roundToTotalStep(max, !justified) : options.max;\n            }\n\n            if (this.valueEnd < this.valueStart) {\n                this.valueEnd = this.valueStart;\n            }\n            if (this.displayEnd <= this.displayStart) {\n                this.displayEnd = this.roundToTotalStep(this.displayStart, false, 1);\n            }\n        },\n\n        displayRange: function() {\n            return {\n                min: this.displayStart,\n                max: this.displayEnd\n            };\n        },\n\n        displayIndices: function() {\n            if (!this._indices) {\n                var options = this.options;\n\n                var baseUnit = options.baseUnit;\n                var baseUnitStep = options.baseUnitStep;\n\n                var minIdx = dateIndex(this.displayStart, this.valueStart, baseUnit, baseUnitStep);\n                var maxIdx = dateIndex(this.displayEnd, this.valueStart, baseUnit, baseUnitStep);\n\n                this._indices = { min: minIdx, max: maxIdx };\n            }\n\n            return this._indices;\n        },\n\n        total: function() {\n            return {\n                min: this.start,\n                max: this.end\n            };\n        },\n\n        totalCount: function() {\n            var last$$1 = this.totalIndex(this.end);\n\n            return last$$1 + (this.options.justified ? 1 : 0);\n        },\n\n        valueRange: function() {\n            return {\n                min: this.valueStart,\n                max: this.valueEnd\n            };\n        },\n\n        valueIndex: function(value) {\n            var options = this.options;\n            return Math.floor(dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep));\n        },\n\n        totalIndex: function(value) {\n            var options = this.options;\n            return Math.floor(dateIndex(value, this.start, options.baseUnit, options.baseUnitStep));\n        },\n\n        dateIndex: function(value) {\n            var options = this.options;\n            return dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep);\n        },\n\n        valuesCount: function() {\n            var maxIdx = this.valueIndex(this.valueEnd);\n\n            return maxIdx + 1;\n        },\n\n        values: function() {\n            var values = this._values;\n            if (!values) {\n                var options = this.options;\n                var range = this.valueRange();\n                this._values = values = [];\n\n                for (var date = range.min; date <= range.max;) {\n                    values.push(date);\n                    date = addDuration(date, options.baseUnitStep, options.baseUnit, options.weekStartDay);\n                }\n            }\n\n            return values;\n        },\n\n        dateAt: function(index, total) {\n            var options = this.options;\n\n            return addDuration(total ? this.start : this.valueStart, options.baseUnitStep * index, options.baseUnit, options.weekStartDay);\n        },\n\n        roundToTotalStep: function(value, upper, next) {\n            var ref = this.options;\n            var baseUnit = ref.baseUnit;\n            var baseUnitStep = ref.baseUnitStep;\n            var weekStartDay = ref.weekStartDay;\n            var start = this.start;\n\n            var step = dateIndex(value, start, baseUnit, baseUnitStep);\n            var roundedStep = upper ? Math.ceil(step) : Math.floor(step);\n\n            if (next) {\n                roundedStep += next;\n            }\n\n            return addDuration(start, roundedStep * baseUnitStep, baseUnit, weekStartDay);\n        }\n    });\n\n    function autoBaseUnit(options, startUnit, startStep) {\n        var categoryLimits = categoryRange(options.categories);\n        var span = (options.max || categoryLimits.max) - (options.min || categoryLimits.min);\n        var autoBaseUnitSteps = options.autoBaseUnitSteps;\n        var maxDateGroups = options.maxDateGroups;\n        var autoUnit = options.baseUnit === FIT;\n        var autoUnitIx = startUnit ? BASE_UNITS.indexOf(startUnit) : 0;\n        var baseUnit = autoUnit ? BASE_UNITS[autoUnitIx++] : options.baseUnit;\n        var units = span / TIME_PER_UNIT[baseUnit];\n        var totalUnits = units;\n        var unitSteps, step, nextStep;\n\n        while (!step || units >= maxDateGroups) {\n            unitSteps = unitSteps || autoBaseUnitSteps[baseUnit].slice(0);\n\n            do {\n                nextStep = unitSteps.shift();\n            } while (nextStep && startUnit === baseUnit && nextStep < startStep);\n\n            if (nextStep) {\n                step = nextStep;\n                units = totalUnits / step;\n            } else if (baseUnit === last(BASE_UNITS)) {\n                step = Math.ceil(totalUnits / maxDateGroups);\n                break;\n            } else if (autoUnit) {\n                baseUnit = BASE_UNITS[autoUnitIx++] || last(BASE_UNITS);\n                totalUnits = span / TIME_PER_UNIT[baseUnit];\n                unitSteps = null;\n            } else {\n                if (units > maxDateGroups) {\n                    step = Math.ceil(totalUnits / maxDateGroups);\n                }\n                break;\n            }\n        }\n\n        options.baseUnitStep = step;\n        options.baseUnit = baseUnit;\n    }\n\n    function defaultBaseUnit(options) {\n        var categories = options.categories;\n        var count = defined(categories) ? categories.length : 0;\n        var minDiff = MAX_VALUE;\n        var lastCategory, unit;\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            var category = categories[categoryIx];\n\n            if (category && lastCategory) {\n                var diff = absoluteDateDiff(category, lastCategory);\n                if (diff > 0) {\n                    minDiff = Math.min(minDiff, diff);\n\n                    if (minDiff >= TIME_PER_YEAR) {\n                        unit = YEARS;\n                    } else if (minDiff >= TIME_PER_MONTH - TIME_PER_DAY * 3) {\n                        unit = MONTHS;\n                    } else if (minDiff >= TIME_PER_WEEK) {\n                        unit = WEEKS;\n                    } else if (minDiff >= TIME_PER_DAY) {\n                        unit = DAYS;\n                    } else if (minDiff >= TIME_PER_HOUR) {\n                        unit = HOURS;\n                    } else if (minDiff >= TIME_PER_MINUTE) {\n                        unit = MINUTES;\n                    } else {\n                        unit = SECONDS;\n                    }\n                }\n            }\n\n            lastCategory = category;\n        }\n\n        options.baseUnit = unit || DAYS;\n    }\n\n    function initUnit(options) {\n        var baseUnit = (options.baseUnit || \"\").toLowerCase();\n        var useDefault = baseUnit !== FIT && !inArray(baseUnit, BASE_UNITS);\n\n        if (useDefault) {\n            defaultBaseUnit(options);\n        }\n\n        if (baseUnit === FIT || options.baseUnitStep === AUTO) {\n            autoBaseUnit(options);\n        }\n\n        return options;\n    }\n\n    var DateCategoryAxis = CategoryAxis.extend({\n        clone: function() {\n            var copy = new DateCategoryAxis($.extend({}, this.options), this.chartService);\n            copy.createLabels();\n\n            return copy;\n        },\n\n        categoriesHash: function() {\n            var start = this.dataRange.total().min;\n            return this.options.baseUnit + this.options.baseUnitStep + start;\n        },\n\n        initUserOptions: function(options) {\n            return options;\n        },\n\n        initFields: function() {\n            CategoryAxis.fn.initFields.call(this);\n\n            var chartService = this.chartService;\n            var intlService = chartService.intl;\n            var options = this.options;\n\n            var categories = options.categories || [];\n            if (!categories._parsed) {\n                categories = parseDates(intlService, categories);\n                categories._parsed = true;\n            }\n\n            options = deepExtend({\n                roundToBaseUnit: true\n            }, options, {\n                categories: categories,\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                weekStartDay: firstDay(options, intlService)\n            });\n\n            if (chartService.panning && chartService.isPannable(options.vertical ? Y : X)) {\n                options.roundToBaseUnit = false;\n            }\n\n            options.userSetBaseUnit = options.userSetBaseUnit || options.baseUnit;\n            options.userSetBaseUnitStep = options.userSetBaseUnitStep || options.baseUnitStep;\n\n            this.options = options;\n            options.srcCategories = categories;\n\n            if (categories.length > 0) {\n                var range = categoryRange(categories);\n                var maxDivisions = options.maxDivisions;\n\n                this.dataRange = new DateRange(range.min, range.max, initUnit(options));\n\n                if (maxDivisions) {\n                    var dataRange = this.dataRange.displayRange();\n\n                    var divisionOptions = $.extend({}, options, {\n                        justified: true,\n                        roundToBaseUnit: false,\n                        baseUnit: 'fit',\n                        min: dataRange.min,\n                        max: dataRange.max,\n                        maxDateGroups: maxDivisions\n                    });\n\n                    var dataRangeOptions = this.dataRange.options;\n\n                    autoBaseUnit(divisionOptions, dataRangeOptions.baseUnit, dataRangeOptions.baseUnitStep);\n\n                    this.divisionRange = new DateRange(range.min, range.max, divisionOptions);\n                } else {\n                    this.divisionRange = this.dataRange;\n                }\n\n            } else {\n                options.baseUnit = options.baseUnit || DAYS;\n                this.dataRange = this.divisionRange = new EmptyDateRange(options);\n            }\n\n            this.rangeLabels = [];\n        },\n\n        tickIndices: function(stepSize) {\n            var ref = this;\n            var dataRange = ref.dataRange;\n            var divisionRange = ref.divisionRange;\n            var valuesCount = divisionRange.valuesCount();\n\n            if (!this.options.maxDivisions || !valuesCount) {\n                return CategoryAxis.fn.tickIndices.call(this, stepSize);\n            }\n\n            var indices = [];\n            var values = divisionRange.values();\n            var offset = 0;\n\n            if (!this.options.justified) {\n                values = values.concat(divisionRange.dateAt(valuesCount));\n                offset = 0.5;//align ticks to the center of not justified categories\n            }\n\n            for (var idx = 0; idx < values.length; idx++) {\n                indices.push(dataRange.dateIndex(values[idx]) + offset);\n                if (stepSize !== 1 && idx >= 1) {\n                    var last$$1 = indices.length - 1;\n                    indices.splice(idx, 0, indices[last$$1 - 1] + (indices[last$$1] - indices[last$$1 - 1]) * stepSize);\n                }\n            }\n\n            return indices;\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            var categories = this.options.categories || [];\n\n            return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0 && categories.length;\n        },\n\n        parseNoteValue: function(value) {\n            return parseDate(this.chartService.intl, value);\n        },\n\n        noteSlot: function(value) {\n            return this.getSlot(value);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var baseUnit = options.baseUnit;\n            var weekStartDay = options.weekStartDay;\n            var vertical = options.vertical;\n            var lineBox = this.lineBox();\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var range = this.range();\n            var scale = size / (range.max - range.min);\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if (range.min && range.max) {\n                var from = addTicks(options.min || range.min, offset);\n                var to = addTicks(options.max || range.max, offset);\n\n                range = {\n                    min: addDuration(from, 0, baseUnit, weekStartDay),\n                    max: addDuration(to, 0, baseUnit, weekStartDay)\n                };\n            }\n\n            return range;\n        },\n\n        labelsRange: function() {\n            return {\n                min: this.options.labels.skip,\n                max: this.divisionRange.valuesCount()\n            };\n        },\n\n        pan: function(delta) {\n            if (this.isEmpty()) {\n                return null;\n            }\n\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var size = options.vertical ? lineBox.height() : lineBox.width();\n            var ref = this.dataRange.displayRange();\n            var min = ref.min;\n            var max = ref.max;\n            var totalLimits = this.dataRange.total();\n            var scale = size / (max - min);\n            var offset = round(delta / scale, DEFAULT_PRECISION) * (options.reverse ? -1 : 1);\n            var from = addTicks(min, offset);\n            var to = addTicks(max, offset);\n\n            var panRange = this.limitRange(toTime(from), toTime(to), toTime(totalLimits.min), toTime(totalLimits.max), offset);\n\n            if (panRange) {\n                panRange.min = toDate(panRange.min);\n                panRange.max = toDate(panRange.max);\n                panRange.baseUnit = options.baseUnit;\n                panRange.baseUnitStep = options.baseUnitStep || 1;\n                panRange.userSetBaseUnit = options.userSetBaseUnit;\n                panRange.userSetBaseUnitStep = options.userSetBaseUnitStep;\n\n                return panRange;\n            }\n        },\n\n        pointsRange: function(start, end) {\n            if (this.isEmpty()) {\n                return null;\n            }\n\n            var pointsRange = CategoryAxis.fn.pointsRange.call(this, start, end);\n            var datesRange = this.dataRange.displayRange();\n            var indicesRange = this.dataRange.displayIndices();\n            var scale = dateDiff(datesRange.max, datesRange.min) / (indicesRange.max - indicesRange.min);\n            var options = this.options;\n\n            var min = addTicks(datesRange.min, pointsRange.min * scale);\n            var max = addTicks(datesRange.min, pointsRange.max * scale);\n\n            return {\n                min: min,\n                max: max,\n                baseUnit: options.userSetBaseUnit || options.baseUnit,\n                baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            if (this.isEmpty()) {\n                return {};\n            }\n\n            var options = this.options;\n            var fit = options.userSetBaseUnit === FIT;\n            var totalLimits = this.dataRange.total();\n            var ref = this.dataRange.displayRange();\n            var rangeMin = ref.min;\n            var rangeMax = ref.max;\n\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = rangeMax - rangeMin;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = Math.round(position * delta);\n            var maxDelta = Math.round((1 - position) * delta);\n\n            var ref$1 = this.dataRange.options;\n            var baseUnit = ref$1.baseUnit;\n            var min = new Date(rangeMin.getTime() + minDelta);\n            var max = new Date(rangeMax.getTime() - maxDelta);\n\n            if (fit) {\n                var autoBaseUnitSteps = options.autoBaseUnitSteps;\n                var maxDateGroups = options.maxDateGroups;\n\n                var maxDiff = last(autoBaseUnitSteps[baseUnit]) * maxDateGroups * TIME_PER_UNIT[baseUnit];\n                var rangeDiff = dateDiff(rangeMax, rangeMin);\n                var diff = dateDiff(max, min);\n                var baseUnitIndex = BASE_UNITS.indexOf(baseUnit);\n                var autoBaseUnitStep, ticks;\n\n                if (diff < TIME_PER_UNIT[baseUnit] && baseUnit !== MILLISECONDS) {\n                    baseUnit = BASE_UNITS[baseUnitIndex - 1];\n                    autoBaseUnitStep = last(autoBaseUnitSteps[baseUnit]);\n                    ticks = (rangeDiff - (maxDateGroups - 1) * autoBaseUnitStep * TIME_PER_UNIT[baseUnit]) / 2;\n                    min = addTicks(rangeMin, ticks);\n                    max = addTicks(rangeMax, -ticks);\n\n                } else if (diff > maxDiff && baseUnit !== YEARS) {\n                    var stepIndex = 0;\n\n                    do {\n                        baseUnitIndex++;\n                        baseUnit = BASE_UNITS[baseUnitIndex];\n                        stepIndex = 0;\n                        ticks = 2 * TIME_PER_UNIT[baseUnit];\n                        do {\n                            autoBaseUnitStep = autoBaseUnitSteps[baseUnit][stepIndex];\n                            stepIndex++;\n                        } while (stepIndex < autoBaseUnitSteps[baseUnit].length && ticks * autoBaseUnitStep < rangeDiff);\n                    } while (baseUnit !== YEARS && ticks * autoBaseUnitStep < rangeDiff);\n\n                    ticks = (ticks * autoBaseUnitStep - rangeDiff) / 2;\n                    if (ticks > 0) {\n                        min = addTicks(rangeMin, -ticks);\n                        max = addTicks(rangeMax, ticks);\n                        min = addTicks(min, limitValue(max, totalLimits.min, totalLimits.max) - max);\n                        max = addTicks(max, limitValue(min, totalLimits.min, totalLimits.max) - min);\n                    }\n                }\n            }\n\n            if (min && max && dateDiff(max, min) > 0) {\n                return {\n                    min: min,\n                    max: max,\n                    baseUnit: options.userSetBaseUnit || options.baseUnit,\n                    baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n                };\n            }\n        },\n\n        zoomRange: function(scale, cursor) {\n            var totalLimits = this.dataRange.total();\n            var range = this.scaleRange(scale, cursor);\n\n            if (range) {\n                if (range.min < totalLimits.min) {\n                    range.min = totalLimits.min;\n                }\n                if (range.max > totalLimits.max) {\n                    range.max = totalLimits.max;\n                }\n            }\n\n            return range;\n        },\n\n        range: function() {\n            return this.dataRange.displayRange();\n        },\n\n        createLabels: function() {\n            CategoryAxis.fn.createLabels.call(this);\n            this.createRangeLabels();\n        },\n\n        clearLabels: function() {\n            CategoryAxis.fn.clearLabels.call(this);\n            this.rangeLabels = [];\n        },\n\n        arrangeLabels: function() {\n            this.arrangeRangeLabels();\n            CategoryAxis.fn.arrangeLabels.call(this);\n        },\n\n        arrangeRangeLabels: function() {\n            var ref = this;\n            var options = ref.options;\n            var rangeLabels = ref.rangeLabels;\n            if (rangeLabels.length === 0) {\n                return;\n            }\n\n            var lineBox = this.lineBox();\n            var vertical = options.vertical;\n            var mirror = options.rangeLabels.mirror || options.labels.mirror;\n\n            var firstLabel = rangeLabels[0];\n            if (firstLabel) {\n                var position = vertical ? lineBox.y1 - (firstLabel.box.height() / 2) : lineBox.x1;\n                this.positionLabel(firstLabel, mirror, position);\n            }\n\n            var lastLabel = rangeLabels[1];\n            if (lastLabel) {\n                var position$1 = vertical ? lineBox.y2 - (lastLabel.box.height() / 2) : lineBox.x2;\n                this.positionLabel(lastLabel, mirror, position$1);\n            }\n        },\n\n        autoRotateLabels: function() {\n            CategoryAxis.fn.autoRotateLabels.call(this);\n            this.autoRotateRangeLabels();\n        },\n\n        hideOutOfRangeLabels: function() {\n            CategoryAxis.fn.hideOutOfRangeLabels.call(this);\n            this.hideOverlappingLabels();\n        },\n\n        hideOverlappingLabels: function() {\n            var ref = this;\n            var rangeLabels = ref.rangeLabels;\n            var labels = ref.labels;\n            if (rangeLabels.length === 0) {\n                return;\n            }\n\n            function clip(rangeLabel, label) {\n                if (!label.options.visible || label.box.overlaps(rangeLabel.box)) {\n                    label.options.visible = false;\n                    return true;\n                }\n\n                return false;\n            }\n\n            var firstRangeLabel = rangeLabels[0];\n            if (firstRangeLabel && firstRangeLabel.options.visible) {\n                for (var i = 0; i < labels.length; i++) {\n                    var overlaps = clip(firstRangeLabel, labels[i]);\n                    if (!overlaps) {\n                        break;\n                    }\n                }\n            }\n\n            var lastRangeLabel = rangeLabels[1];\n            if (lastRangeLabel && lastRangeLabel.options.visible) {\n                for (var i$1 = labels.length - 1; i$1 > 0; --i$1) {\n                    var overlaps$1 = clip(lastRangeLabel, labels[i$1]);\n                    if (!overlaps$1) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        contentBox: function() {\n            var box = CategoryAxis.fn.contentBox.call(this);\n            var rangeLabels = this.rangeLabels;\n\n            for (var i = 0; i < rangeLabels.length; i++) {\n                var label = rangeLabels[i];\n                if (label.options.visible) {\n                    box.wrap(label.box);\n                }\n            }\n\n            return box;\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            if (labelContext === void 0) { labelContext = {}; }\n\n            var options = this.options;\n            var dataItem = options.dataItems && !options.maxDivisions ? options.dataItems[index] : null;\n            var date = this.divisionRange.dateAt(index);\n            var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n\n            labelOptions.format = labelOptions.format || unitFormat;\n            labelContext.dataItem = dataItem;\n\n            var text = this.axisLabelText(date, labelOptions, labelContext);\n            if (text) {\n                return new AxisLabel(date, text, index, dataItem, labelOptions);\n            }\n        },\n\n        createRangeLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this.divisionRange;\n            var displayStart = ref.displayStart;\n            var displayEnd = ref.displayEnd;\n            var options = this.options;\n            var labelOptions = $.extend({}, options.labels, options.rangeLabels, {\n                align: CENTER,\n                zIndex: options.zIndex\n            });\n\n            if (labelOptions.visible !== true) {\n                return;\n            }\n\n            this.normalizeLabelRotation(labelOptions);\n            labelOptions.alignRotation = CENTER;\n\n            if (labelOptions.rotation === \"auto\") {\n                labelOptions.rotation = 0;\n                options.autoRotateRangeLabels = true;\n            }\n\n            var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n            labelOptions.format = labelOptions.format || unitFormat;\n\n            var createLabel = function (index, date, text) {\n                if (text) {\n                    var label = new AxisLabel(date, text, index, null, labelOptions);\n                    this$1$1.append(label);\n                    this$1$1.rangeLabels.push(label);\n                }\n            };\n\n            var startText = this.axisLabelText(displayStart, labelOptions, { index: 0, count: 2 });\n            createLabel(0, displayStart, startText);\n\n            var endText = this.axisLabelText(displayEnd, labelOptions, { index: 1, count: 2 });\n            createLabel(1, displayEnd, endText);\n        },\n\n        autoRotateRangeLabels: function() {\n            var this$1$1 = this;\n\n            var labels = this.rangeLabels;\n            if (!this.options.autoRotateRangeLabels || this.options.vertical || labels.length !== 2) {\n                return;\n            }\n\n            var rotateLabel = function (label, tickPositions, index) {\n                var width = Math.abs(tickPositions[index + 1] - tickPositions[index]) * 2;\n                var angle = this$1$1.autoRotateLabelAngle(label.box, width);\n                if (angle !== 0) {\n                    label.options.rotation = angle;\n                    label.reflow(new Box());\n                }\n            };\n\n            var tickPositions = this.getMajorTickPositions();\n            rotateLabel(labels[0], tickPositions, 0);\n            rotateLabel(labels[1], tickPositions, tickPositions.length - 2);\n        },\n\n        categoryIndex: function(value) {\n            return this.dataRange.valueIndex(value);\n        },\n\n        slot: function(from, to, limit) {\n            var dateRange = this.dataRange;\n            var start = from;\n            var end = to;\n\n            if (start instanceof Date) {\n                start = dateRange.dateIndex(start);\n            }\n\n            if (end instanceof Date) {\n                end = dateRange.dateIndex(end);\n            }\n\n            var slot = this.getSlot(start, end, limit);\n            if (slot) {\n                return slot.toRect();\n            }\n        },\n\n        getSlot: function(a, b, limit) {\n            var start = a;\n            var end = b;\n\n            if (typeof start === OBJECT) {\n                start = this.categoryIndex(start);\n            }\n\n            if (typeof end === OBJECT) {\n                end = this.categoryIndex(end);\n            }\n\n            return CategoryAxis.fn.getSlot.call(this, start, end, limit);\n        },\n\n        valueRange: function() {\n            var options = this.options;\n            var range = categoryRange(options.srcCategories);\n\n            return {\n                min: toDate(range.min),\n                max: toDate(range.max)\n            };\n        },\n\n        categoryAt: function(index, total) {\n            return this.dataRange.dateAt(index, total);\n        },\n\n        categoriesCount: function() {\n            return this.dataRange.valuesCount();\n        },\n\n        rangeIndices: function() {\n            return this.dataRange.displayIndices();\n        },\n\n        labelsBetweenTicks: function() {\n            return !this.divisionRange.options.justified;\n        },\n\n        prepareUserOptions: function() {\n            if (this.isEmpty()) {\n                return;\n            }\n\n            this.options.categories = this.dataRange.values();\n        },\n\n        getCategory: function(point) {\n            var index = this.pointCategoryIndex(point);\n\n            if (index === null) {\n                return null;\n            }\n\n            return this.dataRange.dateAt(index);\n        },\n\n        totalIndex: function(value) {\n            return this.dataRange.totalIndex(value);\n        },\n\n        currentRangeIndices: function() {\n            var range = this.dataRange.valueRange();\n            return {\n                min: this.dataRange.totalIndex(range.min),\n                max: this.dataRange.totalIndex(range.max)\n            };\n        },\n\n        totalRange: function() {\n            return this.dataRange.total();\n        },\n\n        totalCount: function() {\n            return this.dataRange.totalCount();\n        },\n\n        isEmpty: function() {\n            return !this.options.srcCategories.length;\n        },\n\n        roundedRange: function() {\n            if (this.options.roundToBaseUnit !== false || this.isEmpty()) {\n                return this.range();\n            }\n\n            var options = this.options;\n            var datesRange = categoryRange(options.srcCategories);\n\n            var dateRange = new DateRange(datesRange.min, datesRange.max, $.extend({}, options, {\n                justified: false,\n                roundToBaseUnit: true,\n                justifyEnd: false\n            }));\n\n            return dateRange.displayRange();\n        }\n    });\n\n    setDefaultOptions(DateCategoryAxis, {\n        type: DATE,\n        labels: {\n            dateFormats: DateLabelFormats\n        },\n        rangeLabels: {\n            visible: false\n        },\n        autoBaseUnitSteps: {\n            milliseconds: [ 1, 10, 100 ],\n            seconds: [ 1, 2, 5, 15, 30 ],\n            minutes: [ 1, 2, 5, 15, 30 ],\n            hours: [ 1, 2, 3 ],\n            days: [ 1, 2, 3 ],\n            weeks: [ 1, 2 ],\n            months: [ 1, 2, 3, 6 ],\n            years: [ 1, 2, 3, 5, 10, 25, 50 ]\n        },\n        maxDateGroups: 10\n    });\n\n    function autoAxisMin(min, max, narrow) {\n        if (!min && !max) {\n            return 0;\n        }\n\n        var axisMin;\n\n        if (min >= 0 && max >= 0) {\n            var minValue = min === max ? 0 : min;\n\n            var diff = (max - minValue) / max;\n            if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n                return 0;\n            }\n\n            axisMin = Math.max(0, minValue - ((max - minValue) / 2));\n        } else {\n            axisMin = min;\n        }\n\n        return axisMin;\n    }\n\n    function autoAxisMax(min, max, narrow) {\n        if (!min && !max) {\n            return 1;\n        }\n\n        var axisMax;\n\n        if (min <= 0 && max <= 0) {\n            var maxValue = min === max ? 0 : max;\n\n            var diff = Math.abs((maxValue - min) / maxValue);\n            if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n                return 0;\n            }\n\n            axisMax = Math.min(0, maxValue - ((min - maxValue) / 2));\n        } else {\n            axisMax = max;\n        }\n\n        return axisMax;\n    }\n\n    function floor(value, step) {\n        return round(Math.floor(value / step) * step, DEFAULT_PRECISION);\n    }\n\n    function ceil(value, step) {\n        return round(Math.ceil(value / step) * step, DEFAULT_PRECISION);\n    }\n\n    function limitCoordinate(value) {\n        return Math.max(Math.min(value, COORDINATE_LIMIT), -COORDINATE_LIMIT);\n    }\n\n    var MIN_VALUE_RANGE$1 = Math.pow(10, -DEFAULT_PRECISION + 1);\n\n    var NumericAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, options, chartService) {\n            Axis.fn.init.call(this, $.extend({}, options, {\n                seriesMin: seriesMin,\n                seriesMax: seriesMax\n            }), chartService);\n        },\n\n        initUserOptions: function(options) {\n            var autoOptions = autoAxisOptions(options.seriesMin, options.seriesMax, options);\n            this.totalOptions = totalAxisOptions(autoOptions, options);\n\n            return axisOptions(autoOptions, options);\n        },\n\n        initFields: function() {\n            this.totalMin = this.totalOptions.min;\n            this.totalMax = this.totalOptions.max;\n            this.totalMajorUnit = this.totalOptions.majorUnit;\n            this.seriesMin = this.options.seriesMin;\n            this.seriesMax = this.options.seriesMax;\n        },\n\n        clone: function() {\n            return new NumericAxis(\n                this.seriesMin,\n                this.seriesMax,\n                $.extend({}, this.options),\n                this.chartService\n            );\n        },\n\n        startValue: function() {\n            return 0;\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        getDivisions: function(stepValue) {\n            if (stepValue === 0) {\n                return 1;\n            }\n\n            var options = this.options;\n            var range = options.max - options.min;\n\n            return Math.floor(round(range / stepValue, COORD_PRECISION)) + 1;\n        },\n\n        getTickPositions: function(unit, skipUnit) {\n            var options = this.options;\n            var ref = this.lineInfo();\n            var axisDir = ref.axisDir;\n            var axisOrigin = ref.axisOrigin;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var range = options.max - options.min;\n            var scale = lineSize / range;\n            var step = unit * scale;\n            var divisions = this.getDivisions(unit);\n            var positions = [];\n            var pos = lineBox[axisOrigin];\n            var skipStep = 0;\n\n            if (skipUnit) {\n                skipStep = skipUnit / unit;\n            }\n\n            for (var idx = 0; idx < divisions; idx++) {\n                if (idx % skipStep !== 0) {\n                    positions.push(round(pos, COORD_PRECISION));\n                }\n\n                pos = pos + step * axisDir;\n            }\n\n            return positions;\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTickPositions(this.options.minorUnit);\n        },\n\n        getSlot: function(a, b, limit) {\n            if (limit === void 0) { limit = false; }\n\n            var options = this.options;\n            var ref = this.lineInfo();\n            var axis = ref.axis;\n            var axisDir = ref.axisDir;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var lineStart = ref.lineStart;\n            var step = axisDir * (lineSize / (options.max - options.min));\n\n            var start = valueOrDefault(a, b || 0);\n            var end = valueOrDefault(b, a || 0);\n\n            if (limit) {\n                start = limitValue(start, options.min, options.max);\n                end = limitValue(end, options.min, options.max);\n            }\n\n            var p1 = Math.min(start, end) - options.min;\n            var p2 = Math.max(start, end) - options.min;\n\n            var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n            slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n            slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n            return slotBox;\n        },\n\n        getValue: function(point) {\n            var options = this.options;\n            var max = Number(options.max);\n            var min = Number(options.min);\n            var offset = this.pointOffset(point);\n            var valueOffset = offset * (max - min);\n\n            if (offset < 0 || offset > 1) {\n                return null;\n            }\n\n            var value = min + valueOffset;\n            return round(value, DEFAULT_PRECISION);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var vertical = options.vertical;\n            var reverse = options.reverse;\n            var max = options.max;\n            var min = options.min;\n            var ref = this.lineInfo();\n            var lineSize = ref.lineSize;\n            var range = max - min;\n            var scale = lineSize / range;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            return {\n                min: min + offset,\n                max: max + offset,\n                offset: offset\n            };\n        },\n\n        labelsCount: function() {\n            return this.getDivisions(this.options.majorUnit);\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var value = round(options.min + (index * options.majorUnit), DEFAULT_PRECISION);\n            var text = this.axisLabelText(value, labelOptions, labelContext);\n\n            return new AxisLabel(value, text, index, null, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            return range.min <= value && value <= range.max;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta);\n            return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            if (this.isValidRange(min, max)) {\n                return {\n                    min: min,\n                    max: max\n                };\n            }\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = this.options.max - this.options.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = round(this.options.min + minDelta, DEFAULT_PRECISION);\n            var max = round(this.options.max - maxDelta, DEFAULT_PRECISION);\n\n            if (max - min < MIN_VALUE_RANGE$1) {\n                max = min + MIN_VALUE_RANGE$1;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var ref = this;\n            var totalMin = ref.totalMin;\n            var totalMax = ref.totalMax;\n            var range = this.scaleRange(scale, cursor);\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax),\n                narrowRange: false\n            };\n        },\n\n        isValidRange: function(min, max) {\n            return max - min > MIN_VALUE_RANGE$1;\n        }\n    });\n\n    function autoAxisOptions(seriesMin, seriesMax, options) {\n        var narrowRange = options.narrowRange;\n\n        var autoMin = autoAxisMin(seriesMin, seriesMax, narrowRange);\n        var autoMax = autoAxisMax(seriesMin, seriesMax, narrowRange);\n\n        var majorUnit = autoMajorUnit(autoMin, autoMax);\n        var autoOptions = {\n            majorUnit: majorUnit\n        };\n\n        if (options.roundToMajorUnit !== false) {\n            if (autoMin < 0 && remainderClose(autoMin, majorUnit, 1 / 3)) {\n                autoMin -= majorUnit;\n            }\n\n            if (autoMax > 0 && remainderClose(autoMax, majorUnit, 1 / 3)) {\n                autoMax += majorUnit;\n            }\n        }\n\n        autoOptions.min = floor(autoMin, majorUnit);\n        autoOptions.max = ceil(autoMax, majorUnit);\n\n        return autoOptions;\n    }\n\n    function totalAxisOptions(autoOptions, options) {\n        return {\n            min: defined(options.min) ? Math.min(autoOptions.min, options.min) : autoOptions.min,\n            max: defined(options.max) ? Math.max(autoOptions.max, options.max) : autoOptions.max,\n            majorUnit: autoOptions.majorUnit\n        };\n    }\n\n    function clearNullValues(options, fields) {\n        for (var idx = 0; idx < fields.length; idx++) {\n            var field = fields[idx];\n            if (options[field] === null) {\n                options[field] = undefined;\n            }\n        }\n    }\n\n    function axisOptions(autoOptions, userOptions) {\n        var options = userOptions;\n        var userSetMin, userSetMax;\n\n        if (userOptions) {\n            clearNullValues(userOptions, [ 'min', 'max' ]);\n\n            userSetMin = defined(userOptions.min);\n            userSetMax = defined(userOptions.max);\n\n            var userSetLimits = userSetMin || userSetMax;\n\n            if (userSetLimits) {\n                if (userOptions.min === userOptions.max) {\n                    if (userOptions.min > 0) {\n                        userOptions.min = 0;\n                    } else {\n                        userOptions.max = 1;\n                    }\n                }\n            }\n\n            if (userOptions.majorUnit) {\n                autoOptions.min = floor(autoOptions.min, userOptions.majorUnit);\n                autoOptions.max = ceil(autoOptions.max, userOptions.majorUnit);\n            } else if (userSetLimits) {\n                options = deepExtend(autoOptions, userOptions);\n\n                // Determine an auto major unit after min/max have been set\n                autoOptions.majorUnit = autoMajorUnit(options.min, options.max);\n            }\n        }\n\n        autoOptions.minorUnit = (options.majorUnit || autoOptions.majorUnit) / 5;\n\n        var result = deepExtend(autoOptions, options);\n        if (result.min >= result.max) {\n            if (userSetMin && !userSetMax) {\n                result.max = result.min + result.majorUnit;\n            } else if (!userSetMin && userSetMax) {\n                result.min = result.max - result.majorUnit;\n            }\n        }\n\n        return result;\n    }\n\n    function remainderClose(value, divisor, ratio) {\n        var remainder = round(Math.abs(value % divisor), DEFAULT_PRECISION);\n        var threshold = divisor * (1 - ratio);\n\n        return remainder === 0 || remainder > threshold;\n    }\n\n    setDefaultOptions(NumericAxis, {\n        type: \"numeric\",\n        min: 0,\n        max: 1,\n        vertical: true,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            format: \"#.####################\"\n        },\n        zIndex: 1\n    });\n\n    var MIN_VALUE_RANGE = 1000;\n\n    var DateValueAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, axisOptions, chartService) {\n            var min = toDate(seriesMin);\n            var max = toDate(seriesMax);\n\n            var intlService = chartService.intl;\n            var options = axisOptions || {};\n            options = deepExtend(options || {}, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                axisCrossingValue: parseDates(intlService, options.axisCrossingValues || options.axisCrossingValue),\n                weekStartDay: firstDay(options, intlService)\n            });\n            options = applyDefaults(min, max, options);\n\n            Axis.fn.init.call(this, options, chartService);\n\n            this.intlService = intlService;\n            this.seriesMin = min;\n            this.seriesMax = max;\n\n            var weekStartDay = options.weekStartDay || 0;\n            this.totalMin = toTime(floorDate(toTime(min) - 1, options.baseUnit, weekStartDay));\n            this.totalMax = toTime(ceilDate(toTime(max) + 1, options.baseUnit, weekStartDay));\n        },\n\n        clone: function() {\n            return new DateValueAxis(this.seriesMin, this.seriesMax, $.extend({}, this.options), this.chartService);\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        getDivisions: function(stepValue) {\n            var options = this.options;\n\n            return Math.floor(\n                duration(options.min, options.max, options.baseUnit) / stepValue + 1\n            );\n        },\n\n        getTickPositions: function(step) {\n            var options = this.options;\n            var ref = this.lineInfo();\n            var dir = ref.axisDir;\n            var lineSize = ref.lineSize;\n            var start = ref.lineStart;\n            var divisions = this.getDivisions(step);\n            var timeRange = dateDiff(options.max, options.min);\n            var scale = lineSize / timeRange;\n            var weekStartDay = options.weekStartDay || 0;\n\n            var positions = [ start ];\n            for (var i = 1; i < divisions; i++) {\n                var date = addDuration(options.min, i * step, options.baseUnit, weekStartDay);\n                var pos = start + dateDiff(date, options.min) * scale * dir;\n\n                positions.push(round(pos, COORD_PRECISION));\n            }\n\n            return positions;\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTickPositions(this.options.minorUnit);\n        },\n\n        getSlot: function(a, b, limit) {\n            return NumericAxis.prototype.getSlot.call(\n                this, parseDate(this.intlService, a), parseDate(this.intlService, b), limit\n            );\n        },\n\n        getValue: function(point) {\n            var value = NumericAxis.prototype.getValue.call(this, point);\n\n            return value !== null ? toDate(value) : null;\n        },\n\n        labelsCount: function() {\n            return this.getDivisions(this.options.majorUnit);\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var offset = index * options.majorUnit;\n            var weekStartDay = options.weekStartDay || 0;\n            var date = options.min;\n\n            if (offset > 0) {\n                date = addDuration(date, offset, options.baseUnit, weekStartDay);\n            }\n\n            var unitFormat = labelOptions.dateFormats[options.baseUnit];\n            labelOptions.format = labelOptions.format || unitFormat;\n\n            var text = this.axisLabelText(date, labelOptions, labelContext);\n            return new AxisLabel(date, text, index, null, labelOptions);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var vertical = options.vertical;\n            var reverse = options.reverse;\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var range = this.range();\n            var scale = size / dateDiff(range.max, range.min);\n\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            var from = addTicks(options.min, offset);\n            var to = addTicks(options.max, offset);\n\n            return {\n                min: from,\n                max: to,\n                offset: offset\n            };\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n\n            return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta, true);\n            var limittedRange = this.limitRange(toTime(range.min), toTime(range.max), this.totalMin, this.totalMax, range.offset);\n\n            if (limittedRange) {\n                return {\n                    min: toDate(limittedRange.min),\n                    max: toDate(limittedRange.max)\n                };\n            }\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            return {\n                min: toDate(min),\n                max: toDate(max)\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = this.options.max - this.options.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = toDate(toTime(this.options.min) + minDelta);\n            var max = toDate(toTime(this.options.max) - maxDelta);\n\n            if (max - min < MIN_VALUE_RANGE) {\n                max = toDate(toTime(min) + MIN_VALUE_RANGE);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var range = this.scaleRange(scale, cursor);\n            var min = toDate(limitValue(toTime(range.min), this.totalMin, this.totalMax));\n            var max = toDate(limitValue(toTime(range.max), this.totalMin, this.totalMax));\n\n            return {\n                min: min,\n                max: max\n            };\n        }\n    });\n\n    function timeUnits(delta) {\n        var unit = HOURS;\n\n        if (delta >= TIME_PER_YEAR) {\n            unit = YEARS;\n        } else if (delta >= TIME_PER_MONTH) {\n            unit = MONTHS;\n        } else if (delta >= TIME_PER_WEEK) {\n            unit = WEEKS;\n        } else if (delta >= TIME_PER_DAY) {\n            unit = DAYS;\n        }\n\n        return unit;\n    }\n\n    function applyDefaults(seriesMin, seriesMax, options) {\n        var min = options.min || seriesMin;\n        var max = options.max || seriesMax;\n        var baseUnit = options.baseUnit || (max && min ? timeUnits(absoluteDateDiff(max, min)) : HOURS);\n        var baseUnitTime = TIME_PER_UNIT[baseUnit];\n        var weekStartDay = options.weekStartDay || 0;\n        var autoMin = floorDate(toTime(min) - 1, baseUnit, weekStartDay) || toDate(max);\n        var autoMax = ceilDate(toTime(max) + 1, baseUnit, weekStartDay);\n        var userMajorUnit = options.majorUnit ? options.majorUnit : undefined;\n        var majorUnit = userMajorUnit || ceil(\n                            autoMajorUnit(autoMin.getTime(), autoMax.getTime()),\n                            baseUnitTime\n                        ) / baseUnitTime;\n        var actualUnits = duration(autoMin, autoMax, baseUnit);\n        var totalUnits = ceil(actualUnits, majorUnit);\n        var unitsToAdd = totalUnits - actualUnits;\n        var head = Math.floor(unitsToAdd / 2);\n        var tail = unitsToAdd - head;\n\n        if (!options.baseUnit) {\n            delete options.baseUnit;\n        }\n\n        options.baseUnit = options.baseUnit || baseUnit;\n        options.min = options.min || addDuration(autoMin, -head, baseUnit, weekStartDay);\n        options.max = options.max || addDuration(autoMax, tail, baseUnit, weekStartDay);\n        options.minorUnit = options.minorUnit || majorUnit / 5;\n        options.majorUnit = majorUnit;\n\n        return options;\n    }\n\n    setDefaultOptions(DateValueAxis, {\n        type: DATE,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            dateFormats: DateLabelFormats\n        }\n    });\n\n    var DEFAULT_MAJOR_UNIT = 10;\n    var MIN_VALUE_RANGE$2 = 1e-6;\n\n    var LogarithmicAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, options, chartService) {\n\n            var axisOptions = deepExtend({ majorUnit: DEFAULT_MAJOR_UNIT, min: seriesMin, max: seriesMax }, options);\n            var base = axisOptions.majorUnit;\n            var autoMax = autoAxisMax$1(seriesMax, base);\n            var autoMin = autoAxisMin$1(seriesMin, seriesMax, axisOptions);\n            var range = initRange(autoMin, autoMax, axisOptions, options);\n\n            axisOptions.max = range.max;\n            axisOptions.min = range.min;\n            axisOptions.minorUnit = options.minorUnit || round(base - 1, DEFAULT_PRECISION);\n\n            Axis.fn.init.call(this, axisOptions, chartService);\n\n            this.totalMin = defined(options.min) ? Math.min(autoMin, options.min) : autoMin;\n            this.totalMax = defined(options.max) ? Math.max(autoMax, options.max) : autoMax;\n            this.logMin = round(log(range.min, base), DEFAULT_PRECISION);\n            this.logMax = round(log(range.max, base), DEFAULT_PRECISION);\n            this.seriesMin = seriesMin;\n            this.seriesMax = seriesMax;\n\n            this.createLabels();\n        },\n\n        clone: function() {\n            return new LogarithmicAxis(\n                this.seriesMin,\n                this.seriesMax,\n                $.extend({}, this.options),\n                this.chartService\n            );\n        },\n\n        startValue: function() {\n            return this.options.min;\n        },\n\n        getSlot: function(a, b, limit) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var base = options.majorUnit;\n            var min = options.min;\n            var max = options.max;\n            var ref$1 = this.lineInfo();\n            var axis = ref$1.axis;\n            var axisDir = ref$1.axisDir;\n            var lineBox = ref$1.lineBox;\n            var lineSize = ref$1.lineSize;\n            var lineStart = ref$1.lineStart;\n            var step = axisDir * (lineSize / (logMax - logMin));\n            var start = valueOrDefault(a, b || 1);\n            var end = valueOrDefault(b, a || 1);\n\n            if (start <= 0 || end <= 0) {\n                return null;\n            }\n\n            if (limit) {\n                start = limitValue(start, min, max);\n                end = limitValue(end, min, max);\n            }\n\n            start = log(start, base);\n            end = log(end, base);\n\n            var p1 = Math.min(start, end) - logMin;\n            var p2 = Math.max(start, end) - logMin;\n\n            var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n            slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n            slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n            return slotBox;\n        },\n\n        getValue: function(point) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var base = options.majorUnit;\n            var ref$1 = this.lineInfo();\n            var axis = ref$1.axis;\n            var axisDir = ref$1.axisDir;\n            var lineStart = ref$1.lineStart;\n            var lineSize = ref$1.lineSize;\n            var step = ((logMax - logMin) / lineSize);\n            var offset = axisDir * (point[axis] - lineStart);\n            var valueOffset = offset * step;\n\n            if (offset < 0 || offset > lineSize) {\n                return null;\n            }\n\n            var value = logMin + valueOffset;\n\n            return round(Math.pow(base, value), DEFAULT_PRECISION);\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        translateRange: function(delta) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var reverse = options.reverse;\n            var vertical = options.vertical;\n            var base = options.majorUnit;\n            var lineBox = this.lineBox();\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var scale = size / (logMax - logMin);\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            return {\n                min: Math.pow(base, logMin + offset),\n                max: Math.pow(base, logMax + offset),\n                offset: offset\n            };\n        },\n\n        labelsCount: function() {\n            var floorMax = Math.floor(this.logMax);\n            var count = Math.floor(floorMax - this.logMin) + 1;\n\n            return count;\n        },\n\n        getMajorTickPositions: function() {\n            var ticks = [];\n\n            this.traverseMajorTicksPositions(function (position) {\n                ticks.push(position);\n            }, { step: 1, skip: 0 });\n\n            return ticks;\n        },\n\n        createTicks: function(lineGroup) {\n            var options = this.options;\n            var majorTicks = options.majorTicks;\n            var minorTicks = options.minorTicks;\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var lineBox = this.lineBox();\n            var ticks = [];\n            var tickLineOptions = {\n                // TODO\n                // _alignLines: options._alignLines,\n                vertical: vertical\n            };\n\n            function render(tickPosition, tickOptions) {\n                tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                tickLineOptions.position = tickPosition;\n\n                lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n            }\n\n            if (majorTicks.visible) {\n                this.traverseMajorTicksPositions(render, majorTicks);\n            }\n\n            if (minorTicks.visible) {\n                this.traverseMinorTicksPositions(render, minorTicks);\n            }\n\n            return ticks;\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var vertical = options.vertical;\n            var lineBox = altAxis.lineBox();\n            var lineOptions = {\n                lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n                lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n                vertical: vertical\n            };\n            var majorTicks = [];\n\n            var container = this.gridLinesVisual();\n            function render(tickPosition, gridLine) {\n                if (!inArray(tickPosition, majorTicks)) {\n                    lineOptions.position = tickPosition;\n                    container.append(createAxisGridLine(lineOptions, gridLine));\n\n                    majorTicks.push(tickPosition);\n                }\n            }\n\n            if (majorGridLines.visible) {\n                this.traverseMajorTicksPositions(render, majorGridLines);\n            }\n\n            if (minorGridLines.visible) {\n                this.traverseMinorTicksPositions(render, minorGridLines);\n            }\n\n            return container.children;\n        },\n\n        traverseMajorTicksPositions: function(callback, tickOptions) {\n            var ref = this.lineInfo();\n            var lineStart = ref.lineStart;\n            var step = ref.step;\n            var ref$1 = this;\n            var logMin = ref$1.logMin;\n            var logMax = ref$1.logMax;\n\n            for (var power = Math.ceil(logMin) + tickOptions.skip; power <= logMax; power += tickOptions.step) {\n                var position = round(lineStart + step * (power - logMin), DEFAULT_PRECISION);\n                callback(position, tickOptions);\n            }\n        },\n\n        traverseMinorTicksPositions: function(callback, tickOptions) {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var min = ref.min;\n            var max = ref.max;\n            var minorUnit = ref.minorUnit;\n            var base = ref.majorUnit;\n            var ref$1 = this.lineInfo();\n            var lineStart = ref$1.lineStart;\n            var step = ref$1.step;\n            var ref$2 = this;\n            var logMin = ref$2.logMin;\n            var logMax = ref$2.logMax;\n            var start = Math.floor(logMin);\n\n            for (var power = start; power < logMax; power++) {\n                var minorOptions = this$1$1._minorIntervalOptions(power);\n                for (var idx = tickOptions.skip; idx < minorUnit; idx += tickOptions.step) {\n                    var value = minorOptions.value + idx * minorOptions.minorStep;\n                    if (value > max) {\n                        break;\n                    }\n                    if (value >= min) {\n                        var position = round(lineStart + step * (log(value, base) - logMin), DEFAULT_PRECISION);\n                        callback(position, tickOptions);\n                    }\n                }\n            }\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var power = Math.ceil(this.logMin + index);\n            var value = Math.pow(this.options.majorUnit, power);\n            var text = this.axisLabelText(value, labelOptions, labelContext);\n\n            return new AxisLabel(value, text, index, null, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            return range.min <= value && value <= range.max;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta);\n            return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var ref = this.options;\n            var base = ref.majorUnit;\n            var logMin = log(this.options.min, base);\n            var logMax = log(this.options.max, base);\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = logMax - logMin;\n            var delta = this.scaleToDelta(scale, range);\n            var min = Math.pow(base, logMin + position * delta);\n            var max = Math.pow(base, logMax - (1 - position) * delta);\n\n            if (max - min < MIN_VALUE_RANGE$2) {\n                max = min + MIN_VALUE_RANGE$2;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var range = this.scaleRange(scale, cursor);\n            var ref = this;\n            var totalMin = ref.totalMin;\n            var totalMax = ref.totalMax;\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax)\n            };\n        },\n\n        _minorIntervalOptions: function(power) {\n            var ref = this.options;\n            var minorUnit = ref.minorUnit;\n            var base = ref.majorUnit;\n            var value = Math.pow(base, power);\n            var nextValue = Math.pow(base, power + 1);\n            var difference = nextValue - value;\n            var minorStep = difference / minorUnit;\n\n            return {\n                value: value,\n                minorStep: minorStep\n            };\n        },\n\n        lineInfo: function() {\n            var info = Axis.fn.lineInfo.call(this);\n            info.step = info.axisDir * (info.lineSize / (this.logMax - this.logMin));\n\n            return info;\n        }\n    });\n\n    function initRange(autoMin, autoMax, axisOptions, options) {\n        var min = axisOptions.min;\n        var max = axisOptions.max;\n\n        if (defined(axisOptions.axisCrossingValue) && axisOptions.axisCrossingValue <= 0) {\n            throwNegativeValuesError();\n        }\n\n        if (!defined(options.max)) {\n            max = autoMax;\n        } else if (options.max <= 0) {\n            throwNegativeValuesError();\n        }\n\n        if (!defined(options.min)) {\n            min = autoMin;\n        } else if (options.min <= 0) {\n            throwNegativeValuesError();\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n\n    function autoAxisMin$1(min, max, options) {\n        var base = options.majorUnit;\n        var autoMin = min;\n        if (min <= 0) {\n            autoMin = max <= 1 ? Math.pow(base, -2) : 1;\n        } else if (!options.narrowRange) {\n            autoMin = Math.pow(base, Math.floor(log(min, base)));\n        }\n        return autoMin;\n    }\n\n    function autoAxisMax$1(max, base) {\n        var logMaxRemainder = round(log(max, base), DEFAULT_PRECISION) % 1;\n        var autoMax;\n        if (max <= 0) {\n            autoMax = base;\n        } else if (logMaxRemainder !== 0 && (logMaxRemainder < 0.3 || logMaxRemainder > 0.9)) {\n            autoMax = Math.pow(base, log(max, base) + 0.2);\n        } else {\n            autoMax = Math.pow(base, Math.ceil(log(max, base)));\n        }\n\n        return autoMax;\n    }\n\n    function throwNegativeValuesError() {\n        throw new Error(\"Non positive values cannot be used for a logarithmic axis\");\n    }\n\n    function log(x, base) {\n        return Math.log(x) / Math.log(base);\n    }\n\n    setDefaultOptions(LogarithmicAxis, {\n        type: \"log\",\n        majorUnit: DEFAULT_MAJOR_UNIT,\n        minorUnit: 1,\n        axisCrossingValue: 1,\n        vertical: true,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        zIndex: 1,\n        _deferLabels: true\n    });\n\n    var GridLinesMixin = {\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var radius = Math.abs(this.box.center().y - altAxis.lineBox().y1);\n            var gridLines = [];\n            var skipMajor = false;\n            var majorAngles, minorAngles;\n\n            if (options.majorGridLines.visible) {\n                majorAngles = this.majorGridLineAngles(altAxis);\n                skipMajor = true;\n\n                gridLines = this.renderMajorGridLines(\n                    majorAngles, radius, options.majorGridLines\n                );\n            }\n\n            if (options.minorGridLines.visible) {\n                minorAngles = this.minorGridLineAngles(altAxis, skipMajor);\n\n                append(gridLines, this.renderMinorGridLines(\n                    minorAngles, radius, options.minorGridLines, altAxis, skipMajor\n                ));\n            }\n\n            return gridLines;\n        },\n\n        renderMajorGridLines: function(angles, radius, options) {\n            return this.renderGridLines(angles, radius, options);\n        },\n\n        renderMinorGridLines: function(angles, radius, options, altAxis, skipMajor) {\n            var radiusCallback = this.radiusCallback && this.radiusCallback(radius, altAxis, skipMajor);\n            return this.renderGridLines(angles, radius, options, radiusCallback);\n        },\n\n        renderGridLines: function(angles, radius, options, radiusCallback) {\n            var style = {\n                stroke: {\n                    width: options.width,\n                    color: options.color,\n                    dashType: options.dashType\n                }\n            };\n\n            var center = this.box.center();\n            var circle = new Circle([ center.x, center.y ], radius);\n            var container = this.gridLinesVisual();\n\n            for (var i = 0; i < angles.length; i++) {\n                var line = new Path(style);\n                if (radiusCallback) {\n                    circle.radius = radiusCallback(angles[i]);\n                }\n\n                line.moveTo(circle.center)\n                    .lineTo(circle.pointAt(angles[i] + 180));\n\n                container.append(line);\n            }\n\n            return container.children;\n        },\n\n        gridLineAngles: function(altAxis, size, skip, step, skipAngles) {\n            var this$1$1 = this;\n\n            var divs = this.intervals(size, skip, step, skipAngles);\n            var options = altAxis.options;\n            var altAxisVisible = options.visible && (options.line || {}).visible !== false;\n\n            return map(divs, function (d) {\n                var alpha = this$1$1.intervalAngle(d);\n\n                if (!altAxisVisible || alpha !== 90) {\n                    return alpha;\n                }\n            });\n        }\n    };\n\n    var RadarCategoryAxis = CategoryAxis.extend({\n        range: function() {\n            return { min: 0, max: this.options.categories.length };\n        },\n\n        reflow: function(box) {\n            this.box = box;\n            this.reflowLabels();\n        },\n\n        lineBox: function() {\n            return this.box;\n        },\n\n        reflowLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var labels = ref.labels;\n            var labelOptions = ref.options.labels;\n            var skip = labelOptions.skip || 0;\n            var step = labelOptions.step || 1;\n            var measureBox = new Box();\n\n            for (var i = 0; i < labels.length; i++) {\n                labels[i].reflow(measureBox);\n                var labelBox = labels[i].box;\n\n                labels[i].reflow(this$1$1.getSlot(skip + i * step).adjacentBox(\n                    0, labelBox.width(), labelBox.height()\n                ));\n            }\n        },\n\n        intervals: function(size, skipOption, stepOption, skipAngles) {\n            if (skipAngles === void 0) { skipAngles = false; }\n\n            var options = this.options;\n            var categories = options.categories.length;\n            var divCount = categories / size || 1;\n            var divAngle = 360 / divCount;\n            var skip = skipOption || 0;\n            var step = stepOption || 1;\n            var divs = [];\n            var angle = 0;\n\n            for (var i = skip; i < divCount; i += step) {\n                if (options.reverse) {\n                    angle = 360 - i * divAngle;\n                } else {\n                    angle = i * divAngle;\n                }\n\n                angle = round(angle, COORD_PRECISION) % 360;\n\n                if (!(skipAngles && inArray(angle, skipAngles))) {\n                    divs.push(angle);\n                }\n            }\n\n            return divs;\n        },\n\n        majorIntervals: function() {\n            return this.intervals(1);\n        },\n\n        minorIntervals: function() {\n            return this.intervals(0.5);\n        },\n\n        intervalAngle: function(interval) {\n            return (360 + interval + this.options.startAngle) % 360;\n        },\n\n        majorAngles: function() {\n            var this$1$1 = this;\n\n            return map(this.majorIntervals(), function (interval) { return this$1$1.intervalAngle(interval); });\n        },\n\n        createLine: function() {\n            return [];\n        },\n\n        majorGridLineAngles: function(altAxis) {\n            var majorGridLines = this.options.majorGridLines;\n            return this.gridLineAngles(altAxis, 1, majorGridLines.skip, majorGridLines.step);\n        },\n\n        minorGridLineAngles: function(altAxis, skipMajor) {\n            var ref = this.options;\n            var minorGridLines = ref.minorGridLines;\n            var majorGridLines = ref.majorGridLines;\n            var majorGridLineAngles = skipMajor ? this.intervals(1, majorGridLines.skip, majorGridLines.step) : null;\n\n            return this.gridLineAngles(altAxis, 0.5, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n        },\n\n        radiusCallback: function(radius, altAxis, skipMajor) {\n            if (altAxis.options.type !== ARC) {\n                var minorAngle = rad(360 / (this.options.categories.length * 2));\n                var minorRadius = Math.cos(minorAngle) * radius;\n                var majorAngles = this.majorAngles();\n\n                var radiusCallback = function(angle) {\n                    if (!skipMajor && inArray(angle, majorAngles)) {\n                        return radius;\n                    }\n\n                    return minorRadius;\n                };\n                return radiusCallback;\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var plotBands = this.options.plotBands || [];\n\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            for (var i = 0; i < plotBands.length; i++) {\n                var band = plotBands[i];\n                var slot = this$1$1.plotBandSlot(band);\n                var singleSlot = this$1$1.getSlot(band.from);\n\n                var head = band.from - Math.floor(band.from);\n                slot.startAngle += head * singleSlot.angle;\n\n                var tail = Math.ceil(band.to) - band.to;\n                slot.angle -= (tail + head) * singleSlot.angle;\n\n                var ring = ShapeBuilder.current.createRing(slot, {\n                    fill: {\n                        color: band.color,\n                        opacity: band.opacity\n                    },\n                    stroke: {\n                        opacity: band.opacity\n                    }\n                });\n                group.append(ring);\n            }\n\n            this.appendVisual(group);\n        },\n\n        plotBandSlot: function(band) {\n            return this.getSlot(band.from, band.to - 1);\n        },\n\n        getSlot: function(from, to) {\n            var options = this.options;\n            var justified = options.justified;\n            var box = this.box;\n            var divs = this.majorAngles();\n            var totalDivs = divs.length;\n            var slotAngle = 360 / totalDivs;\n            var fromValue = from;\n\n            if (options.reverse && !justified) {\n                fromValue = (fromValue + 1) % totalDivs;\n            }\n\n            fromValue = limitValue(Math.floor(fromValue), 0, totalDivs - 1);\n            var slotStart = divs[fromValue];\n\n            if (justified) {\n                slotStart = slotStart - slotAngle / 2;\n\n                if (slotStart < 0) {\n                    slotStart += 360;\n                }\n            }\n\n            var toValue = limitValue(Math.ceil(to || fromValue), fromValue, totalDivs - 1);\n            var slots = toValue - fromValue + 1;\n            var angle = slotAngle * slots;\n\n            return new Ring(box.center(), 0, box.height() / 2, slotStart, angle);\n        },\n\n        slot: function(from, to) {\n            var slot = this.getSlot(from, to);\n            var startAngle = slot.startAngle + 180;\n            var endAngle = startAngle + slot.angle;\n\n            return new geometry.Arc([ slot.center.x, slot.center.y ], {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: slot.radius,\n                radiusY: slot.radius\n            });\n        },\n\n        pointCategoryIndex: function(point) {\n            var this$1$1 = this;\n\n            var length = this.options.categories.length;\n            var index = null;\n\n            for (var i = 0; i < length; i++) {\n                var slot = this$1$1.getSlot(i);\n                if (slot.containsPoint(point)) {\n                    index = i;\n                    break;\n                }\n            }\n\n            return index;\n        }\n    });\n\n    setDefaultOptions(RadarCategoryAxis, {\n        startAngle: 90,\n        labels: {\n            margin: getSpacing(10)\n        },\n        majorGridLines: {\n            visible: true\n        },\n        justified: true\n    });\n    deepExtend(RadarCategoryAxis.prototype, GridLinesMixin);\n\n    var PolarAxis = Axis.extend({\n        init: function(options, chartService) {\n            Axis.fn.init.call(this, options, chartService);\n\n            var instanceOptions = this.options;\n\n            instanceOptions.minorUnit = instanceOptions.minorUnit || instanceOptions.majorUnit / 2;\n        },\n\n        getDivisions: function(stepValue) {\n            return NumericAxis.prototype.getDivisions.call(this, stepValue) - 1;\n        },\n\n        reflow: function(box) {\n            this.box = box;\n            this.reflowLabels();\n        },\n\n        reflowLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var labelOptions = ref.options.labels;\n            var skip = labelOptions.skip || 0;\n            var step = labelOptions.step || 1;\n\n            var measureBox = new Box();\n            var divs = this.intervals(options.majorUnit, skip, step);\n\n            for (var i = 0; i < labels.length; i++) {\n                labels[i].reflow(measureBox);\n                var labelBox = labels[i].box;\n\n                labels[i].reflow(this$1$1.getSlot(divs[i]).adjacentBox(0, labelBox.width(), labelBox.height()));\n            }\n        },\n\n        lineBox: function() {\n            return this.box;\n        },\n\n        intervals: function(size, skipOption, stepOption, skipAngles) {\n            if (skipAngles === void 0) { skipAngles = false; }\n\n            var min = this.options.min;\n            var divisions = this.getDivisions(size);\n            var divs = [];\n            var skip = skipOption || 0;\n            var step = stepOption || 1;\n\n            for (var i = skip; i < divisions; i += step) {\n                var current = (360 + min + i * size) % 360;\n                if (!(skipAngles && inArray(current, skipAngles))) {\n                    divs.push(current);\n                }\n            }\n\n            return divs;\n        },\n\n        majorIntervals: function() {\n            return this.intervals(this.options.majorUnit);\n        },\n\n        minorIntervals: function() {\n            return this.intervals(this.options.minorUnit);\n        },\n\n        intervalAngle: function(i) {\n            return (540 - i - this.options.startAngle) % 360;\n        },\n\n        createLine: function() {\n            return [];\n        },\n\n        majorGridLineAngles: function(altAxis) {\n            var majorGridLines = this.options.majorGridLines;\n            return this.gridLineAngles(altAxis, this.options.majorUnit, majorGridLines.skip, majorGridLines.step);\n        },\n\n        minorGridLineAngles: function(altAxis, skipMajor) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var majorGridLineAngles = skipMajor ? this.intervals(options.majorUnit, majorGridLines.skip, majorGridLines.step) : null;\n\n            return this.gridLineAngles(altAxis, options.minorUnit, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n        },\n\n        plotBandSlot: function(band) {\n            return this.getSlot(band.from, band.to);\n        },\n\n        getSlot: function(a, b) {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var startAngle = options.startAngle;\n            var start = limitValue(a, options.min, options.max);\n            var end = limitValue(b || start, start, options.max);\n\n            if (options.reverse) {\n                start *= -1;\n                end *= -1;\n            }\n\n            start = (540 - start - startAngle) % 360;\n            end = (540 - end - startAngle) % 360;\n\n            if (end < start) {\n                var tmp = start;\n                start = end;\n                end = tmp;\n            }\n\n            return new Ring(box.center(), 0, box.height() / 2, start, end - start);\n        },\n\n        slot: function(from, to) {\n            if (to === void 0) { to = from; }\n\n            var options = this.options;\n            var start = 360 - options.startAngle;\n            var slot = this.getSlot(from, to);\n            var min = Math.min(from, to);\n            var max = Math.max(from, to);\n            var startAngle, endAngle;\n\n            if (options.reverse) {\n                startAngle = min;\n                endAngle = max;\n            } else {\n                startAngle = 360 - max;\n                endAngle = 360 - min;\n            }\n\n            startAngle = (startAngle + start) % 360;\n            endAngle = (endAngle + start) % 360;\n\n            return new geometry.Arc([ slot.center.x, slot.center.y ], {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: slot.radius,\n                radiusY: slot.radius\n            });\n        },\n\n        getValue: function(point) {\n            var options = this.options;\n            var center = this.box.center();\n            var dx = point.x - center.x;\n            var dy = point.y - center.y;\n            var theta = Math.round(deg(Math.atan2(dy, dx)));\n            var start = options.startAngle;\n\n            if (!options.reverse) {\n                theta *= -1;\n                start *= -1;\n            }\n\n            return (theta + start + 360) % 360;\n        },\n\n        valueRange: function() {\n            return {\n                min: 0,\n                max: Math.PI * 2\n            };\n        }\n    });\n\n    setDefaultOptions(PolarAxis, {\n        type: \"polar\",\n        startAngle: 0,\n        reverse: false,\n        majorUnit: 60,\n        min: 0,\n        max: 360,\n        labels: {\n            margin: getSpacing(10)\n        },\n        majorGridLines: {\n            color: BLACK,\n            visible: true,\n            width: 1\n        },\n        minorGridLines: {\n            color: \"#aaa\"\n        }\n    });\n\n    deepExtend(PolarAxis.prototype, GridLinesMixin, {\n        createPlotBands: RadarCategoryAxis.prototype.createPlotBands,\n        majorAngles: RadarCategoryAxis.prototype.majorAngles,\n        range: NumericAxis.prototype.range,\n        labelsCount: NumericAxis.prototype.labelsCount,\n        createAxisLabel: NumericAxis.prototype.createAxisLabel\n    });\n\n    var RadarNumericAxisMixin = {\n        options: {\n            majorGridLines: {\n                visible: true\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var type = ref.majorGridLines.type;\n            var plotBands = ref.plotBands; if (plotBands === void 0) { plotBands = []; }\n            var altAxis = this.plotArea.polarAxis;\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            for (var i = 0; i < plotBands.length; i++) {\n                var band = plotBands[i];\n                var bandStyle = {\n                    fill: {\n                        color: band.color,\n                        opacity: band.opacity\n                    },\n                    stroke: {\n                        opacity: band.opacity\n                    }\n                };\n\n                var slot = this$1$1.getSlot(band.from, band.to, true);\n                var ring = new Ring(center, center.y - slot.y2, center.y - slot.y1, 0, 360);\n\n                var shape = (void 0);\n                if (type === ARC) {\n                    shape = ShapeBuilder.current.createRing(ring, bandStyle);\n                } else {\n                    shape = Path.fromPoints(this$1$1.plotBandPoints(ring, majorAngles), bandStyle).close();\n                }\n\n                group.append(shape);\n            }\n\n            this.appendVisual(group);\n        },\n\n        plotBandPoints: function(ring, angles) {\n            var innerPoints = [];\n            var outerPoints = [];\n            var center = [ ring.center.x, ring.center.y ];\n            var innerCircle = new Circle(center, ring.innerRadius);\n            var outerCircle = new Circle(center, ring.radius);\n\n            for (var i = 0; i < angles.length; i++) {\n                innerPoints.push(innerCircle.pointAt(angles[i] + 180));\n                outerPoints.push(outerCircle.pointAt(angles[i] + 180));\n            }\n\n            innerPoints.reverse();\n            innerPoints.push(innerPoints[0]);\n            outerPoints.push(outerPoints[0]);\n\n            return outerPoints.concat(innerPoints);\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var majorTicks = this.radarMajorGridLinePositions();\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var gridLines = [];\n\n            if (options.majorGridLines.visible) {\n                gridLines = this.renderGridLines(\n                    center, majorTicks, majorAngles, options.majorGridLines\n                );\n            }\n\n            if (options.minorGridLines.visible) {\n                var minorTicks = this.radarMinorGridLinePositions();\n                append(gridLines, this.renderGridLines(\n                    center, minorTicks, majorAngles, options.minorGridLines\n                ));\n            }\n\n            return gridLines;\n        },\n\n        renderGridLines: function(center, ticks, angles, options) {\n            var style = {\n                stroke: {\n                    width: options.width,\n                    color: options.color,\n                    dashType: options.dashType\n                }\n            };\n            var skip = options.skip; if (skip === void 0) { skip = 0; }\n            var step = options.step; if (step === void 0) { step = 0; }\n            var container = this.gridLinesVisual();\n\n            for (var tickIx = skip; tickIx < ticks.length; tickIx += step) {\n                var tickRadius = center.y - ticks[tickIx];\n                if (tickRadius > 0) {\n                    var circle = new Circle([ center.x, center.y ], tickRadius);\n                    if (options.type === ARC) {\n                        container.append(new drawing.Circle(circle, style));\n                    } else {\n                        var line = new Path(style);\n                        for (var angleIx = 0; angleIx < angles.length; angleIx++) {\n                            line.lineTo(circle.pointAt(angles[angleIx] + 180));\n                        }\n\n                        line.close();\n                        container.append(line);\n                    }\n                }\n            }\n\n            return container.children;\n        },\n\n        getValue: function(point) {\n            var lineBox = this.lineBox();\n            var altAxis = this.plotArea.polarAxis;\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var radius = point.distanceTo(center);\n            var distance = radius;\n\n            if (this.options.majorGridLines.type !== ARC && majorAngles.length > 1) {\n                var dx = point.x - center.x;\n                var dy = point.y - center.y;\n                var theta = (deg(Math.atan2(dy, dx)) + 540) % 360;\n\n                majorAngles.sort(function(a, b) {\n                    return angularDistance(a, theta) - angularDistance(b, theta);\n                });\n\n                // Solve triangle (center, point, axis X) using one side (radius) and two angles.\n                // Angles are derived from triangle (center, point, gridline X)\n                var midAngle = angularDistance(majorAngles[0], majorAngles[1]) / 2;\n                var alpha = angularDistance(theta, majorAngles[0]);\n                var gamma = 90 - midAngle;\n                var beta = 180 - alpha - gamma;\n\n                distance = radius * (Math.sin(rad(beta)) / Math.sin(rad(gamma)));\n            }\n\n            return this.axisType().prototype.getValue.call(\n                this, new Point(lineBox.x1, lineBox.y2 - distance)\n            );\n        }\n    };\n\n    function angularDistance(a, b) {\n        return 180 - Math.abs(Math.abs(a - b) - 180);\n    }\n\n    var RadarNumericAxis = NumericAxis.extend({\n        radarMajorGridLinePositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        radarMinorGridLinePositions: function() {\n            var options = this.options;\n            var minorSkipStep = 0;\n\n            if (options.majorGridLines.visible) {\n                minorSkipStep = options.majorUnit;\n            }\n            return this.getTickPositions(options.minorUnit, minorSkipStep);\n        },\n\n        axisType: function() {\n            return NumericAxis;\n        }\n    });\n\n    deepExtend(RadarNumericAxis.prototype, RadarNumericAxisMixin);\n\n    var RadarLogarithmicAxis = LogarithmicAxis.extend({\n        radarMajorGridLinePositions: function() {\n            var positions = [];\n\n            this.traverseMajorTicksPositions(function(position) {\n                positions.push(position);\n            }, this.options.majorGridLines);\n\n            return positions;\n        },\n\n        radarMinorGridLinePositions: function() {\n            var positions = [];\n\n            this.traverseMinorTicksPositions(function(position) {\n                positions.push(position);\n            }, this.options.minorGridLines);\n\n            return positions;\n        },\n\n        axisType: function() {\n            return LogarithmicAxis;\n        }\n    });\n\n    deepExtend(RadarLogarithmicAxis.prototype, RadarNumericAxisMixin);\n\n    var WEIGHT = 0.333;\n    var EXTREMUM_ALLOWED_DEVIATION = 0.01;\n\n    var CurveProcessor = Class.extend({\n        init: function(closed) {\n\n            this.closed = closed;\n        },\n\n        process: function(dataPoints) {\n            var this$1$1 = this;\n\n            var points = dataPoints.slice(0);\n            var segments = [];\n            var closed = this.closed;\n            var length = points.length;\n\n            if (length > 2) {\n                this.removeDuplicates(0, points);\n                length = points.length;\n            }\n\n            if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n                return segments;\n            }\n\n            var p0 = points[0];\n            var p1 = points[1];\n            var p2 = points[2];\n\n            segments.push(new Segment(p0));\n\n            while (p0.equals(points[length - 1])) {\n                closed = true;\n                points.pop();\n                length--;\n            }\n\n            if (length === 2) {\n                var tangent = this.tangent(p0,p1, X, Y);\n\n                last(segments).controlOut(\n                    this.firstControlPoint(tangent, p0, p1, X, Y)\n                );\n\n                segments.push(new Segment(\n                    p1,\n                    this.secondControlPoint(tangent, p0, p1, X, Y)\n                ));\n\n                return segments;\n            }\n\n            var initialControlPoint, lastControlPoint;\n\n            if (closed) {\n                p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n                var controlPoints = this.controlPoints(p0, p1, p2);\n                initialControlPoint = controlPoints[1];\n                lastControlPoint = controlPoints[0];\n            } else {\n                var tangent$1 = this.tangent(p0, p1, X,Y);\n                initialControlPoint = this.firstControlPoint(tangent$1, p0, p1, X, Y);\n            }\n\n            var cp0 = initialControlPoint;\n            for (var idx = 0; idx <= length - 3; idx++) {\n                this$1$1.removeDuplicates(idx, points);\n                length = points.length;\n                if (idx + 3 <= length) {\n                    p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                    var controlPoints$1 = this$1$1.controlPoints(p0,p1,p2);\n\n                    last(segments).controlOut(cp0);\n                    cp0 = controlPoints$1[1];\n\n                    var cp1 = controlPoints$1[0];\n                    segments.push(new Segment(p1, cp1));\n                }\n            }\n\n            if (closed) {\n                p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n                var controlPoints$2 = this.controlPoints(p0, p1, p2);\n\n                last(segments).controlOut(cp0);\n                segments.push(new Segment(\n                    p1,\n                    controlPoints$2[0]\n                ));\n\n                last(segments).controlOut(controlPoints$2[1]);\n                segments.push(new Segment(\n                    p2,\n                    lastControlPoint\n                ));\n            } else {\n                var tangent$2 = this.tangent(p1, p2, X, Y);\n\n                last(segments).controlOut(cp0);\n                segments.push(new Segment(\n                    p2,\n                    this.secondControlPoint(tangent$2, p1, p2, X, Y)\n                ));\n            }\n\n            return segments;\n        },\n\n        removeDuplicates: function(idx, points) {\n            while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n                points.splice(idx + 1, 1);\n            }\n        },\n\n        invertAxis: function(p0, p1, p2) {\n            var invertAxis = false;\n\n            if (p0.x === p1.x) {\n                invertAxis = true;\n            } else if (p1.x === p2.x) {\n                if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                    invertAxis = true;\n                }\n            } else {\n                var fn = this.lineFunction(p0,p1);\n                var y2 = this.calculateFunction(fn, p2.x);\n                if (!(p0.y <= p1.y && p2.y <= y2) &&\n                    !(p1.y <= p0.y && p2.y >= y2)) {\n                    invertAxis = true;\n                }\n            }\n\n            return invertAxis;\n        },\n\n        isLine: function(p0, p1, p2) {\n            var fn = this.lineFunction(p0, p1);\n            var y2 = this.calculateFunction(fn, p2.x);\n\n            return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n        },\n\n        lineFunction: function(p1, p2) {\n            var a = (p2.y - p1.y) / (p2.x - p1.x);\n            var b = p1.y - a * p1.x;\n\n            return [ b, a ];\n        },\n\n        controlPoints: function(p0, p1, p2) {\n            var xField = X;\n            var yField = Y;\n            var restrict = false;\n            var switchOrientation = false;\n            var tangent;\n\n            if (this.isLine(p0, p1, p2)) {\n                tangent = this.tangent(p0, p1, X, Y);\n            } else {\n                var monotonic = {\n                    x: this.isMonotonicByField(p0, p1, p2, X),\n                    y: this.isMonotonicByField(p0, p1, p2, Y)\n                };\n\n                if (monotonic.x && monotonic.y) {\n                    tangent = this.tangent(p0, p2, X, Y);\n                    restrict = true;\n                } else {\n                    if (this.invertAxis(p0, p1, p2)) {\n                        xField = Y;\n                        yField = X;\n                    }\n\n                    if (monotonic[xField]) {\n                        tangent = 0;\n                    } else {\n                        var sign;\n                        if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                            (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                            sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                        } else {\n                            sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                        }\n\n                        tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                        switchOrientation = true;\n                    }\n                }\n            }\n\n            var secondControlPoint = this.secondControlPoint(tangent, p0, p1, xField, yField);\n\n            if (switchOrientation) {\n                var oldXField = xField;\n                xField = yField;\n                yField = oldXField;\n            }\n\n            var firstControlPoint = this.firstControlPoint(tangent, p1, p2, xField, yField);\n\n            if (restrict) {\n                this.restrictControlPoint(p0, p1, secondControlPoint, tangent);\n                this.restrictControlPoint(p1, p2, firstControlPoint, tangent);\n            }\n\n            return [ secondControlPoint, firstControlPoint ];\n        },\n\n        restrictControlPoint: function(p1, p2, cp, tangent) {\n            if (p1.y < p2.y) {\n                if (p2.y < cp.y) {\n                    cp.x = p1.x + (p2.y - p1.y) / tangent;\n                    cp.y = p2.y;\n                } else if (cp.y < p1.y) {\n                    cp.x = p2.x - (p2.y - p1.y) / tangent;\n                    cp.y = p1.y;\n                }\n            } else {\n                if (cp.y < p2.y) {\n                    cp.x = p1.x - (p1.y - p2.y) / tangent;\n                    cp.y = p2.y;\n                } else if (p1.y < cp.y) {\n                    cp.x = p2.x + (p1.y - p2.y) / tangent;\n                    cp.y = p1.y;\n                }\n            }\n        },\n\n        tangent: function(p0, p1, xField, yField) {\n            var x = p1[xField] - p0[xField];\n            var y = p1[yField] - p0[yField];\n            var tangent;\n\n            if (x === 0) {\n                tangent = 0;\n            } else {\n                tangent = y / x;\n            }\n\n            return tangent;\n        },\n\n        isMonotonicByField: function(p0, p1, p2, field) {\n            return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                        (p2[field] < p1[field] && p1[field] < p0[field]);\n        },\n\n        firstControlPoint: function(tangent, p0, p3, xField, yField) {\n            var t1 = p0[xField];\n            var t2 = p3[xField];\n            var distance = (t2 - t1) * WEIGHT;\n\n            return this.point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n        },\n\n        secondControlPoint: function(tangent, p0, p3, xField, yField) {\n            var t1 = p0[xField];\n            var t2 = p3[xField];\n            var distance = (t2 - t1) * WEIGHT;\n\n            return this.point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n        },\n\n        point: function(xValue, yValue, xField, yField) {\n            var controlPoint = new geometry.Point();\n            controlPoint[xField] = xValue;\n            controlPoint[yField] = yValue;\n\n            return controlPoint;\n        },\n\n        calculateFunction: function(fn, x) {\n            var length = fn.length;\n            var result = 0;\n\n            for (var i = 0; i < length; i++) {\n                result += Math.pow(x,i) * fn[i];\n            }\n            return result;\n        }\n    });\n\n    function numberSign(value) {\n        return value <= 0 ? -1 : 1;\n    }\n\n    dataviz.Gradients = GRADIENTS;\n\n    kendo.deepExtend(kendo.dataviz, {\n        constants: constants,\n        services: services,\n        autoMajorUnit: autoMajorUnit,\n        Point: Point,\n        Box: Box,\n        Ring: Ring,\n        Sector: Sector,\n        ShapeBuilder: ShapeBuilder,\n        ShapeElement: ShapeElement,\n        ChartElement: ChartElement,\n        BoxElement: BoxElement,\n        RootElement: RootElement,\n        FloatElement: FloatElement,\n        Text: Text,\n        TextBox: TextBox,\n        Title: Title,\n        AxisLabel: AxisLabel,\n        Axis: Axis,\n        Note: Note,\n        CategoryAxis: CategoryAxis,\n        DateCategoryAxis: DateCategoryAxis,\n        DateValueAxis: DateValueAxis,\n        NumericAxis: NumericAxis,\n        LogarithmicAxis: LogarithmicAxis,\n        PolarAxis: PolarAxis,\n        RadarCategoryAxis: RadarCategoryAxis,\n        RadarNumericAxis: RadarNumericAxis,\n        RadarLogarithmicAxis: RadarLogarithmicAxis,\n        CurveProcessor: CurveProcessor,\n        rectToBox: rectToBox,\n        addClass: addClass,\n        removeClass: removeClass,\n        alignPathToPixel: alignPathToPixel,\n        clockwise: clockwise,\n        convertableToNumber: convertableToNumber,\n        deepExtend: deepExtend,\n        elementStyles: elementStyles,\n        getSpacing: getSpacing,\n        getTemplate: getTemplate,\n        getter: __common_getter_js,\n        grep: grep,\n        hasClasses: hasClasses,\n        HashMap: HashMap,\n        inArray: inArray,\n        interpolateValue: interpolateValue,\n        InstanceObserver: InstanceObserver,\n        isArray: isArray,\n        isFunction: isFunction,\n        isNumber: isNumber,\n        isObject: isObject,\n        isString: isString,\n        map: map,\n        mousewheelDelta: mousewheelDelta,\n        FontLoader: FontLoader,\n        setDefaultOptions: setDefaultOptions,\n        sparseArrayLimits: sparseArrayLimits,\n        styleValue: styleValue,\n        find: find,\n        elementScale: elementScale,\n        autoTextColor: autoTextColor,\n        createHashSet: createHashSet,\n        defaultErrorHandler: defaultErrorHandler,\n        keys: keys,\n        append: append,\n        bindEvents: bindEvents,\n        Class: Class,\n        defined: defined,\n        deg: deg,\n        elementOffset: elementOffset,\n        elementSize: elementSize,\n        eventCoordinates: eventCoordinates,\n        eventElement: eventElement,\n        hashKey: hashKey,\n        last: last,\n        limitValue: limitValue,\n        logToConsole: kendo.logToConsole,\n        objectKey: objectKey,\n        rad: rad,\n        round: round,\n        unbindEvents: unbindEvents,\n        valueOrDefault: valueOrDefault,\n        absoluteDateDiff: absoluteDateDiff,\n        addDuration: addDuration,\n        addTicks: addTicks,\n        ceilDate: ceilDate,\n        dateComparer: dateComparer,\n        dateDiff: dateDiff,\n        dateEquals: dateEquals,\n        dateIndex: dateIndex,\n        duration: duration,\n        floorDate: floorDate,\n        lteDateIndex: lteDateIndex,\n        startOfWeek: startOfWeek,\n        toDate: toDate,\n        parseDate: parseDate,\n        parseDates: parseDates,\n        toTime: toTime,\n        firstDay: firstDay\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        var dataviz = kendo.dataviz;\n        var services = dataviz.services;\n        var draw = kendo.drawing;\n\n        dataviz.SASS_THEMES = [\"sass\", \"default-v2\", \"bootstrap-v4\", \"material-v2\"];\n\n        dataviz.ExportMixin = {\n            extend: function(proto, skipLegacy) {\n                if (!proto.exportVisual) {\n                    throw new Error(\"Mixin target has no exportVisual method defined.\");\n                }\n\n                proto.exportSVG = this.exportSVG;\n                proto.exportImage = this.exportImage;\n                proto.exportPDF = this.exportPDF;\n\n                if (!skipLegacy) {\n                    proto.svg = this.svg;\n                    proto.imageDataURL = this.imageDataURL;\n                }\n            },\n\n            exportSVG: function(options) {\n                return draw.exportSVG(this.exportVisual(), options);\n            },\n\n            exportImage: function(options) {\n                return draw.exportImage(this.exportVisual(options), options);\n            },\n\n            exportPDF: function(options) {\n                return draw.exportPDF(this.exportVisual(), options);\n            },\n\n            svg: function() {\n                if (draw.svg.Surface) {\n                    return draw.svg.exportGroup(this.exportVisual());\n                } else {\n                    throw new Error(\"SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface\");\n                }\n            },\n\n            imageDataURL: function() {\n                if (!kendo.support.canvas) {\n                    return null;\n                }\n\n                if (draw.canvas.Surface) {\n                    var container = $(\"<div />\").css({\n                        display: \"none\",\n                        width: this.element.width(),\n                        height: this.element.height()\n                    }).appendTo(document.body);\n\n                    var surface = new draw.canvas.Surface(container[0]);\n                    surface.draw(this.exportVisual());\n                    var image = surface._rootElement.toDataURL();\n\n                    surface.destroy();\n                    container.remove();\n\n                    return image;\n                } else {\n                    throw new Error(\"Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface\");\n                }\n            }\n        };\n\n        services.IntlService.register({\n           format: function(format) {\n               return kendo.format.apply(null, [format].concat(Array.prototype.slice.call(arguments, 1)));\n           },\n           toString: kendo.toString,\n           parseDate: kendo.parseDate,\n           firstDay: function() {\n               return kendo.culture().calendars.standard.firstDay;\n           }\n        });\n\n        services.TemplateService.register({\n           compile: kendo.template\n        });\n\n        dataviz.Point2D = dataviz.Point;\n        dataviz.Box2D = dataviz.Box;\n        dataviz.mwDelta = function(e) {\n            return dataviz.mousewheelDelta(e.originalEvent);\n        };\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"dataviz.core\",\n        name: \"Core\",\n        description: \"The DataViz core functions\",\n        category: \"dataviz\",\n        depends: [ \"core\", \"drawing\" ],\n        hidden: true\n    };\n\n}));\n"]}