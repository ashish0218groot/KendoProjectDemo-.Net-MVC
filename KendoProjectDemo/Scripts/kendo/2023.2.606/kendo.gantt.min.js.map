{"version":3,"file":"kendo.gantt.min.js","names":["factory","define","amd","$","undefined$1","kendo","window","keys","supportsMedia","mobileOS","support","Widget","ui","ObservableObject","data","ObservableArray","Query","isArray","Array","isFunction","extend","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","NS","TABINDEX","STRING","ARIA_DESCENDANT","ACTIVE_CELL","DOT","VIEWS_DROPDOWN_TEMPLATE","ref","label","styles","views","Object","map","view","title","join","ADD_ACTIONS","text","ganttStyles","wrapper","plannedTasks","rowHeight","content","listWrapper","list","timelineWrapper","timeline","splitBarWrapper","splitBar","splitBarHover","popupWrapper","popupList","resizeHandle","icon","item","line","buttonDelete","buttonCancel","buttonSave","buttonToggle","buttonDefaults","primary","hovered","selected","focused","focusedCell","gridHeader","gridHeaderWrap","gridContent","tasks","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","editField","editLabel","resourcesField","toolbar","headerWrapper","footerWrapper","viewsWrapper","viewsDropdown","iconPlus","iconPdf","iconToggle","viewButton","link","pdfButton","appendButton","selector","uid","attr","focusTable","table","direct","parents","scrollPositions","parentsUntil","filter","index","element","getComputedStyles","overflow","add","each","parent","scrollTop","setActive","e","focus","Gantt","init","options","events","dataSource","fn","call","this","_events","_wrapper","_resources","length","_timeline","_processDefaults","_toolbar","_footer","_adjustDimensions","_preventRefresh","_selectedViewName","_dataSource","_assignments","_list","_dependencies","_resizable","_scrollable","_dataBind","_attachEvents","_createEditor","notify","name","autoBind","navigatable","selectable","editable","resizable","columnResizeHandleWidth","columns","dependencies","resources","assignments","taskTemplate","messages","save","cancel","destroy","deleteTaskConfirmation","deleteDependencyConfirmation","deleteTaskWindowTitle","deleteDependencyWindowTitle","selectView","day","week","month","year","start","end","actions","append","addChild","insertBefore","insertAfter","pdf","toggle","editor","editorTitle","resourcesEditorTitle","plannedStart","plannedEnd","percentComplete","assignButton","resourcesHeader","unitsHeader","addNew","percentCompleteHint","remove","actualStart","actualEnd","parentOptionLabel","general","predecessors","successors","other","dependencyType","switchText","offsetTooltipAdvanced","offsetTooltipDelay","seconds","minutes","hours","days","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","workWeekStart","workWeekEnd","hourSpan","snap","height","listWidth","showPlannedTasks","select","value","find","_selectionUpdate","trigger","clearSelection","unbind","_refreshHandler","_progressHandler","_errorHandler","_dependencyRefreshHandler","_dependencyErrorHandler","getKendoToolBar","footer","_editor","_resourceEditorWindow","_resizeDraggable","off","_mediaQuery","removeListener","_mediaQueryHandler","_resizeHandler","setOptions","newOptions","deepExtend","selectedView","isSettings","type","empty","_setEvents","resize","bind","on","matches","splitBarHandleClassName","width","addClass","layout","appendTo","css","treelistWrapper","splitbar","_viewClickHandler","target","preventDefault","_togglePane","that","treelist","contentSelector","is","removeClass","refresh","_resize","ns","viewsButtons","toolbarStyles","actionsMessages","defaults","menuButtons","m","attributes","class","click","_addClickHandler","open","_openAddClickHandler","saveAsPDF","showText","switchLabel","template","component","componentOptions","checked","change","_togglePlannedTasks","unchecked","viewsDdl","togglable","group","viewsGroup","current","toLowerCase","push","values","t","buttons","_viewsButtons","defaultCommands","_processTools","items","commands","tools","spacerPresent","create","c","toolbarEl","hide","show","viewsDropdownSelector","toolsOptions","prepend","kendoToolBar","size","defaultTools","parentMessages","matchMedia","addListener","val","toggleSwitch","direction","animation","effects","toolbarHeight","footerHeight","totalHeight","totalWidth","splitBarWidth","treeListWidth","timelineWidth","children","_scrollTo","action","scrollTarget","id","closest","get","scrollIntoView","_addTask","orderId","task","_createNewModel","firstSlot","_timeSlots","set","_createTask","dataItem","taskParent","_getListEditable","update","reorder","mode","move","reorderable","_getListOptions","filterable","columnMenu","field","_attachResourceEditor","column","i","_resourcePopupEditor","_attachListEvents","restoreFocus","_cachedCurrent","eq","rowIndex","columnIndex","_current","oldIndex","newIndex","oldWidth","newWidth","_navigatable","container","model","cell","_preventItemChange","closeCell","key","updatedValues","previousTask","updateDuration","duration","updatePlannedDuration","plannedDuration","hasOwnProperty","getTime","updateInfo","hasChanges","cancelChanges","_updateAssignments","_requestStart","sync","then","row","position","parentId","source","sort","dir","_updateTask","selection","listElement","listOptions","GanttList","prefix","edit","navigate","trimOptions","GanttTimeline","viewName","replace","viewsEl","getKendoButtonGroup","getByUid","resizeStart","dependency","predecessorId","predecessor","successorId","successor","_createDependency","currentUid","editTask","removeTask","removeDependency","_error","GanttDataSource","refreshDependencies","GanttDependencyDataSource","dataTextField","dataColorField","dataFormatField","DataSource","_assignmentsRefreshHandler","dataTaskIdField","dataResourceIdField","dataValueField","gantt","PopupEditor","_createResourceEditor","cancelTask","saveTask","updateDependencies","_onDialogClose","buttonsEl","dialog","popupStyles","dialogEl","format","kendoButton","themeColor","updateModel","close","kendoWindow","modal","draggable","visible","deactivate","center","unitsValidation","step","min","max","assignmentsModel","schema","resourceTextField","fields","Units","validation","_resourceEditor","ResourceEditor","r","range","_render","taskTree","_renderDependencies","date","_scrollToDate","_modelFromElement","setDataSource","fetch","setDependenciesDataSource","assignment","resource","taskId","resourceId","hasMatch","operator","toArray","_updateAssignment","splice","_removeAssignment","shift","j","newLength","_createAssignment","taskCopy","toJSON","_editTask","difference","hasResourceChanges","k","updated","u","some","concat","dirty","_syncDataSource","_updateDependency","this$1$1","created","d","_preventDependencyRefresh","destroyed","resourceValueField","_taskConfirm","_removeTask","insert","_scrollToUid","resourceValue","_dependencyConfirm","_removeDependency","_removeTaskDependencies","_removeTaskAssignments","callback","_confirm","confirmation","showDialog","_progress","cachedUid","scrollToUid","cachedIndex","_selected","_assignResources","_renderTree","assigments","applyTaskResource","setter","wrapTask","resourcedId","valueFormat","formatedValue","toString","color","_wrapResourceData","result","taskAssignments","valuePerResource","progress","timelineScroll","treeListWrapper","hover","kendoResizable","orientation","handle","scrollLeft","delta","x","initialDelta","isRtl","_renderCurrentTime","headerSelector","timelineHeader","timelineContent","treeListHeader","treeListContent","wheelDeltaY","currentTarget","one","cellIndex","headerTable","contentTable","tables","expandState","scroll","reverse","offsetWidth","scrollVertical","_rowHeight","moveVertical","method","sibling","first","last","moveHorizontal","subling","toggleExpandedState","summary","expanded","deleteAction","selectedTask","isInput","ctrlKey","_focusTimeout","setTimeout","keyCode","F10","TAB","isCell","RIGHT","altKey","LEFT","UP","DOWN","SPACEBAR","ENTER","_startEditHandler","stopPropagation","DELETE","tagName","_viewByIndex","activeElement","removeAttr","_activeElement","promises","when","apply","done","_adjustHeight","toggleClass","_setPlanned","PDFMixin","_drawPDF","listTableWidth","clone","_drawPDFShadow","avoidLinks","plugin","jQuery"],"sources":["kendo.gantt.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.data', 'kendo.resizable', 'kendo.switch', 'kendo.gantt.data', 'kendo.gantt.editors', 'kendo.gantt.list', 'kendo.gantt.timeline', 'kendo.pdf', 'kendo.toolbar', 'kendo.html.button'], factory) :\n    factory();\n})((function () {\n    var __meta__ = {\n        id: \"gantt\",\n        name: \"Gantt\",\n        category: \"web\",\n        description: \"The Gantt component.\",\n        depends: [ \"data\", \"resizable\", \"switch\", \"gantt.data\", \"gantt.editors\", \"gantt.list\", \"gantt.timeline\", \"pdf\", \"toolbar\", \"html.button\" ]\n    };\n    (function($, undefined$1) {\n\n        var kendo = window.kendo,\n            keys = kendo.keys,\n            supportsMedia = \"matchMedia\" in window,\n            mobileOS = kendo.support.mobileOS,\n            Widget = kendo.ui.Widget,\n            ObservableObject = kendo.data.ObservableObject,\n            ObservableArray = kendo.data.ObservableArray,\n            Query = kendo.data.Query,\n            isArray = Array.isArray,\n            isFunction = kendo.isFunction,\n            extend = $.extend,\n            isPlainObject = $.isPlainObject,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            defaultIndicatorWidth = 3,\n\n            NS = \".kendoGantt\",\n            PERCENTAGE_FORMAT = \"p0\",\n            TABINDEX = \"tabIndex\",\n            STRING = \"string\",\n            ARIA_DESCENDANT = \"aria-activedescendant\",\n            ACTIVE_CELL = \"gantt_active_cell\",\n            DOT = \".\",\n            TASK_DELETE_CONFIRM = \"Are you sure you want to delete this task?\",\n            DEPENDENCY_DELETE_CONFIRM = \"Are you sure you want to delete this dependency?\",\n            VIEWS_DROPDOWN_TEMPLATE = function (ref) {\n                var label = ref.label;\n                var styles = ref.styles;\n                var views = ref.views;\n\n                return \"<select aria-label=\\\"\" + label + \"\\\" class=\\\"k-dropdown k-picker k-dropdown-list \" + (styles.viewsDropdown) + \"\\\">\" +\n                \"\" + (Object.keys(views).map(function (view) { return '<option value=\"' + view + '\">' + views[view].title + '</option>'; }).join(\"\")) +\n            '</select>';\n        },\n            MIN_SCREEN = \"(max-width: 480px)\",\n            ADD_ACTIONS = [{\n                data: \"add\",\n                text: \"addChild\"\n            },\n            {\n                data: \"insert-before\",\n                text: \"insertBefore\"\n            },\n            {\n                data: \"insert-after\",\n                text: \"insertAfter\"\n            }];\n\n        var ganttStyles = {\n            wrapper: \"k-gantt\",\n            plannedTasks: \"k-gantt-planned\",\n            rowHeight: \"k-gantt-rowheight\",\n            content: \"k-gantt-content\",\n            listWrapper: \"k-gantt-treelist\",\n            list: \"k-gantt-treelist\",\n            timelineWrapper: \"k-gantt-timeline\",\n            timeline: \"k-gantt-timeline\",\n            splitBarWrapper: \"k-splitbar k-splitbar-horizontal k-splitbar-draggable-horizontal\",\n            splitBar: \"k-splitbar\",\n            splitBarHover: \"k-splitbar-horizontal-hover\",\n            popupWrapper: \"k-list-container\",\n            popupList: \"k-list k-reset\",\n            resizeHandle: \"k-resize-handle\",\n            icon: \"k-icon\",\n            item: \"k-item\",\n            line: \"k-gantt-line\",\n            buttonDelete: \"k-gantt-delete\",\n            buttonCancel: \"k-gantt-cancel\",\n            buttonSave: \"k-gantt-update\",\n            buttonToggle: \"k-gantt-toggle\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n            primary: \"k-button-solid-primary\",\n            hovered: \"k-hover\",\n            selected: \"k-selected\",\n            focused: \"k-focus\",\n            focusedCell: \"k-focus\",\n            gridHeader: \"k-grid-header\",\n            gridHeaderWrap: \"k-grid-header-wrap\",\n            gridContent: \"k-grid-content\",\n            tasks: \"k-gantt-tasks\",\n            popup: {\n                form: \"k-popup-edit-form\",\n                editForm: \"k-gantt-edit-form\",\n                formContainer: \"k-edit-form-container\",\n                resourcesFormContainer: \"k-resources-form-container\",\n                message: \"k-popup-message\",\n                buttonsContainer: \"k-edit-buttons\",\n                button: \"k-button\",\n                editField: \"k-edit-field\",\n                editLabel: \"k-edit-label\",\n                resourcesField: \"k-gantt-resources\"\n            },\n            toolbar: {\n                headerWrapper: \"k-gantt-header k-gantt-toolbar\",\n                footerWrapper: \"k-gantt-footer k-gantt-toolbar\",\n                toolbar: \"k-gantt-toolbar\",\n                views: \"k-gantt-views\",\n                viewsWrapper: \"k-gantt-views-wrapper\",\n                viewsDropdown: \"k-views-dropdown\",\n                button: \"k-button\",\n                buttonToggle: \"k-gantt-toggle\",\n                buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n                iconPlus: \"plus\",\n                iconPdf: \"file-pdf\",\n                iconToggle: \"layout-1-by-4\",\n                viewButton: \"k-view\",\n                link: \"k-link\",\n                pdfButton: \"k-gantt-pdf\",\n                appendButton: \"k-gantt-create\"\n            }\n        };\n\n        function selector(uid) {\n            return \"[\" + kendo.attr(\"uid\") + (uid ? \"='\" + uid + \"']\" : \"]\");\n        }\n\n        function trimOptions(options) {\n            delete options.name;\n            delete options.prefix;\n\n            delete options.remove;\n            delete options.edit;\n            delete options.add;\n            delete options.navigate;\n\n            return options;\n        }\n\n        function focusTable(table, direct) {\n            var wrapper = table.parents('[' + kendo.attr(\"role\") + '=\"gantt\"]');\n            var scrollPositions = [];\n            var parents = scrollableParents(wrapper);\n\n            table.attr(TABINDEX, 0);\n\n            if (direct) {\n                parents.each(function(index, parent) {\n                    scrollPositions[index] = $(parent).scrollTop();\n                });\n            }\n\n            try {\n                //The setActive method does not cause the document to scroll to the active object in the current page\n                table[0].setActive();\n            } catch (e) {\n                table[0].focus();\n            }\n\n            if (direct) {\n                parents.each(function(index, parent) {\n                    $(parent).scrollTop(scrollPositions[index]);\n                });\n            }\n        }\n\n        function scrollableParents(element) {\n            return $(element).parentsUntil(\"body\")\n                    .filter(function(index, element) {\n                        var computedStyle = kendo.getComputedStyles(element, [\"overflow\"]);\n                        return computedStyle.overflow != \"visible\";\n                    })\n                    .add(window);\n        }\n\n        var Gantt = Widget.extend({\n            init: function(element, options, events) {\n                if (isArray(options)) {\n                    options = { dataSource: options };\n                }\n\n                Widget.fn.init.call(this, element, options);\n\n                if (events) {\n                    this._events = events;\n                }\n\n                this._wrapper();\n\n                this._resources();\n\n                if (!this.options.views || !this.options.views.length) {\n                    this.options.views = [\"day\", \"week\", \"month\"];\n                }\n\n                this._timeline();\n\n                this._processDefaults();\n                this._toolbar();\n                this._footer();\n\n                this._adjustDimensions();\n\n                // Prevent extra refresh from setting the view\n                this._preventRefresh = true;\n\n                this.view(this.timeline._selectedViewName);\n\n                this._preventRefresh = false;\n\n                this._dataSource();\n\n                this._assignments();\n\n                this._list();\n\n                this._dependencies();\n\n                this._resizable();\n\n                this._scrollable();\n\n                this._dataBind();\n\n                this._attachEvents();\n\n                this._createEditor();\n\n                kendo.notify(this);\n            },\n\n            events: [\n                \"dataBinding\",\n                \"dataBound\",\n                \"add\",\n                \"edit\",\n                \"remove\",\n                \"cancel\",\n                \"save\",\n                \"change\",\n                \"navigate\",\n                \"moveStart\",\n                \"move\",\n                \"moveEnd\",\n                \"resizeStart\",\n                \"resize\",\n                \"resizeEnd\",\n                \"columnHide\",\n                \"columnReorder\",\n                \"columnResize\",\n                \"columnShow\",\n                \"togglePlannedTasks\"\n            ],\n\n            options: {\n                name: \"Gantt\",\n                autoBind: true,\n                navigatable: false,\n                selectable: true,\n                editable: true,\n                resizable: false,\n                columnResizeHandleWidth: defaultIndicatorWidth,\n                columns: [],\n                views: [],\n                dataSource: {},\n                dependencies: {},\n                resources: {},\n                assignments: {},\n                taskTemplate: null,\n                messages: {\n                    save: \"Save\",\n                    cancel: \"Cancel\",\n                    destroy: \"Delete\",\n                    deleteTaskConfirmation: TASK_DELETE_CONFIRM,\n                    deleteDependencyConfirmation: DEPENDENCY_DELETE_CONFIRM,\n                    deleteTaskWindowTitle: \"Delete task\",\n                    deleteDependencyWindowTitle: \"Delete dependency\",\n                    selectView: \"Select view\",\n                    views: {\n                        day: \"Day\",\n                        week: \"Week\",\n                        month: \"Month\",\n                        year: \"Year\",\n                        start: \"Start\",\n                        end: \"End\"\n                    },\n                    actions: {\n                        append: \"Add Task\",\n                        addChild: \"Add Child\",\n                        insertBefore: \"Add Above\",\n                        insertAfter: \"Add Below\",\n                        pdf: \"Export to PDF\",\n                        toggle: \"Toggle pane\"\n                    },\n                    editor: {\n                        editorTitle: \"Task\",\n                        resourcesEditorTitle: \"Resources\",\n                        title: \"Title\",\n                        start: \"Start\",\n                        end: \"End\",\n                        plannedStart: \"Planned Start\",\n                        plannedEnd: \"Planned End\",\n                        percentComplete: \"Complete\",\n                        resources: \"Resources\",\n                        assignButton: \"Assign\",\n                        resourcesHeader: \"Resources\",\n                        unitsHeader: \"Units\",\n                        parent: \"Parent\",\n                        addNew: \"Add\",\n                        name: \"Name\",\n                        percentCompleteHint: \"value from 0 to 1\",\n                        remove: \"Remove\",\n                        actualStart: \"Actual Start\",\n                        actualEnd: \"Actual End\",\n                        parentOptionLabel: \"-None-\",\n                        general: \"General\",\n                        predecessors: \"Predecessors\",\n                        successors: \"Successors\",\n                        other: \"Other\",\n                        dependencyType: \"Type\"\n                    },\n                    plannedTasks: {\n                        switchText: \"Planned Tasks\",\n                        offsetTooltipAdvanced: \"Met deadline earlier\",\n                        offsetTooltipDelay: \"Delay\",\n                        seconds: \"seconds\",\n                        minutes: \"minutes\",\n                        hours: \"hours\",\n                        days: \"days\"\n                    }\n                },\n                showWorkHours: true,\n                showWorkDays: true,\n                toolbar: null,\n                workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n                workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n                workWeekStart: 1,\n                workWeekEnd: 5,\n                hourSpan: 1,\n                snap: true,\n                height: 600,\n                listWidth: \"30%\",\n                rowHeight: null,\n                showPlannedTasks: false\n            },\n\n            select: function(value) {\n                var list = this.list;\n\n                if (!value) {\n                    return list.select();\n                }\n\n                if (typeof value === STRING) {\n                    value = list.content.find(value);\n                }\n\n                list.select(value);\n                this._selectionUpdate();\n\n                this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n                return;\n            },\n\n            clearSelection: function() {\n                this.list.clearSelection();\n                this._selectionUpdate();\n            },\n\n            destroy: function() {\n                Widget.fn.destroy.call(this);\n\n                if (this.dataSource) {\n                    this.dataSource.unbind(\"change\", this._refreshHandler);\n                    this.dataSource.unbind(\"progress\", this._progressHandler);\n                    this.dataSource.unbind(\"error\", this._errorHandler);\n                }\n\n                if (this.dependencies) {\n                    this.dependencies.unbind(\"change\", this._dependencyRefreshHandler);\n                    this.dependencies.unbind(\"error\", this._dependencyErrorHandler);\n                }\n\n                if (this.timeline) {\n                    this.timeline.unbind();\n                    this.timeline.destroy();\n                }\n\n                if (this.list) {\n                    this.list.unbind();\n                    this.list.destroy();\n                }\n\n                if (this.toolbar && this.toolbar.getKendoToolBar()) {\n                    this.toolbar.getKendoToolBar().destroy();\n                }\n\n                if (this.footer && this.footer.getKendoToolBar()) {\n                    this.footer.getKendoToolBar().destroy();\n                }\n\n                if (this._editor) {\n                    this._editor.destroy();\n                }\n\n                if (this._resourceEditorWindow) {\n                    this._resourceEditorWindow.destroy();\n                }\n\n                if (this._resizeDraggable) {\n                    this._resizeDraggable.destroy();\n                }\n\n                this.toolbar.off(NS);\n\n                if (supportsMedia) {\n                    this._mediaQuery.removeListener(this._mediaQueryHandler);\n                    this._mediaQuery = null;\n                }\n\n                $(window).off(\"resize\" + NS, this._resizeHandler);\n                $(this.wrapper).off(NS);\n\n                this.toolbar = null;\n                this.footer = null;\n\n                kendo.destroy(this.element);\n            },\n\n            setOptions: function(options) {\n                var newOptions = kendo.deepExtend({}, this.options, options);\n\n                var events = this._events;\n\n                if (!options.views) {\n                    var selectedView = this.view().name;\n\n                    newOptions.views = $.map(this.options.views, function(view) {\n                        var isSettings = isPlainObject(view);\n                        var name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                        if (selectedView === name) {\n                            if (isSettings) {\n                                view.selected = true;\n                            } else {\n                                view = { type: name, selected: true };\n                            }\n                        } else if (isSettings) {\n                            view.selected = false;\n                        }\n\n                        return view;\n                    });\n                }\n\n                if (!options.dataSource) { newOptions.dataSource = this.dataSource; }\n                if (!options.dependencies) { newOptions.dependencies = this.dependencies; }\n                if (!options.resources) { newOptions.resources = this.resources; }\n                if (!options.assignments) { newOptions.assignments = this.assignments; }\n\n                this.destroy();\n                this.element.empty();\n                this.options = null;\n\n                this.init(this.element, newOptions, events);\n\n                Widget.fn._setEvents.call(this, newOptions);\n            },\n\n            _attachEvents: function() {\n                this._resizeHandler = this.resize.bind(this, false);\n                $(window).on(\"resize\" + NS, this._resizeHandler);\n\n                if (supportsMedia) {\n                    this._mediaQueryHandler({ matches: this._mediaQuery.matches });\n                }\n            },\n\n            _wrapper: function() {\n                var ganttStyles = Gantt.styles;\n                var splitBarHandleClassName = [ganttStyles.icon, ganttStyles.resizeHandle].join(\" \");\n                var options = this.options;\n                var height = options.height;\n                var width = options.width;\n\n                this.wrapper = this.element.addClass(ganttStyles.wrapper).attr(\"role\", \"application\");\n                this.layout = $(\"<div class='\" + ganttStyles.content + \"' />\").appendTo(this.wrapper)\n                    .append(\"<div class='\" + ganttStyles.listWrapper + \"'><div></div></div>\")\n                    .append(\"<div class='\" + ganttStyles.splitBarWrapper + \"'><div class='\" + splitBarHandleClassName + \"'></div></div>\")\n                    .append(\"<div class='\" + ganttStyles.timelineWrapper + \"'><div></div></div>\");\n\n                if (options.showPlannedTasks) {\n                    this.wrapper.addClass(ganttStyles.plannedTasks);\n                }\n\n                if (height) {\n                    this.wrapper.css(\"height\", height);\n                }\n\n                if (width) {\n                    this.wrapper.css(\"width\", width);\n                }\n\n                if (options.rowHeight) {\n                    this.wrapper.addClass(ganttStyles.rowHeight);\n                }\n\n                this.treelistWrapper = this.wrapper.find(DOT + ganttStyles.list);\n                this.splitbar = this.wrapper.find(DOT + ganttStyles.splitBar);\n                this.timelineWrapper = this.wrapper.find(DOT + ganttStyles.timeline);\n\n                this.treelistWrapper.css(\"width\", options.listWidth);\n                this.timelineWrapper.css(\"width\", this.wrapper.width() - this.treelistWrapper.outerWidth() - this.splitbar.outerWidth() );\n            },\n\n            _viewClickHandler: function(e) {\n                var list = this.list;\n                var name = e.target.attr(kendo.attr(\"name\"));\n\n                if (list.editor && !list.editor.end()) {\n                    return;\n                }\n\n                if (!this.trigger(\"navigate\", { view: name })) {\n                    this.view(name);\n                } else {\n                    e.preventDefault();\n                }\n            },\n\n            _togglePane: function(e) {\n                var that = this,\n                    treelist = that.treelistWrapper,\n                    timeline = that.timelineWrapper,\n                    contentSelector = DOT + ganttStyles.gridContent;\n\n                e.preventDefault();\n\n                if (treelist.is(\":visible\")) {\n                    treelist.addClass(\"k-hidden\");\n                    timeline.removeClass(\"k-hidden\");\n\n                    that.refresh();\n\n                    timeline\n                        .find(contentSelector)\n                        .scrollTop(that.scrollTop);\n                } else {\n                    treelist.removeClass(\"k-hidden\");\n                    timeline.addClass(\"k-hidden\");\n\n                    treelist\n                        .find(contentSelector)\n                        .scrollTop(that.scrollTop);\n                }\n\n                that._resize();\n            },\n\n            _processDefaults: function() {\n                var that = this,\n                    views = that.timeline.views,\n                    ns = kendo.ns,\n                    viewsButtons = [],\n                    toolbarStyles = Gantt.styles.toolbar,\n                    actionsMessages = this.options.messages.actions,\n                    items = ADD_ACTIONS.map(function (m) { return ({\n                        text: actionsMessages[m.text],\n                        attributes: { \"data-type\": m.data }\n                    }); }),\n                    defaults = {\n                        append: {\n                            name: \"append\",\n                            type: \"dropDownButton\",\n                            menuButtons: items,\n                            icon: toolbarStyles.iconPlus,\n                            attributes: {\n                                class: toolbarStyles.appendButton\n                            },\n                            click: that._addClickHandler.bind(that),\n                            open: that._openAddClickHandler.bind(that)\n                        },\n                        pdf: {\n                            name: \"pdf\",\n                            type: \"button\",\n                            attributes: {\n                                class: toolbarStyles.pdfButton\n                            },\n                            icon: toolbarStyles.iconPdf,\n                            click: that.saveAsPDF.bind(that)\n                        },\n                        toggle: {\n                            name: \"toggle\",\n                            type: \"button\",\n                            showText: \"overflow\",\n                            attributes: {\n                                class: \"k-gantt-toggle\"\n                            },\n                            icon: toolbarStyles.iconToggle,\n                            click: that._togglePane.bind(that)\n                        },\n                        switchLabel: {\n                            template: \"<label for=planned-switch>\" + that.options.messages.plannedTasks.switchText + \"</label>\"\n                        },\n                        plannedTasks: {\n                            type: \"component\",\n                            component: \"Switch\",\n                            element: \"<input id='planned-switch' class='k-gantt-planned-switch'>\",\n                            componentOptions: {\n                                checked: that.options.showPlannedTasks,\n                                change: that._togglePlannedTasks.bind(that),\n                                messages: {\n                                    checked: \"\",\n                                    unchecked: \"\"\n                                }\n                            }\n                        },\n                        viewsDdl: {\n                            template: VIEWS_DROPDOWN_TEMPLATE({\n                                views: that.timeline.views,\n                                styles: toolbarStyles,\n                                label: that.options.messages.selectView\n                            })\n                        },\n                        view: {\n                            name: \"view\",\n                            type: \"button\",\n                            togglable: true,\n                            group: \"views\"\n                        },\n                        viewsGroup: {\n                            type: \"buttonGroup\",\n                            attributes: {\n                                class: toolbarStyles.views\n                            }\n                        }\n                    };\n\n                Object.keys(views).map(function (name) {\n                    var current = $.extend(true, {}, defaults.view);\n\n                    current.text = views[name].title;\n                    current.attributes = {\n                        class: \"k-view-\" + name.toLowerCase()\n                    };\n                    current.attributes[\"data\" + ns + \"-name\"] = name;\n\n                    defaults[name] = current;\n\n                    viewsButtons.push(name);\n                });\n\n                Object.values(defaults).map(function (t) {\n                    if (t.name === \"view\") {\n                        t.click = that._viewClickHandler.bind(that);\n                    }\n                });\n\n                defaults.viewsGroup.buttons = viewsButtons;\n\n                that._viewsButtons = viewsButtons;\n                that.defaultCommands = defaults;\n            },\n\n            _processTools: function(items) {\n                var editable = this.options.editable,\n                    commands = [],\n                    tools = [\"toggle\"],\n                    spacerPresent = false,\n                    defaults = this.defaultCommands;\n\n                if (!Array.isArray(items)) {\n                    if (editable && editable.create !== false) {\n                        tools.push(\"append\");\n                    }\n                } else {\n                    commands = items;\n                }\n\n                commands.map(function (c) {\n                    if (c === \"plannedTasks\" || c.name === \"plannedTasks\") {\n                        spacerPresent = true;\n\n                        tools.push({\n                            type: \"spacer\"\n                        });\n\n                        tools.push(\"switchLabel\");\n                    }\n\n                    if (!defaults[c] && !defaults[c.name] && !c.template) {\n                        if (typeof c === STRING) {\n                            c = {\n                                name: c,\n                                type: \"button\",\n                                text: c,\n                                attributes: {\n                                    class: \"k-gantt-\" + c\n                                }\n                            };\n                        } else {\n                            c = $.extend({}, {\n                                type: \"button\",\n                                text: c.name,\n                                attributes: {\n                                    class: \"k-gantt-\" + c.name\n                                }\n                            }, c);\n                        }\n                    }\n\n                    tools.push(c);\n                });\n\n                if (!spacerPresent) {\n                    tools.push({\n                        type: \"spacer\"\n                    });\n                }\n\n                if (this._viewsButtons && this._viewsButtons.length > 0) {\n                    if (this._viewsButtons.length > 1) {\n                        tools.push(\"viewsDdl\");\n                    }\n\n                    tools.push(\"viewsGroup\");\n                }\n\n                return tools;\n            },\n\n            _mediaQueryHandler: function(e) {\n                var that = this;\n                var splitbar = that.splitbar;\n                var treelist = that.treelistWrapper;\n                var timeline = that.timelineWrapper;\n                var contentSelector = DOT + ganttStyles.gridContent;\n\n                var toolbarEl = that.toolbar;\n                var toolbar = toolbarEl.getKendoToolBar();\n\n                if (e.matches) {\n                    treelist.addClass(\"k-hidden\");\n                    splitbar.addClass(\"k-hidden\");\n\n                    toolbar.hide(toolbarEl.find(\".k-gantt-views\"));\n                    toolbar.show(toolbarEl.find(\".k-views-dropdown\"));\n\n                    treelist.width(\"100%\");\n                } else {\n                    treelist.removeClass(\"k-hidden\");\n                    splitbar.removeClass(\"k-hidden\");\n                    timeline.removeClass(\"k-hidden\");\n\n                    toolbar.show(toolbarEl.find(\".k-gantt-views\"));\n                    toolbar.hide(toolbarEl.find(\".k-views-dropdown\"));\n\n                    treelist.width(treelist.outerWidth());\n\n                    timeline\n                        .find(contentSelector)\n                        .scrollTop(that.scrollTop);\n                }\n\n                that._resize();\n            },\n\n            _toolbar: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var viewsDropdownSelector = DOT + ganttStyles.toolbar.viewsDropdown;\n                var toolsOptions = this.options.toolbar;\n                var tools;\n                var toolbar;\n\n                if (typeof toolsOptions === STRING) {\n                    toolsOptions = kendo.template(toolsOptions).bind(this);\n                }\n\n                if (isFunction(toolsOptions)) {\n                    tools = this._processTools([{\n                        template: toolsOptions({})\n                    }]);\n                } else {\n                    tools = this._processTools(toolsOptions);\n                }\n\n                toolbar = $(\"<div class='\" + ganttStyles.toolbar.headerWrapper + \"'>\");\n\n                this.wrapper.prepend(toolbar);\n                this.toolbar = toolbar;\n\n                toolbar.kendoToolBar({\n                    resizable: false,\n                    tools: tools,\n                    size: \"medium\",\n                    defaultTools: this.defaultCommands,\n                    parentMessages: this.options.messages.actions\n                });\n\n                if (supportsMedia) {\n                    this._mediaQuery = window.matchMedia(MIN_SCREEN);\n                    this._mediaQuery.addListener(this._mediaQueryHandler.bind(this));\n                }\n\n                toolbar.on(\"change\" + NS, viewsDropdownSelector, function() {\n                    var list = that.list;\n                    var name = $(this).val();\n\n                    if (list.editable && list.editable.trigger(\"validate\")) {\n                        return;\n                    }\n\n                    if (!that.trigger(\"navigate\", { view: name })) {\n                        that.view(name);\n                    }\n                });\n\n                this.toggleSwitch = toolbar.find('input.k-gantt-planned-switch').data(\"kendoSwitch\");\n            },\n\n            _footer: function() {\n                var editable = this.options.editable;\n\n                if (!editable || editable.create === false) {\n                    return;\n                }\n\n                var ganttStyles = Gantt.styles.toolbar;\n                var messages = this.options.messages.actions;\n                var footer = $(\"<div class='\" + ganttStyles.footerWrapper + \"'>\");\n\n                this.wrapper.append(footer);\n                this.footer = footer;\n\n                footer.kendoToolBar({\n                    resizable: false,\n                    size: \"medium\",\n                    tools: [\"append\"],\n                    defaultTools: {\n                        append: extend(true, {}, this.defaultCommands.append, {\n                            direction: \"up\",\n                            animation: {\n                                open: {\n                                    effects: \"slideIn:up\"\n                                }\n                            }\n                        })\n                    },\n                    parentMessages: messages\n                });\n            },\n\n            _adjustDimensions: function() {\n                var element = this.element;\n                var toolbarHeight = outerHeight(this.toolbar);\n                var footerHeight = this.footer ? outerHeight(this.footer) : 0;\n                var totalHeight = element.height();\n                var totalWidth = element.width();\n                var splitBarWidth = this.splitbar.is(\":visible\") ? outerWidth(this.splitbar) : 0;\n                var treeListWidth = this.treelistWrapper.is(\":visible\") ? outerWidth(this.treelistWrapper) : 0;\n                var timelineWidth = totalWidth - ( treeListWidth + splitBarWidth );\n\n                this.layout.children().height(totalHeight - (toolbarHeight + footerHeight));\n                this.timelineWrapper.width(timelineWidth);\n\n                if (totalWidth < (treeListWidth + splitBarWidth)) {\n                    this.treelistWrapper.width(totalWidth - splitBarWidth);\n                }\n            },\n\n            _scrollTo: function(value) {\n                var view = this.timeline.view();\n                var list = this.list;\n                var attr = kendo.attr(\"uid\");\n                var id = typeof value === \"string\" ? value :\n                    value.closest(\"tr\" + selector()).attr(attr);\n                var action;\n                var scrollTarget;\n                var scrollIntoView = function() {\n                    if (scrollTarget.length !== 0) {\n                        action();\n                    }\n                };\n\n                if (view.content.is(\":visible\")) {\n                    scrollTarget = view.content.find(selector(id));\n                    action = function() {\n                        view._scrollTo(scrollTarget);\n                    };\n                } else {\n                    scrollTarget = list.element.find(selector(id));\n                    action = function() {\n                        scrollTarget.get(0).scrollIntoView();\n                    };\n                }\n\n                scrollIntoView();\n            },\n\n            _addTask: function(selected, parent, type) {\n                var dataSource = this.dataSource,\n                    task = dataSource._createNewModel({}),\n                    timeline = this.timeline,\n                    firstSlot = timeline.view()._timeSlots()[0],\n                    editable = this.list.editor,\n                    orderId;\n\n                if (editable && editable.trigger(\"validate\")) {\n                    return;\n                }\n\n                task.set(\"title\", \"New task\");\n\n                if (parent) {\n                    task.set(\"parentId\", parent.get(\"id\"));\n                    task.set(\"start\", parent.get(\"start\"));\n                    task.set(\"end\", parent.get(\"end\"));\n                    task.set(\"plannedStart\", parent.get(\"plannedStart\"));\n                    task.set(\"plannedEnd\", parent.get(\"plannedEnd\"));\n                } else {\n                    task.set(\"start\", firstSlot.start);\n                    task.set(\"end\", firstSlot.end);\n                }\n\n                if (type && type !== \"add\") {\n                    orderId = selected.get(\"orderId\");\n                    orderId = type === \"insert-before\" ? orderId : orderId + 1;\n                }\n\n                this._createTask(task, orderId);\n            },\n\n            _addClickHandler: function(e) {\n                var type = e.target.data(\"type\");\n                var dataSource = this.dataSource;\n                var selected = this.dataItem(this.select());\n                var parent = dataSource.taskParent(selected);\n                var target = type === \"add\" ? selected : parent;\n\n                this._addTask(selected, target, type);\n            },\n\n            _openAddClickHandler: function(e) {\n                var selected = this.select();\n\n                if (!selected || selected.length === 0) {\n                    e.preventDefault();\n\n                    this._addTask();\n                }\n            },\n\n            _getListEditable: function() {\n                var editable = false,\n                    options = this.options;\n\n                if (options.editable !== false) {\n                    editable = \"incell\";\n\n                    if (options.editable && options.editable.update === false) {\n                        editable = false;\n                    } else {\n                        if (!options.editable || options.editable.reorder !== false) {\n                            editable = {\n                                mode: \"incell\",\n                                move: {\n                                    reorderable: true\n                                }\n                            };\n                        }\n                    }\n                }\n\n                return editable;\n            },\n\n            _getListOptions: function() {\n                var options = this.options,\n                    editable = this._getListEditable(),\n                    listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                    ganttListOptions = {\n                        columns: options.columns || [],\n                        dataSource: this.dataSource,\n                        selectable: options.selectable,\n                        reorderable: options.reorderable,\n                        editable: editable,\n                        resizable: options.resizable,\n                        filterable: options.filterable,\n                        columnMenu: options.columnMenu,\n                        columnResizeHandleWidth: this.options.columnResizeHandleWidth,\n                        listWidth: outerWidth(listWrapper),\n                        resourcesField: this.resources.field,\n                        rowHeight: this.options.rowHeight\n                    };\n\n                return ganttListOptions;\n            },\n\n            _attachResourceEditor: function(columns) {\n                var column;\n\n                for (var i = 0; i < columns.length; i++) {\n                    column = columns[i];\n\n                    if (column.field === this.resources.field && typeof column.editor !== \"function\") {\n                        column.editor = this._resourcePopupEditor.bind(this);\n                    }\n                }\n            },\n\n            _attachListEvents: function() {\n                var that = this,\n                    navigatable = that.options.navigatable,\n                    restoreFocus = function() {\n                        var element;\n\n                        if (navigatable && that._cachedCurrent) {\n                            element = that.list.content.find(\"tr\").eq(that._cachedCurrent.rowIndex).find(\"td\").eq(that._cachedCurrent.columnIndex);\n\n                            that._current(element);\n\n                            focusTable(that.list.content.find(\"table\"), true);\n                        }\n\n                        delete that._cachedCurrent;\n                    };\n\n                that.list\n                    .bind(\"columnShow\", function(e) {\n                        that.trigger(\"columnShow\", { column: e.column });\n                    })\n                    .bind(\"columnHide\", function(e) {\n                        that.trigger(\"columnHide\", { column: e.column });\n                    })\n                    .bind(\"columnReorder\", function(e) {\n                        that.trigger(\"columnReorder\", { column: e.column, oldIndex: e.oldIndex, newIndex: e.newIndex });\n                    })\n                    .bind(\"columnResize\", function(e) {\n                        that.trigger(\"columnResize\", { column: e.column, oldWidth: e.oldWidth, newWidth: e.newWidth });\n                    })\n                    .bind(\"render\", function() {\n                        that._navigatable();\n                     }, true)\n                    .bind(\"beforeEdit\", function(e) {\n                        that._cachedCurrent = {\n                            rowIndex: e.container.closest(\"tr\").index(),\n                            columnIndex: e.container.index()\n                        };\n\n                        if (that.trigger(\"edit\", { task: e.model, container: e.container })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"cancel\", function(e) {\n                        if (that.trigger(\"cancel\", { task: e.model, container: e.cell })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        that._preventItemChange = true;\n                        that.list.closeCell(true);\n                        restoreFocus();\n                    })\n                    .bind(\"save\", function(e) {\n                        var updatedValues = e.values,\n                            key;\n\n                        that.previousTask = {};\n                        that._preventRefresh = true;\n\n                        if (that.updateDuration === null || that.updateDuration === undefined$1) {\n                            that.updateDuration = e.model.duration();\n                        }\n\n                        if (that.updatePlannedDuration === null || that.updatePlannedDuration === undefined$1) {\n                            that.updatePlannedDuration = e.model.plannedDuration();\n                        }\n\n                        if (updatedValues.hasOwnProperty(\"start\")) {\n                            updatedValues.end = new Date(updatedValues.start.getTime() + that.updateDuration);\n                        }\n\n                        if (updatedValues.hasOwnProperty(\"plannedStart\") && updatedValues.plannedStart) {\n                            updatedValues.plannedEnd = new Date(updatedValues.plannedStart.getTime() + that.updatePlannedDuration);\n                        }\n\n                        for (key in updatedValues) {\n                            if (updatedValues.hasOwnProperty(key)) {\n                                that.previousTask[key] = e.model.get(key);\n                            }\n                        }\n\n                        that.updatedValues = updatedValues;\n                    })\n                    .bind(\"itemChange\", function(e) {\n                        var updateInfo = that.updatedValues,\n                            task = e.data,\n                            resourcesField = that.resources.field,\n                            previousTask = that.previousTask,\n                            key;\n\n                        if (that._preventItemChange) {\n                            that._preventItemChange = false;\n                            return;\n                        }\n\n                        for (key in previousTask) {\n                            if (previousTask.hasOwnProperty(key)) {\n                                task.set(key, previousTask[key]);\n                            }\n                        }\n\n                        that.previousTask = {};\n\n                        if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                            if (updateInfo) {\n                                that._preventRefresh = true;\n                                that.dataSource.update(task, updateInfo);\n\n                                if (updateInfo[resourcesField]) {\n                                    that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                                }\n                            }\n\n                            that._preventRefresh = false;\n                            that._requestStart();\n                            that.dataSource.sync().then(function() {\n                                restoreFocus();\n                            });\n                        } else if (that.dataSource.hasChanges()) {\n                            that.dataSource.cancelChanges(task);\n                            that._preventRefresh = false;\n                            that.refresh();\n                        }\n\n                        that.updatedValues = null;\n                        that.updateDuration = null;\n                    })\n                    .bind(\"change\", function() {\n                        that.trigger(\"change\");\n\n                        that._selectionUpdate();\n\n                    })\n                    .bind(\"collapse\", function(e) {\n                        e.preventDefault();\n\n                        var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                        e.model.set(\"expanded\", false);\n\n                        that._cachedCurrent = {\n                            rowIndex: row.index(),\n                            columnIndex: row.find(\".k-focus\").index()\n                        };\n\n                        restoreFocus();\n                    })\n                    .bind(\"expand\", function(e) {\n                        e.preventDefault();\n\n                        var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                        e.model.set(\"expanded\", true);\n\n                        that._cachedCurrent = {\n                            rowIndex: row.index(),\n                            columnIndex: row.find(\".k-focus\").index()\n                        };\n\n                        restoreFocus();\n                    })\n                    .bind(\"dragend\", function(e) {\n                        var dataSource = that.dataSource,\n                            task, updateInfo;\n\n                        if (e.position === \"over\") {\n                            dataSource.cancelChanges();\n\n                            updateInfo = {\n                                parentId: e.source.parentId\n                            };\n\n                            task = dataSource.get(e.source.id);\n\n                            if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                                dataSource.update(task, updateInfo);\n                            }\n\n                            dataSource.sync();\n                        }\n                    })\n                    .bind(\"dataBound\", function() {\n                        if (that.dataSource.sort().length === 0) {\n                            that.dataSource.sort([{ field: \"orderId\", dir: \"asc\" }]);\n                        }\n                    })\n                    .bind(\"reorder\", function(e) {\n                        that._updateTask(e.task, e.updateInfo);\n                        restoreFocus();\n                    });\n            },\n\n            _selectionUpdate: function() {\n                var that = this,\n                    selection = that.list.select();\n\n                if (selection.length) {\n                    that.timeline.select(\"[data-uid='\" + selection.attr(\"data-uid\") + \"']\");\n                } else {\n                    that.timeline.clearSelection();\n                }\n            },\n\n            _list: function() {\n                var ganttStyles = Gantt.styles,\n                    listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                    listElement = listWrapper.find(\"> div\"),\n                    listOptions = this._getListOptions();\n\n                this._attachResourceEditor(listOptions.columns);\n\n                this.list = new kendo.ui.GanttList(listElement, listOptions);\n\n                this._attachListEvents();\n            },\n\n            _timeline: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var options = trimOptions(extend(true, { resourcesField: this.resources.field }, this.options));\n                var element = this.wrapper.find(DOT + ganttStyles.timeline + \" > div\");\n\n                this.timeline = new kendo.ui.GanttTimeline(element, options);\n\n                this.timeline\n                    .bind(\"navigate\", function(e) {\n                        var viewName = e.view.replace(/\\./g, \"\\\\.\").toLowerCase();\n                        var viewsEl = that.toolbar.find(DOT + ganttStyles.toolbar.views);\n                        var viewsGroup = viewsEl.getKendoButtonGroup();\n\n                        if (viewsGroup) {\n                            viewsGroup.select(viewsEl.find(DOT + ganttStyles.toolbar.viewButton + \"-\" + viewName));\n                        }\n\n                        that.toolbar\n                            .find(DOT + ganttStyles.toolbar.viewsDropdown)\n                            .val(e.view);\n\n                        that.refresh();\n                    })\n                    .bind(\"moveStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (that.trigger(\"moveStart\", { task: e.task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"move\", function(e) {\n                        var task = e.task;\n                        var start = e.start;\n                        var end = new Date(start.getTime() + task.duration());\n\n                        if (that.trigger(\"move\", { task: task, start: start, end: end })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"moveEnd\", function(e) {\n                        var task = e.task;\n                        var start = e.start;\n                        var end = new Date(start.getTime() + task.duration());\n\n                        if (!that.trigger(\"moveEnd\", { task: task, start: start, end: end })) {\n                            that._updateTask(that.dataSource.getByUid(task.uid), {\n                                start: start,\n                                end: end\n                            });\n                        }\n                    })\n                    .bind(\"resizeStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (that.trigger(\"resizeStart\", { task: e.task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"resize\", function(e) {\n                        if (that.trigger(\"resize\", { task: e.task, start: e.start, end: e.end })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"resizeEnd\", function(e) {\n                        var task = e.task;\n                        var updateInfo = {};\n\n                        if (e.resizeStart) {\n                            updateInfo.start = e.start;\n                        } else {\n                            updateInfo.end = e.end;\n                        }\n\n                        if (!that.trigger(\"resizeEnd\", { task: task, start: e.start, end: e.end })) {\n                            that._updateTask(that.dataSource.getByUid(task.uid), updateInfo);\n                        }\n                    })\n                    .bind(\"percentResizeStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"percentResizeEnd\", function(e) {\n                        that._updateTask(that.dataSource.getByUid(e.task.uid), { percentComplete: e.percentComplete });\n                    })\n                    .bind(\"dependencyDragStart\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"dependencyDragEnd\", function(e) {\n                        var dependency = that.dependencies._createNewModel({\n                            type: e.type,\n                            predecessorId: e.predecessor.id,\n                            successorId: e.successor.id\n                        });\n\n                        that._createDependency(dependency);\n                    })\n                    .bind(\"select\", function(e) {\n                        var editable = that.list.editor,\n                            current = that.select(),\n                            currentUid;\n\n                        if (editable) {\n                            editable.end();\n                        }\n\n                        if (current && current.length) {\n                            currentUid = current.data(\"uid\");\n                        }\n\n                        if (currentUid !== e.uid) {\n                            that.select(\"[data-uid='\" + e.uid + \"']\");\n                            that.trigger(\"change\");\n                        }\n                    })\n                    .bind(\"editTask\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.editTask(e.uid);\n                    })\n                    .bind(\"clear\", function() {\n                        that.clearSelection();\n                        that.trigger(\"change\");\n                    })\n                    .bind(\"removeTask\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.removeTask(that.dataSource.getByUid(e.uid));\n                    })\n                    .bind(\"removeDependency\", function(e) {\n                        var editable = that.list.editor;\n\n                        if (editable && !editable.end()) {\n                            return;\n                        }\n\n                        that.removeDependency(that.dependencies.getByUid(e.uid));\n                    });\n            },\n\n            _dataSource: function() {\n                var options = this.options;\n                var dataSource = options.dataSource;\n\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n                if (this.dataSource && this._refreshHandler) {\n                    this.dataSource\n                        .unbind(\"change\", this._refreshHandler)\n                        .unbind(\"progress\", this._progressHandler)\n                        .unbind(\"error\", this._errorHandler);\n                } else {\n                    this._refreshHandler = this.refresh.bind(this);\n                    this._progressHandler = this._requestStart.bind(this);\n                    this._errorHandler = this._error.bind(this);\n                }\n\n                this.dataSource = kendo.data.GanttDataSource.create(dataSource)\n                    .bind(\"change\", this._refreshHandler)\n                    .bind(\"progress\", this._progressHandler)\n                    .bind(\"error\", this._errorHandler);\n            },\n\n            _dependencies: function() {\n                var dependencies = this.options.dependencies || {};\n                var dataSource = isArray(dependencies) ? { data: dependencies } : dependencies;\n\n                if (this.dependencies && this._dependencyRefreshHandler) {\n                    this.dependencies\n                        .unbind(\"change\", this._dependencyRefreshHandler)\n                        .unbind(\"error\", this._dependencyErrorHandler);\n                } else {\n                    this._dependencyRefreshHandler = this.refreshDependencies.bind(this);\n                    this._dependencyErrorHandler = this._error.bind(this);\n                }\n\n                this.dependencies = kendo.data.GanttDependencyDataSource.create(dataSource)\n                    .bind(\"change\", this._dependencyRefreshHandler)\n                    .bind(\"error\", this._dependencyErrorHandler);\n            },\n\n            _resources: function() {\n                var resources = this.options.resources;\n                var dataSource = resources.dataSource || {};\n\n                this.resources = {\n                    field: \"resources\",\n                    dataTextField: \"name\",\n                    dataColorField: \"color\",\n                    dataFormatField: \"format\"\n                };\n\n                extend(this.resources, resources);\n\n                this.resources.dataSource = kendo.data.DataSource.create(dataSource);\n            },\n\n            _assignments: function() {\n                var assignments = this.options.assignments;\n                var dataSource = assignments.dataSource || { };\n\n                if (this.assignments) {\n                    this.assignments.dataSource\n                        .unbind(\"change\", this._assignmentsRefreshHandler);\n                } else {\n                    this._assignmentsRefreshHandler = this.refresh.bind(this);\n                }\n\n                this.assignments = {\n                    dataTaskIdField: \"taskId\",\n                    dataResourceIdField: \"resourceId\",\n                    dataValueField: \"value\"\n                };\n\n                extend(this.assignments, assignments);\n\n                this.assignments.dataSource = kendo.data.DataSource.create(dataSource);\n\n                this.assignments.dataSource\n                    .bind(\"change\", this._assignmentsRefreshHandler);\n            },\n\n            _createEditor: function() {\n                var that = this;\n\n                var editor = this._editor = new kendo.gantt.PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    resources: {\n                        field: this.resources.field,\n                        editor: this._createResourceEditor.bind(this)\n                    }\n                }));\n\n                editor\n                    .bind(\"cancel\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        if (that.trigger(\"cancel\", { container: e.container, task: task })) {\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (that.dependencies) {\n                            that.dependencies.filter({});\n                        }\n\n                        that.cancelTask();\n                    })\n                    .bind(\"edit\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        if (that.trigger(\"edit\", { container: e.container, task: task })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"save\", function(e) {\n                        var task = that.dataSource.getByUid(e.model.uid);\n\n                        that.saveTask(task, e.updateInfo, e.updateDependencies);\n                    })\n                    .bind(\"remove\", function(e) {\n                        that.removeTask(e.model.uid);\n                    })\n                    .bind(\"close\", that._onDialogClose);\n            },\n\n            _onDialogClose: function() {},\n\n            _resourcePopupEditor: function(container, options) {\n                var that = this,\n                    editor = that._createResourceEditor($(\"<div>\"), options),\n                    popupStyles = ganttStyles.popup,\n                    wrapper = that.element,\n                    dialogEl = $(kendo.format('<div class=\"' + popupStyles.formContainer + '\">')).appendTo(wrapper),\n                    messages = that.options.messages,\n                    buttonsEl, dialog;\n\n                dialogEl.append(editor.wrapper);\n                buttonsEl = $('<div class=\"' + popupStyles.buttonsContainer + '\">');\n                dialogEl.append(buttonsEl);\n\n                buttonsEl.append($(\"<button class='\" + ganttStyles.buttonSave + \"'>\" + messages.save + \"</button>\").kendoButton({\n                    name: \"save\",\n                    themeColor: \"primary\",\n                    icon: \"save\",\n                    click: function () {\n                        if (!editor.updateModel()) {\n                            return;\n                        }\n                        editor.trigger(\"save\", { model: editor.model });\n                        that._updateAssignments(editor.model.get(\"id\"), editor.model.get(that.resources.field));\n\n                        dialog.trigger(\"close\");\n                        dialog.close();\n                    }\n                }));\n\n                buttonsEl.append($(\"<button class='\" + ganttStyles.buttonCancel + \"'>\" + messages.cancel + \"</button>\").kendoButton({\n                    name: \"cancel\",\n                    icon: \"cancel\",\n                    click: function () {\n                        dialog.trigger(\"close\");\n                        dialog.close();\n                    }\n                }));\n\n                this._resourceEditorWindow = dialog = dialogEl.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    visible: false,\n                    title: messages.editor.resourcesEditorTitle,\n                    deactivate: function () {\n                        editor.destroy();\n                        dialog.destroy();\n                        dialog.element.closest(\".k-window\").remove();\n                    }\n                }).data(\"kendoWindow\");\n\n                dialog.center().open();\n\n                return editor;\n            },\n\n            _createResourceEditor: function(container, options) {\n                var that = this;\n                var model = options instanceof ObservableObject ? options : options.model;\n                var messages = this.options.messages;\n                var resourcesField = this.resources.field;\n                var unitsValidation = { step: 0.01, min: 0.01, max: 1 };\n                var assignmentsModel = this.assignments.dataSource.options.schema.model;\n                var resourceTextField = that.resources.dataTextField;\n                var resources = this.resources.dataSource.view();\n\n\n                if (assignmentsModel && assignmentsModel.fields.Units && assignmentsModel.fields.Units.validation) {\n                    extend(true, unitsValidation, assignmentsModel.fields.Units.validation);\n                }\n\n                var editor = this._resourceEditor = new kendo.gantt.ResourceEditor(container, {\n                    resourcesField: resourcesField,\n                    unitsValidation: unitsValidation,\n                    resources: resources.map(function (r) { return ({ value: r.id, text: r[resourceTextField] }); }),\n                    model: model,\n                    messages: extend({}, messages.editor)\n                });\n\n                return editor;\n            },\n\n            view: function(type) {\n                return this.timeline.view(type);\n            },\n\n            range: function(range) {\n                var dataSource = this.dataSource;\n                var view = this.view();\n                var timeline = this.timeline;\n\n                if (range) {\n                    view.options.range = {\n                        start: range.start,\n                        end: range.end\n                    };\n\n                    timeline._render(dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                }\n\n                return {\n                    start: view.start,\n                    end: view.end\n                };\n            },\n\n            date: function(date) {\n                var view = this.view();\n\n                if (date) {\n                    view.options.date = date;\n                    view._scrollToDate(date);\n                }\n\n                return view.options.date;\n            },\n\n            dataItem: function(value) {\n                if (!value) {\n                    return null;\n                }\n\n                var list = this.list;\n                var element = list.element.find(value);\n\n                return list._modelFromElement(element);\n            },\n\n            setDataSource: function(dataSource) {\n                this.options.dataSource = dataSource;\n\n                this._dataSource();\n\n                this.list.setDataSource(this.dataSource);\n\n                if (this.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n\n            setDependenciesDataSource: function(dependencies) {\n                this.options.dependencies = dependencies;\n\n                this._dependencies();\n\n                if (this.options.autoBind) {\n                    dependencies.fetch();\n                }\n            },\n\n            items: function() {\n                return this.wrapper.children(\".k-task\");\n            },\n\n            _updateAssignments: function(id, resources) {\n                var dataSource = this.assignments.dataSource;\n                var taskId = this.assignments.dataTaskIdField;\n                var resourceId = this.assignments.dataResourceIdField;\n                var hasMatch = false;\n                var assignments = new Query(dataSource.view())\n                    .filter({\n                        field: taskId,\n                        operator: \"eq\",\n                        value: id\n                    }).toArray();\n                var assignment;\n                var resource;\n                var value;\n\n                while (assignments.length) {\n                    assignment = assignments[0];\n\n                    for (var i = 0, length = resources.length; i < length; i++) {\n                        resource = resources[i];\n\n                        if (assignment.get(resourceId) === resource.get(\"id\")) {\n                            value = resources[i].get(\"value\");\n                            this._updateAssignment(assignment, value);\n                            resources.splice(i, 1);\n                            hasMatch = true;\n                            break;\n                        }\n                    }\n\n                    if (!hasMatch) {\n                        this._removeAssignment(assignment);\n                    }\n\n                    hasMatch = false;\n\n                    assignments.shift();\n                }\n\n                for (var j = 0, newLength = resources.length; j < newLength; j++) {\n                    resource = resources[j];\n\n                    if (resource.id !== undefined$1 && resource.value) {\n                        this._createAssignment(resource, id);\n                    }\n                }\n\n                dataSource.sync();\n            },\n\n            cancelTask: function() {\n                var editor = this._editor;\n                var container = editor.container;\n\n                if (container) {\n                    editor.close();\n                }\n\n                if (this.dependencies) {\n                    this.dependencies.cancelChanges();\n                }\n            },\n\n            editTask: function(uid) {\n                var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n                if (!task) {\n                    return;\n                }\n\n                var taskCopy = this.dataSource._createNewModel(task.toJSON());\n                taskCopy.uid = task.uid;\n\n                this.cancelTask();\n\n                this._editTask(taskCopy);\n            },\n\n            _editTask: function(task) {\n                this._editor.editTask(task, this.options.editable.plannedTasks);\n            },\n\n            saveTask: function(task, updateInfo, updateDependencies) {\n                var that = this,\n                    editor = this._editor,\n                    container = editor.container,\n                    editable = editor.editable,\n                    hasChanges = false,\n                    hasResourceChanges = false,\n                    updateInfo = updateInfo || {},\n                    resourcesField = that.options.resources.field,\n                    difference;\n\n                Object.keys(updateInfo).map(function (k) {\n                    var updated = updateInfo[k],\n                        current = task.get(k);\n\n                    if (updated instanceof Date) {\n                        updated = updated.getTime();\n                        current = current ? current.getTime() : undefined$1;\n                    }\n\n                    if (updated !== current) {\n                        if (k === resourcesField) {\n                            difference = updated\n                                .filter(function (u) { return !current.some(function (c) { return c.id === u.id && c.value === u.value; }); })\n                                .concat(current.filter(function (c) { return !updated.some(function (u) { return u.id === c.id && c.value === u.value; }); }));\n\n                            if (difference && difference.length > 0) {\n                                hasResourceChanges = true;\n                            }\n                        } else {\n                            hasChanges = true;\n                        }\n                    }\n                });\n\n                if (container &&\n                    editable &&\n                    editable.end() &&\n                    (hasChanges || hasResourceChanges || updateDependencies)) {\n                        if (!that.trigger(\"save\", { task: task, values: updateInfo, updateDependencies: updateDependencies })) {\n                            if (hasChanges) {\n                                that._preventRefresh = true;\n\n                                that.dataSource.update(task, updateInfo);\n                            }\n\n                            if (hasResourceChanges) {\n                                this._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                            }\n\n                            that._syncDataSource();\n\n                            if (this.dependencies) {\n                                this._updateDependency(updateDependencies);\n                            }\n\n                            this._editor.close();\n                        } else {\n                            if (task && task.dirty) {\n                                that.dataSource.cancelChanges(task);\n                                that._preventRefresh = false;\n                                that.refresh();\n                            }\n\n                            if (that.dependencies) {\n                                that.dependencies.cancelChanges();\n                            }\n                        }\n                } else if (editable && editable.end()) {\n                    this._editor.close();\n                }\n            },\n\n            _updateDependency: function(updateDependencies) {\n                var this$1$1 = this;\n\n                this.dependencies.filter({});\n\n                if (updateDependencies) {\n                    updateDependencies.created.map(function (d) {\n                        this$1$1._preventDependencyRefresh = true;\n                        this$1$1.dependencies.add(d);\n                        this$1$1._preventDependencyRefresh = false;\n                    });\n\n                    updateDependencies.destroyed.map(function (d) {\n                        this$1$1.dependencies.remove(d);\n                    });\n                }\n\n                this.dependencies.sync();\n            },\n\n            _updateTask: function(task, updateInfo) {\n                var that = this;\n                var resourcesField = that.resources.field;\n\n                if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                    if (updateInfo) {\n                        that._preventRefresh = true;\n\n                        that.dataSource.update(task, updateInfo);\n\n                        if (updateInfo[resourcesField]) {\n                            that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                        }\n                    }\n\n                    that._syncDataSource();\n                } else {\n                    if (task && task.dirty) {\n                        that.dataSource.cancelChanges(task);\n                        that._preventRefresh = false;\n                        that.refresh();\n                    }\n\n                    if (that.dependencies) {\n                        that.dependencies.cancelChanges();\n                    }\n                }\n            },\n\n            _updateAssignment: function(assignment, value) {\n                var resourceValueField = this.assignments.dataValueField;\n\n                assignment.set(resourceValueField, value);\n            },\n\n            removeTask: function(uid) {\n                var that = this;\n                var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n                if (!task) {\n                    return;\n                }\n\n                this._taskConfirm(function(cancel) {\n                    if (!cancel) {\n                        that._removeTask(task);\n                    }\n                }, task);\n            },\n\n            _createTask: function(task, index) {\n                if (!this.trigger(\"add\", {\n                    task: task,\n                    dependency: null\n                })) {\n                    var dataSource = this.dataSource;\n\n                    this._preventRefresh = true;\n\n                    if (index === undefined$1) {\n                        dataSource.add(task);\n                    } else {\n                        dataSource.insert(index, task);\n                    }\n\n                    this._scrollToUid = task.uid;\n                    this._syncDataSource();\n                }\n            },\n\n            _createDependency: function(dependency) {\n                if (!this.trigger(\"add\", {\n                    task: null,\n                    dependency: dependency\n                })) {\n                    this._preventDependencyRefresh = true;\n\n                    this.dependencies.add(dependency);\n\n                    this._preventDependencyRefresh = false;\n\n                    this.dependencies.sync();\n                }\n            },\n\n            _createAssignment: function(resource, id) {\n                var assignments = this.assignments;\n                var dataSource = assignments.dataSource;\n                var taskId = assignments.dataTaskIdField;\n                var resourceId = assignments.dataResourceIdField;\n                var resourceValue = assignments.dataValueField;\n                var assignment = dataSource._createNewModel();\n\n                assignment[taskId] = id;\n                assignment[resourceId] = resource.get(\"id\");\n                assignment[resourceValue] = resource.get(\"value\");\n\n                dataSource.add(assignment);\n            },\n\n            removeDependency: function(uid) {\n                var that = this;\n                var dependency = typeof uid === \"string\" ? this.dependencies.getByUid(uid) : uid;\n\n                if (!dependency) {\n                    return;\n                }\n\n                this._dependencyConfirm(function(cancel) {\n                    if (!cancel) {\n                        that._removeDependency(dependency);\n                    }\n                }, dependency);\n            },\n\n            _removeTaskDependencies: function(task, dependencies) {\n                this._preventDependencyRefresh = true;\n\n                for (var i = 0, length = dependencies.length; i < length; i++) {\n                    this.dependencies.remove(dependencies[i]);\n                }\n\n                this._preventDependencyRefresh = false;\n\n                this.dependencies.sync();\n            },\n\n            _removeTaskAssignments: function(task) {\n                var dataSource = this.assignments.dataSource;\n                var assignments = dataSource.view();\n                var filter = {\n                    field: this.assignments.dataTaskIdField,\n                    operator: \"eq\",\n                    value: task.get(\"id\")\n                };\n\n                assignments = new Query(assignments).filter(filter).toArray();\n\n                this._preventRefresh = true;\n\n                for (var i = 0, length = assignments.length; i < length; i++) {\n                    dataSource.remove(assignments[i]);\n                }\n\n                this._preventRefresh = false;\n\n                dataSource.sync();\n            },\n\n            _removeTask: function(task) {\n                var dependencies = this.dependencies.dependencies(task.id);\n\n                if (!this.trigger(\"remove\", {\n                    task: task,\n                    dependencies: dependencies\n                })) {\n                    this._removeTaskDependencies(task, dependencies);\n                    this._removeTaskAssignments(task);\n\n                    this._preventRefresh = true;\n\n                    if (this.dataSource.remove(task)) {\n                        this._syncDataSource();\n                    }\n\n                    if (this.dependencies) {\n                        this.dependencies.filter({});\n                    }\n\n                    this._preventRefresh = false;\n                }\n            },\n\n            _removeDependency: function(dependency) {\n                if (!this.trigger(\"remove\", {\n                    task: null,\n                    dependencies: [dependency]\n                })) {\n                    if (this.dependencies.remove(dependency)) {\n                        this.dependencies.sync();\n                    }\n                }\n            },\n\n            _removeAssignment: function(assignment) {\n                this.assignments.dataSource.remove(assignment);\n            },\n\n            _taskConfirm: function(callback, task) {\n                var messages = this.options.messages;\n\n                this._confirm(callback, {\n                    model: task,\n                    text: messages.deleteTaskConfirmation,\n                    title: messages.deleteTaskWindowTitle\n                });\n            },\n\n            _dependencyConfirm: function(callback, dependency) {\n                var messages = this.options.messages;\n\n                this._confirm(callback, {\n                    model: dependency,\n                    text: messages.deleteDependencyConfirmation,\n                    title: messages.deleteDependencyWindowTitle\n                });\n            },\n\n            _confirm: function(callback, options) {\n                var editable = this.options.editable;\n\n                if (editable === true || editable.confirmation !== false) {\n                    this.showDialog(extend(true, {}, options, { callback: callback }));\n                } else {\n                    callback();\n                }\n            },\n\n            showDialog: function(options) {\n                this._editor.showDialog(options);\n            },\n\n            refresh: function() {\n                if (this._preventRefresh || !this.list || this.list.editor) {\n                    return;\n                }\n\n                this._progress(false);\n\n                var dataSource = this.dataSource;\n                var taskTree = dataSource.taskTree();\n                var scrollToUid = this._scrollToUid;\n                var current;\n                var cachedUid;\n                var cachedIndex = -1;\n                var selected = this.select()[0] ? this.select().data(\"uid\") : this._selected;\n\n                if (this.current) {\n                    cachedUid = this.current.closest(\"tr\").attr(kendo.attr(\"uid\"));\n                    cachedIndex = this.current.index();\n                }\n\n                if (this.trigger(\"dataBinding\")) {\n                    return;\n                }\n\n                if (this.resources.dataSource.data().length !== 0) {\n                    this._assignResources(taskTree);\n                }\n\n                if (this._editor) {\n                    this._editor.close();\n                }\n\n                this.clearSelection();\n                this.list._renderTree(taskTree);\n                this.timeline._render(taskTree);\n                this.timeline._renderDependencies(this.dependencies.view());\n\n                if (scrollToUid) {\n                    this._scrollTo(scrollToUid);\n                    this.select(selector(scrollToUid));\n                }\n\n                if ((scrollToUid || cachedUid) && cachedIndex >= 0) {\n                    current = this.list.element\n                        .find(\"tr\" + selector((scrollToUid || cachedUid)) + \" > td\").eq(cachedIndex);\n\n                    this._current(current);\n                }\n\n                this._scrollToUid = null;\n\n                if (selected) {\n                    this._selected = selected;\n                    this.select(\"[data-uid=\" + selected + \"]\");\n                }\n\n                this.trigger(\"dataBound\");\n            },\n\n            refreshDependencies: function() {\n                if (this._preventDependencyRefresh) {\n                    return;\n                }\n\n                if (this.trigger(\"dataBinding\")) {\n                    return;\n                }\n\n                this.timeline._renderDependencies(this.dependencies.view());\n\n                this.trigger(\"dataBound\");\n            },\n\n            _assignResources: function(taskTree) {\n                var resources = this.resources;\n                var assignments = this.assignments;\n                var groupAssigments = function() {\n                    var data = assignments.dataSource.view();\n                    var group = {\n                        field: assignments.dataTaskIdField\n                    };\n\n                    data = new Query(data).group(group).toArray();\n\n                    return data;\n                };\n                var assigments = groupAssigments();\n                var applyTaskResource = function(task, action) {\n                    var taskId = task.get(\"id\");\n\n                    kendo.setter(resources.field)(task, new ObservableArray([]));\n\n                    for (var i = 0, length = assigments.length; i < length; i++) {\n                        if (assigments[i].value === taskId) {\n                            action(task, assigments[i].items);\n                        }\n                    }\n                };\n                var wrapTask = function(task, items) {\n                    for (var j = 0, length = items.length; j < length; j++) {\n                        var item = items[j];\n                        var resource = resources.dataSource.get(item.get(assignments.dataResourceIdField));\n                        var resourceValue = item.get(assignments.dataValueField);\n                        var resourcedId = item.get(assignments.dataResourceIdField);\n                        var valueFormat = resource.get(resources.dataFormatField) || PERCENTAGE_FORMAT;\n                        var formatedValue = kendo.toString(resourceValue, valueFormat);\n\n                        task[resources.field].push(new ObservableObject({\n                            id: resourcedId,\n                            name: resource.get(resources.dataTextField),\n                            color: resource.get(resources.dataColorField),\n                            value: resourceValue,\n                            formatedValue: formatedValue,\n                            format: valueFormat\n                        }));\n                    }\n                };\n\n                for (var i = 0, length = taskTree.length; i < length; i++) {\n                    applyTaskResource(taskTree[i], wrapTask);\n                }\n            },\n\n            _wrapResourceData: function(id) {\n                var that = this;\n                var result = [];\n                var resource;\n                var resources = this.resources.dataSource.view();\n                var assignments = this.assignments.dataSource.view();\n                var taskAssignments = new Query(assignments).filter({\n                    field: that.assignments.dataTaskIdField,\n                    operator: \"eq\",\n                    value: id\n                }).toArray();\n                var valuePerResource = function(id) {\n                    var resourceValue = null;\n\n                    new Query(taskAssignments).filter({\n                        field: that.assignments.dataResourceIdField,\n                        operator: \"eq\",\n                        value: id\n                    }).select(function(assignment) {\n                        resourceValue += assignment.get(that.assignments.dataValueField);\n                    });\n\n                    return resourceValue;\n                };\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n                    result.push({\n                        id: resource.get(\"id\"),\n                        name: resource.get(that.resources.dataTextField),\n                        format: resource.get(that.resources.dataFormatField) || PERCENTAGE_FORMAT,\n                        value: valuePerResource(resource.id)\n                    });\n                }\n\n                return result;\n            },\n\n            _syncDataSource: function() {\n                this._preventRefresh = false;\n                this._requestStart();\n                this.dataSource.sync();\n            },\n\n            _requestStart: function() {\n                this._progress(true);\n            },\n\n            _error: function() {\n                this._progress(false);\n            },\n\n            _progress: function(toggle) {\n                kendo.ui.progress(this.element, toggle);\n            },\n\n            _resizable: function() {\n                var that = this;\n                var wrapper = this.wrapper;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var treeListWrapper = wrapper.find(DOT + ganttStyles.list);\n                var timelineWrapper = wrapper.find(DOT + ganttStyles.timeline);\n                var treeListWidth;\n                var timelineWidth;\n                var timelineScroll;\n\n                this._resizeDraggable = wrapper\n                    .find(DOT + ganttStyles.splitBar)\n                    .height(treeListWrapper.height())\n                    .hover(function() {\n                        $(this).addClass(ganttStyles.splitBarHover);\n                    }, function() {\n                        $(this).removeClass(ganttStyles.splitBarHover);\n                    })\n                    .end()\n                    .kendoResizable({\n                        orientation: \"horizontal\",\n                        handle: DOT + ganttStyles.splitBar,\n                        \"start\": function() {\n                            treeListWidth = treeListWrapper.width();\n                            timelineWidth = timelineWrapper.width();\n                            timelineScroll = kendo.scrollLeft(timelineWrapper.find(contentSelector));\n                        },\n                        \"resize\": function(e) {\n                            var delta = e.x.initialDelta;\n\n                            if (kendo.support.isRtl(wrapper)) {\n                                delta *= -1;\n                            }\n\n                            if (treeListWidth + delta < 0 || timelineWidth - delta < 0) {\n                                return;\n                            }\n\n                            treeListWrapper.width(treeListWidth + delta);\n                            timelineWrapper.width(timelineWidth - delta);\n                            kendo.scrollLeft(timelineWrapper.find(contentSelector), (timelineScroll + delta));\n\n                            that.timeline.view()._renderCurrentTime();\n                        }\n                    }).data(\"kendoResizable\");\n            },\n\n            _scrollable: function() {\n                var that = this;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var timelineHeader = this.timeline.element.find(headerSelector);\n                var timelineContent = this.timeline.element.find(contentSelector);\n                var treeListHeader = this.list.element.find(headerSelector);\n                var treeListContent = this.list.element.find(contentSelector);\n\n                if (mobileOS) {\n                    treeListContent.css(\"overflow-y\", \"auto\");\n                }\n\n                timelineContent.on(\"scroll\", function() {\n                    that.scrollTop = this.scrollTop;\n                    kendo.scrollLeft(timelineHeader, this.scrollLeft);\n                    treeListContent.scrollTop(this.scrollTop);\n                });\n\n                treeListContent\n                    .on(\"scroll\", function() {\n                        kendo.scrollLeft(treeListHeader, this.scrollLeft);\n                    })\n                    .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, function(e) {\n                        var scrollTop = timelineContent.scrollTop();\n                        var delta = kendo.wheelDeltaY(e);\n\n                        if (delta) {\n                            e.preventDefault();\n                            //In Firefox DOMMouseScroll event cannot be canceled\n                            $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                            timelineContent.scrollTop(scrollTop + (-delta));\n                        }\n                    });\n            },\n\n            _navigatable: function() {\n                var that = this;\n                var navigatable = this.options.navigatable;\n                var editable = this.options.editable;\n                var ganttStyles = Gantt.styles;\n                var contentSelector = DOT + ganttStyles.gridContent;\n                var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n                var headerTable = this.list.element.find(headerSelector).find(\"table\");\n                var contentTable = this.list.element.find(contentSelector).find(\"table\");\n                var isRtl = kendo.support.isRtl(this.wrapper);\n                var timelineContent = this.timeline.element.find(DOT + ganttStyles.gridContent);\n                var tables = headerTable.add(contentTable);\n                var attr = selector();\n                var cellIndex;\n                var expandState = {\n                    collapse: false,\n                    expand: true\n                };\n\n                var scroll = function(reverse) {\n                    var width = that.timeline.view()._timeSlots()[0].offsetWidth;\n                    kendo.scrollLeft(timelineContent, kendo.scrollLeft(timelineContent) + (reverse ? -width : width));\n                };\n\n                var scrollVertical = function(reverse) {\n                    var height = that.timeline.view()._rowHeight;\n                    timelineContent.scrollTop(timelineContent.scrollTop() + (reverse ? -height : height));\n                };\n\n                var moveVertical = function(method) {\n                    var parent = that.current.parent(\"tr\" + selector());\n                    var index = that.current.index();\n                    var sibling = parent[method]('tr:visible').first();\n\n                    if (sibling.length !== 0) {\n                        that._current(sibling.children(\"td\").eq(index));\n                        that._scrollTo(that.current);\n                    } else {\n                        if (that.current.is(\"td\") && method == \"prevAll\") {\n                            focusTable(headerTable);\n                            that._current(headerTable.find(\"tr\").last().children(\"th\").eq(index));\n                            that._scrollTo(that.current);\n                        } else if (that.current.is(\"th\") && method == \"nextAll\") {\n                            focusTable(contentTable);\n                            that._current(contentTable.find(\"tr\").first().children(\"td\").eq(index));\n                            that._scrollTo(that.current);\n                        }\n                    }\n                };\n                var moveHorizontal = function(method) {\n                    var subling = that.current[method]();\n\n                    if (subling.length !== 0) {\n                        that._current(subling);\n                        cellIndex = that.current.index();\n                    }\n                };\n                var toggleExpandedState = function(value) {\n                    var model = that.dataItem(that.current);\n\n                    if (model.summary && model.expanded !== value) {\n                        model.set(\"expanded\", value);\n                    }\n                };\n                var deleteAction = function() {\n                    var editable = that.options.editable;\n\n                    if (!editable || editable.destroy === false || that.list.editor) {\n                        return;\n                    }\n\n                    var selectedTask = that.select();\n                    var uid = kendo.attr(\"uid\");\n\n                    if (selectedTask.length) {\n                        that.removeTask(selectedTask.attr(uid));\n                    }\n                };\n\n                $(this.wrapper)\n                    .on(\"mousedown\" + NS, \"tr\" + attr + \", div\" + attr + \":not(\" + DOT + ganttStyles.line + \")\", function(e) {\n                        var currentTarget = $(e.currentTarget);\n                        var isInput = $(e.target).is(\":button,a,:input,a>.k-icon,.k-svg-icon,k-svg-icon,svg,path,textarea,span.k-icon:not(.k-i-none),span.k-svg-icon:not(.k-svg-i-none),span.k-link,.k-input,.k-multiselect-wrap,.k-input-value-text,.k-input-inner\");\n                        var current;\n\n                        if (e.ctrlKey) {\n                            return;\n                        }\n\n                        if (navigatable) {\n                            if (currentTarget.is(\"tr\")) {\n                                current = $(e.target).closest(\"td\");\n                            } else {\n                                current = that.list\n                                    .content.find(\"tr\" + selector(currentTarget.attr(kendo.attr(\"uid\"))) + \" > td\").first();\n                            }\n\n                            that._current(current);\n                        }\n\n                        if ((navigatable || editable) && !isInput) {\n                            that._focusTimeout = setTimeout(function() {\n                                focusTable(that.list.content.find(\"table\"), true);\n                            }, 2);\n                        }\n                    })\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n                        var that = this;\n\n                        if (key === keys.F10) {\n                            that.toolbar.find(\"[tabindex=0]:visible\").first().addClass(ganttStyles.focused).trigger(\"focus\");\n                            e.preventDefault();\n                        } else if (key == keys.TAB && $(e.target).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                            if (this.list.element.is(\":visible\")) {\n                                this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n                            } else {\n                                this.element.find(DOT + ganttStyles.tasks)[0].focus();\n                            }\n                            e.preventDefault();\n                        }\n\n                    }.bind(this));\n\n                if (navigatable !== true) {\n                    contentTable\n                        .on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode == keys.DELETE) {\n                                deleteAction();\n                            }\n                        });\n\n                    return;\n                }\n\n                tables\n                    .on(\"focus\" + NS, function() {\n                        var selector = this === contentTable.get(0) ? \"td\" : \"th\";\n                        var selection = that.select();\n                        var current = that.current || $((selection.length ? selection : this))\n                            .find(selector).eq((cellIndex || 0));\n\n                        that._current(current);\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                    })\n                    .on(\"blur\" + NS, function() {\n                        that._current();\n\n                        if (this == headerTable) {\n                            $(this).attr(TABINDEX, -1);\n                        }\n                    })\n                    .on(\"keydown\" + NS, function(e) {\n                        var key = e.keyCode;\n                        var isCell;\n\n                        if (!that.current) {\n                            return;\n                        }\n\n                        isCell = that.current.is(\"td\");\n\n                        switch (key) {\n                            case keys.RIGHT:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scroll();\n                                } else if (e.ctrlKey) {\n                                    toggleExpandedState(isRtl ? expandState.collapse : expandState.expand);\n                                } else {\n                                    moveHorizontal(isRtl ? \"prev\" : \"next\");\n                                }\n                                break;\n                            case keys.LEFT:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scroll(true);\n                                } else if (e.ctrlKey) {\n                                    toggleExpandedState(isRtl ? expandState.expand : expandState.collapse);\n                                } else {\n                                    moveHorizontal(isRtl ? \"next\" : \"prev\");\n                                }\n                                break;\n                            case keys.UP:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scrollVertical(true);\n                                } else {\n                                    moveVertical(\"prevAll\");\n                                }\n                                break;\n                            case keys.DOWN:\n                                e.preventDefault();\n                                if (e.altKey) {\n                                    scrollVertical();\n                                } else {\n                                    moveVertical(\"nextAll\");\n                                }\n                                break;\n                            case keys.SPACEBAR:\n                                e.preventDefault();\n                                if (isCell) {\n                                    if (!that.select() || that.current.closest(\"tr\")[0] !== that.select()[0]) {\n                                        that.select(that.current.closest(\"tr\"));\n                                        that.trigger(\"change\");\n                                    }\n                                }\n                                break;\n                            case keys.ENTER:\n                                e.preventDefault();\n                                if (isCell) {\n                                    if (that.options.editable && that.options.editable.update !== false) {\n                                        that.list._startEditHandler(that.current);\n                                        $(this).one(\"keyup\", function(e) {\n                                            /* Stop the event propagation so that the list widget won't close its editor immediately */\n                                            e.stopPropagation();\n                                        });\n                                    }\n                                } else {\n                                    /* Sort */\n                                    that.current\n                                        .children(\"a.k-link\")\n                                        .click();\n                                }\n                                break;\n                            case keys.DELETE:\n                                if (isCell) {\n                                    deleteAction();\n                                }\n                                break;\n                            default:\n                                if (key >= 49 && key <= 57 && e.target.tagName.toLowerCase() !== \"input\") {\n                                   that.view(that.timeline._viewByIndex(key - 49));\n                                }\n                                break;\n                        }\n                    });\n            },\n\n            _current: function(element) {\n                var ganttStyles = Gantt.styles;\n                var activeElement;\n\n                if (this.current && this.current.length) {\n                    this.current\n                        .removeClass(ganttStyles.focusedCell)\n                        .removeAttr(\"id\");\n                }\n\n                if (element && element.length) {\n                    this.current = element\n                        .addClass(ganttStyles.focusedCell)\n                        .attr(\"id\", ACTIVE_CELL);\n\n                    activeElement = $(kendo._activeElement());\n\n                    if (activeElement.is(\"table\") && this.wrapper.find(activeElement).length > 0) {\n                        activeElement\n                            .removeAttr(ARIA_DESCENDANT)\n                            .attr(ARIA_DESCENDANT, ACTIVE_CELL);\n                    }\n                } else {\n                    this.current = null;\n                }\n            },\n\n            _dataBind: function() {\n                var that = this;\n\n                if (that.options.autoBind) {\n                    this._preventRefresh = true;\n                    this._preventDependencyRefresh = true;\n\n                    var promises = $.map([\n                        this.dataSource,\n                        this.dependencies,\n                        this.resources.dataSource,\n                        this.assignments.dataSource\n                    ],\n                    function(dataSource) {\n                        return dataSource.fetch();\n                    });\n\n                    $.when.apply(null, promises)\n                        .done(function() {\n                            that._preventRefresh = false;\n                            that._preventDependencyRefresh = false;\n                            that.refresh();\n                        });\n                }\n            },\n\n            _resize: function() {\n                this._adjustDimensions();\n                this.timeline.view()._adjustHeight();\n                this.timeline.view()._renderCurrentTime();\n                this.list._adjustHeight();\n            },\n\n            _togglePlannedTasks: function(e) {\n                var timeline = this.timeline;\n\n                if (!this.trigger(\"togglePlannedTasks\", { showPlannedTasks: !timeline.options.showPlannedTasks })) {\n                    this.wrapper.toggleClass(ganttStyles.plannedTasks);\n                    timeline._setPlanned(!timeline.options.showPlannedTasks);\n                    timeline._render(this.dataSource.taskTree());\n                    timeline._renderDependencies(this.dependencies.view());\n                } else {\n                    e.preventDefault();\n                }\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Gantt.fn);\n\n            Gantt.fn._drawPDF = function() {\n                var ganttStyles = Gantt.styles;\n                var listTableWidth = this.wrapper.find(DOT + ganttStyles.list + \" \" + DOT + ganttStyles.gridContent + \">table\").width();\n                var content = this.wrapper.clone();\n\n                content.find(DOT + ganttStyles.list).css(\"width\", listTableWidth);\n\n                return this._drawPDFShadow({\n                    content: content\n                }, {\n                    avoidLinks: this.options.pdf.avoidLinks\n                });\n            };\n        }\n\n        kendo.ui.plugin(Gantt);\n\n        extend(true, Gantt, { styles: ganttStyles });\n\n    })(window.kendo.jQuery);\n\n}));\n"]}