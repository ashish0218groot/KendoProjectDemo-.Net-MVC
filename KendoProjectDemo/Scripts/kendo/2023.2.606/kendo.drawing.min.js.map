{"version":3,"file":"kendo.drawing.min.js","names":["factory","define","amd","$","window","kendo","jQuery","drawing","util","deepExtend","createPromise","Deferred","promiseAll","promises","when","apply","extendStatic","dest","src","__proto__","member","hasOwnProperty","LRUCache","Class","extend","init","size","this","_size","_length","_map","put","key","value","map","entry","_head","_tail","newer","older","get","REPLACE_REGEX","normalizeText","text","String","replace","objectKey","object","parts","push","sort","join","hashKey","str","hash","i","length","charCodeAt","defaultMeasureBox","DEFAULT_OPTIONS","baselineMarkerSize","document","createElement","style","cssText","TextMetrics","options","_cache","measure","width","height","baseline","cacheKey","cachedResult","measureBox","box","baselineMarker","_baselineMarker","cloneNode","textStr","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","current","measureText","kendoDrawingUtil","kendoUtil","supportBrowser","support","browser","HasObservers","Class$$1","arguments","prototype","Object","create","constructor","fn","observers","_observers","addObserver","element","removeObserver","index","indexOf","splice","trigger","methodName","event","_suspended","idx","observer","optionsChange","e","geometryChange","suspend","resume","Math","max","_observerField","field","append$1$1","first","second","literals","arabicToRoman","n","values","roman","shift","UNDEFINED","defined","defId","definitionId","DEG_TO_RAD","PI","MAX_NUM","Number","MAX_VALUE","MIN_NUM","deg","radians","fromCharCode","KEY_STR","encodeBase64","input","output","utfInput","code","hi","low","isNaN","encodeUTF8","chr1","chr2","chr3","enc1","enc2","enc3","enc4","charAt","eventCoordinates","x","location","y","pageX","clientX","pageY","clientY","eventElement","touch","initialTouch","target","isTransparent","color","last","array","limitValue","min","mergeSort","a","cmp","slice","m","floor","left","right","b","r","ai","bi","merge","now","Date","getTime","rad","degrees","round","precision","p","power","pow","valueOrDefault","defaultValue","bindEvents","events","eventName","eventNames","trim","split","addEventListener","elementOffset","getBoundingClientRect","documentElement","top","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","elementStyles","styles","result","getComputedStyle","stylesArray","Array","isArray","getPixels","elementSize","size$1","parseInt","unbindEvents","name","removeEventListener","elementPadding","ref","paddingLeft","paddingTop","parseFloat","Matrix","c","d","f","call","multiplyCopy","matrix","invert","g","h","det","clone","equals","other","toArray","toString","separator","translate","unit","rotate","angle","cos","sin","scale","scaleX","scaleY","IDENTITY","matrixRegexp","transformMatrix","transform","matrixString","match","members","Function","bind","concat","parseMatrix","elementScale","parent","parentElement","parentMatrix","append","toString$1","OptionsStore","HasObservers$$1","prefix","_wrap","set","_set","composite","parentObj","fieldName","obj","_clear","type","wrapped","setAccessor","getAccessor","withAccessors","TBase","names","fields","capitalized","toUpperCase","substring","defineAccessors","toMatrix","transformation","Point","superclass","staticAccessors","ZERO","origin","originPoint","translateWith","point","move","scaleCopy","transformCopy","distanceTo","dx","dy","sqrt","digits","doRound","arg0","arg1","arguments$1","minX","minY","maxX","maxY","minPoint","maxPoint","defineProperties","Size","Rect","cornerRadius","setOrigin","setSize","setCornerRadius","getOrigin","radius","getCornerRadius","getSize","topLeft","bottomRight","topRight","bottomLeft","center","bbox","tl","tr","br","bl","fromPoints","expand","expandCopy","containsPoint","_isOnPath","rectOuter","rectInner","union","intersect","rect1","bottom","rect2","Transformation","_matrix","_optionsChange","multiply","transform$1","Element$1","Element","_initOptions","prototypeAccessors","nodeType","clip","id","parentTransform","currentTransform","combinedMatrix","elementMatrix","visible","opacity","clippedBBox","_clippedBBox","transformedPoint","_hasFill","_containsPoint","_hasStroke","fill","stroke","ellipseExtremeAngles","rx","ry","extremeX","extremeY","atan2","PI_DIV_2","Circle$2","Circle","setCenter","setRadius","getCenter","pointAt","_pointAt","extremeAngles","currentPointX","currentPointY","currentPoint","pointDistance","paintable","anonymous","newFill","IDENTITY_MATRIX_HASH","measurable","matrixHash","_bboxCache","_matrixHash","_bbox","strokeWidth","geometryAccessor","withGeometry","defineGeometryAccessors","geometry","rawBBox","_geometry","PRECISION","close$1","tolerance","abs","closeOrLess","pow$1","Arc$2","Arc","radiusX","radiusY","startAngle","endAngle","anticlockwise","xRotation","radian","curvePoints","dir","interval","_arcInterval","intervalAngle","subIntervalsCount","ceil","subIntervalAngle","currentAngle","nextAngle","points","_intervalCurvePoints","cp1","cp2","p2","endPoint","currentAngleX","bboxStartAngle","currentAngleY","oldStart","p1","p1Derivative","_derivativeAt","p2Derivative","t","distance","angleRad","pointRadius","startPoint","intersection","p0","p3","s1x","s2x","s1y","s2y","nx","ny","s","lineIntersection","calculateAngle","inAngleRange","start","end","largeArc","swipe","rotation","arcParameters","parameters","x1","y1","x2","y2","cosine","sine","xT","yT","sign","xt2","yt2","rx2","ry2","delta","constT","cxT","cyT","cx","cy","uX","uY","vX","vY","acos","angleCosine","signEndAngle","normalizeArcParameters","pop","unshift","ElementsArray","_splice","elements","_change","_add","_remove","howMany","_clearObserver","_setObserver","GeometryElementsArray","ElementsArray$$1","isOutOfEndPoint","controlPoint","calculateCurveAt","t1","toCubicPolynomial","ComplexNumber","real","img","add","cNumber","addConstant","negate","multiplyConstant","nthRoot","rad$$1","nthR","isReal","numberSign$1","solveCubicEquation","squareRoot","solveQuadraticEquation","y3","z1","z2","q","Q","b3a","hasRootsInRange","rootField","range","polynomial","roots","lineIntersectionsCount","intersects","inRange","pointAccessor","withPoints","definePointAccessors","Segment","anchor","controlIn","controlOut","bboxTo","toSegment","segmentAnchor","toSegmentAnchor","_curveBoundingBox","_lineBoundingBox","extremesX","_curveExtremesFor","extremesY","xLimits","arrayLimits","yLimits","extremes","_curveExtremes","x3","x4","t2","_intersectionsTo","segment","intersectionsCount","rayIntersection","count","curveIntersectionsCount","_isOnCurveTo","endSegment","p4","rotatedPoints","_isOnLineTo","_isOnPathTo","arr","WEIGHT","EXTREMUM_ALLOWED_DEVIATION","X","Y","removeDuplicates","lineFunction","getControlPoints","tangent","xField","yField","restrict","switchOrientation","calculateFunction","isLine","getTangent","monotonic","isMonotonicByField","invertAxis","numberSign","secondCP","secondControlPoint","oldXField","firstCP","firstControlPoint","restrictControlPoint","cp","xValue","yValue","ShapeMap","l","path","position","isRelative","lineTo","curveTo","v","toLineParamaters","arcTo","lastControlIn","previousCommand","paths","segments","reflectionPoint","cubicControlPoints","quadraticToCubicControlPoints","isVertical","insertPosition","third","scaledPoint","SEGMENT_REGEX","SPLIT_REGEX","parsePath","pathInstance","params","closePath","command","toLowerCase","number","parseParameters","moveTo","close","Error","elementsBoundingBox","applyTransform","boundingBox","elementBoundingBox","elementsClippedBoundingBox","SPACE","Path","lineJoin","point$$1","lastSegment","arc","_addArcSegments","closed","segmentStart","segmentEnd","currentType","print","len","previous","pathWidth","segmentBox","parse","MultiPath","fromRect","rect","curveFromPoints","pointsIn","initialControlPoint","lastControlPoint","controlPoints","cp0","controlPoints$1","controlPoints$2","tangent$2","pointsToCurve","fromArc","prototypeAccessors$1","toPath","Text","content","font","pos","Image$1","Image","_rect","traversable","childrenField","traverse","callback","children","child","Group","childrenChange","action","items","_reparent","insert","insertAt","remove","removeAt","clear","newParent","translateToPoint","transofrm","alignStart","align","axis","sizeField","alignStartReverse","alignContent","justifyContent","alignItems","spacing","orientation","lineSpacing","wrap","revers","forEach","forEachReverse","Layout","Group$$1","_fieldMap","_initMap","fieldMap","groupsSizeField","groupAxis","groupsAxis","reverse","justifyAlign","reflow","elementStart","group","groupBox","_initGroups","groups","groupsSize","ref$1","groupOrigin","elementOrigin","groupStart","arrangeElements","groupIdx","lineSize","bboxes","scaledStart","newStart","this$1$1","_newGroup","addGroup","_addToGroup","Rect$2","Rect$$1","alignElements","alignment","stackElements","stackAxis","otherAxis","previousBBox","createStackElements","wrapElements","stacks","maxSize","stack","stackSize","addElementToStack","getStacks","startElement","elementIdx","StopsArray","optionsAccessor","GradientStop","offset","arg","defineOptionsAccessors","Gradient","stops","_createStops","_userSpace","userSpace","addStop","removeStop","stop","LinearGradient","RadialGradient","_radius","_fallbackFill","fallbackFill","instance","instance$1","easingFunctions","swing","linear","easeOutElastic","time","diff","asin","AnimationFactory","_items","register","Animation","_options","duration","easing","setup","step","play","delay","finish","abort","setTimeout","loop","_stopped","wallTime","easingPosition","animationFrame","destroy","PathParser","BaseNode","srcElement","childNodes","observe","load","node","removeSelf","invalidate","Surface$2","Observable$$1","Surface","_kendoExportVisual","exportVisual","_click","_handler","_mouseenter","_mouseleave","_mousemove","_visual","_enableTracking","draw","unbind","eventTarget","domNode","_kendoNode","currentSize","_resize","resize","force","suspendTracking","_suspendedTracking","resumeTracking","originalEvent","_elementOffset","padding","_surfacePoint","coord","inverseTransform","Observable","renderAttr","renderAllAttr","attrs","renderStyle","NODE_MAP","SVG_NS","NONE","styleAttr","replaceStyleAttr","html","restoreStyleAttr","container","from","querySelectorAll","styleString","getAttribute","removeAttribute","filter","applyStyle","renderSVG","svg","innerHTML","testFragment","testContainer","hasParser","DOMParser","firstChild","namespaceURI","chartDoc","parseFromString","importedDoc","adoptNode","renderSVG$1","TRANSFORM","DefinitionMap","isDefinition","Node","BaseNode$$1","definitions","clearDefinitions","childNode","createDefinitions","attachTo","root","domElement","render","insertBefore","setElement","nodes","childElement","template","renderChildren","css","updateDefinition","attr","removeAttr","setAttribute","allAttr","allCss","mapTransform","renderTransform","transformChange","mapStyle","cursor","renderOpacity","renderId","hasDefinitions","definition","definitionChange","refUrl","renderDefinitions","mapDefinitions","skipBaseHref","baseHref","baseUrl","base","getElementsByTagName","href","url","msie","hashIndex","GradientStopNode","Node$$1","renderOffset","GradientNode","loadStops","stopNode","mapCoordinates","renderCoordinates","mapSpace","LinearGradientNode","GradientNode$$1","RadialGradientNode","ClipNode","DefinitionNode","definitionMap","addDefinitions","removeDefinitions","createDefinition","item","addDefinition","mapItem","removeDefinition","RootNode","defs","firstElementChild","DASH_ARRAYS","dot","dash","longdash","dashdot","longdashdot","longdashdotdot","SOLID","BUTT","ATTRIBUTE_MAP","PathNode","renderData","mapFill","mapStroke","undefined","renderLinecap","dashType","renderDashType","renderStroke","dashArray","lineCap","renderFill","ArcNode","PathNode$$1","CircleNode","GroupNode","ImageNode","mapPosition","mapSource","renderPosition","encode","htmlEncode","renderSource","MultiPathNode","RectNode","ENTITY_REGEX","decodeEntities","test","_element","lastIndex","innerText","TextNode","setY","renderContent","renderTextAnchor","rtl","edge","Surface$3","BaseSurface","_root","direction","_template","_rootElement","overflow","ctm","getScreenCTM","alignToScreen","click","mouseover","mouseout","mousemove","viewBox","_offset","visual","svgStyles","NODE_MAP$2","renderPath","ctx","prevOut","bezierCurveTo","Node$2","initClip","clearClip","setClip","beginPath","setTransform","loadElements","cors","setOpacity","globalAlpha","opactity","GroupNode$2","renderTo","save","restore","RootNode$2","canvas","getContext","invalidateHandler","_invalidate","throttle","_rescale","_devicePixelRatio","devicePixelRatio","fixedScale","clearRect","QuadRoot","shapes","shape","_quadNode","pointShapes","QuadNode","QuadRoot$$1","inBounds","nodeRect","nodeBottomRight","inserted","_initChildren","halfWidth","halfHeight","ROOT_SIZE","ShapesQuadTree","initRoots","rootMap","rootElements","pointShape","sectorRoot","assignZindex","zIndexComparer","zIndex","levelWeight","parents","_zIndex","bboxChange","_insertShape","elementsArray","_insert","sectors","getSectors","inRoot","bottomX","bottomY","SurfaceCursor","surface","_resetCursor","_shapeCursor","_current","_defaultCursor","_getCursor","_setCursor","PathNode$2","renderPoints","setLineDash","setLineCap","setLineJoin","setFill","setStroke","hasFill","setGradientFill","fillStyle","gradient","createLinearGradient","createRadialGradient","parseColor","addColorStop","toCssRgba","addGradientStops","strokeStyle","lineWidth","mozDash","webkitLineDash","ArcNode$2","CircleNode$2","ImageNode$2","onLoad","onError","loading","crossOrigin","complete","onload","onerror","state","drawImage","resolve","reject","MultiPathNode$2","RectNode$2","TextNode$2","textAlign","fillText","strokeText","instance$2","support$1","Surface$4","_mouseTrackHandler","_trackMouse","_searchTree","_cursor","image","rootElement","loadingStates","promise","resolveDataURL","data","toDataURL","then","currentShape","_currentShape","hasDocument","SurfaceFactory","implementation","hasFeature","preferred","logToConsole","navigator","exportGroup","rootGroup","exportRoot","svg$1","slice$1$1","thing","KENDO_PSEUDO_ELEMENT","IMAGE_CACHE","nodeInfo","microsoft","TextRect","Text$$1","_pdfRect","setCSS","el","keys","matches","selector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","closest","cloneNodes","$el","$clone","tagName","checked","selected","nextSibling","dive","canvases","canvas$$1","orig","cache","parseBackgroundImage","tok_linear_gradient","tok_percent","tok_length","tok_keyword","tok_angle","tok_whitespace","tok_popen","tok_pclose","tok_comma","tok_url","tok_content","cache1","cache2","tok","read","token","exec","substr","skip_ws","read_stop","percent","toRGB","propName","to1","to2","num","parseAngle","to","read_linear_gradient","read_url","splitProperty","ret","last$$1","in_paren","in_string","looking_at","getFontURL","getFontHeight","getFontFaces","doc","styleSheets","doStylesheet","ss","rules","cssRules","ex","styleSheet","family","getPropertyValue","bold","italic","findFonts","addRule","addRules","rule","reduce","incCounter","inc","getPrototypeOf","resetCounter","val","doCounters","def","updateCounters","counterReset","counterIncrement","parseColor$1","whenImagesAreActuallyLoaded","pending","done","next","images","cacheImages","urls","getComputedStyle$1","bg","alphaNumeral","pushNodeInfo","decoration","prop","createsStackingContext","_stackingContext","popNodeInfo","updateClipbox","_clipbox","pseudoElt","defa","webkit","mozilla","opera","pleaseSetPropertyValue","important","setProperty","getBorder","side","saveStyle","func","prev","getBorderRadius","sanitizeRadius","getContentBox","innerBox","wt","wr","wb","wl","radiansToDegrees","setTransform$1","setClipping","clipPath","addArcToPath","adjustBorderRadiusForBox","rTL","rTR","rBR","rBL","tl_x","tl_y","tr_x","tr_y","br_x","br_y","bl_x","bl_y","elementRoundBox","bt","bb","pt","pr","pb","pl","roundBox","rTL0","rTR0","rBR0","rBL0","tmp","formatCounter","evalPseudoElementContent","displayCounter","getAllCounters","getCounter","getCssText","_renderWithPseudoElements","fake","pseudo","saveClass","className","_renderElement","kind","place","psel","ownerDocument","backgroundColor","textOverflow","saveTextOverflow","backgroundImage","backgroundRepeat","backgroundPosition","backgroundOrigin","backgroundSize","version","currentStyle","boxes","cells","innerbox","display","getClientRects","table","tableBorderLeft","tableBorderTop","tableBox","firstCellBox","rows","adjustBoxes","drawOneBox","_avoidLinks","createRange","selectNodeContents","_pdfLink","listStyleType","listStylePosition","_drawBullet","bullet","boxSizing","renderElement","elementIndex","k","fontSize","lineHeight","paddingRight","fontFamily","disc","circle","square","drawBullet","clipit","isFormField","widget","widgetInstance","exportDOMVisual","wrap$$1","maybeRenderWidget","renderContents","drawEdge","Wtop","Wleft","Wright","rl","rr","transform$$1","drawRoundCorner","ri","drawOneBackground","background","drawBackgroundImage","pxlen","scaledAngle","atan","tan","implicit","console","log","img_width","img_height","renderBG","aspect_ratio","orgBox","rewX","rewY","repeatX","isFirst","isLast","drawBackground","shouldDrawLeft","shouldDrawRight","inv","renderImage","zIndexSort","sa","sb","za","zb","pa","renderFormField","tag","renderCheckbox","option","whiteSpace","multiple","selectedOptions","selectedIndex","getSelectedOption","xml","serializer","XMLSerializer","serializeToString","svg$$1","serializeSVG","floats","positioned","renderText","floating","cb","search","isJustified","columnCount","textTransform","estimateLineLength","prevLineBottom","underline","lineThrough","overline","underlineOffset","forEachRect","underlinePos","drawTextLine","doChunk","selectNode","clientRects","actuallyGetRangeBoundingRect","chrome","safari","rectangles","Infinity","origStart","setStart","setEnd","found","findEOL","eol","startOffset","cc","indent","drawText","textBox","ypos","visibility","getTransform","main","_dom_zIndex","groupInStackingContext","mmul","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","exportImage","defaults","surfaceOptions","exportSVG","raw","vAlign","vStack","vWrap","fit","rectSize","drawDOM","pdf","defineFont","doOne","cls","avoidLinks","classList","word","removeClass","forceBreak","forcePageBreak","hasPaperSize","paperSize","paperOptions","getPaperOptions","pageWidth","pageHeight","margin","hasMargin","Boolean","multiPage","_ignoreMargin","div","makeTemplate","pages","copy","_destructive","adjust","tfoot","ol","li","beforePageBreak","doPageBreak","splitElement","page","makePage","pageNum","totalPages","keepTogether","tableLayout","bottomPadding","bottomBorder","saveAdjust","breakAtElement","fall","fallsOnMargin","splitText","firstInParent","colgroup","thead","grid","gridHead","querySelector","repeatHeaders","setStartBefore","setEndBefore","extractContents","preventBulletOnListItem","pageClassName","available","nextnode","findEOP","endOffset","handlePageBreaks","progress","canceled","cancel","dataviz","Color","NS","utils","outerWidth","_outerWidth","outerHeight","_outerHeight","TOOLTIP_CLOSE_TEMPLATE","ui","icon","SurfaceTooltip","_tooltipOptions","popupOptions","appendTo","animation","copyAnchorStyles","collision","_openPopupHandler","_openPopup","_bindEvents","showOn","autoHide","hideDelay","showAfter","_showHandler","_showEvent","_surfaceLeaveHandler","_surfaceLeave","_mouseleaveHandler","_mousemoveHandler","on","_hideClick","_tooltipLeave","getPopup","popup","Popup","off","clearTimeout","_timeout","shared","_tooltipShape","tooltip","_updateContent","isFunction","_position","tooltipOffset","_instance","surfaceOffset","show","_show","hide","_showTimeout","preventDefault","_autoHide","_measure","open","_closeButton","addClass","_popupRelatedTarget","wrapper","relatedTarget","DrawingSurface","Widget","_triggerInstanceHandler","_triggerInstanceEvent","_bindHandler","hideTooltip","_tooltip","showTooltip","plugin"],"sources":["kendo.drawing.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.color', 'kendo.popup', 'kendo.icons'], factory) :\n    factory();\n})((function () {\n    (function($) {\n\n        function createPromise() {\n            return $.Deferred();\n        }\n\n        function promiseAll(promises) {\n            return $.when.apply($, promises);\n        }\n\n        function extendStatic(dest, src) {\n            if (!src) {\n                return;\n            }\n\n            if (typeof src.__proto__ === 'function') {\n                dest.__proto__ = src;\n            } else {\n                for (var member in src) {\n                    if (src.hasOwnProperty(member)) {\n                        dest[member] = src[member];\n                    }\n                }\n            }\n        }\n\n        kendo.drawing.util = kendo.drawing.util || {};\n        kendo.deepExtend(kendo.drawing.util, {\n            createPromise: createPromise,\n            promiseAll: promiseAll,\n            extendStatic: extendStatic\n        });\n\n    })(window.kendo.jQuery);\n\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-drawing` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable space-before-blocks, space-before-function-paren */\n\n    window.kendo.util = window.kendo.util || {};\n\n    var LRUCache = kendo.Class.extend({\n        init: function(size) {\n\n            this._size = size;\n            this._length = 0;\n            this._map = {};\n        },\n\n        put: function(key, value) {\n            var map = this._map;\n            var entry = { key: key, value: value };\n\n            map[key] = entry;\n\n            if (!this._head) {\n                this._head = this._tail = entry;\n            } else {\n                this._tail.newer = entry;\n                entry.older = this._tail;\n                this._tail = entry;\n            }\n\n            if (this._length >= this._size) {\n                map[this._head.key] = null;\n                this._head = this._head.newer;\n                this._head.older = null;\n            } else {\n                this._length++;\n            }\n        },\n\n        get: function(key) {\n            var entry = this._map[key];\n\n            if (entry) {\n                if (entry === this._head && entry !== this._tail) {\n                    this._head = entry.newer;\n                    this._head.older = null;\n                }\n\n                if (entry !== this._tail) {\n                    if (entry.older) {\n                        entry.older.newer = entry.newer;\n                        entry.newer.older = entry.older;\n                    }\n\n                    entry.older = this._tail;\n                    entry.newer = null;\n\n                    this._tail.newer = entry;\n                    this._tail = entry;\n                }\n\n                return entry.value;\n            }\n        }\n    });\n\n    var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n    var SPACE = ' ';\n\n    function normalizeText(text) {\n        return String(text).replace(REPLACE_REGEX, SPACE);\n    }\n\n    function objectKey(object) {\n        var parts = [];\n        for (var key in object) {\n            parts.push(key + object[key]);\n        }\n\n        return parts.sort().join(\"\");\n    }\n\n    // Computes FNV-1 hash\n    // See http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function\n    function hashKey(str) {\n        // 32-bit FNV-1 offset basis\n        // See http://isthe.com/chongo/tech/comp/fnv/#FNV-param\n        var hash = 0x811C9DC5;\n\n        for (var i = 0; i < str.length; ++i) {\n            hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n            hash ^= str.charCodeAt(i);\n        }\n\n        return hash >>> 0;\n    }\n\n    function zeroSize() {\n        return { width: 0, height: 0, baseline: 0 };\n    }\n\n    var DEFAULT_OPTIONS = {\n        baselineMarkerSize: 1\n    };\n\n    var defaultMeasureBox;\n\n    if (typeof document !== \"undefined\") {\n        defaultMeasureBox = document.createElement(\"div\");\n        defaultMeasureBox.style.cssText = \"position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;\" +\n                  \"padding: 0 !important; margin: 0 !important; border: 0 !important;\" +\n                  \"line-height: normal !important; visibility: hidden !important; white-space: pre!important;\";\n    }\n\n    var TextMetrics = kendo.Class.extend({\n        init: function(options) {\n\n            this._cache = new LRUCache(1000);\n            this.options = $.extend({}, DEFAULT_OPTIONS, options);\n        },\n\n        measure: function(text, style, options) {\n            if (options === void 0) { options = {}; }\n\n            if (typeof text === 'undefined' || text === null) {\n                return zeroSize();\n            }\n\n            var styleKey = objectKey(style);\n            var cacheKey = hashKey(text + styleKey);\n            var cachedResult = this._cache.get(cacheKey);\n\n            if (cachedResult) {\n                return cachedResult;\n            }\n\n            var size = zeroSize();\n            var measureBox = options.box || defaultMeasureBox;\n            var baselineMarker = this._baselineMarker().cloneNode(false);\n\n            for (var key in style) {\n                var value = style[key];\n                if (typeof value !== \"undefined\") {\n                    measureBox.style[key] = value;\n                }\n            }\n\n            var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n\n            measureBox.textContent = textStr;\n            measureBox.appendChild(baselineMarker);\n            document.body.appendChild(measureBox);\n\n            if (textStr.length) {\n                size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                size.height = measureBox.offsetHeight;\n                size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n            }\n\n            if (size.width > 0 && size.height > 0) {\n                this._cache.put(cacheKey, size);\n            }\n\n            measureBox.parentNode.removeChild(measureBox);\n\n            return size;\n        },\n\n        _baselineMarker: function() {\n            var marker = document.createElement(\"div\");\n            marker.style.cssText = \"display: inline-block; vertical-align: baseline;width: \" +\n                this.options.baselineMarkerSize + \"px; height: \" + this.options.baselineMarkerSize + \"px;overflow: hidden;\";\n\n            return marker;\n        }\n    });\n\n    TextMetrics.current = new TextMetrics();\n\n    function measureText(text, style, measureBox) {\n        return TextMetrics.current.measure(text, style, measureBox);\n    }\n\n    kendo.deepExtend(kendo.util, {\n        LRUCache: LRUCache,\n        TextMetrics: TextMetrics,\n        measureText: measureText,\n        objectKey: objectKey,\n        hashKey: hashKey,\n        normalizeText: normalizeText\n    });\n\n    })(window.kendo.jQuery);\n\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-drawing` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable space-before-blocks, space-before-function-paren */\n\n    window.kendo = window.kendo || {};\n    var kendoDrawing = kendo.drawing;\n    var kendoDrawingUtil = kendoDrawing.util;\n    var extendStatic = kendoDrawingUtil.extendStatic;\n    var Class = kendo.Class;\n    var kendoUtil = kendo.util;\n    var support = kendo.support;\n    var supportBrowser = support.browser;\n\n    var createPromise = kendoDrawingUtil.createPromise;\n    var promiseAll = kendoDrawingUtil.promiseAll;\n\n    var HasObservers = (function (Class$$1) {\n        function HasObservers () {\n            Class$$1.apply(this, arguments);\n        }\n\n        extendStatic(HasObservers, Class$$1);\n        HasObservers.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        HasObservers.prototype.constructor = HasObservers;\n        HasObservers.fn = HasObservers.prototype;\n        HasObservers.fn.init = HasObservers.fn.constructor;\n\n        HasObservers.prototype.observers = function observers () {\n            this._observers = this._observers || [];\n            return this._observers;\n        };\n\n        HasObservers.prototype.addObserver = function addObserver (element) {\n            if (!this._observers) {\n                this._observers = [ element ];\n            } else {\n                this._observers.push(element);\n            }\n            return this;\n        };\n\n        HasObservers.prototype.removeObserver = function removeObserver (element) {\n            var observers = this.observers();\n            var index = observers.indexOf(element);\n            if (index !== -1) {\n                observers.splice(index, 1);\n            }\n            return this;\n        };\n\n        HasObservers.prototype.trigger = function trigger (methodName, event) {\n            var observers = this._observers;\n\n            if (observers && !this._suspended) {\n                for (var idx = 0; idx < observers.length; idx++) {\n                    var observer = observers[idx];\n                    if (observer[methodName]) {\n                        observer[methodName](event);\n                    }\n                }\n            }\n            return this;\n        };\n\n        HasObservers.prototype.optionsChange = function optionsChange (e) {\n            if (e === void 0) { e = {}; }\n\n            e.element = this;\n            this.trigger(\"optionsChange\", e);\n        };\n\n        HasObservers.prototype.geometryChange = function geometryChange () {\n            this.trigger(\"geometryChange\", {\n                element: this\n            });\n        };\n\n        HasObservers.prototype.suspend = function suspend () {\n            this._suspended = (this._suspended || 0) + 1;\n            return this;\n        };\n\n        HasObservers.prototype.resume = function resume () {\n            this._suspended = Math.max((this._suspended || 0) - 1, 0);\n            return this;\n        };\n\n        HasObservers.prototype._observerField = function _observerField (field, value) {\n            if (this[field]) {\n                this[field].removeObserver(this);\n            }\n            this[field] = value;\n            value.addObserver(this);\n        };\n\n        return HasObservers;\n    }(Class));\n\n    function append$1$1(first, second) {\n        first.push.apply(first, second);\n        return first;\n    }\n\n    /* eslint-disable key-spacing,no-multi-spaces,no-param-reassign */\n\n    var literals = {\n        1    : \"i\",       10   : \"x\",       100  : \"c\",\n        2    : \"ii\",      20   : \"xx\",      200  : \"cc\",\n        3    : \"iii\",     30   : \"xxx\",     300  : \"ccc\",\n        4    : \"iv\",      40   : \"xl\",      400  : \"cd\",\n        5    : \"v\",       50   : \"l\",       500  : \"d\",\n        6    : \"vi\",      60   : \"lx\",      600  : \"dc\",\n        7    : \"vii\",     70   : \"lxx\",     700  : \"dcc\",\n        8    : \"viii\",    80   : \"lxxx\",    800  : \"dccc\",\n        9    : \"ix\",      90   : \"xc\",      900  : \"cm\",\n        1000 : \"m\"\n    };\n\n    function arabicToRoman(n) {\n        var values = [ 1000,\n            900 , 800, 700, 600, 500, 400, 300, 200, 100,\n            90  , 80 , 70 , 60 , 50 , 40 , 30 , 20 , 10 ,\n            9   , 8  , 7  , 6  , 5  , 4  , 3  , 2  , 1 ];\n\n        var roman = \"\";\n        while (n > 0) {\n            if (n < values[0]) {\n                values.shift();\n            } else {\n                roman += literals[values[0]];\n                n -= values[0];\n            }\n        }\n        return roman;\n    }\n\n    var UNDEFINED = \"undefined\";\n\n    function defined(value) {\n        return typeof value !== UNDEFINED;\n    }\n\n    var defId = 1;\n\n    function definitionId() {\n        return \"kdef\" + defId++;\n    }\n\n    var DEG_TO_RAD = Math.PI / 180;\n    var MAX_NUM = Number.MAX_VALUE;\n    var MIN_NUM = -Number.MAX_VALUE;\n\n    function deg(radians) {\n        return radians / DEG_TO_RAD;\n    }\n\n    var fromCharCode = String.fromCharCode;\n\n    // Encodes a string as UTF-8\n    function encodeUTF8(input) {\n        var output = \"\";\n\n        for (var i = 0; i < input.length; i++) {\n            var code = input.charCodeAt(i);\n\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var hi = code;\n                var low = input.charCodeAt(++i);\n\n                if (!isNaN(low)) {\n                    // Combine high and low surrogate\n                    // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n                    code = (hi - 0xD800) * 0x400 +\n                           (low - 0xDC00) + 0x10000;\n                }\n            }\n\n            if (code < 0x80) {\n                // One byte\n                output += fromCharCode(code);\n            } else if (code < 0x800) {\n                // Two bytes\n                output += fromCharCode(0xC0 | (code >>> 6));\n                output += fromCharCode(0x80 | (code & 0x3f));\n            } else if (code < 0x10000) {\n                // Three bytes\n                output += fromCharCode(0xE0 | (code >>> 12));\n                output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n                output += fromCharCode(0x80 | (code & 0x3f));\n            } else if (code < 0x10FFFF) {\n                // Four bytes\n                output += fromCharCode(0xF0 | (code >>> 18));\n                output += fromCharCode(0x80 | (code >>> 12 & 0x3f));\n                output += fromCharCode(0x80 | (code >>> 6 & 0x3f));\n                output += fromCharCode(0x80 | (code & 0x3f));\n            }\n        }\n\n        return output;\n    }\n\n    // Encodes a string as UTF-16 big-endian\n\n    var KEY_STR = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n    function encodeBase64(input) {\n        var output = \"\";\n        var i = 0;\n\n        var utfInput = encodeUTF8(input);\n\n        while (i < utfInput.length) {\n            var chr1 = utfInput.charCodeAt(i++);\n            var chr2 = utfInput.charCodeAt(i++);\n            var chr3 = utfInput.charCodeAt(i++);\n\n            var enc1 = chr1 >> 2;\n            var enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            var enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            var enc4 = chr3 & 63;\n\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n\n            output = output +\n                KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) +\n                KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\n        }\n\n        return output;\n    }\n\n    function eventCoordinates(e) {\n        if (defined((e.x || {}).location)) {\n            return {\n                x: e.x.location,\n                y: e.y.location\n            };\n        }\n\n        return {\n            x: e.pageX || e.clientX || 0,\n            y: e.pageY || e.clientY || 0\n        };\n    }\n\n    function eventElement(e) {\n        if (e === void 0) { e = {}; }\n\n        return e.touch ? e.touch.initialTouch : e.target;\n    }\n\n    function isTransparent(color) {\n        return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n    }\n\n    function last(array) {\n        if (array) {\n            return array[array.length - 1];\n        }\n    }\n\n    function limitValue(value, min, max) {\n        return Math.max(Math.min(value, max), min);\n    }\n\n    /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n    /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n    /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty */\n    /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n    // mergeSort is stable.\n    function mergeSort(a, cmp) {\n        if (a.length < 2) {\n            return a.slice();\n        }\n        function merge(a, b) {\n            var r = [], ai = 0, bi = 0, i = 0;\n            while (ai < a.length && bi < b.length) {\n                if (cmp(a[ai], b[bi]) <= 0) {\n                    r[i++] = a[ai++];\n                } else {\n                    r[i++] = b[bi++];\n                }\n            }\n            if (ai < a.length) {\n                r.push.apply(r, a.slice(ai));\n            }\n            if (bi < b.length) {\n                r.push.apply(r, b.slice(bi));\n            }\n            return r;\n        }\n        return (function sort(a) {\n            if (a.length <= 1) {\n                return a;\n            }\n            var m = Math.floor(a.length / 2);\n            var left = a.slice(0, m);\n            var right = a.slice(m);\n            left = sort(left);\n            right = sort(right);\n            return merge(left, right);\n        })(a);\n    }\n\n    var now = Date.now || function() {\n        return new Date().getTime();\n    };\n\n    function rad(degrees) {\n        return degrees * DEG_TO_RAD;\n    }\n\n    function pow(p) {\n        if (p) {\n            return Math.pow(10, p);\n        }\n\n        return 1;\n    }\n\n    function round(value, precision) {\n        var power = pow(precision);\n        return Math.round(value * power) / power;\n    }\n\n    function valueOrDefault(value, defaultValue) {\n        return defined(value) ? value : defaultValue;\n    }\n\n    function bindEvents(element, events) {\n        for (var eventName in events) {\n            var eventNames = eventName.trim().split(\" \");\n            for (var idx = 0; idx < eventNames.length; idx++) {\n                element.addEventListener(eventNames[idx], events[eventName], false);\n            }\n        }\n    }\n\n    function elementOffset(element) {\n        var box = element.getBoundingClientRect();\n\n        var documentElement = document.documentElement;\n\n        return {\n            top: box.top + (window.pageYOffset || documentElement.scrollTop) - (documentElement.clientTop || 0),\n            left: box.left + (window.pageXOffset || documentElement.scrollLeft) - (documentElement.clientLeft || 0)\n        };\n    }\n\n    function elementStyles(element, styles) {\n        var result = {};\n        var style = window.getComputedStyle(element) || {};\n        var stylesArray = Array.isArray(styles) ? styles : [ styles ];\n\n        for (var idx = 0; idx < stylesArray.length; idx++) {\n            var field = stylesArray[idx];\n            result[field] = style[field];\n        }\n\n        return result;\n    }\n\n    function getPixels(value) {\n        if (isNaN(value)) {\n            return value;\n        }\n        return value + \"px\";\n    }\n\n    function elementSize(element, size) {\n        if (size) {\n            var width = size.width;\n            var height = size.height;\n\n            if (defined(width)) {\n                element.style.width = getPixels(width);\n            }\n\n            if (defined(height)) {\n                element.style.height = getPixels(height);\n            }\n\n        } else {\n            var size$1 = elementStyles(element, [ 'width', 'height' ]);\n\n            return {\n                width: parseInt(size$1.width, 10),\n                height: parseInt(size$1.height, 10)\n            };\n        }\n    }\n\n    function unbindEvents(element, events) {\n        if (events === void 0) { events = {}; }\n\n        for (var name in events) {\n            var eventNames = name.trim().split(\" \");\n            for (var idx = 0; idx < eventNames.length; idx++) {\n                element.removeEventListener(eventNames[idx], events[name], false);\n            }\n        }\n    }\n\n    function elementPadding(element) {\n        var ref = elementStyles(element, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref.paddingLeft;\n        var paddingTop = ref.paddingTop;\n        return {\n            top: parseFloat(paddingTop),\n            left: parseFloat(paddingLeft)\n        };\n    }\n\n    var Matrix = (function (Class$$1) {\n        function Matrix(a, b, c, d, e, f) {\n            if (a === void 0) { a = 0; }\n            if (b === void 0) { b = 0; }\n            if (c === void 0) { c = 0; }\n            if (d === void 0) { d = 0; }\n            if (e === void 0) { e = 0; }\n            if (f === void 0) { f = 0; }\n\n            Class$$1.call(this);\n\n            this.a = a;\n            this.b = b;\n            this.c = c;\n            this.d = d;\n            this.e = e;\n            this.f = f;\n        }\n\n        extendStatic(Matrix, Class$$1);\n        Matrix.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        Matrix.prototype.constructor = Matrix;\n        Matrix.fn = Matrix.prototype;\n        Matrix.fn.init = Matrix.fn.constructor;\n\n        Matrix.prototype.multiplyCopy = function multiplyCopy (matrix) {\n            return new Matrix(\n                this.a * matrix.a + this.c * matrix.b,\n                this.b * matrix.a + this.d * matrix.b,\n                this.a * matrix.c + this.c * matrix.d,\n                this.b * matrix.c + this.d * matrix.d,\n                this.a * matrix.e + this.c * matrix.f + this.e,\n                this.b * matrix.e + this.d * matrix.f + this.f\n            );\n        };\n\n        Matrix.prototype.invert = function invert () {\n            var ref = this;\n            var a = ref.a;\n            var b = ref.b;\n            var d = ref.c;\n            var e = ref.d;\n            var g = ref.e;\n            var h = ref.f;\n            var det = a * e - b * d;\n\n            if (det === 0) {\n                return null;\n            }\n\n            return new Matrix(e / det, -b / det, -d / det, a / det,\n                (d * h - e * g) / det, (b * g - a * h) / det);\n        };\n\n        Matrix.prototype.clone = function clone () {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n\n        Matrix.prototype.equals = function equals (other) {\n            if (!other) {\n                return false;\n            }\n\n            return this.a === other.a && this.b === other.b &&\n                this.c === other.c && this.d === other.d &&\n                this.e === other.e && this.f === other.f;\n        };\n\n        Matrix.prototype.round = function round$1 (precision) {\n            this.a = round(this.a, precision);\n            this.b = round(this.b, precision);\n            this.c = round(this.c, precision);\n            this.d = round(this.d, precision);\n            this.e = round(this.e, precision);\n            this.f = round(this.f, precision);\n\n            return this;\n        };\n\n        Matrix.prototype.toArray = function toArray (precision) {\n            var result = [ this.a, this.b, this.c, this.d, this.e, this.f ];\n\n            if (defined(precision)) {\n                for (var i = 0; i < result.length; i++) {\n                    result[i] = round(result[i], precision);\n                }\n            }\n\n            return result;\n        };\n\n        Matrix.prototype.toString = function toString (precision, separator) {\n            if (separator === void 0) { separator = \",\"; }\n\n            return this.toArray(precision).join(separator);\n        };\n\n        Matrix.translate = function translate (x, y) {\n            return new Matrix(1, 0, 0, 1, x, y);\n        };\n\n        Matrix.unit = function unit () {\n            return new Matrix(1, 0, 0, 1, 0, 0);\n        };\n\n        Matrix.rotate = function rotate (angle, x, y) {\n            var matrix = new Matrix();\n            matrix.a = Math.cos(rad(angle));\n            matrix.b = Math.sin(rad(angle));\n            matrix.c = -matrix.b;\n            matrix.d = matrix.a;\n            matrix.e = (x - x * matrix.a + y * matrix.b) || 0;\n            matrix.f = (y - y * matrix.a - x * matrix.b) || 0;\n\n            return matrix;\n        };\n\n        Matrix.scale = function scale (scaleX, scaleY) {\n            return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\n        };\n\n        return Matrix;\n    }(Class));\n\n    Matrix.IDENTITY = Matrix.unit();\n\n    var matrixRegexp = /matrix\\((.*)\\)/;\n\n    function parseMatrix(matrixString) {\n        var match = matrixString.match(matrixRegexp);\n        if (match === null || match.length !== 2) {\n            return Matrix.unit();\n        }\n\n        var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n        return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n    }\n\n    function transformMatrix(element) {\n        var transform = getComputedStyle(element).transform;\n\n        if (transform === 'none') {\n            return Matrix.unit();\n        }\n\n        return parseMatrix(transform);\n    }\n\n    function elementScale(element) {\n        if (!element) {\n            return Matrix.unit();\n        }\n\n        var matrix = transformMatrix(element);\n        var parent = element.parentElement;\n        while (parent) {\n            var parentMatrix = transformMatrix(parent);\n            matrix = matrix.multiplyCopy(parentMatrix);\n            parent = parent.parentElement;\n        }\n\n        matrix.b = matrix.c = matrix.e = matrix.f = 0;\n        return matrix;\n    }\n\n    var util = {\n    \tappend: append$1$1,\n    \tarabicToRoman: arabicToRoman,\n    \tcreatePromise: createPromise,\n    \tdefined: defined,\n    \tdefinitionId: definitionId,\n    \tdeg: deg,\n    \tencodeBase64: encodeBase64,\n    \teventCoordinates: eventCoordinates,\n    \teventElement: eventElement,\n    \tisTransparent: isTransparent,\n    \tlast: last,\n    \tlimitValue: limitValue,\n    \tmergeSort: mergeSort,\n    \tnow: now,\n    \tpromiseAll: promiseAll,\n    \trad: rad,\n    \tround: round,\n    \tvalueOrDefault: valueOrDefault,\n    \tbindEvents: bindEvents,\n    \telementOffset: elementOffset,\n    \telementSize: elementSize,\n    \telementStyles: elementStyles,\n    \tunbindEvents: unbindEvents,\n    \telementPadding: elementPadding,\n    \telementScale: elementScale,\n    \tDEG_TO_RAD: DEG_TO_RAD,\n    \tMAX_NUM: MAX_NUM,\n    \tMIN_NUM: MIN_NUM\n    };\n\n    var toString$1 = {}.toString;\n\n    var OptionsStore = (function (HasObservers$$1) {\n        function OptionsStore(options, prefix) {\n            var this$1$1 = this;\n            if (prefix === void 0) { prefix = \"\"; }\n\n            HasObservers$$1.call(this);\n\n            this.prefix = prefix;\n\n            for (var field in options) {\n                var member = options[field];\n                member = this$1$1._wrap(member, field);\n                this$1$1[field] = member;\n            }\n        }\n\n        extendStatic(OptionsStore, HasObservers$$1);\n        OptionsStore.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        OptionsStore.prototype.constructor = OptionsStore;\n        OptionsStore.fn = OptionsStore.prototype;\n        OptionsStore.fn.init = OptionsStore.fn.constructor;\n\n        OptionsStore.prototype.get = function get (field) {\n            var parts = field.split(\".\");\n            var result = this;\n\n            while (parts.length && result) {\n                var part = parts.shift();\n                result = result[part];\n            }\n\n            return result;\n        };\n\n        OptionsStore.prototype.set = function set (field, value) {\n            var current = this.get(field);\n\n            if (current !== value) {\n                this._set(field, this._wrap(value, field));\n                this.optionsChange({\n                    field: this.prefix + field,\n                    value: value\n                });\n            }\n        };\n\n        OptionsStore.prototype._set = function _set (field, value) {\n            var this$1$1 = this;\n\n            var composite = field.indexOf(\".\") >= 0;\n            var parentObj = this;\n            var fieldName = field;\n\n            if (composite) {\n                var parts = fieldName.split(\".\");\n                var prefix = this.prefix;\n\n                while (parts.length > 1) {\n                    fieldName = parts.shift();\n                    prefix += fieldName + \".\";\n\n                    var obj = parentObj[fieldName];\n\n                    if (!obj) {\n                        obj = new OptionsStore({}, prefix);\n                        obj.addObserver(this$1$1);\n                        parentObj[fieldName] = obj;\n                    }\n                    parentObj = obj;\n                }\n                fieldName = parts[0];\n            }\n\n            parentObj._clear(fieldName);\n            parentObj[fieldName] = value;\n        };\n\n        OptionsStore.prototype._clear = function _clear (field) {\n            var current = this[field];\n            if (current && current.removeObserver) {\n                current.removeObserver(this);\n            }\n        };\n\n        OptionsStore.prototype._wrap = function _wrap (object, field) {\n            var type = toString$1.call(object);\n            var wrapped = object;\n\n            if (wrapped !== null && defined(wrapped) && type === \"[object Object]\") {\n                if (!(object instanceof OptionsStore) && !(object instanceof Class)) {\n                    wrapped = new OptionsStore(wrapped, this.prefix + field + \".\");\n                }\n\n                wrapped.addObserver(this);\n            }\n\n            return wrapped;\n        };\n\n        return OptionsStore;\n    }(HasObservers));\n\n    function setAccessor(field) {\n        return function(value) {\n            if (this[field] !== value) {\n                this[field] = value;\n                this.geometryChange();\n            }\n\n            return this;\n        };\n    }\n\n    function getAccessor(field) {\n        return function() {\n            return this[field];\n        };\n    }\n\n    function defineAccessors(fn, fields) {\n        for (var i = 0; i < fields.length; i++) {\n            var name = fields[i];\n            var capitalized = name.charAt(0).toUpperCase() +\n                              name.substring(1, name.length);\n\n            fn[\"set\" + capitalized] = setAccessor(name);\n            fn[\"get\" + capitalized] = getAccessor(name);\n        }\n    }\n\n    var withAccessors = function (TBase, names) {\n        var result = (function (TBase) {\n            function result () {\n                TBase.apply(this, arguments);\n            }extendStatic(result, TBase);\n            result.prototype = Object.create( TBase && TBase.prototype );\n            result.prototype.constructor = result;\n            result.fn = result.prototype;\n            result.fn.init = result.fn.constructor;\n\n            return result;\n        }(TBase));\n        defineAccessors(result.prototype, names);\n\n        return result;\n    };\n\n    function toMatrix(transformation) {\n        if (transformation && typeof transformation.matrix === \"function\") {\n            return transformation.matrix();\n        }\n\n        return transformation;\n    }\n\n    var Point = (function (superclass) {\n        function Point(x, y) {\n            superclass.call(this);\n\n            this.x = x || 0;\n            this.y = y || 0;\n        }\n\n        extendStatic(Point, superclass);\n        Point.prototype = Object.create( superclass && superclass.prototype );\n        Point.prototype.constructor = Point;\n        Point.fn = Point.prototype;\n        Point.fn.init = Point.fn.constructor;\n\n        var staticAccessors = { ZERO: {} };\n\n        Point.prototype.equals = function equals (other) {\n            return other && other.x === this.x && other.y === this.y;\n        };\n\n        Point.prototype.clone = function clone () {\n            return new Point(this.x, this.y);\n        };\n\n        Point.prototype.rotate = function rotate (angle, origin) {\n            var originPoint = Point.create(origin) || Point.ZERO;\n\n            return this.transform(Matrix.rotate(angle, originPoint.x, originPoint.y));\n        };\n\n        Point.prototype.translate = function translate (x, y) {\n            this.x += x;\n            this.y += y;\n\n            this.geometryChange();\n\n            return this;\n        };\n\n        Point.prototype.translateWith = function translateWith (point) {\n            return this.translate(point.x, point.y);\n        };\n\n        Point.prototype.move = function move (x, y) {\n            this.x = this.y = 0;\n            return this.translate(x, y);\n        };\n\n        Point.prototype.scale = function scale (scaleX, scaleY) {\n            if (scaleY === void 0) { scaleY = scaleX; }\n\n            this.x *= scaleX;\n            this.y *= scaleY;\n\n            this.geometryChange();\n\n            return this;\n        };\n\n        Point.prototype.scaleCopy = function scaleCopy (scaleX, scaleY) {\n            return this.clone().scale(scaleX, scaleY);\n        };\n\n        Point.prototype.transform = function transform (transformation) {\n            var matrix = toMatrix(transformation);\n            var ref = this;\n            var x = ref.x;\n            var y = ref.y;\n\n            this.x = matrix.a * x + matrix.c * y + matrix.e;\n            this.y = matrix.b * x + matrix.d * y + matrix.f;\n\n            this.geometryChange();\n\n            return this;\n        };\n\n        Point.prototype.transformCopy = function transformCopy (transformation) {\n            var point = this.clone();\n\n            if (transformation) {\n                point.transform(transformation);\n            }\n\n            return point;\n        };\n\n        Point.prototype.distanceTo = function distanceTo (point) {\n            var dx = this.x - point.x;\n            var dy = this.y - point.y;\n\n            return Math.sqrt(dx * dx + dy * dy);\n        };\n\n        Point.prototype.round = function round$1 (digits) {\n            this.x = round(this.x, digits);\n            this.y = round(this.y, digits);\n\n            this.geometryChange();\n\n            return this;\n        };\n\n        Point.prototype.toArray = function toArray (digits) {\n            var doRound = defined(digits);\n            var x = doRound ? round(this.x, digits) : this.x;\n            var y = doRound ? round(this.y, digits) : this.y;\n\n            return [ x, y ];\n        };\n\n        Point.prototype.toString = function toString (digits, separator) {\n            if (separator === void 0) { separator = \" \"; }\n\n            var ref = this;\n            var x = ref.x;\n            var y = ref.y;\n\n            if (defined(digits)) {\n                x = round(x, digits);\n                y = round(y, digits);\n            }\n\n            return x + separator + y;\n        };\n\n        Point.create = function create (arg0, arg1) {\n            if (defined(arg0)) {\n                if (arg0 instanceof Point) {\n                    return arg0;\n                } else if (arguments.length === 1 && arg0.length === 2) {\n                    return new Point(arg0[0], arg0[1]);\n                }\n\n                return new Point(arg0, arg1);\n            }\n        };\n\n        Point.min = function min () {\n            var arguments$1 = arguments;\n\n            var minX = MAX_NUM;\n            var minY = MAX_NUM;\n\n            for (var i = 0; i < arguments.length; i++) {\n                var point = arguments$1[i];\n                minX = Math.min(point.x, minX);\n                minY = Math.min(point.y, minY);\n            }\n\n            return new Point(minX, minY);\n        };\n\n        Point.max = function max () {\n            var arguments$1 = arguments;\n\n            var maxX = MIN_NUM;\n            var maxY = MIN_NUM;\n\n            for (var i = 0; i < arguments.length; i++) {\n                var point = arguments$1[i];\n                maxX = Math.max(point.x, maxX);\n                maxY = Math.max(point.y, maxY);\n            }\n\n            return new Point(maxX, maxY);\n        };\n\n        Point.minPoint = function minPoint () {\n            return new Point(MIN_NUM, MIN_NUM);\n        };\n\n        Point.maxPoint = function maxPoint () {\n            return new Point(MAX_NUM, MAX_NUM);\n        };\n\n        staticAccessors.ZERO.get = function () {\n            return new Point(0, 0);\n        };\n\n        Object.defineProperties( Point, staticAccessors );\n\n        return Point;\n    }(withAccessors(HasObservers, [ \"x\", \"y\" ])));\n\n    var Size = (function (superclass) {\n        function Size(width, height) {\n            superclass.call(this);\n\n            this.width = width || 0;\n            this.height = height || 0;\n        }\n\n        extendStatic(Size, superclass);\n        Size.prototype = Object.create( superclass && superclass.prototype );\n        Size.prototype.constructor = Size;\n        Size.fn = Size.prototype;\n        Size.fn.init = Size.fn.constructor;\n\n        var staticAccessors = { ZERO: {} };\n\n        Size.prototype.equals = function equals (other) {\n            return other && other.width === this.width && other.height === this.height;\n        };\n\n        Size.prototype.clone = function clone () {\n            return new Size(this.width, this.height);\n        };\n\n        Size.prototype.toArray = function toArray (digits) {\n            var doRound = defined(digits);\n            var width = doRound ? round(this.width, digits) : this.width;\n            var height = doRound ? round(this.height, digits) : this.height;\n\n            return [ width, height ];\n        };\n\n        Size.create = function create (arg0, arg1) {\n            if (defined(arg0)) {\n                if (arg0 instanceof Size) {\n                    return arg0;\n                } else if (arguments.length === 1 && arg0.length === 2) {\n                    return new Size(arg0[0], arg0[1]);\n                }\n\n                return new Size(arg0, arg1);\n            }\n        };\n\n        staticAccessors.ZERO.get = function () {\n            return new Size(0, 0);\n        };\n\n        Object.defineProperties( Size, staticAccessors );\n\n        return Size;\n    }(withAccessors(HasObservers, [ \"width\", \"height\" ])));\n\n    var Rect = (function (HasObservers$$1) {\n        function Rect(origin, size, cornerRadius) {\n            if (origin === void 0) { origin = new Point(); }\n            if (size === void 0) { size = new Size(); }\n            if (cornerRadius === void 0) { cornerRadius = 0; }\n\n            HasObservers$$1.call(this);\n\n            this.setOrigin(origin);\n            this.setSize(size);\n            this.setCornerRadius(cornerRadius);\n        }\n\n        extendStatic(Rect, HasObservers$$1);\n        Rect.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        Rect.prototype.constructor = Rect;\n        Rect.fn = Rect.prototype;\n        Rect.fn.init = Rect.fn.constructor;\n\n        Rect.prototype.clone = function clone () {\n            return new Rect(\n                this.origin.clone(),\n                this.size.clone()\n            );\n        };\n\n        Rect.prototype.equals = function equals (other) {\n            return other &&\n                   other.origin.equals(this.origin) &&\n                   other.size.equals(this.size);\n        };\n\n        Rect.prototype.setOrigin = function setOrigin (value) {\n            this._observerField(\"origin\", Point.create(value));\n            this.geometryChange();\n            return this;\n        };\n\n        Rect.prototype.getOrigin = function getOrigin () {\n            return this.origin;\n        };\n\n        Rect.prototype.setCornerRadius = function setCornerRadius (radius) {\n            this.cornerRadius = Array.isArray(radius) ? radius : [ radius, radius ];\n\n            this.geometryChange();\n            return this;\n        };\n\n        Rect.prototype.getCornerRadius = function getCornerRadius () {\n            return this.cornerRadius;\n        };\n\n        Rect.prototype.setSize = function setSize (value) {\n            this._observerField(\"size\", Size.create(value));\n            this.geometryChange();\n            return this;\n        };\n\n        Rect.prototype.getSize = function getSize () {\n            return this.size;\n        };\n\n        Rect.prototype.width = function width () {\n            return this.size.width;\n        };\n\n        Rect.prototype.height = function height () {\n            return this.size.height;\n        };\n\n        Rect.prototype.topLeft = function topLeft () {\n            return this.origin.clone();\n        };\n\n        Rect.prototype.bottomRight = function bottomRight () {\n            return this.origin.clone().translate(this.width(), this.height());\n        };\n\n        Rect.prototype.topRight = function topRight () {\n            return this.origin.clone().translate(this.width(), 0);\n        };\n\n        Rect.prototype.bottomLeft = function bottomLeft () {\n            return this.origin.clone().translate(0, this.height());\n        };\n\n        Rect.prototype.center = function center () {\n            return this.origin.clone().translate(this.width() / 2, this.height() / 2);\n        };\n\n        Rect.prototype.bbox = function bbox (matrix) {\n            var tl = this.topLeft().transformCopy(matrix);\n            var tr = this.topRight().transformCopy(matrix);\n            var br = this.bottomRight().transformCopy(matrix);\n            var bl = this.bottomLeft().transformCopy(matrix);\n\n            return Rect.fromPoints(tl, tr, br, bl);\n        };\n\n        Rect.prototype.transformCopy = function transformCopy (m) {\n            return Rect.fromPoints(\n                this.topLeft().transform(m),\n                this.bottomRight().transform(m)\n            );\n        };\n\n        Rect.prototype.expand = function expand (x, y) {\n            if (y === void 0) { y = x; }\n\n            this.size.width += 2 * x;\n            this.size.height += 2 * y;\n\n            this.origin.translate(-x, -y);\n\n            return this;\n        };\n\n        Rect.prototype.expandCopy = function expandCopy (x, y) {\n            return this.clone().expand(x, y);\n        };\n\n        Rect.prototype.containsPoint = function containsPoint (point) {\n            var origin = this.origin;\n            var bottomRight = this.bottomRight();\n            return !(point.x < origin.x || point.y < origin.y || bottomRight.x < point.x || bottomRight.y < point.y);\n        };\n\n        Rect.prototype._isOnPath = function _isOnPath (point, width) {\n            var rectOuter = this.expandCopy(width, width);\n            var rectInner = this.expandCopy(-width, -width);\n\n            return rectOuter.containsPoint(point) && !rectInner.containsPoint(point);\n        };\n\n        Rect.fromPoints = function fromPoints () {\n            var topLeft = Point.min.apply(null, arguments);\n            var bottomRight = Point.max.apply(null, arguments);\n            var size = new Size(\n                bottomRight.x - topLeft.x,\n                bottomRight.y - topLeft.y\n            );\n\n            return new Rect(topLeft, size);\n        };\n\n        Rect.union = function union (a, b) {\n            return Rect.fromPoints(\n                Point.min(a.topLeft(), b.topLeft()),\n                Point.max(a.bottomRight(), b.bottomRight())\n            );\n        };\n\n        Rect.intersect = function intersect (a, b) {\n            var rect1 = {\n                left: a.topLeft().x,\n                top: a.topLeft().y,\n                right: a.bottomRight().x,\n                bottom: a.bottomRight().y\n            };\n\n            var rect2 = {\n                left: b.topLeft().x,\n                top: b.topLeft().y,\n                right: b.bottomRight().x,\n                bottom: b.bottomRight().y\n            };\n\n            if (rect1.left <= rect2.right &&\n                rect2.left <= rect1.right &&\n                rect1.top <= rect2.bottom &&\n                rect2.top <= rect1.bottom) {\n                return Rect.fromPoints(\n                    new Point(Math.max(rect1.left, rect2.left), Math.max(rect1.top, rect2.top)),\n                    new Point(Math.min(rect1.right, rect2.right), Math.min(rect1.bottom, rect2.bottom))\n                );\n            }\n        };\n\n        return Rect;\n    }(HasObservers));\n\n    var Transformation = (function (HasObservers$$1) {\n        function Transformation(matrix) {\n            if (matrix === void 0) { matrix = Matrix.unit(); }\n\n            HasObservers$$1.call(this);\n\n            this._matrix = matrix;\n        }\n\n        extendStatic(Transformation, HasObservers$$1);\n        Transformation.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        Transformation.prototype.constructor = Transformation;\n        Transformation.fn = Transformation.prototype;\n        Transformation.fn.init = Transformation.fn.constructor;\n\n        Transformation.prototype.clone = function clone () {\n            return new Transformation(\n                this._matrix.clone()\n            );\n        };\n\n        Transformation.prototype.equals = function equals (other) {\n            return other &&\n                   other._matrix.equals(this._matrix);\n        };\n\n        Transformation.prototype.translate = function translate (x, y) {\n            this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\n\n            this._optionsChange();\n            return this;\n        };\n\n        Transformation.prototype.scale = function scale (scaleX, scaleY, origin) {\n            if (scaleY === void 0) { scaleY = scaleX; }\n            if (origin === void 0) { origin = null; }\n\n            var originPoint = origin;\n\n            if (originPoint) {\n                originPoint = Point.create(originPoint);\n                this._matrix = this._matrix.multiplyCopy(Matrix.translate(originPoint.x, originPoint.y));\n            }\n\n            this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\n\n            if (originPoint) {\n                this._matrix = this._matrix.multiplyCopy(Matrix.translate(-originPoint.x, -originPoint.y));\n            }\n\n            this._optionsChange();\n            return this;\n        };\n\n        Transformation.prototype.rotate = function rotate (angle, origin) {\n            var originPoint = Point.create(origin) || Point.ZERO;\n\n            this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, originPoint.x, originPoint.y));\n\n            this._optionsChange();\n            return this;\n        };\n\n        Transformation.prototype.multiply = function multiply (transformation) {\n            var matrix = toMatrix(transformation);\n\n            this._matrix = this._matrix.multiplyCopy(matrix);\n\n            this._optionsChange();\n            return this;\n        };\n\n        Transformation.prototype.matrix = function matrix (value) {\n            if (value) {\n                this._matrix = value;\n                this._optionsChange();\n                return this;\n            }\n\n            return this._matrix;\n        };\n\n        Transformation.prototype._optionsChange = function _optionsChange () {\n            this.optionsChange({\n                field: \"transform\",\n                value: this\n            });\n        };\n\n        return Transformation;\n    }(HasObservers));\n\n    function transform$1(matrix) {\n        if (matrix === null) {\n            return null;\n        }\n\n        if (matrix instanceof Transformation) {\n            return matrix;\n        }\n\n        return new Transformation(matrix);\n    }\n\n    var Element$1 = (function (HasObservers$$1) {\n        function Element(options) {\n            HasObservers$$1.call(this);\n\n            this._initOptions(options);\n        }\n\n        extendStatic(Element, HasObservers$$1);\n        Element.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        Element.prototype.constructor = Element;\n        Element.fn = Element.prototype;\n        Element.fn.init = Element.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Rect\";\n        };\n\n        Element.prototype._initOptions = function _initOptions (options) {\n            if (options === void 0) { options = {}; }\n\n            var clip = options.clip;\n            var transform = options.transform;\n\n            if (transform) {\n                options.transform = transform$1(transform);\n            }\n\n            if (clip && !clip.id) {\n                clip.id = definitionId();\n            }\n\n            this.options = new OptionsStore(options);\n            this.options.addObserver(this);\n        };\n\n        Element.prototype.transform = function transform (value) {\n            if (defined(value)) {\n                this.options.set(\"transform\", transform$1(value));\n            } else {\n                return this.options.get(\"transform\");\n            }\n        };\n\n        Element.prototype.parentTransform = function parentTransform () {\n            var element = this;\n            var parentMatrix;\n\n            while (element.parent) {\n                element = element.parent;\n                var transformation = element.transform();\n                if (transformation) {\n                    parentMatrix = transformation.matrix().multiplyCopy(parentMatrix || Matrix.unit());\n                }\n            }\n\n            if (parentMatrix) {\n                return transform$1(parentMatrix);\n            }\n        };\n\n        Element.prototype.currentTransform = function currentTransform (parentTransform) {\n            if (parentTransform === void 0) { parentTransform = this.parentTransform(); }\n\n            var elementTransform = this.transform();\n            var elementMatrix = toMatrix(elementTransform);\n\n            var parentMatrix = toMatrix(parentTransform);\n            var combinedMatrix;\n\n            if (elementMatrix && parentMatrix) {\n                combinedMatrix = parentMatrix.multiplyCopy(elementMatrix);\n            } else {\n                combinedMatrix = elementMatrix || parentMatrix;\n            }\n\n            if (combinedMatrix) {\n                return transform$1(combinedMatrix);\n            }\n        };\n\n        Element.prototype.visible = function visible (value) {\n            if (defined(value)) {\n                this.options.set(\"visible\", value);\n                return this;\n            }\n\n            return this.options.get(\"visible\") !== false;\n        };\n\n        Element.prototype.clip = function clip (value) {\n            var options = this.options;\n            if (defined(value)) {\n                if (value && !value.id) {\n                    value.id = definitionId();\n                }\n                options.set(\"clip\", value);\n                return this;\n            }\n\n            return options.get(\"clip\");\n        };\n\n        Element.prototype.opacity = function opacity (value) {\n            if (defined(value)) {\n                this.options.set(\"opacity\", value);\n                return this;\n            }\n\n            return valueOrDefault(this.options.get(\"opacity\"), 1);\n        };\n\n        Element.prototype.clippedBBox = function clippedBBox (transformation) {\n            var bbox = this._clippedBBox(transformation);\n            if (bbox) {\n                var clip = this.clip();\n                return clip ? Rect.intersect(bbox, clip.bbox(transformation)) : bbox;\n            }\n        };\n\n        Element.prototype.containsPoint = function containsPoint (point, parentTransform) {\n            if (this.visible()) {\n                var transform = this.currentTransform(parentTransform);\n                var transformedPoint = point;\n                if (transform) {\n                    transformedPoint = point.transformCopy(transform.matrix().invert());\n                }\n                return (this._hasFill() && this._containsPoint(transformedPoint)) || (this._isOnPath && this._hasStroke() && this._isOnPath(transformedPoint));\n            }\n            return false;\n        };\n\n        Element.prototype._hasFill = function _hasFill () {\n            var fill = this.options.fill;\n            return fill && !isTransparent(fill.color);\n        };\n\n        Element.prototype._hasStroke = function _hasStroke () {\n            var stroke = this.options.stroke;\n            return stroke && stroke.width > 0 && !isTransparent(stroke.color);\n        };\n\n        Element.prototype._clippedBBox = function _clippedBBox (transformation) {\n            return this.bbox(transformation);\n        };\n\n        Object.defineProperties( Element.prototype, prototypeAccessors );\n\n        return Element;\n    }(HasObservers));\n\n    function ellipseExtremeAngles(center, rx, ry, matrix) {\n        var extremeX = 0;\n        var extremeY = 0;\n\n        if (matrix) {\n            extremeX = Math.atan2(matrix.c * ry, matrix.a * rx);\n            if (matrix.b !== 0) {\n                extremeY = Math.atan2(matrix.d * ry, matrix.b * rx);\n            }\n        }\n\n        return {\n            x: extremeX,\n            y: extremeY\n        };\n    }\n\n    var PI_DIV_2 = Math.PI / 2;\n\n    var Circle$2 = (function (superclass) {\n        function Circle(center, radius) {\n            if (center === void 0) { center = new Point(); }\n            if (radius === void 0) { radius = 0; }\n\n            superclass.call(this);\n\n            this.setCenter(center);\n            this.setRadius(radius);\n        }\n\n        extendStatic(Circle, superclass);\n        Circle.prototype = Object.create( superclass && superclass.prototype );\n        Circle.prototype.constructor = Circle;\n        Circle.fn = Circle.prototype;\n        Circle.fn.init = Circle.fn.constructor;\n\n        Circle.prototype.setCenter = function setCenter (value) {\n            this._observerField(\"center\", Point.create(value));\n            this.geometryChange();\n            return this;\n        };\n\n        Circle.prototype.getCenter = function getCenter () {\n            return this.center;\n        };\n\n        Circle.prototype.equals = function equals (other) {\n            return other &&\n                   other.center.equals(this.center) &&\n                   other.radius === this.radius;\n        };\n\n        Circle.prototype.clone = function clone () {\n            return new Circle(this.center.clone(), this.radius);\n        };\n\n        Circle.prototype.pointAt = function pointAt (angle) {\n            return this._pointAt(rad(angle));\n        };\n\n        Circle.prototype.bbox = function bbox (matrix) {\n            var this$1$1 = this;\n\n            var extremeAngles = ellipseExtremeAngles(this.center, this.radius, this.radius, matrix);\n            var minPoint = Point.maxPoint();\n            var maxPoint = Point.minPoint();\n\n            for (var i = 0; i < 4; i++) {\n                var currentPointX = this$1$1._pointAt(extremeAngles.x + i * PI_DIV_2).transformCopy(matrix);\n                var currentPointY = this$1$1._pointAt(extremeAngles.y + i * PI_DIV_2).transformCopy(matrix);\n                var currentPoint = new Point(currentPointX.x, currentPointY.y);\n\n                minPoint = Point.min(minPoint, currentPoint);\n                maxPoint = Point.max(maxPoint, currentPoint);\n            }\n\n            return Rect.fromPoints(minPoint, maxPoint);\n        };\n\n        Circle.prototype._pointAt = function _pointAt (angle) {\n            var ref = this;\n            var center = ref.center;\n            var radius = ref.radius;\n\n            return new Point(\n                center.x + radius * Math.cos(angle),\n                center.y + radius * Math.sin(angle)\n            );\n        };\n\n        Circle.prototype.containsPoint = function containsPoint (point) {\n            var ref = this;\n            var center = ref.center;\n            var radius = ref.radius;\n            var inCircle = Math.pow(point.x - center.x, 2) +\n                Math.pow(point.y - center.y, 2) <= Math.pow(radius, 2);\n            return inCircle;\n        };\n\n        Circle.prototype._isOnPath = function _isOnPath (point, width) {\n            var ref = this;\n            var center = ref.center;\n            var radius = ref.radius;\n            var pointDistance = center.distanceTo(point);\n\n            return radius - width <= pointDistance && pointDistance <= radius + width;\n        };\n\n        return Circle;\n    }(withAccessors(HasObservers, [ \"radius\" ])));\n\n    var GRADIENT = \"Gradient\";\n\n    var paintable = function (TBase) { return (\n        (function (TBase) {\n            function anonymous () {\n                TBase.apply(this, arguments);\n            }\n\n            extendStatic(anonymous, TBase);\n            anonymous.prototype = Object.create( TBase && TBase.prototype );\n            anonymous.prototype.constructor = anonymous;\n            anonymous.fn = anonymous.prototype;\n            anonymous.fn.init = anonymous.fn.constructor;\n\n            anonymous.prototype.fill = function fill (color, opacity) {\n                var options = this.options;\n\n                if (defined(color)) {\n                    if (color && color.nodeType !== GRADIENT) {\n                        var newFill = {\n                            color: color\n                        };\n                        if (defined(opacity)) {\n                            newFill.opacity = opacity;\n                        }\n                        options.set(\"fill\", newFill);\n                    } else {\n                        options.set(\"fill\", color);\n                    }\n\n                    return this;\n                }\n\n                return options.get(\"fill\");\n            };\n\n            anonymous.prototype.stroke = function stroke (color, width, opacity) {\n                if (defined(color)) {\n                    this.options.set(\"stroke.color\", color);\n\n                    if (defined(width)) {\n                        this.options.set(\"stroke.width\", width);\n                    }\n\n                    if (defined(opacity)) {\n                        this.options.set(\"stroke.opacity\", opacity);\n                    }\n\n                    return this;\n                }\n\n                return this.options.get(\"stroke\");\n            };\n\n            return anonymous;\n        }(TBase))\n    ); };\n\n    var IDENTITY_MATRIX_HASH = Matrix.IDENTITY.toString();\n\n    var measurable = function (TBase) { return (\n        (function (TBase) {\n            function anonymous () {\n                TBase.apply(this, arguments);\n            }\n\n            extendStatic(anonymous, TBase);\n            anonymous.prototype = Object.create( TBase && TBase.prototype );\n            anonymous.prototype.constructor = anonymous;\n            anonymous.fn = anonymous.prototype;\n            anonymous.fn.init = anonymous.fn.constructor;\n\n            anonymous.prototype.bbox = function bbox (transformation) {\n                var combinedMatrix = toMatrix(this.currentTransform(transformation));\n                var matrixHash = combinedMatrix ? combinedMatrix.toString() : IDENTITY_MATRIX_HASH;\n                var bbox;\n\n                if (this._bboxCache && this._matrixHash === matrixHash) {\n                    bbox = this._bboxCache.clone();\n                } else {\n                    bbox = this._bbox(combinedMatrix);\n                    this._bboxCache = bbox ? bbox.clone() : null;\n                    this._matrixHash = matrixHash;\n                }\n\n                var strokeWidth = this.options.get(\"stroke.width\");\n                if (strokeWidth && bbox) {\n                    bbox.expand(strokeWidth / 2);\n                }\n\n                return bbox;\n            };\n\n            anonymous.prototype.geometryChange = function geometryChange () {\n                delete this._bboxCache;\n                this.trigger(\"geometryChange\", {\n                    element: this\n                });\n            };\n\n            return anonymous;\n        }(TBase))\n    ); };\n\n    function geometryAccessor(name) {\n        var fieldName = \"_\" + name;\n        return function(value) {\n            if (defined(value)) {\n                this._observerField(fieldName, value);\n                this.geometryChange();\n                return this;\n            }\n\n            return this[fieldName];\n        };\n    }\n\n    function defineGeometryAccessors(fn, names) {\n        for (var i = 0; i < names.length; i++) {\n            fn[names[i]] = geometryAccessor(names[i]);\n        }\n    }\n\n    var withGeometry = function (TBase, names) {\n        if (names === void 0) { names = [ \"geometry\" ]; }\n\n        var result = (function (TBase) {\n            function result () {\n                TBase.apply(this, arguments);\n            }extendStatic(result, TBase);\n            result.prototype = Object.create( TBase && TBase.prototype );\n            result.prototype.constructor = result;\n            result.fn = result.prototype;\n            result.fn.init = result.fn.constructor;\n\n            return result;\n        }(TBase));\n        defineGeometryAccessors(result.prototype, names);\n\n        return result;\n    };\n\n    var DEFAULT_STROKE = \"#000\";\n\n    var Circle = (function (superclass) {\n        function Circle(geometry, options) {\n            if (geometry === void 0) { geometry = new Circle$2(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.geometry(geometry);\n\n            if (!defined(this.options.stroke)) {\n                this.stroke(DEFAULT_STROKE);\n            }\n        }\n\n        extendStatic(Circle, superclass);\n        Circle.prototype = Object.create( superclass && superclass.prototype );\n        Circle.prototype.constructor = Circle;\n        Circle.fn = Circle.prototype;\n        Circle.fn.init = Circle.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Circle\";\n        };\n\n        Circle.prototype.rawBBox = function rawBBox () {\n            return this._geometry.bbox();\n        };\n\n        Circle.prototype._bbox = function _bbox (matrix) {\n            return this._geometry.bbox(matrix);\n        };\n\n        Circle.prototype._containsPoint = function _containsPoint (point) {\n            return this.geometry().containsPoint(point);\n        };\n\n        Circle.prototype._isOnPath = function _isOnPath (point) {\n            return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n        };\n\n        Object.defineProperties( Circle.prototype, prototypeAccessors );\n\n        return Circle;\n    }(paintable(measurable(withGeometry(Element$1)))));\n\n    var PRECISION = 10;\n\n    function close$1(a, b, tolerance) {\n        if (tolerance === void 0) { tolerance = PRECISION; }\n\n        return round(Math.abs(a - b), tolerance) === 0;\n    }\n\n    function closeOrLess(a, b, tolerance) {\n        return a < b || close$1(a, b, tolerance);\n    }\n\n    function lineIntersection(p0, p1, p2, p3) {\n        var s1x = p1.x - p0.x;\n        var s2x = p3.x - p2.x;\n        var s1y = p1.y - p0.y;\n        var s2y = p3.y - p2.y;\n        var nx = p0.x - p2.x;\n        var ny = p0.y - p2.y;\n        var d = s1x * s2y - s2x * s1y;\n        var s = (s1x * ny - s1y * nx) / d;\n        var t = (s2x * ny - s2y * nx) / d;\n\n        if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n            return new Point(p0.x + t * s1x, p0.y + t * s1y);\n        }\n    }\n\n    var MAX_INTERVAL = 45;\n    var pow$1 = Math.pow;\n    var accessors = [ \"radiusX\", \"radiusY\", \"startAngle\", \"endAngle\", \"anticlockwise\" ];\n\n    var Arc$2 = (function (superclass) {\n        function Arc(center, options) {\n            if (center === void 0) { center = new Point(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this);\n\n            this.setCenter(center);\n\n            this.radiusX = options.radiusX;\n            this.radiusY = options.radiusY || options.radiusX;\n            this.startAngle = options.startAngle;\n            this.endAngle = options.endAngle;\n            this.anticlockwise = options.anticlockwise || false;\n            this.xRotation = options.xRotation;\n        }\n\n        extendStatic(Arc, superclass);\n        Arc.prototype = Object.create( superclass && superclass.prototype );\n        Arc.prototype.constructor = Arc;\n        Arc.fn = Arc.prototype;\n        Arc.fn.init = Arc.fn.constructor;\n\n        Arc.prototype.clone = function clone () {\n            return new Arc(this.center, {\n                radiusX: this.radiusX,\n                radiusY: this.radiusY,\n                startAngle: this.startAngle,\n                endAngle: this.endAngle,\n                anticlockwise: this.anticlockwise\n            });\n        };\n\n        Arc.prototype.setCenter = function setCenter (value) {\n            this._observerField(\"center\", Point.create(value));\n            this.geometryChange();\n            return this;\n        };\n\n        Arc.prototype.getCenter = function getCenter () {\n            return this.center;\n        };\n\n        Arc.prototype.pointAt = function pointAt (angle) {\n            var center = this.center;\n            var radian = rad(angle);\n\n            return new Point(\n                center.x + this.radiusX * Math.cos(radian),\n                center.y + this.radiusY * Math.sin(radian)\n            );\n        };\n\n        Arc.prototype.curvePoints = function curvePoints () {\n            var this$1$1 = this;\n\n            var startAngle = this.startAngle;\n            var dir = this.anticlockwise ? -1 : 1;\n            var curvePoints = [ this.pointAt(startAngle) ];\n            var interval = this._arcInterval();\n            var intervalAngle = interval.endAngle - interval.startAngle;\n            var subIntervalsCount = Math.ceil(intervalAngle / MAX_INTERVAL);\n            var subIntervalAngle = intervalAngle / subIntervalsCount;\n            var currentAngle = startAngle;\n            var transformation;\n            if (this.xRotation) {\n                transformation = transform$1().rotate(this.xRotation, this.center);\n            }\n\n            for (var i = 1; i <= subIntervalsCount; i++) {\n                var nextAngle = currentAngle + dir * subIntervalAngle;\n                var points = this$1$1._intervalCurvePoints(currentAngle, nextAngle, transformation);\n\n                curvePoints.push(points.cp1, points.cp2, points.p2);\n                currentAngle = nextAngle;\n            }\n\n            return curvePoints;\n        };\n\n        Arc.prototype.bbox = function bbox (matrix) {\n            var this$1$1 = this;\n\n            var interval = this._arcInterval();\n            var startAngle = interval.startAngle;\n            var endAngle = interval.endAngle;\n            var extremeAngles = ellipseExtremeAngles(this.center, this.radiusX, this.radiusY, matrix);\n            var extremeX = deg(extremeAngles.x);\n            var extremeY = deg(extremeAngles.y);\n            var endPoint = this.pointAt(endAngle).transformCopy(matrix);\n            var currentAngleX = bboxStartAngle(extremeX, startAngle);\n            var currentAngleY = bboxStartAngle(extremeY, startAngle);\n            var currentPoint = this.pointAt(startAngle).transformCopy(matrix);\n            var minPoint = Point.min(currentPoint, endPoint);\n            var maxPoint = Point.max(currentPoint, endPoint);\n\n            while (currentAngleX < endAngle || currentAngleY < endAngle) {\n                var currentPointX = (void 0);\n                if (currentAngleX < endAngle) {\n                    currentPointX = this$1$1.pointAt(currentAngleX).transformCopy(matrix);\n                    currentAngleX += 90;\n                }\n\n                var currentPointY = (void 0);\n                if (currentAngleY < endAngle) {\n                    currentPointY = this$1$1.pointAt(currentAngleY).transformCopy(matrix);\n                    currentAngleY += 90;\n                }\n\n                currentPoint = new Point(currentPointX.x, currentPointY.y);\n                minPoint = Point.min(minPoint, currentPoint);\n                maxPoint = Point.max(maxPoint, currentPoint);\n            }\n\n            return Rect.fromPoints(minPoint, maxPoint);\n        };\n\n        Arc.prototype._arcInterval = function _arcInterval () {\n            var ref = this;\n            var startAngle = ref.startAngle;\n            var endAngle = ref.endAngle;\n            var anticlockwise = ref.anticlockwise;\n\n            if (anticlockwise) {\n                var oldStart = startAngle;\n                startAngle = endAngle;\n                endAngle = oldStart;\n            }\n\n            if (startAngle > endAngle || (anticlockwise && startAngle === endAngle)) {\n                endAngle += 360;\n            }\n\n            return {\n                startAngle: startAngle,\n                endAngle: endAngle\n            };\n        };\n\n        Arc.prototype._intervalCurvePoints = function _intervalCurvePoints (startAngle, endAngle, transformation) {\n            var p1 = this.pointAt(startAngle);\n            var p2 = this.pointAt(endAngle);\n            var p1Derivative = this._derivativeAt(startAngle);\n            var p2Derivative = this._derivativeAt(endAngle);\n            var t = (rad(endAngle) - rad(startAngle)) / 3;\n            var cp1 = new Point(p1.x + t * p1Derivative.x, p1.y + t * p1Derivative.y);\n            var cp2 = new Point(p2.x - t * p2Derivative.x, p2.y - t * p2Derivative.y);\n            if (transformation) {\n                p1.transform(transformation);\n                p2.transform(transformation);\n                cp1.transform(transformation);\n                cp2.transform(transformation);\n            }\n\n            return {\n                p1: p1,\n                cp1: cp1,\n                cp2: cp2,\n                p2: p2\n            };\n        };\n\n        Arc.prototype._derivativeAt = function _derivativeAt (angle) {\n            var radian = rad(angle);\n\n            return new Point(-this.radiusX * Math.sin(radian), this.radiusY * Math.cos(radian));\n        };\n\n        Arc.prototype.containsPoint = function containsPoint (point) {\n            var interval = this._arcInterval();\n            var intervalAngle = interval.endAngle - interval.startAngle;\n            var ref = this;\n            var center = ref.center;\n            var radiusX = ref.radiusX;\n            var radiusY = ref.radiusY;\n            var distance = center.distanceTo(point);\n            var angleRad = Math.atan2(point.y - center.y, point.x - center.x);\n            var pointRadius = (radiusX * radiusY) /\n                Math.sqrt(pow$1(radiusX, 2) * pow$1(Math.sin(angleRad), 2) + pow$1(radiusY, 2) * pow$1(Math.cos(angleRad), 2));\n            var startPoint = this.pointAt(this.startAngle).round(PRECISION);\n            var endPoint = this.pointAt(this.endAngle).round(PRECISION);\n            var intersection = lineIntersection(center, point.round(PRECISION), startPoint, endPoint);\n            var containsPoint;\n\n            if (intervalAngle < 180) {\n                containsPoint = intersection && closeOrLess(center.distanceTo(intersection), distance) && closeOrLess(distance, pointRadius);\n            } else {\n                var angle = calculateAngle(center.x, center.y, radiusX, radiusY, point.x, point.y);\n                if (angle !== 360) {\n                    angle = (360 + angle) % 360;\n                }\n\n                var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n                containsPoint = (inAngleRange && closeOrLess(distance, pointRadius)) || (!inAngleRange && (!intersection || intersection.equals(point)));\n            }\n            return containsPoint;\n        };\n\n        Arc.prototype._isOnPath = function _isOnPath (point, width) {\n            var interval = this._arcInterval();\n            var center = this.center;\n            var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\n            if (angle !== 360) {\n                angle = (360 + angle) % 360;\n            }\n\n            var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\n\n            return inAngleRange && this.pointAt(angle).distanceTo(point) <= width;\n        };\n\n        Arc.fromPoints = function fromPoints (start, end, rx, ry, largeArc, swipe, rotation) {// eslint-disable-line max-params\n            var arcParameters = normalizeArcParameters({\n                x1: start.x,\n                y1: start.y,\n                x2: end.x,\n                y2: end.y,\n                rx: rx,\n                ry: ry,\n                largeArc: largeArc,\n                swipe: swipe,\n                rotation: rotation\n            });\n\n            return new Arc(arcParameters.center, {\n                startAngle: arcParameters.startAngle,\n                endAngle: arcParameters.endAngle,\n                radiusX: arcParameters.radiusX,\n                radiusY: arcParameters.radiusY,\n                xRotation: arcParameters.xRotation,\n                anticlockwise: swipe === 0\n            });\n        };\n\n        return Arc;\n    }(withAccessors(HasObservers, accessors)));\n\n    function calculateAngle(cx, cy, rx, ry, x, y) {\n        var cos = round((x - cx) / rx, 3);\n        var sin = round((y - cy) / ry, 3);\n\n        return round(deg(Math.atan2(sin, cos)));\n    }\n\n    function normalizeArcParameters(parameters) {\n        var x1 = parameters.x1;\n        var y1 = parameters.y1;\n        var x2 = parameters.x2;\n        var y2 = parameters.y2;\n        var rx = parameters.rx;\n        var ry = parameters.ry;\n        var largeArc = parameters.largeArc;\n        var swipe = parameters.swipe;\n        var rotation = parameters.rotation; if (rotation === void 0) { rotation = 0; }\n\n        var radians = rad(rotation);\n        var cosine = Math.cos(radians);\n        var sine = Math.sin(radians);\n\n        var xT = cosine * (x1 - x2) / 2 + sine * (y1 - y2) / 2;\n        var yT = -sine * (x1 - x2) / 2 + cosine * (y1 - y2) / 2;\n\n        var sign = largeArc !== swipe ? 1 : -1;\n\n        var xt2 = Math.pow(xT, 2);\n        var yt2 = Math.pow(yT, 2);\n        var rx2 = Math.pow(rx, 2);\n        var ry2 = Math.pow(ry, 2);\n\n        var delta = xt2 / rx2 + yt2 / ry2;\n\n        if (delta > 1) {\n            delta = Math.sqrt(xt2 / rx2 + yt2 / ry2);\n            rx = delta * rx;\n            rx2 = Math.pow(rx, 2);\n\n            ry = delta * ry;\n            ry2 = Math.pow(ry, 2);\n        }\n\n        var constT = sign * Math.sqrt((rx2 * ry2 - rx2 * yt2 - ry2 * xt2) / (rx2 * yt2 + ry2 * xt2));\n        // due to rounding errors the value could become NaN even after radii correction\n        if (isNaN(constT)) {\n            constT = 0;\n        }\n\n        var cxT = constT * (rx * yT) / ry;\n        var cyT = - constT * (ry * xT) / rx;\n\n        var cx = cosine * cxT - sine * cyT + (x1 + x2) / 2;\n        var cy = sine * cxT + cosine * cyT + (y1 + y2) / 2;\n\n        var uX = (xT - cxT) / rx;\n        var uY = (yT - cyT) / ry;\n        var vX = -(xT + cxT) / rx;\n        var vY = -(yT + cyT) / ry;\n\n        var startAngle = (uY >= 0 ? 1 : -1) * deg(Math.acos(uX / Math.sqrt(uX * uX + uY * uY)));\n\n        var angleCosine = round((uX * vX + uY * vY) / (Math.sqrt(uX * uX + uY * uY) * Math.sqrt(vX * vX + vY * vY)), 10);\n        var angle = (uX * vY - uY * vX >= 0 ? 1 : -1) * deg(Math.acos(angleCosine));\n\n        if (!swipe && angle > 0) {\n            angle -= 360;\n        }\n\n        if (swipe && angle < 0) {\n            angle += 360;\n        }\n        var endAngle = startAngle + angle;\n        var signEndAngle = endAngle >= 0 ? 1 : -1;\n        endAngle = (Math.abs(endAngle) % 360) * signEndAngle;\n\n        return {\n            center: new Point(cx, cy),\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: rx,\n            radiusY: ry,\n            xRotation: rotation\n        };\n    }\n\n    function bboxStartAngle(angle, start) {\n        var startAngle = angle;\n\n        while (startAngle < start) {\n            startAngle += 90;\n        }\n\n        return startAngle;\n    }\n\n    var push = [].push;\n    var pop = [].pop;\n    var splice = [].splice;\n    var shift = [].shift;\n    var slice = [].slice;\n    var unshift = [].unshift;\n\n    var ElementsArray = (function (HasObservers$$1) {\n        function ElementsArray(array) {\n            if (array === void 0) { array = []; }\n\n            HasObservers$$1.call(this);\n\n            this.length = 0;\n            this._splice(0, array.length, array);\n        }\n\n        extendStatic(ElementsArray, HasObservers$$1);\n        ElementsArray.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        ElementsArray.prototype.constructor = ElementsArray;\n        ElementsArray.fn = ElementsArray.prototype;\n        ElementsArray.fn.init = ElementsArray.fn.constructor;\n\n        ElementsArray.prototype.elements = function elements (value) {\n            if (value) {\n                this._splice(0, this.length, value);\n\n                this._change();\n                return this;\n            }\n\n            return this.slice(0);\n        };\n\n        ElementsArray.prototype.push = function push$1 () {\n            var elements = arguments;\n            var result = push.apply(this, elements);\n\n            this._add(elements);\n\n            return result;\n        };\n\n        ElementsArray.prototype.slice = function slice$1 () {\n            return slice.call(this);\n        };\n\n        ElementsArray.prototype.pop = function pop$1 () {\n            var length = this.length;\n            var result = pop.apply(this);\n\n            if (length) {\n                this._remove([ result ]);\n            }\n\n            return result;\n        };\n\n        ElementsArray.prototype.splice = function splice$1 (index, howMany) {\n            var elements = slice.call(arguments, 2);\n            var result = this._splice(index, howMany, elements);\n\n            this._change();\n\n            return result;\n        };\n\n        ElementsArray.prototype.shift = function shift$1 () {\n            var length = this.length;\n            var result = shift.apply(this);\n\n            if (length) {\n                this._remove([ result ]);\n            }\n\n            return result;\n        };\n\n        ElementsArray.prototype.unshift = function unshift$1 () {\n            var elements = arguments;\n            var result = unshift.apply(this, elements);\n\n            this._add(elements);\n\n            return result;\n        };\n\n        ElementsArray.prototype.indexOf = function indexOf (element) {\n            var this$1$1 = this;\n\n            var length = this.length;\n\n            for (var idx = 0; idx < length; idx++) {\n                if (this$1$1[idx] === element) {\n                    return idx;\n                }\n            }\n            return -1;\n        };\n\n        ElementsArray.prototype._splice = function _splice (index, howMany, elements) {\n            var result = splice.apply(this, [ index, howMany ].concat(elements));\n\n            this._clearObserver(result);\n            this._setObserver(elements);\n\n            return result;\n        };\n\n        ElementsArray.prototype._add = function _add (elements) {\n            this._setObserver(elements);\n            this._change();\n        };\n\n        ElementsArray.prototype._remove = function _remove (elements) {\n            this._clearObserver(elements);\n            this._change();\n        };\n\n        ElementsArray.prototype._setObserver = function _setObserver (elements) {\n            var this$1$1 = this;\n\n            for (var idx = 0; idx < elements.length; idx++) {\n                elements[idx].addObserver(this$1$1);\n            }\n        };\n\n        ElementsArray.prototype._clearObserver = function _clearObserver (elements) {\n            var this$1$1 = this;\n\n            for (var idx = 0; idx < elements.length; idx++) {\n                elements[idx].removeObserver(this$1$1);\n            }\n        };\n\n        ElementsArray.prototype._change = function _change () {};\n\n        return ElementsArray;\n    }(HasObservers));\n\n    var GeometryElementsArray = (function (ElementsArray$$1) {\n        function GeometryElementsArray () {\n            ElementsArray$$1.apply(this, arguments);\n        }\n\n        extendStatic(GeometryElementsArray, ElementsArray$$1);\n        GeometryElementsArray.prototype = Object.create( ElementsArray$$1 && ElementsArray$$1.prototype );\n        GeometryElementsArray.prototype.constructor = GeometryElementsArray;\n        GeometryElementsArray.fn = GeometryElementsArray.prototype;\n        GeometryElementsArray.fn.init = GeometryElementsArray.fn.constructor;\n\n        GeometryElementsArray.prototype._change = function _change () {\n            this.geometryChange();\n        };\n\n        return GeometryElementsArray;\n    }(ElementsArray));\n\n    function isOutOfEndPoint(endPoint, controlPoint, point) {\n        var angle = deg(Math.atan2(controlPoint.y - endPoint.y, controlPoint.x - endPoint.x));\n        var rotatedPoint = point.transformCopy(transform$1().rotate(-angle, endPoint));\n\n        return rotatedPoint.x < endPoint.x;\n    }\n\n    function calculateCurveAt(t, field, points) {\n        var t1 = 1 - t;\n        return Math.pow(t1, 3) * points[0][field] +\n            3 * Math.pow(t1, 2) * t * points[1][field] +\n            3 * Math.pow(t, 2) * t1 * points[2][field] +\n            Math.pow(t, 3) * points[3][field];\n    }\n\n    function toCubicPolynomial(points, field) {\n        return [ -points[0][field] + 3 * points[1][field] - 3 * points[2][field] + points[3][field],\n            3 * (points[0][field] - 2 * points[1][field] + points[2][field]),\n            3 * (-points[0][field] + points[1][field]),\n            points[0][field]\n        ];\n    }\n\n    var ComplexNumber = (function (Class$$1) {\n        function ComplexNumber(real, img) {\n            if (real === void 0) { real = 0; }\n            if (img === void 0) { img = 0; }\n\n            Class$$1.call(this);\n\n            this.real = real;\n            this.img = img;\n        }\n\n        extendStatic(ComplexNumber, Class$$1);\n        ComplexNumber.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        ComplexNumber.prototype.constructor = ComplexNumber;\n        ComplexNumber.fn = ComplexNumber.prototype;\n        ComplexNumber.fn.init = ComplexNumber.fn.constructor;\n\n        ComplexNumber.prototype.add = function add (cNumber) {\n            return new ComplexNumber(round(this.real + cNumber.real, PRECISION), round(this.img + cNumber.img, PRECISION));\n        };\n\n        ComplexNumber.prototype.addConstant = function addConstant (value) {\n            return new ComplexNumber(this.real + value, this.img);\n        };\n\n        ComplexNumber.prototype.negate = function negate () {\n            return new ComplexNumber(-this.real, -this.img);\n        };\n\n        ComplexNumber.prototype.multiply = function multiply (cNumber) {\n            return new ComplexNumber(this.real * cNumber.real - this.img * cNumber.img,\n                this.real * cNumber.img + this.img * cNumber.real);\n        };\n\n        ComplexNumber.prototype.multiplyConstant = function multiplyConstant (value) {\n            return new ComplexNumber(this.real * value, this.img * value);\n        };\n\n        ComplexNumber.prototype.nthRoot = function nthRoot (n) {\n            var rad$$1 = Math.atan2(this.img, this.real);\n            var r = Math.sqrt(Math.pow(this.img, 2) + Math.pow(this.real, 2));\n            var nthR = Math.pow(r, 1 / n);\n\n            return new ComplexNumber(nthR * Math.cos(rad$$1 / n), nthR * Math.sin(rad$$1 / n)); //Moivre's formula\n        };\n\n        ComplexNumber.prototype.equals = function equals (cNumber) {\n            return this.real === cNumber.real && this.img === cNumber.img;\n        };\n\n        ComplexNumber.prototype.isReal = function isReal () {\n            return this.img === 0;\n        };\n\n        return ComplexNumber;\n    }(Class));\n\n    function numberSign$1(x) {\n        return x < 0 ? -1 : 1;\n    }\n\n    function solveQuadraticEquation(a, b, c) {\n        var squareRoot = Math.sqrt(Math.pow(b, 2) - 4 * a * c);\n        return [\n            (-b + squareRoot) / (2 * a),\n            (-b - squareRoot) / (2 * a)\n        ];\n    }\n\n    //Cardano's formula\n    function solveCubicEquation(a, b, c, d) {\n        if (a === 0) {\n            return solveQuadraticEquation(b, c, d);\n        }\n\n        var p = (3 * a * c - Math.pow(b, 2)) / (3 * Math.pow(a, 2));\n        var q = (2 * Math.pow(b, 3) - 9 * a * b * c + 27 * Math.pow(a, 2) * d) / (27 * Math.pow(a, 3));\n        var Q = Math.pow(p / 3, 3) + Math.pow(q / 2, 2);\n        var i = new ComplexNumber(0,1);\n        var b3a = -b / (3 * a);\n        var x1, x2, y1, y2, y3, z1, z2;\n\n        if (Q < 0) {\n            x1 = new ComplexNumber(-q / 2, Math.sqrt(-Q)).nthRoot(3);\n            x2 = new ComplexNumber(-q / 2, - Math.sqrt(-Q)).nthRoot(3);\n        } else {\n            x1 = -q / 2 + Math.sqrt(Q);\n            x1 = new ComplexNumber(numberSign$1(x1) * Math.pow(Math.abs(x1), 1 / 3));\n            x2 = -q / 2 - Math.sqrt(Q);\n            x2 = new ComplexNumber(numberSign$1(x2) * Math.pow(Math.abs(x2), 1 / 3));\n        }\n\n        y1 = x1.add(x2);\n\n        z1 = x1.add(x2).multiplyConstant(-1 / 2);\n        z2 = x1.add(x2.negate()).multiplyConstant(Math.sqrt(3) / 2);\n\n        y2 = z1.add(i.multiply(z2));\n        y3 = z1.add(i.negate().multiply(z2));\n\n        var result = [];\n\n        if (y1.isReal()) {\n            result.push(round(y1.real + b3a, PRECISION));\n        }\n        if (y2.isReal()) {\n            result.push(round(y2.real + b3a, PRECISION));\n        }\n        if (y3.isReal()) {\n            result.push(round(y3.real + b3a, PRECISION));\n        }\n\n        return result;\n    }\n\n    function hasRootsInRange(points, point, field, rootField, range) {\n        var polynomial = toCubicPolynomial(points, rootField);\n        var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point[rootField]);\n        var intersection;\n\n        for (var idx = 0; idx < roots.length; idx++) {\n            if (0 <= roots[idx] && roots[idx] <= 1) {\n                intersection = calculateCurveAt(roots[idx], field, points);\n                if (Math.abs(intersection - point[field]) <= range) {\n                    return true;\n                }\n            }\n        }\n    }\n\n    function curveIntersectionsCount(points, point, bbox) {\n        var polynomial = toCubicPolynomial(points, \"x\");\n        var roots = solveCubicEquation(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point.x);\n        var rayIntersection, intersectsRay;\n        var count = 0;\n        for (var i = 0; i < roots.length; i++) {\n            rayIntersection = calculateCurveAt(roots[i], \"y\", points);\n            intersectsRay = close$1(rayIntersection, point.y) || rayIntersection > point.y;\n            if (intersectsRay && (((roots[i] === 0 || roots[i] === 1) && bbox.bottomRight().x > point.x) || (0 < roots[i] && roots[i] < 1))) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    function lineIntersectionsCount(a, b, point) {\n        var intersects;\n        if (a.x !== b.x) {\n            var minX = Math.min(a.x, b.x);\n            var maxX = Math.max(a.x, b.x);\n            var minY = Math.min(a.y, b.y);\n            var maxY = Math.max(a.y, b.y);\n            var inRange = minX <= point.x && point.x < maxX;\n\n            if (minY === maxY) {\n                intersects = point.y <= minY && inRange;\n            } else {\n                intersects = inRange && (((maxY - minY) * ((a.x - b.x) * (a.y - b.y) > 0 ? point.x - minX : maxX - point.x)) / (maxX - minX) + minY - point.y) >= 0;\n            }\n        }\n\n        return intersects ? 1 : 0;\n    }\n\n    function pointAccessor(name) {\n        var fieldName = \"_\" + name;\n        return function(value) {\n            if (defined(value)) {\n                this._observerField(fieldName, Point.create(value));\n                this.geometryChange();\n                return this;\n            }\n\n            return this[fieldName];\n        };\n    }\n\n    function definePointAccessors(fn, names) {\n        for (var i = 0; i < names.length; i++) {\n            fn[names[i]] = pointAccessor(names[i]);\n        }\n    }\n\n    var withPoints = function (TBase, names) {\n        var result = (function (TBase) {\n            function result () {\n                TBase.apply(this, arguments);\n            }extendStatic(result, TBase);\n            result.prototype = Object.create( TBase && TBase.prototype );\n            result.prototype.constructor = result;\n            result.fn = result.prototype;\n            result.fn.init = result.fn.constructor;\n\n            return result;\n        }(TBase));\n        definePointAccessors(result.prototype, names);\n\n        return result;\n    };\n\n    var points = [ \"anchor\", \"controlIn\", \"controlOut\" ];\n\n    var Segment = (function (superclass) {\n        function Segment(anchor, controlIn, controlOut) {\n            superclass.call(this);\n\n            this.anchor(anchor || new Point());\n            this.controlIn(controlIn);\n            this.controlOut(controlOut);\n        }\n\n        extendStatic(Segment, superclass);\n        Segment.prototype = Object.create( superclass && superclass.prototype );\n        Segment.prototype.constructor = Segment;\n        Segment.fn = Segment.prototype;\n        Segment.fn.init = Segment.fn.constructor;\n\n        Segment.prototype.bboxTo = function bboxTo (toSegment, matrix) {\n            var segmentAnchor = this.anchor().transformCopy(matrix);\n            var toSegmentAnchor = toSegment.anchor().transformCopy(matrix);\n            var rect;\n\n            if (this.controlOut() && toSegment.controlIn()) {\n                rect = this._curveBoundingBox(\n                    segmentAnchor, this.controlOut().transformCopy(matrix),\n                    toSegment.controlIn().transformCopy(matrix), toSegmentAnchor\n                );\n            } else {\n                rect = this._lineBoundingBox(segmentAnchor, toSegmentAnchor);\n            }\n\n            return rect;\n        };\n\n        Segment.prototype._lineBoundingBox = function _lineBoundingBox (p1, p2) {\n            return Rect.fromPoints(p1, p2);\n        };\n\n        Segment.prototype._curveBoundingBox = function _curveBoundingBox (p1, cp1, cp2, p2) {\n            var points = [ p1, cp1, cp2, p2 ];\n            var extremesX = this._curveExtremesFor(points, \"x\");\n            var extremesY = this._curveExtremesFor(points, \"y\");\n            var xLimits = arrayLimits([ extremesX.min, extremesX.max, p1.x, p2.x ]);\n            var yLimits = arrayLimits([ extremesY.min, extremesY.max, p1.y, p2.y ]);\n\n            return Rect.fromPoints(new Point(xLimits.min, yLimits.min), new Point(xLimits.max, yLimits.max));\n        };\n\n        Segment.prototype._curveExtremesFor = function _curveExtremesFor (points, field) {\n            var extremes = this._curveExtremes(\n                points[0][field], points[1][field],\n                points[2][field], points[3][field]\n            );\n\n            return {\n                min: calculateCurveAt(extremes.min, field, points),\n                max: calculateCurveAt(extremes.max, field, points)\n            };\n        };\n\n        Segment.prototype._curveExtremes = function _curveExtremes (x1, x2, x3, x4) {\n            var a = x1 - 3 * x2 + 3 * x3 - x4;\n            var b = - 2 * (x1 - 2 * x2 + x3);\n            var c = x1 - x2;\n            var sqrt = Math.sqrt(b * b - 4 * a * c);\n            var t1 = 0;\n            var t2 = 1;\n\n            if (a === 0) {\n                if (b !== 0) {\n                    t1 = t2 = -c / b;\n                }\n            } else if (!isNaN(sqrt)) {\n                t1 = (- b + sqrt) / (2 * a);\n                t2 = (- b - sqrt) / (2 * a);\n            }\n\n            var min = Math.max(Math.min(t1, t2), 0);\n            if (min < 0 || min > 1) {\n                min = 0;\n            }\n\n            var max = Math.min(Math.max(t1, t2), 1);\n            if (max > 1 || max < 0) {\n                max = 1;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        };\n\n        Segment.prototype._intersectionsTo = function _intersectionsTo (segment, point) {\n            var intersectionsCount;\n            if (this.controlOut() && segment.controlIn()) {\n                intersectionsCount = curveIntersectionsCount([ this.anchor(), this.controlOut(), segment.controlIn(), segment.anchor() ], point, this.bboxTo(segment));\n            } else {\n                intersectionsCount = lineIntersectionsCount(this.anchor(), segment.anchor(), point);\n            }\n            return intersectionsCount;\n        };\n\n        Segment.prototype._isOnCurveTo = function _isOnCurveTo (segment, point, width, endSegment) {\n            var bbox = this.bboxTo(segment).expand(width, width);\n            if (bbox.containsPoint(point)) {\n                var p1 = this.anchor();\n                var p2 = this.controlOut();\n                var p3 = segment.controlIn();\n                var p4 = segment.anchor();\n\n                if (endSegment === \"start\" && p1.distanceTo(point) <= width) {\n                    return !isOutOfEndPoint(p1, p2, point);\n                } else if (endSegment === \"end\" && p4.distanceTo(point) <= width) {\n                    return !isOutOfEndPoint(p4, p3, point);\n                }\n\n                //the approach is not entirely correct but is close and the alternatives are solving a 6th degree polynomial or testing the segment points\n                var points = [ p1, p2, p3, p4 ];\n                if (hasRootsInRange(points, point, \"x\", \"y\", width) || hasRootsInRange(points, point, \"y\", \"x\", width)) {\n                    return true;\n                }\n                var rotation = transform$1().rotate(45, point);\n                var rotatedPoints = [ p1.transformCopy(rotation), p2.transformCopy(rotation), p3.transformCopy(rotation), p4.transformCopy(rotation) ];\n                return hasRootsInRange(rotatedPoints, point, \"x\", \"y\", width) || hasRootsInRange(rotatedPoints, point, \"y\", \"x\", width);\n            }\n        };\n\n        Segment.prototype._isOnLineTo = function _isOnLineTo (segment, point, width) {\n            var p1 = this.anchor();\n            var p2 = segment.anchor();\n            var angle = deg(Math.atan2(p2.y - p1.y, p2.x - p1.x));\n            var rect = new Rect([ p1.x, p1.y - width / 2 ], [ p1.distanceTo(p2), width ]);\n            return rect.containsPoint(point.transformCopy(transform$1().rotate(-angle, p1)));\n        };\n\n        Segment.prototype._isOnPathTo = function _isOnPathTo (segment, point, width, endSegment) {\n            var isOnPath;\n            if (this.controlOut() && segment.controlIn()) {\n                isOnPath = this._isOnCurveTo(segment, point, width / 2, endSegment);\n            } else {\n                isOnPath = this._isOnLineTo(segment, point, width);\n            }\n            return isOnPath;\n        };\n\n        return Segment;\n    }(withPoints(HasObservers, points)));\n\n    function arrayLimits(arr) {\n        var length = arr.length;\n        var min = MAX_NUM;\n        var max = MIN_NUM;\n\n        for (var i = 0; i < length; i ++) {\n            max = Math.max(max, arr[i]);\n            min = Math.min(min, arr[i]);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n\n    var geometry = {\n    \tCircle: Circle$2,\n    \tArc: Arc$2,\n    \tRect: Rect,\n    \tPoint: Point,\n    \tSegment: Segment,\n    \tMatrix: Matrix,\n    \tSize: Size,\n    \ttoMatrix: toMatrix,\n    \tTransformation: Transformation,\n    \ttransform: transform$1\n    };\n\n    var WEIGHT = 0.333;\n    var EXTREMUM_ALLOWED_DEVIATION = 0.01;\n    var X = \"x\";\n    var Y = \"y\";\n\n    function pointsToCurve(pointsIn, closed) {\n        var points = pointsIn.slice(0);\n        var segments = [];\n        var length = points.length;\n\n        if (length > 2) {\n            removeDuplicates(0, points);\n            length = points.length;\n        }\n\n        if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n            return segments;\n        }\n\n        var p0 = points[0];\n        var p1 = points[1];\n        var p2 = points[2];\n\n        segments.push(new Segment(p0));\n\n        while (p0.equals(points[length - 1])) {\n            closed = true;\n            points.pop();\n            length--;\n        }\n\n        if (length === 2) {\n            var tangent = getTangent(p0,p1, X, Y);\n\n            last(segments).controlOut(\n                firstControlPoint(tangent, p0, p1, X, Y)\n            );\n\n            segments.push(new Segment(\n                p1,\n                secondControlPoint(tangent, p0, p1, X, Y)\n            ));\n\n            return segments;\n        }\n\n        var initialControlPoint, lastControlPoint;\n\n        if (closed) {\n            p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n            var controlPoints = getControlPoints(p0, p1, p2);\n            initialControlPoint = controlPoints[1];\n            lastControlPoint = controlPoints[0];\n        } else {\n            var tangent$1 = getTangent(p0, p1, X,Y);\n            initialControlPoint = firstControlPoint(tangent$1, p0, p1, X, Y);\n        }\n\n        var cp0 = initialControlPoint;\n        for (var idx = 0; idx <= length - 3; idx++) {\n            removeDuplicates(idx, points);\n            length = points.length;\n            if (idx + 3 <= length) {\n                p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                var controlPoints$1 = getControlPoints(p0,p1,p2);\n\n                last(segments).controlOut(cp0);\n                cp0 = controlPoints$1[1];\n\n                var cp1 = controlPoints$1[0];\n                segments.push(new Segment(p1, cp1));\n            }\n        }\n\n        if (closed) {\n            p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n            var controlPoints$2 = getControlPoints(p0, p1, p2);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p1,\n                controlPoints$2[0]\n            ));\n\n            last(segments).controlOut(controlPoints$2[1]);\n            segments.push(new Segment(\n                p2,\n                lastControlPoint\n            ));\n        } else {\n            var tangent$2 = getTangent(p1, p2, X, Y);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p2,\n                secondControlPoint(tangent$2, p1, p2, X, Y)\n            ));\n        }\n\n        return segments;\n    }\n\n    function removeDuplicates(idx, points) {\n        while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n            points.splice(idx + 1, 1);\n        }\n    }\n\n    function invertAxis(p0, p1, p2) {\n        var invertAxis = false;\n\n        if (p0.x === p1.x) {\n            invertAxis = true;\n        } else if (p1.x === p2.x) {\n            if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                invertAxis = true;\n            }\n        } else {\n            var fn = lineFunction(p0,p1);\n            var y2 = calculateFunction(fn, p2.x);\n            if (!(p0.y <= p1.y && p2.y <= y2) &&\n                !(p1.y <= p0.y && p2.y >= y2)) {\n                invertAxis = true;\n            }\n        }\n\n        return invertAxis;\n    }\n\n    function isLine(p0, p1, p2) {\n        var fn = lineFunction(p0, p1);\n        var y2 = calculateFunction(fn, p2.x);\n\n        return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n    }\n\n    function lineFunction(p1, p2) {\n        var a = (p2.y - p1.y) / (p2.x - p1.x);\n        var b = p1.y - a * p1.x;\n\n        return [ b, a ];\n    }\n\n    function getControlPoints(p0, p1, p2) {\n        var xField = X;\n        var yField = Y;\n        var restrict = false;\n        var switchOrientation = false;\n        var tangent;\n\n        if (isLine(p0, p1, p2)) {\n            tangent = getTangent(p0, p1, X, Y);\n        } else {\n            var monotonic = {\n                x: isMonotonicByField(p0, p1, p2, X),\n                y: isMonotonicByField(p0, p1, p2, Y)\n            };\n\n            if (monotonic.x && monotonic.y) {\n                tangent = getTangent(p0, p2, X, Y);\n                restrict = true;\n            } else {\n                if (invertAxis(p0, p1, p2)) {\n                    xField = Y;\n                    yField = X;\n                }\n\n                if (monotonic[xField]) {\n                    tangent = 0;\n                } else {\n                    var sign;\n                    if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                        (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                        sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                    } else {\n                        sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                    }\n\n                    tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                    switchOrientation = true;\n                }\n            }\n        }\n\n        var secondCP = secondControlPoint(tangent, p0, p1, xField, yField);\n\n        if (switchOrientation) {\n            var oldXField = xField;\n            xField = yField;\n            yField = oldXField;\n        }\n\n        var firstCP = firstControlPoint(tangent, p1, p2, xField, yField);\n\n        if (restrict) {\n            restrictControlPoint(p0, p1, secondCP, tangent);\n            restrictControlPoint(p1, p2, firstCP, tangent);\n        }\n\n        return [ secondCP, firstCP ];\n    }\n\n    function restrictControlPoint(p1, p2, cp, tangent) {\n        if (p1.y < p2.y) {\n            if (p2.y < cp.y) {\n                cp.x = p1.x + (p2.y - p1.y) / tangent;\n                cp.y = p2.y;\n            } else if (cp.y < p1.y) {\n                cp.x = p2.x - (p2.y - p1.y) / tangent;\n                cp.y = p1.y;\n            }\n        } else {\n            if (cp.y < p2.y) {\n                cp.x = p1.x - (p1.y - p2.y) / tangent;\n                cp.y = p2.y;\n            } else if (p1.y < cp.y) {\n                cp.x = p2.x + (p1.y - p2.y) / tangent;\n                cp.y = p1.y;\n            }\n        }\n    }\n\n    function getTangent(p0, p1, xField, yField) {\n        var x = p1[xField] - p0[xField];\n        var y = p1[yField] - p0[yField];\n        var tangent;\n\n        if (x === 0) {\n            tangent = 0;\n        } else {\n            tangent = y / x;\n        }\n\n        return tangent;\n    }\n\n    function isMonotonicByField(p0, p1, p2, field) {\n        return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                    (p2[field] < p1[field] && p1[field] < p0[field]);\n    }\n\n    function firstControlPoint(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n    }\n\n    function secondControlPoint(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n    }\n\n    function point(xValue, yValue, xField, yField) {\n        var controlPoint = new Point();\n        controlPoint[xField] = xValue;\n        controlPoint[yField] = yValue;\n\n        return controlPoint;\n    }\n\n    function calculateFunction(fn, x) {\n        var length = fn.length;\n        var result = 0;\n\n        for (var i = 0; i < length; i++) {\n            result += Math.pow(x,i) * fn[i];\n        }\n        return result;\n    }\n\n    function numberSign(value) {\n        return value <= 0 ? -1 : 1;\n    }\n\n    var ShapeMap = {\n        l: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n\n            for (var i = 0; i < parameters.length; i += 2) {\n                var point = new Point(parameters[i], parameters[i + 1]);\n\n                if (options.isRelative) {\n                    point.translateWith(position);\n                }\n\n                path.lineTo(point.x, point.y);\n\n                position.x = point.x;\n                position.y = point.y;\n            }\n        },\n\n        c: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n\n            for (var i = 0; i < parameters.length; i += 6) {\n                var controlOut = new Point(parameters[i], parameters[i + 1]);\n                var controlIn = new Point(parameters[i + 2], parameters[i + 3]);\n                var point = new Point(parameters[i + 4], parameters[i + 5]);\n                if (options.isRelative) {\n                    controlIn.translateWith(position);\n                    controlOut.translateWith(position);\n                    point.translateWith(position);\n                }\n\n                path.curveTo(controlOut, controlIn, point);\n\n                position.x = point.x;\n                position.y = point.y;\n            }\n        },\n\n        v: function(path, options) {\n            var value = options.isRelative ? 0 : options.position.x;\n\n            toLineParamaters(options.parameters, true, value);\n            this.l(path, options);\n        },\n\n        h: function(path, options) {\n            var value = options.isRelative ? 0 : options.position.y;\n\n            toLineParamaters(options.parameters, false, value);\n            this.l(path, options);\n        },\n\n        a: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n\n            for (var i = 0; i < parameters.length; i += 7) {\n                var radiusX = parameters[i];\n                var radiusY = parameters[i + 1];\n                var rotation = parameters[i + 2];\n                var largeArc = parameters[i + 3];\n                var swipe = parameters[i + 4];\n                var endPoint = new Point(parameters[i + 5], parameters[i + 6]);\n\n                if (options.isRelative) {\n                    endPoint.translateWith(position);\n                }\n                if (position.x !== endPoint.x || position.y !== endPoint.y) {\n                    path.arcTo(endPoint, radiusX, radiusY, largeArc, swipe, rotation);\n\n                    position.x = endPoint.x;\n                    position.y = endPoint.y;\n                }\n            }\n        },\n\n        s: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n            var previousCommand = options.previousCommand;\n            var lastControlIn;\n\n            if (previousCommand === \"s\" || previousCommand === \"c\") {\n                lastControlIn = last(last(path.paths).segments).controlIn();\n            }\n\n            for (var i = 0; i < parameters.length; i += 4) {\n                var controlIn = new Point(parameters[i], parameters[i + 1]);\n                var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n                var controlOut = (void 0);\n\n                if (options.isRelative) {\n                    controlIn.translateWith(position);\n                    endPoint.translateWith(position);\n                }\n\n                if (lastControlIn) {\n                    controlOut = reflectionPoint(lastControlIn, position);\n                } else {\n                    controlOut = position.clone();\n                }\n\n                lastControlIn = controlIn;\n\n                path.curveTo(controlOut, controlIn, endPoint);\n\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n            }\n        },\n\n        q: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n\n            for (var i = 0; i < parameters.length; i += 4) {\n                var controlPoint = new Point(parameters[i], parameters[i + 1]);\n                var endPoint = new Point(parameters[i + 2], parameters[i + 3]);\n\n                if (options.isRelative) {\n                    controlPoint.translateWith(position);\n                    endPoint.translateWith(position);\n                }\n\n                var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n                path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n            }\n        },\n\n        t: function(path, options) {\n            var parameters = options.parameters;\n            var position = options.position;\n            var previousCommand = options.previousCommand;\n            var controlPoint;\n\n            if (previousCommand === \"q\" || previousCommand === \"t\") {\n                var lastSegment = last(last(path.paths).segments);\n                controlPoint = lastSegment.controlIn().clone()\n                    .translateWith(position.scaleCopy(-1 / 3))\n                    .scale(3 / 2);\n            }\n\n            for (var i = 0; i < parameters.length; i += 2) {\n                var endPoint = new Point(parameters[i], parameters[i + 1]);\n                if (options.isRelative) {\n                    endPoint.translateWith(position);\n                }\n\n                if (controlPoint) {\n                    controlPoint = reflectionPoint(controlPoint, position);\n                } else {\n                    controlPoint = position.clone();\n                }\n\n                var cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\n\n                path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\n\n                position.x = endPoint.x;\n                position.y = endPoint.y;\n            }\n        }\n    };\n\n    function toLineParamaters(parameters, isVertical, value) {\n        var insertPosition = isVertical ? 0 : 1;\n\n        for (var i = 0; i < parameters.length; i += 2) {\n            parameters.splice(i + insertPosition, 0, value);\n        }\n    }\n\n    function reflectionPoint(point, center) {\n        if (point && center) {\n            return center.scaleCopy(2).translate(-point.x, -point.y);\n        }\n    }\n\n    var third = 1 / 3;\n\n    function quadraticToCubicControlPoints(position, controlPoint, endPoint) {\n        var scaledPoint = controlPoint.clone().scale(2 / 3);\n        return {\n            controlOut: scaledPoint.clone().translateWith(position.scaleCopy(third)),\n            controlIn: scaledPoint.translateWith(endPoint.scaleCopy(third))\n        };\n    }\n\n    var SEGMENT_REGEX = /([a-df-z]{1})([^a-df-z]*)(z)?/gi;\n    var SPLIT_REGEX = /[,\\s]?([+\\-]?(?:\\d*\\.\\d+|\\d+)(?:[eE][+\\-]?\\d+)?)/g;\n    var MOVE = \"m\";\n    var CLOSE = \"z\";\n\n    function parseParameters(str) {\n        var parameters = [];\n        str.replace(SPLIT_REGEX, function(match, number) {\n            parameters.push(parseFloat(number));\n        });\n        return parameters;\n    }\n\n    function parsePath(pathInstance, str) {\n        var position = new Point();\n        var previousCommand;\n\n        str.replace(SEGMENT_REGEX, function (match, element, params, closePath) {\n            var command = element.toLowerCase();\n            var isRelative = command === element;\n            var parameters = parseParameters(params.trim());\n\n            if (command === MOVE) {\n                if (isRelative) {\n                    position.x += parameters[0];\n                    position.y += parameters[1];\n                } else {\n                    position.x = parameters[0];\n                    position.y = parameters[1];\n                }\n\n                pathInstance.moveTo(position.x, position.y);\n\n                if (parameters.length > 2) {\n                    command = \"l\";\n                    parameters.splice(0, 2);\n                }\n            }\n\n            if (ShapeMap[command]) {\n                ShapeMap[command](\n                    pathInstance, {\n                        parameters: parameters,\n                        position: position,\n                        isRelative: isRelative,\n                        previousCommand: previousCommand\n                    }\n                );\n\n                if (closePath && closePath.toLowerCase() === CLOSE) {\n                    pathInstance.close();\n                }\n            } else if (command !== MOVE) {\n                throw new Error(\"Error while parsing SVG path. Unsupported command: \" + command);\n            }\n\n            previousCommand = command;\n        });\n\n        return pathInstance;\n    }\n\n    function elementsBoundingBox(elements, applyTransform, transformation) {\n        var boundingBox;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            if (element.visible()) {\n                var elementBoundingBox = applyTransform ? element.bbox(transformation) : element.rawBBox();\n                if (elementBoundingBox) {\n                    if (boundingBox) {\n                        boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                    } else {\n                        boundingBox = elementBoundingBox;\n                    }\n                }\n            }\n        }\n\n        return boundingBox;\n    }\n\n    function elementsClippedBoundingBox(elements, transformation) {\n        var boundingBox;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            if (element.visible()) {\n                var elementBoundingBox = element.clippedBBox(transformation);\n                if (elementBoundingBox) {\n                    if (boundingBox) {\n                        boundingBox = Rect.union(boundingBox, elementBoundingBox);\n                    } else {\n                        boundingBox = elementBoundingBox;\n                    }\n                }\n            }\n        }\n\n        return boundingBox;\n    }\n\n    var SPACE = ' ';\n    var printPoints = function (precision) { return function () {\n        var arguments$1 = arguments;\n\n        var points = [], len = arguments.length;\n        while ( len-- ) { points[ len ] = arguments$1[ len ]; }\n\n        return points.map(function (p) { return p.toString(precision); }).join(SPACE);\n     }    };\n    var segmentType = function (segmentStart, segmentEnd) { return segmentStart.controlOut() && segmentEnd.controlIn() ? 'C' : 'L'; };\n\n    var Path = (function (superclass) {\n        function Path(options) {\n            superclass.call(this, options);\n            this.segments = new GeometryElementsArray();\n            this.segments.addObserver(this);\n\n            if (!defined(this.options.stroke)) {\n                this.stroke('#000');\n\n                if (!defined(this.options.stroke.lineJoin)) {\n                    this.options.set('stroke.lineJoin', 'miter');\n                }\n            }\n        }\n\n        extendStatic(Path, superclass);\n        Path.prototype = Object.create( superclass && superclass.prototype );\n        Path.prototype.constructor = Path;\n        Path.fn = Path.prototype;\n        Path.fn.init = Path.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return 'Path';\n        };\n\n        Path.prototype.moveTo = function moveTo (x, y) {\n            this.suspend();\n            this.segments.elements([]);\n            this.resume();\n\n            this.lineTo(x, y);\n\n            return this;\n        };\n\n        Path.prototype.lineTo = function lineTo (x, y) {\n            var point$$1 = defined(y) ? new Point(x, y) : x;\n            var segment = new Segment(point$$1);\n\n            this.segments.push(segment);\n\n            return this;\n        };\n\n        Path.prototype.curveTo = function curveTo (controlOut, controlIn, point$$1) {\n            if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var segment = new Segment(point$$1, controlIn);\n                this.suspend();\n                lastSegment.controlOut(controlOut);\n                this.resume();\n\n                this.segments.push(segment);\n            }\n\n            return this;\n        };\n\n        Path.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n            if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var anchor = lastSegment.anchor();\n                var start = rad(startAngle);\n                var center = new Point(anchor.x - radiusX * Math.cos(start),\n                    anchor.y - radiusY * Math.sin(start));\n                var arc = new Arc$2(center, {\n                    startAngle: startAngle,\n                    endAngle: endAngle,\n                    radiusX: radiusX,\n                    radiusY: radiusY,\n                    anticlockwise: anticlockwise\n                });\n\n                this._addArcSegments(arc);\n            }\n\n            return this;\n        };\n\n        Path.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n            if (this.segments.length > 0) {\n                var lastSegment = last(this.segments);\n                var anchor = lastSegment.anchor();\n                var arc = Arc$2.fromPoints(anchor, Point.create(end), rx, ry, largeArc, swipe, rotation);\n\n                this._addArcSegments(arc);\n            }\n            return this;\n        };\n\n        Path.prototype._addArcSegments = function _addArcSegments (arc) {\n            var this$1$1 = this;\n\n            this.suspend();\n\n            var curvePoints = arc.curvePoints();\n\n            for (var i = 1; i < curvePoints.length; i += 3) {\n                this$1$1.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n            }\n\n            this.resume();\n            this.geometryChange();\n        };\n\n        Path.prototype.close = function close () {\n            this.options.closed = true;\n            this.geometryChange();\n\n            return this;\n        };\n\n        Path.prototype.rawBBox = function rawBBox () {\n            return this._bbox();\n        };\n\n        Path.prototype.toString = function toString (digits) {\n            var output = '';\n\n            var segments = this.segments;\n            var length = segments.length;\n            if (length > 0) {\n                var parts = [];\n                var print = printPoints(digits);\n                var currentType;\n\n                for (var i = 1; i < length; i++) {\n                    var type = segmentType(segments[i - 1], segments[i]);\n                    if (type !== currentType) {\n                        currentType = type;\n                        parts.push(type);\n                    }\n\n                    if (type === 'L') {\n                        parts.push(print(segments[i].anchor()));\n                    } else {\n                        parts.push(print(\n                            segments[i - 1].controlOut(), segments[i].controlIn(), segments[i].anchor()\n                        ));\n                    }\n                }\n\n                output = 'M' + print(segments[0].anchor()) + SPACE + parts.join(SPACE);\n                if (this.options.closed) {\n                    output += 'Z';\n                }\n            }\n\n            return output;\n        };\n\n        Path.prototype._containsPoint = function _containsPoint (point$$1) {\n            var segments = this.segments;\n            var length = segments.length;\n            var intersectionsCount = 0;\n            var previous, current;\n\n            for (var idx = 1; idx < length; idx++) {\n                previous = segments[idx - 1];\n                current = segments[idx];\n                intersectionsCount += previous._intersectionsTo(current, point$$1);\n            }\n\n            if (this.options.closed || !segments[0].anchor().equals(segments[length - 1].anchor())) {\n                intersectionsCount += lineIntersectionsCount(segments[0].anchor(), segments[length - 1].anchor(), point$$1);\n            }\n\n            return intersectionsCount % 2 !== 0;\n        };\n\n        Path.prototype._isOnPath = function _isOnPath (point$$1, width) {\n            var segments = this.segments;\n            var length = segments.length;\n            var pathWidth = width || this.options.stroke.width;\n\n            if (length > 1) {\n                if (segments[0]._isOnPathTo(segments[1], point$$1, pathWidth, 'start')) {\n                    return true;\n                }\n\n                for (var idx = 2; idx <= length - 2; idx++) {\n                    if (segments[idx - 1]._isOnPathTo(segments[idx], point$$1, pathWidth)) {\n                        return true;\n                    }\n                }\n\n                if (segments[length - 2]._isOnPathTo(segments[length - 1], point$$1, pathWidth, 'end')) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        Path.prototype._bbox = function _bbox (matrix) {\n            var segments = this.segments;\n            var length = segments.length;\n            var boundingBox;\n\n            if (length === 1) {\n                var anchor = segments[0].anchor().transformCopy(matrix);\n                boundingBox = new Rect(anchor, Size.ZERO);\n            } else if (length > 0) {\n                for (var i = 1; i < length; i++) {\n                    var segmentBox = segments[i - 1].bboxTo(segments[i], matrix);\n                    if (boundingBox) {\n                        boundingBox = Rect.union(boundingBox, segmentBox);\n                    } else {\n                        boundingBox = segmentBox;\n                    }\n                }\n            }\n\n            return boundingBox;\n        };\n\n        Path.parse = function parse (str, options) {\n            return MultiPath.parse(str, options);\n        };\n\n        Path.fromRect = function fromRect (rect, options) {\n            var path = new Path(options);\n            var ref = rect.cornerRadius;\n            var rx = ref[0];\n            var ry = ref[1];\n\n            if (rx === 0 && ry === 0) {\n                path.moveTo(rect.topLeft())\n                    .lineTo(rect.topRight())\n                    .lineTo(rect.bottomRight())\n                    .lineTo(rect.bottomLeft())\n                    .close();\n            } else {\n                var origin = rect.origin;\n                var x = origin.x;\n                var y = origin.y;\n                var width = rect.width();\n                var height = rect.height();\n                rx = limitValue(rx, 0, width / 2);\n                ry = limitValue(ry, 0, height / 2);\n\n                path.moveTo(x + rx, y)\n                    .lineTo(x + width - rx, y)\n                    .arcTo([ x + width, y + ry ], rx, ry, false)\n                    .lineTo(x + width, y + height - ry)\n                    .arcTo([ x + width - rx, y + height ], rx, ry, false)\n                    .lineTo(x + rx, y + height)\n                    .arcTo([ x, y + height - ry ], rx, ry, false)\n                    .lineTo(x, y + ry)\n                    .arcTo([ x + rx, y ], rx, ry, false);\n            }\n\n            return path;\n        };\n\n        Path.fromPoints = function fromPoints (points, options) {\n            if (points) {\n                var path = new Path(options);\n\n                for (var i = 0; i < points.length; i++) {\n                    var point$$1 = Point.create(points[i]);\n                    if (point$$1) {\n                        if (i === 0) {\n                            path.moveTo(point$$1);\n                        } else {\n                            path.lineTo(point$$1);\n                        }\n                    }\n                }\n\n                return path;\n            }\n        };\n\n        Path.curveFromPoints = function curveFromPoints (points, options) {\n            if (points) {\n                var segments = pointsToCurve(points);\n                var path = new Path(options);\n                path.segments.push.apply(path.segments, segments);\n\n                return path;\n            }\n        };\n\n        Path.fromArc = function fromArc (arc, options) {\n            var path = new Path(options);\n            var startAngle = arc.startAngle;\n            var start = arc.pointAt(startAngle);\n            path.moveTo(start.x, start.y);\n            path.arc(startAngle, arc.endAngle, arc.radiusX, arc.radiusY, arc.anticlockwise);\n            return path;\n        };\n\n        Object.defineProperties( Path.prototype, prototypeAccessors );\n\n        return Path;\n    }(paintable(measurable(Element$1))));\n\n    var MultiPath = (function (superclass) {\n        function MultiPath(options) {\n            superclass.call(this, options);\n            this.paths = new GeometryElementsArray();\n            this.paths.addObserver(this);\n\n            if (!defined(this.options.stroke)) {\n                this.stroke('#000');\n            }\n        }\n\n        extendStatic(MultiPath, superclass);\n        MultiPath.prototype = Object.create( superclass && superclass.prototype );\n        MultiPath.prototype.constructor = MultiPath;\n        MultiPath.fn = MultiPath.prototype;\n        MultiPath.fn.init = MultiPath.fn.constructor;\n\n        var prototypeAccessors$1 = { nodeType: {} };\n\n        MultiPath.parse = function parse (str, options) {\n            var instance = new MultiPath(options);\n            return parsePath(instance, str);\n        };\n\n        MultiPath.prototype.toString = function toString (digits) {\n            var paths = this.paths;\n            var output = '';\n\n            if (paths.length > 0) {\n                var result = [];\n\n                for (var i = 0; i < paths.length; i++) {\n                    result.push(paths[i].toString(digits));\n                }\n\n                output = result.join(SPACE);\n            }\n\n            return output;\n        };\n\n        prototypeAccessors$1.nodeType.get = function () {\n            return 'MultiPath';\n        };\n\n        MultiPath.prototype.moveTo = function moveTo (x, y) {\n            var path = new Path();\n            path.moveTo(x, y);\n\n            this.paths.push(path);\n\n            return this;\n        };\n\n        MultiPath.prototype.lineTo = function lineTo (x, y) {\n            if (this.paths.length > 0) {\n                last(this.paths).lineTo(x, y);\n            }\n\n            return this;\n        };\n\n        MultiPath.prototype.curveTo = function curveTo (controlOut, controlIn, point$$1) {\n            if (this.paths.length > 0) {\n                last(this.paths).curveTo(controlOut, controlIn, point$$1);\n            }\n\n            return this;\n        };\n\n        MultiPath.prototype.arc = function arc (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\n            if (this.paths.length > 0) {\n                last(this.paths).arc(startAngle, endAngle, radiusX, radiusY, anticlockwise);\n            }\n\n            return this;\n        };\n\n        MultiPath.prototype.arcTo = function arcTo (end, rx, ry, largeArc, swipe, rotation) {\n            if (this.paths.length > 0) {\n                last(this.paths).arcTo(end, rx, ry, largeArc, swipe, rotation);\n            }\n\n            return this;\n        };\n\n        MultiPath.prototype.close = function close () {\n            if (this.paths.length > 0) {\n                last(this.paths).close();\n            }\n\n            return this;\n        };\n\n        MultiPath.prototype._bbox = function _bbox (matrix) {\n            return elementsBoundingBox(this.paths, true, matrix);\n        };\n\n        MultiPath.prototype.rawBBox = function rawBBox () {\n            return elementsBoundingBox(this.paths, false);\n        };\n\n        MultiPath.prototype._containsPoint = function _containsPoint (point$$1) {\n            var paths = this.paths;\n\n            for (var idx = 0; idx < paths.length; idx++) {\n                if (paths[idx]._containsPoint(point$$1)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        MultiPath.prototype._isOnPath = function _isOnPath (point$$1) {\n            var paths = this.paths;\n            var width = this.options.stroke.width;\n\n            for (var idx = 0; idx < paths.length; idx++) {\n                if (paths[idx]._isOnPath(point$$1, width)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        MultiPath.prototype._clippedBBox = function _clippedBBox (transformation) {\n            return elementsClippedBoundingBox(this.paths, this.currentTransform(transformation));\n        };\n\n        Object.defineProperties( MultiPath.prototype, prototypeAccessors$1 );\n\n        return MultiPath;\n    }(paintable(measurable(Element$1))));\n\n    var DEFAULT_STROKE$1 = \"#000\";\n\n    var Arc = (function (superclass) {\n        function Arc(geometry, options) {\n            if (geometry === void 0) { geometry = new Arc$2(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.geometry(geometry);\n\n            if (!defined(this.options.stroke)) {\n                this.stroke(DEFAULT_STROKE$1);\n            }\n        }\n\n        extendStatic(Arc, superclass);\n        Arc.prototype = Object.create( superclass && superclass.prototype );\n        Arc.prototype.constructor = Arc;\n        Arc.fn = Arc.prototype;\n        Arc.fn.init = Arc.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Arc\";\n        };\n\n        Arc.prototype._bbox = function _bbox (matrix) {\n            return this._geometry.bbox(matrix);\n        };\n\n        Arc.prototype.rawBBox = function rawBBox () {\n            return this.geometry().bbox();\n        };\n\n        Arc.prototype.toPath = function toPath () {\n            var path = new Path();\n            var curvePoints = this.geometry().curvePoints();\n\n            if (curvePoints.length > 0) {\n                path.moveTo(curvePoints[0].x, curvePoints[0].y);\n\n                for (var i = 1; i < curvePoints.length; i += 3) {\n                    path.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\n                }\n            }\n\n            return path;\n        };\n\n        Arc.prototype._containsPoint = function _containsPoint (point) {\n            return this.geometry().containsPoint(point);\n        };\n\n        Arc.prototype._isOnPath = function _isOnPath (point) {\n            return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n        };\n\n        Object.defineProperties( Arc.prototype, prototypeAccessors );\n\n        return Arc;\n    }(paintable(measurable(withGeometry(Element$1)))));\n\n    var DEFAULT_FONT = \"12px sans-serif\";\n    var DEFAULT_FILL = \"#000\";\n\n    var Text = (function (superclass) {\n        function Text(content, position, options) {\n            if (position === void 0) { position = new Point(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.content(content);\n            this.position(position);\n\n            if (!this.options.font) {\n                this.options.font = DEFAULT_FONT;\n            }\n\n            if (!defined(this.options.fill)) {\n                this.fill(DEFAULT_FILL);\n            }\n        }\n\n        extendStatic(Text, superclass);\n        Text.prototype = Object.create( superclass && superclass.prototype );\n        Text.prototype.constructor = Text;\n        Text.fn = Text.prototype;\n        Text.fn.init = Text.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Text\";\n        };\n\n        Text.prototype.content = function content (value) {\n            if (defined(value)) {\n                this.options.set(\"content\", value);\n                return this;\n            }\n\n            return this.options.get(\"content\");\n        };\n\n        Text.prototype.measure = function measure () {\n            var metrics = kendoUtil.measureText(this.content(), {\n                font: this.options.get(\"font\")\n            });\n\n            return metrics;\n        };\n\n        Text.prototype.rect = function rect () {\n            var size = this.measure();\n            var pos = this.position().clone();\n            return new Rect(pos, [ size.width, size.height ]);\n        };\n\n        Text.prototype.bbox = function bbox (transformation) {\n            var combinedMatrix = toMatrix(this.currentTransform(transformation));\n            return this.rect().bbox(combinedMatrix);\n        };\n\n        Text.prototype.rawBBox = function rawBBox () {\n            return this.rect().bbox();\n        };\n\n        Text.prototype._containsPoint = function _containsPoint (point) {\n            return this.rect().containsPoint(point);\n        };\n\n        Object.defineProperties( Text.prototype, prototypeAccessors );\n\n        return Text;\n    }(paintable(withPoints(Element$1, [ \"position\" ]))));\n\n    var Image$1 = (function (superclass) {\n        function Image(src, rect, options) {\n            if (rect === void 0) { rect = new Rect(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.src(src);\n            this.rect(rect);\n        }\n\n        extendStatic(Image, superclass);\n        Image.prototype = Object.create( superclass && superclass.prototype );\n        Image.prototype.constructor = Image;\n        Image.fn = Image.prototype;\n        Image.fn.init = Image.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Image\";\n        };\n\n        Image.prototype.src = function src (value) {\n            if (defined(value)) {\n                this.options.set(\"src\", value);\n                return this;\n            }\n\n            return this.options.get(\"src\");\n        };\n\n        Image.prototype.bbox = function bbox (transformation) {\n            var combinedMatrix = toMatrix(this.currentTransform(transformation));\n            return this._rect.bbox(combinedMatrix);\n        };\n\n        Image.prototype.rawBBox = function rawBBox () {\n            return this._rect.bbox();\n        };\n\n        Image.prototype._containsPoint = function _containsPoint (point) {\n            return this._rect.containsPoint(point);\n        };\n\n        Image.prototype._hasFill = function _hasFill () {\n            return this.src();\n        };\n\n        Object.defineProperties( Image.prototype, prototypeAccessors );\n\n        return Image;\n    }(withGeometry(Element$1, [ \"rect\" ])));\n\n    var traversable = function (TBase, childrenField) { return (\n        (function (TBase) {\n            function anonymous () {\n                TBase.apply(this, arguments);\n            }\n\n            extendStatic(anonymous, TBase);\n            anonymous.prototype = Object.create( TBase && TBase.prototype );\n            anonymous.prototype.constructor = anonymous;\n            anonymous.fn = anonymous.prototype;\n            anonymous.fn.init = anonymous.fn.constructor;\n\n            anonymous.prototype.traverse = function traverse (callback) {\n                var children = this[childrenField];\n\n                for (var i = 0; i < children.length; i++) {\n                    var child = children[i];\n\n                    if (child.traverse) {\n                        child.traverse(callback);\n                    } else {\n                        callback(child);\n                    }\n                }\n\n                return this;\n            };\n\n            return anonymous;\n        }(TBase))\n    ); };\n\n    var Group = (function (superclass) {\n        function Group(options) {\n            superclass.call(this, options);\n            this.children = [];\n        }\n\n        extendStatic(Group, superclass);\n        Group.prototype = Object.create( superclass && superclass.prototype );\n        Group.prototype.constructor = Group;\n        Group.fn = Group.prototype;\n        Group.fn.init = Group.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Group\";\n        };\n\n        Group.prototype.childrenChange = function childrenChange (action, items, index) {\n            this.trigger(\"childrenChange\",{\n                action: action,\n                items: items,\n                index: index\n            });\n        };\n\n        Group.prototype.append = function append$1 () {\n            append$1$1(this.children, arguments);\n            this._reparent(arguments, this);\n\n            this.childrenChange(\"add\", arguments);\n\n            return this;\n        };\n\n        Group.prototype.insert = function insert (index, element) {\n            this.children.splice(index, 0, element);\n            element.parent = this;\n\n            this.childrenChange(\"add\", [ element ], index);\n\n            return this;\n        };\n\n        Group.prototype.insertAt = function insertAt (element, index) {\n            return this.insert(index, element);\n        };\n\n        Group.prototype.remove = function remove (element) {\n            var index = this.children.indexOf(element);\n            if (index >= 0) {\n                this.children.splice(index, 1);\n                element.parent = null;\n                this.childrenChange(\"remove\", [ element ], index);\n            }\n\n            return this;\n        };\n\n        Group.prototype.removeAt = function removeAt (index) {\n            if (0 <= index && index < this.children.length) {\n                var element = this.children[index];\n                this.children.splice(index, 1);\n                element.parent = null;\n                this.childrenChange(\"remove\", [ element ], index);\n            }\n\n            return this;\n        };\n\n        Group.prototype.clear = function clear () {\n            var items = this.children;\n            this.children = [];\n            this._reparent(items, null);\n\n            this.childrenChange(\"remove\", items, 0);\n\n            return this;\n        };\n\n        Group.prototype.bbox = function bbox (transformation) {\n            return elementsBoundingBox(this.children, true, this.currentTransform(transformation));\n        };\n\n        Group.prototype.rawBBox = function rawBBox () {\n            return elementsBoundingBox(this.children, false);\n        };\n\n        Group.prototype._clippedBBox = function _clippedBBox (transformation) {\n            return elementsClippedBoundingBox(this.children, this.currentTransform(transformation));\n        };\n\n        Group.prototype.currentTransform = function currentTransform (transformation) {\n            return Element$1.prototype.currentTransform.call(this, transformation) || null;\n        };\n\n        Group.prototype.containsPoint = function containsPoint (point, parentTransform) {\n            if (this.visible()) {\n                var children = this.children;\n                var transform = this.currentTransform(parentTransform);\n                for (var idx = 0; idx < children.length; idx++) {\n                    if (children[idx].containsPoint(point, transform)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n\n        Group.prototype._reparent = function _reparent (elements, newParent) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < elements.length; i++) {\n                var child = elements[i];\n                var parent = child.parent;\n                if (parent && parent !== this$1$1 && parent.remove) {\n                    parent.remove(child);\n                }\n\n                child.parent = newParent;\n            }\n        };\n\n        Object.defineProperties( Group.prototype, prototypeAccessors );\n\n        return Group;\n    }(traversable(Element$1, \"children\")));\n\n    function translateToPoint(point, bbox, element) {\n        var transofrm = element.transform() || transform$1();\n        var matrix = transofrm.matrix();\n        matrix.e += point.x - bbox.origin.x;\n        matrix.f += point.y - bbox.origin.y;\n\n        transofrm.matrix(matrix);\n        element.transform(transofrm);\n    }\n\n    function alignStart(size, rect, align, axis, sizeField) {\n        var start;\n        if (align === \"start\") {\n            start = rect.origin[axis];\n        } else if (align === \"end\") {\n            start = rect.origin[axis] + rect.size[sizeField] - size;\n        } else {\n            start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n        }\n\n        return start;\n    }\n\n    function alignStartReverse(size, rect, align, axis, sizeField) {\n        var start;\n        if (align === \"start\") {\n            start = rect.origin[axis] + rect.size[sizeField] - size;\n        } else if (align === \"end\") {\n            start = rect.origin[axis];\n        } else {\n            start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\n        }\n\n        return start;\n    }\n\n    var DEFAULT_OPTIONS = {\n        alignContent: \"start\",\n        justifyContent: \"start\",\n        alignItems: \"start\",\n        spacing: 0,\n        orientation: \"horizontal\",\n        lineSpacing: 0,\n        wrap: true,\n        revers: false\n    };\n\n    var forEach = function (elements, callback) {\n        elements.forEach(callback);\n    };\n\n    var forEachReverse = function (elements, callback) {\n        var length = elements.length;\n\n        for (var idx = length - 1; idx >= 0; idx--) {\n            callback(elements[idx], idx);\n        }\n    };\n\n    var Layout = (function (Group$$1) {\n        function Layout(rect, options) {\n            Group$$1.call(this, $.extend({}, DEFAULT_OPTIONS, options));\n            this._rect = rect;\n            this._fieldMap = {};\n        }\n\n        extendStatic(Layout, Group$$1);\n        Layout.prototype = Object.create( Group$$1 && Group$$1.prototype );\n        Layout.prototype.constructor = Layout;\n        Layout.fn = Layout.prototype;\n        Layout.fn.init = Layout.fn.constructor;\n\n        Layout.prototype.rect = function rect (value) {\n            if (value) {\n                this._rect = value;\n                return this;\n            }\n\n            return this._rect;\n        };\n\n        Layout.prototype._initMap = function _initMap () {\n            var options = this.options;\n            var fieldMap = this._fieldMap;\n            if (options.orientation === \"horizontal\") {\n                fieldMap.sizeField = \"width\";\n                fieldMap.groupsSizeField = \"height\";\n                fieldMap.groupAxis = \"x\";\n                fieldMap.groupsAxis = \"y\";\n            } else {\n                fieldMap.sizeField = \"height\";\n                fieldMap.groupsSizeField = \"width\";\n                fieldMap.groupAxis = \"y\";\n                fieldMap.groupsAxis = \"x\";\n            }\n\n            if (options.reverse) {\n                this.forEach = forEachReverse;\n                this.justifyAlign = alignStartReverse;\n            } else {\n                this.forEach = forEach;\n                this.justifyAlign = alignStart;\n            }\n        };\n\n        Layout.prototype.reflow = function reflow () {\n            var this$1$1 = this;\n\n            if (!this._rect || this.children.length === 0) {\n                return;\n            }\n            this._initMap();\n\n            if (this.options.transform) {\n                this.transform(null);\n            }\n\n            var options = this.options;\n            var rect = this._rect;\n            var ref = this._initGroups();\n            var groups = ref.groups;\n            var groupsSize = ref.groupsSize;\n            var ref$1 = this._fieldMap;\n            var sizeField = ref$1.sizeField;\n            var groupsSizeField = ref$1.groupsSizeField;\n            var groupAxis = ref$1.groupAxis;\n            var groupsAxis = ref$1.groupsAxis;\n            var groupOrigin = new Point();\n            var elementOrigin = new Point();\n            var size = new Size();\n            var groupStart = alignStart(groupsSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n            var elementStart, group, groupBox;\n\n            var arrangeElements = function (bbox, idx) {\n                var element = group.elements[idx];\n\n                elementOrigin[groupAxis] = elementStart;\n                elementOrigin[groupsAxis] = alignStart(bbox.size[groupsSizeField], groupBox, options.alignItems, groupsAxis, groupsSizeField);\n                translateToPoint(elementOrigin, bbox, element);\n                elementStart += bbox.size[sizeField] + options.spacing;\n            };\n\n            for (var groupIdx = 0; groupIdx < groups.length; groupIdx++) {\n                group = groups[groupIdx];\n                groupOrigin[groupAxis] = elementStart = this$1$1.justifyAlign(group.size, rect, options.justifyContent, groupAxis, sizeField);\n                groupOrigin[groupsAxis] = groupStart;\n                size[sizeField] = group.size;\n                size[groupsSizeField] = group.lineSize;\n                groupBox = new Rect(groupOrigin, size);\n                this$1$1.forEach(group.bboxes, arrangeElements);\n\n                groupStart += group.lineSize + options.lineSpacing;\n            }\n\n            if (!options.wrap && group.size > rect.size[sizeField]) {\n                var scale = rect.size[sizeField] / groupBox.size[sizeField];\n                var scaledStart = groupBox.topLeft().scale(scale, scale);\n                var scaledSize = groupBox.size[groupsSizeField] * scale;\n                var newStart = alignStart(scaledSize, rect, options.alignContent, groupsAxis, groupsSizeField);\n                var transform = transform$1();\n                if (groupAxis === \"x\") {\n                    transform.translate(rect.origin.x - scaledStart.x, newStart - scaledStart.y);\n                } else {\n                    transform.translate(newStart - scaledStart.x, rect.origin.y - scaledStart.y);\n                }\n                transform.scale(scale, scale);\n\n                this.transform(transform);\n            }\n        };\n\n        Layout.prototype._initGroups = function _initGroups () {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var lineSpacing = options.lineSpacing;\n            var wrap = options.wrap;\n            var spacing = options.spacing;\n            var sizeField = this._fieldMap.sizeField;\n            var group = this._newGroup();\n            var groups = [];\n            var addGroup = function() {\n                groups.push(group);\n                groupsSize += group.lineSize + lineSpacing;\n            };\n            var groupsSize = -lineSpacing;\n\n            for (var idx = 0; idx < children.length; idx++) {\n                var element = children[idx];\n                var bbox = children[idx].clippedBBox();\n                if (element.visible() && bbox) {\n                    if (wrap && group.size + bbox.size[sizeField] + spacing > this$1$1._rect.size[sizeField]) {\n                        if (group.bboxes.length === 0) {\n                            this$1$1._addToGroup(group, bbox, element);\n                            addGroup();\n                            group = this$1$1._newGroup();\n                        } else {\n                            addGroup();\n                            group = this$1$1._newGroup();\n                            this$1$1._addToGroup(group, bbox, element);\n                        }\n                    } else {\n                        this$1$1._addToGroup(group, bbox, element);\n                    }\n                }\n            }\n\n            if (group.bboxes.length) {\n                addGroup();\n            }\n\n            return {\n                groups: groups,\n                groupsSize: groupsSize\n            };\n        };\n\n        Layout.prototype._addToGroup = function _addToGroup (group, bbox, element) {\n            group.size += bbox.size[this._fieldMap.sizeField] + this.options.spacing;\n            group.lineSize = Math.max(bbox.size[this._fieldMap.groupsSizeField], group.lineSize);\n            group.bboxes.push(bbox);\n            group.elements.push(element);\n        };\n\n        Layout.prototype._newGroup = function _newGroup () {\n            return {\n                lineSize: 0,\n                size: -this.options.spacing,\n                bboxes: [],\n                elements: []\n            };\n        };\n\n        return Layout;\n    }(Group));\n\n    var Rect$2 = (function (superclass) {\n        function Rect$$1(geometry, options) {\n            if (geometry === void 0) { geometry = new Rect(); }\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.geometry(geometry);\n\n            if (!defined(this.options.stroke)) {\n                this.stroke(\"#000\");\n            }\n        }\n\n        extendStatic(Rect$$1, superclass);\n        Rect$$1.prototype = Object.create( superclass && superclass.prototype );\n        Rect$$1.prototype.constructor = Rect$$1;\n        Rect$$1.fn = Rect$$1.prototype;\n        Rect$$1.fn.init = Rect$$1.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Rect\";\n        };\n\n        Rect$$1.prototype._bbox = function _bbox (matrix) {\n            return this._geometry.bbox(matrix);\n        };\n\n        Rect$$1.prototype.rawBBox = function rawBBox () {\n            return this._geometry.bbox();\n        };\n\n        Rect$$1.prototype._containsPoint = function _containsPoint (point) {\n            return this._geometry.containsPoint(point);\n        };\n\n        Rect$$1.prototype._isOnPath = function _isOnPath (point) {\n            return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\n        };\n\n        Object.defineProperties( Rect$$1.prototype, prototypeAccessors );\n\n        return Rect$$1;\n    }(paintable(measurable(withGeometry(Element$1)))));\n\n    function alignElements(elements, rect, alignment, axis, sizeField) {\n        for (var idx = 0; idx < elements.length; idx++) {\n            var bbox = elements[idx].clippedBBox();\n            if (bbox) {\n                var point = bbox.origin.clone();\n                point[axis] = alignStart(bbox.size[sizeField], rect, alignment || \"start\", axis, sizeField);\n                translateToPoint(point, bbox, elements[idx]);\n            }\n        }\n    }\n\n    function align(elements, rect, alignment) {\n        alignElements(elements, rect, alignment, \"x\", \"width\");\n    }\n\n    function vAlign(elements, rect, alignment) {\n        alignElements(elements, rect, alignment, \"y\", \"height\");\n    }\n\n    function stackElements(elements, stackAxis, otherAxis, sizeField) {\n        if (elements.length > 1) {\n            var origin = new Point();\n            var previousBBox = elements[0].bbox;\n\n            for (var idx = 1; idx < elements.length; idx++) {\n                var element = elements[idx].element;\n                var bbox = elements[idx].bbox;\n                origin[stackAxis] = previousBBox.origin[stackAxis] + previousBBox.size[sizeField];\n                origin[otherAxis] = bbox.origin[otherAxis];\n                translateToPoint(origin, bbox, element);\n                bbox.origin[stackAxis] = origin[stackAxis];\n                previousBBox = bbox;\n            }\n        }\n    }\n\n    function createStackElements(elements) {\n        var stackElements = [];\n\n        for (var idx = 0; idx < elements.length; idx++) {\n            var element = elements[idx];\n            var bbox = element.clippedBBox();\n            if (bbox) {\n                stackElements.push({\n                    element: element,\n                    bbox: bbox\n                });\n            }\n        }\n\n        return stackElements;\n    }\n\n    function stack(elements) {\n        stackElements(createStackElements(elements), \"x\", \"y\", \"width\");\n    }\n\n    function vStack(elements) {\n        stackElements(createStackElements(elements), \"y\", \"x\", \"height\");\n    }\n\n    function getStacks(elements, rect, sizeField) {\n        var maxSize = rect.size[sizeField];\n        var stacks = [];\n        var stack = [];\n        var stackSize = 0;\n        var element, bbox;\n\n        var addElementToStack = function() {\n            stack.push({\n                element: element,\n                bbox: bbox\n            });\n        };\n\n        for (var idx = 0; idx < elements.length; idx++) {\n            element = elements[idx];\n\n            bbox = element.clippedBBox();\n            if (bbox) {\n                var size = bbox.size[sizeField];\n                if (stackSize + size > maxSize) {\n                    if (stack.length) {\n                        stacks.push(stack);\n                        stack = [];\n                        addElementToStack();\n                        stackSize = size;\n                    } else {\n                        addElementToStack();\n                        stacks.push(stack);\n                        stack = [];\n                        stackSize = 0;\n                    }\n                } else {\n                    addElementToStack();\n                    stackSize += size;\n                }\n            }\n        }\n\n        if (stack.length) {\n            stacks.push(stack);\n        }\n\n        return stacks;\n    }\n\n    function wrapElements(elements, rect, axis, otherAxis, sizeField) {\n        var stacks = getStacks(elements, rect, sizeField);\n        var origin = rect.origin.clone();\n        var result = [];\n\n        for (var idx = 0; idx < stacks.length; idx++) {\n            var stack = stacks[idx];\n            var startElement = stack[0];\n            origin[otherAxis] = startElement.bbox.origin[otherAxis];\n            translateToPoint(origin, startElement.bbox, startElement.element);\n            startElement.bbox.origin[axis] = origin[axis];\n            stackElements(stack, axis, otherAxis, sizeField);\n            result.push([]);\n            for (var elementIdx = 0; elementIdx < stack.length; elementIdx++) {\n                result[idx].push(stack[elementIdx].element);\n            }\n        }\n        return result;\n    }\n\n    function wrap(elements, rect) {\n        return wrapElements(elements, rect, \"x\", \"y\", \"width\");\n    }\n\n    function vWrap(elements, rect) {\n        return wrapElements(elements, rect, \"y\", \"x\", \"height\");\n    }\n\n    function fit(element, rect) {\n        var bbox = element.clippedBBox();\n        if (bbox) {\n            var elementSize = bbox.size;\n            var rectSize = rect.size;\n            if (rectSize.width < elementSize.width || rectSize.height < elementSize.height) {\n                var scale = Math.min(rectSize.width / elementSize.width, rectSize.height / elementSize.height);\n                var transform = element.transform() || transform$1();\n                transform.scale(scale, scale);\n                element.transform(transform);\n            }\n        }\n    }\n\n    var StopsArray = (function (ElementsArray$$1) {\n        function StopsArray () {\n            ElementsArray$$1.apply(this, arguments);\n        }\n\n        extendStatic(StopsArray, ElementsArray$$1);\n        StopsArray.prototype = Object.create( ElementsArray$$1 && ElementsArray$$1.prototype );\n        StopsArray.prototype.constructor = StopsArray;\n        StopsArray.fn = StopsArray.prototype;\n        StopsArray.fn.init = StopsArray.fn.constructor;\n\n        StopsArray.prototype._change = function _change () {\n            this.optionsChange({\n                field: \"stops\"\n            });\n        };\n\n        return StopsArray;\n    }(ElementsArray));\n\n    function optionsAccessor(name) {\n        return function(value) {\n            if (defined(value)) {\n                this.options.set(name, value);\n                return this;\n            }\n\n            return this.options.get(name);\n        };\n    }\n\n    function defineOptionsAccessors(fn, names) {\n        for (var i = 0; i < names.length; i++) {\n            fn[names[i]] = optionsAccessor(names[i]);\n        }\n    }\n\n    var withOptions = function (TBase, names) {\n        var result = (function (TBase) {\n            function result () {\n                TBase.apply(this, arguments);\n            }extendStatic(result, TBase);\n            result.prototype = Object.create( TBase && TBase.prototype );\n            result.prototype.constructor = result;\n            result.fn = result.prototype;\n            result.fn.init = result.fn.constructor;\n\n            return result;\n        }(TBase));\n        defineOptionsAccessors(result.prototype, names);\n\n        return result;\n    };\n\n    var options = [ \"offset\", \"color\", \"opacity\" ];\n\n    var GradientStop = (function (superclass) {\n        function GradientStop(offset, color, opacity) {\n            superclass.call(this);\n\n            this.options = new OptionsStore({\n                offset: offset,\n                color: color,\n                opacity: defined(opacity) ? opacity : 1\n            });\n\n            this.options.addObserver(this);\n        }\n\n        extendStatic(GradientStop, superclass);\n        GradientStop.prototype = Object.create( superclass && superclass.prototype );\n        GradientStop.prototype.constructor = GradientStop;\n        GradientStop.fn = GradientStop.prototype;\n        GradientStop.fn.init = GradientStop.fn.constructor;\n\n        GradientStop.create = function create (arg) {\n            if (defined(arg)) {\n                var stop;\n                if (arg instanceof GradientStop) {\n                    stop = arg;\n                } else if (arg.length > 1) {\n                    stop = new GradientStop(arg[0], arg[1], arg[2]);\n                } else {\n                    stop = new GradientStop(arg.offset, arg.color, arg.opacity);\n                }\n\n                return stop;\n            }\n        };\n\n        return GradientStop;\n    }(withOptions(HasObservers, options)));\n\n    var Gradient = (function (HasObservers$$1) {\n        function Gradient(options) {\n            if (options === void 0) { options = {}; }\n\n            HasObservers$$1.call(this);\n\n            this.stops = new StopsArray(this._createStops(options.stops));\n            this.stops.addObserver(this);\n            this._userSpace = options.userSpace;\n            this.id = definitionId();\n        }\n\n        extendStatic(Gradient, HasObservers$$1);\n        Gradient.prototype = Object.create( HasObservers$$1 && HasObservers$$1.prototype );\n        Gradient.prototype.constructor = Gradient;\n        Gradient.fn = Gradient.prototype;\n        Gradient.fn.init = Gradient.fn.constructor;\n\n        var prototypeAccessors = { nodeType: {} };\n\n        prototypeAccessors.nodeType.get = function () {\n            return \"Gradient\";\n        };\n\n        Gradient.prototype.userSpace = function userSpace (value) {\n            if (defined(value)) {\n                this._userSpace = value;\n                this.optionsChange();\n                return this;\n            }\n\n            return this._userSpace;\n        };\n\n        Gradient.prototype._createStops = function _createStops (stops) {\n            if (stops === void 0) { stops = []; }\n\n            var result = [];\n            for (var idx = 0; idx < stops.length; idx++) {\n                result.push(GradientStop.create(stops[idx]));\n            }\n\n            return result;\n        };\n\n        Gradient.prototype.addStop = function addStop (offset, color, opacity) {\n            this.stops.push(new GradientStop(offset, color, opacity));\n        };\n\n        Gradient.prototype.removeStop = function removeStop (stop) {\n            var index = this.stops.indexOf(stop);\n            if (index >= 0) {\n                this.stops.splice(index, 1);\n            }\n        };\n\n        Gradient.prototype.optionsChange = function optionsChange (e) {\n            this.trigger(\"optionsChange\", {\n                field: \"gradient\" + (e ? \".\" + e.field : \"\"),\n                value: this\n            });\n        };\n\n        Gradient.prototype.geometryChange = function geometryChange () {\n            this.optionsChange();\n        };\n\n        Object.defineProperties( Gradient.prototype, prototypeAccessors );\n\n        return Gradient;\n    }(HasObservers));\n\n    var points$1 = [ \"start\", \"end\" ];\n\n    var LinearGradient = (function (superclass) {\n        function LinearGradient(options) {\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.start(options.start || new Point());\n            this.end(options.end || new Point(1, 0));\n        }\n\n        extendStatic(LinearGradient, superclass);\n        LinearGradient.prototype = Object.create( superclass && superclass.prototype );\n        LinearGradient.prototype.constructor = LinearGradient;\n        LinearGradient.fn = LinearGradient.prototype;\n        LinearGradient.fn.init = LinearGradient.fn.constructor;\n\n        return LinearGradient;\n    }(withPoints(Gradient, points$1)));\n\n    var RadialGradient = (function (superclass) {\n        function RadialGradient(options) {\n            if (options === void 0) { options = {}; }\n\n            superclass.call(this, options);\n\n            this.center(options.center || new Point());\n            this._radius = defined(options.radius) ? options.radius : 1;\n            this._fallbackFill = options.fallbackFill;\n        }\n\n        extendStatic(RadialGradient, superclass);\n        RadialGradient.prototype = Object.create( superclass && superclass.prototype );\n        RadialGradient.prototype.constructor = RadialGradient;\n        RadialGradient.fn = RadialGradient.prototype;\n        RadialGradient.fn.init = RadialGradient.fn.constructor;\n\n        RadialGradient.prototype.radius = function radius (value) {\n            if (defined(value)) {\n                this._radius = value;\n                this.geometryChange();\n                return this;\n            }\n\n            return this._radius;\n        };\n\n        RadialGradient.prototype.fallbackFill = function fallbackFill (value) {\n            if (defined(value)) {\n                this._fallbackFill = value;\n                this.optionsChange();\n                return this;\n            }\n\n            return this._fallbackFill;\n        };\n\n        return RadialGradient;\n    }(withPoints(Gradient, [ \"center\" ])));\n\n    function swing(position) {\n        return 0.5 - Math.cos(position * Math.PI) / 2;\n    }\n\n    function linear(position) {\n        return position;\n    }\n\n    function easeOutElastic(position, time, start, diff) {\n        var s = 1.70158,\n            p = 0,\n            a = diff;\n\n        if (position === 0) {\n            return start;\n        }\n\n        if (position === 1) {\n            return start + diff;\n        }\n\n        if (!p) {\n            p = 0.5;\n        }\n\n        if (a < Math.abs(diff)) {\n            a = diff;\n            s = p / 4;\n        } else {\n            s = p / (2 * Math.PI) * Math.asin(diff / a);\n        }\n\n        return a * Math.pow(2, -10 * position) *\n               Math.sin((Number(position) - s) * (1.1 * Math.PI) / p) + diff + start;\n    }\n\n    var easingFunctions = {\n    \tswing: swing,\n    \tlinear: linear,\n    \teaseOutElastic: easeOutElastic\n    };\n\n    var instance;\n\n    var AnimationFactory = (function (Class$$1) {\n        function AnimationFactory() {\n            Class$$1.call(this);\n\n            this._items = [];\n        }\n\n        extendStatic(AnimationFactory, Class$$1);\n        AnimationFactory.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        AnimationFactory.prototype.constructor = AnimationFactory;\n        AnimationFactory.fn = AnimationFactory.prototype;\n        AnimationFactory.fn.init = AnimationFactory.fn.constructor;\n\n        var staticAccessors = { current: {} };\n\n        staticAccessors.current.get = function () {\n            if (!instance) {\n                instance = new AnimationFactory();\n            }\n\n            return instance;\n        };\n\n        AnimationFactory.prototype.register = function register (name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        };\n\n        AnimationFactory.prototype.create = function create (element, options) {\n            var items = this._items;\n            var match;\n\n            if (options && options.type) {\n                var type = options.type.toLowerCase();\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].name.toLowerCase() === type) {\n                        match = items[i];\n                        break;\n                    }\n                }\n            }\n\n            if (match) {\n                return new match.type(element, options);\n            }\n        };\n\n        Object.defineProperties( AnimationFactory, staticAccessors );\n\n        return AnimationFactory;\n    }(Class));\n\n    var Animation = (function (Class$$1) {\n        function Animation(element, options) {\n            Class$$1.call(this);\n\n            this.options = $.extend({}, this.options, options);\n            this.element = element;\n        }\n\n        extendStatic(Animation, Class$$1);\n        Animation.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        Animation.prototype.constructor = Animation;\n        Animation.fn = Animation.prototype;\n        Animation.fn.init = Animation.fn.constructor;\n\n        var prototypeAccessors = { options: {} };\n\n        Animation.create = function create (type, element, options) {\n            return AnimationFactory.current.create(type, element, options);\n        };\n\n        prototypeAccessors.options.get = function () {\n            return this._options || {\n                duration: 500,\n                easing: \"swing\"\n            };\n        };\n\n        prototypeAccessors.options.set = function (value) {\n            this._options = value;\n        };\n\n        Animation.prototype.setup = function setup () {};\n        Animation.prototype.step = function step () {};\n\n        Animation.prototype.play = function play () {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var duration = options.duration;\n            var delay = options.delay; if (delay === void 0) { delay = 0; }\n            var easing = easingFunctions[options.easing];\n            var start = now() + delay;\n            var finish = start + duration;\n\n            if (duration === 0) {\n                this.step(1);\n                this.abort();\n            } else {\n                setTimeout(function () {\n                    var loop = function () {\n                        if (this$1$1._stopped) {\n                            return;\n                        }\n\n                        var wallTime = now();\n\n                        var time = limitValue(wallTime - start, 0, duration);\n                        var position = time / duration;\n                        var easingPosition = easing(position, time, 0, 1, duration);\n\n                        this$1$1.step(easingPosition);\n\n                        if (wallTime < finish) {\n                            kendo.animationFrame(loop);\n                        } else {\n                            this$1$1.abort();\n                        }\n                    };\n\n                    loop();\n                }, delay);\n            }\n        };\n\n        Animation.prototype.abort = function abort () {\n            this._stopped = true;\n        };\n\n        Animation.prototype.destroy = function destroy () {\n            this.abort();\n        };\n\n        Object.defineProperties( Animation.prototype, prototypeAccessors );\n\n        return Animation;\n    }(Class));\n\n    var instance$1;\n\n    var PathParser = (function (Class$$1) {\n        function PathParser () {\n            Class$$1.apply(this, arguments);\n        }\n\n        extendStatic(PathParser, Class$$1);\n        PathParser.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        PathParser.prototype.constructor = PathParser;\n        PathParser.fn = PathParser.prototype;\n        PathParser.fn.init = PathParser.fn.constructor;\n\n        var staticAccessors = { current: {} };\n\n        staticAccessors.current.get = function () {\n            if (!instance$1) {\n                instance$1 = new PathParser();\n            }\n\n            return instance$1;\n        };\n\n        PathParser.prototype.parse = function parse (str, options) {\n            var multiPath = new MultiPath(options);\n            return parsePath(multiPath, str);\n        };\n\n        Object.defineProperties( PathParser, staticAccessors );\n\n        return PathParser;\n    }(Class));\n\n    var BaseNode = (function (Class$$1) {\n        function BaseNode(srcElement) {\n            Class$$1.call(this);\n\n            this.childNodes = [];\n            this.parent = null;\n\n            if (srcElement) {\n                this.srcElement = srcElement;\n                this.observe();\n            }\n        }\n\n        extendStatic(BaseNode, Class$$1);\n        BaseNode.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        BaseNode.prototype.constructor = BaseNode;\n        BaseNode.fn = BaseNode.prototype;\n        BaseNode.fn.init = BaseNode.fn.constructor;\n\n        BaseNode.prototype.destroy = function destroy () {\n            var this$1$1 = this;\n\n            if (this.srcElement) {\n                this.srcElement.removeObserver(this);\n            }\n\n            var children = this.childNodes;\n            for (var i = 0; i < children.length; i++) {\n                this$1$1.childNodes[i].destroy();\n            }\n\n            this.parent = null;\n        };\n\n        BaseNode.prototype.load = function load () {};\n\n        BaseNode.prototype.observe = function observe () {\n            if (this.srcElement) {\n                this.srcElement.addObserver(this);\n            }\n        };\n\n        BaseNode.prototype.append = function append (node) {\n            this.childNodes.push(node);\n            node.parent = this;\n        };\n\n        BaseNode.prototype.insertAt = function insertAt (node, pos) {\n            this.childNodes.splice(pos, 0, node);\n            node.parent = this;\n        };\n\n        BaseNode.prototype.remove = function remove (index, count) {\n            var this$1$1 = this;\n\n            var end = index + count;\n            for (var i = index; i < end; i++) {\n                this$1$1.childNodes[i].removeSelf();\n            }\n            this.childNodes.splice(index, count);\n        };\n\n        BaseNode.prototype.removeSelf = function removeSelf () {\n            this.clear();\n            this.destroy();\n        };\n\n        BaseNode.prototype.clear = function clear () {\n            this.remove(0, this.childNodes.length);\n        };\n\n        BaseNode.prototype.invalidate = function invalidate () {\n            if (this.parent) {\n                this.parent.invalidate();\n            }\n        };\n\n        BaseNode.prototype.geometryChange = function geometryChange () {\n            this.invalidate();\n        };\n\n        BaseNode.prototype.optionsChange = function optionsChange () {\n            this.invalidate();\n        };\n\n        BaseNode.prototype.childrenChange = function childrenChange (e) {\n            if (e.action === \"add\") {\n                this.load(e.items, e.index);\n            } else if (e.action === \"remove\") {\n                this.remove(e.index, e.items.length);\n            }\n\n            this.invalidate();\n        };\n\n        return BaseNode;\n    }(Class));\n\n    var events = [\n        \"click\",\n        \"mouseenter\",\n        \"mouseleave\",\n        \"mousemove\",\n        \"resize\"\n    ];\n\n    var Surface$2 = (function (Observable$$1) {\n        function Surface(element, options) {\n            Observable$$1.call(this);\n\n            this.options = $.extend({}, options);\n            this.element = element;\n            this.element._kendoExportVisual = this.exportVisual.bind(this);\n\n            this._click = this._handler(\"click\");\n            this._mouseenter = this._handler(\"mouseenter\");\n            this._mouseleave = this._handler(\"mouseleave\");\n            this._mousemove = this._handler(\"mousemove\");\n\n            this._visual = new Group();\n\n            elementSize(element, this.options);\n\n            this.bind(events, this.options);\n\n            this._enableTracking();\n        }\n\n        extendStatic(Surface, Observable$$1);\n        Surface.prototype = Object.create( Observable$$1 && Observable$$1.prototype );\n        Surface.prototype.constructor = Surface;\n        Surface.fn = Surface.prototype;\n        Surface.fn.init = Surface.fn.constructor;\n\n        Surface.prototype.draw = function draw (element) {\n            this._visual.children.push(element);\n        };\n\n        Surface.prototype.clear = function clear () {\n            this._visual.children = [];\n        };\n\n        Surface.prototype.destroy = function destroy () {\n            this._visual = null;\n            this.element._kendoExportVisual = null;\n            this.unbind();\n        };\n\n        Surface.prototype.eventTarget = function eventTarget (e) {\n            var this$1$1 = this;\n\n            var domNode = eventElement(e);\n            var node;\n\n            while (!node && domNode) {\n                node = domNode._kendoNode;\n                if (domNode === this$1$1.element) {\n                    break;\n                }\n\n                domNode = domNode.parentElement;\n            }\n\n            if (node) {\n                return node.srcElement;\n            }\n        };\n\n        Surface.prototype.exportVisual = function exportVisual () {\n            return this._visual;\n        };\n\n        Surface.prototype.getSize = function getSize () {\n            return elementSize(this.element);\n        };\n\n        Surface.prototype.currentSize = function currentSize (size) {\n            if (size) {\n                this._size = size;\n            } else {\n                return this._size;\n            }\n        };\n\n        Surface.prototype.setSize = function setSize (size) {\n            elementSize(this.element, size);\n\n            this.currentSize(size);\n            this._resize();\n        };\n\n        Surface.prototype.resize = function resize (force) {\n            var size = this.getSize();\n            var currentSize = this.currentSize();\n\n            if (force || (size.width > 0 || size.height > 0) && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this.currentSize(size);\n                this._resize(size, force);\n                this.trigger(\"resize\", size);\n            }\n        };\n\n        Surface.prototype.size = function size (value) {\n            if (!value) {\n                return this.getSize();\n            }\n\n            this.setSize(value);\n        };\n\n        Surface.prototype.suspendTracking = function suspendTracking () {\n            this._suspendedTracking = true;\n        };\n\n        Surface.prototype.resumeTracking = function resumeTracking () {\n            this._suspendedTracking = false;\n        };\n\n        Surface.prototype._enableTracking = function _enableTracking () {};\n\n        Surface.prototype._resize = function _resize () {};\n\n        Surface.prototype._handler = function _handler (eventName) {\n            var this$1$1 = this;\n\n            return function (e) {\n                var node = this$1$1.eventTarget(e);\n                if (node && !this$1$1._suspendedTracking) {\n                    this$1$1.trigger(eventName, {\n                        element: node,\n                        originalEvent: e,\n                        type: eventName\n                    });\n                }\n            };\n        };\n\n        Surface.prototype._elementOffset = function _elementOffset () {\n            var element = this.element;\n            var padding = elementPadding(element);\n            var ref = elementOffset(element);\n            var left = ref.left;\n            var top = ref.top;\n\n            return {\n                left: left + padding.left,\n                top: top + padding.top\n            };\n        };\n\n        Surface.prototype._surfacePoint = function _surfacePoint (e) {\n            var offset = this._elementOffset();\n            var coord = eventCoordinates(e);\n            var x = coord.x - offset.left;\n            var y = coord.y - offset.top;\n\n            var inverseTransform = elementScale(this.element).invert();\n            var point = new Point(\n                x,\n                y\n            ).transform(inverseTransform);\n\n            return point;\n        };\n\n        return Surface;\n    }(kendo.Observable));\n\n    function renderAttr(name, value) {\n        return (defined(value) && value !== null) ? (\" \" + name + \"=\\\"\" + value + \"\\\" \") : \"\";\n    }\n\n    function renderAllAttr(attrs) {\n        var output = \"\";\n        for (var i = 0; i < attrs.length; i++) {\n            output += renderAttr(attrs[i][0], attrs[i][1]);\n        }\n\n        return output;\n    }\n\n    function renderStyle(attrs) {\n        var output = \"\";\n        for (var i = 0; i < attrs.length; i++) {\n            var value = attrs[i][1];\n            if (defined(value)) {\n                output += attrs[i][0] + \":\" + value + \";\";\n            }\n        }\n\n        if (output !== \"\") {\n            return output;\n        }\n    }\n\n    var NODE_MAP = {};\n\n    var SVG_NS = \"http://www.w3.org/2000/svg\";\n    var NONE = \"none\";\n    var POINT_DIGITS = 3;\n\n    var applyStyle = function (styleString, element) { return styleString.split(';').filter(function (s) { return s !== ''; }).forEach(function (s) {\n            var parts = s.split(':');\n            element.style[parts[0].trim()] = parts[1].trim();\n        }); };\n\n    var styleAttr = 'data-style';\n    var replaceStyleAttr = function (html) { return html.replace(/\\sstyle=/g, ' ' + styleAttr + '='); };\n    var restoreStyleAttr = function (container) {\n        Array.from(container.querySelectorAll('[' + styleAttr +']')).forEach(function (element) {\n            var styleString = element.getAttribute(styleAttr);\n            element.removeAttribute(styleAttr);\n            applyStyle(styleString, element);\n        });\n    };\n\n    var renderSVG = function(container, svg) {\n        container.innerHTML = replaceStyleAttr(svg);\n        restoreStyleAttr(container);\n    };\n\n    if (typeof document !== \"undefined\") {\n        var testFragment = \"<svg xmlns='\" + SVG_NS + \"'></svg>\";\n        var testContainer = document.createElement(\"div\");\n        var hasParser = typeof DOMParser !== \"undefined\";\n\n        testContainer.innerHTML = testFragment;\n\n        if (hasParser && testContainer.firstChild.namespaceURI !== SVG_NS) {\n            renderSVG = function(container, svg) {\n                var parser = new DOMParser();\n                var chartDoc = parser.parseFromString(replaceStyleAttr(svg), \"text/xml\");\n                restoreStyleAttr(chartDoc);\n                var importedDoc = document.adoptNode(chartDoc.documentElement);\n\n                container.innerHTML = \"\";\n                container.appendChild(importedDoc);\n            };\n        }\n    }\n\n    var renderSVG$1 = renderSVG;\n\n    var TRANSFORM = \"transform\";\n    var DefinitionMap = {\n        clip: \"clip-path\",\n        fill: \"fill\"\n    };\n\n    function isDefinition(type, value) {\n        return type === \"clip\" || (type === \"fill\" && (!value || value.nodeType === \"Gradient\"));\n    }\n\n    function baseUrl() {\n        var base = document.getElementsByTagName(\"base\")[0];\n        var href = document.location.href;\n        var url = \"\";\n\n        if (base && !(supportBrowser || {}).msie) {\n            var hashIndex = href.indexOf(\"#\");\n            if (hashIndex !== -1) {\n                href = href.substring(0, hashIndex);\n            }\n\n            url = href;\n        }\n\n        return url;\n    }\n\n    var Node = (function (BaseNode$$1) {\n        function Node(srcElement, options) {\n            BaseNode$$1.call(this, srcElement);\n            this.definitions = {};\n\n            this.options = options;\n        }\n\n        extendStatic(Node, BaseNode$$1);\n        Node.prototype = Object.create( BaseNode$$1 && BaseNode$$1.prototype );\n        Node.prototype.constructor = Node;\n        Node.fn = Node.prototype;\n        Node.fn.init = Node.fn.constructor;\n\n        Node.prototype.destroy = function destroy () {\n            if (this.element) {\n                this.element._kendoNode = null;\n                this.element = null;\n            }\n\n            this.clearDefinitions();\n            BaseNode$$1.prototype.destroy.call(this);\n        };\n\n        Node.prototype.load = function load (elements, pos) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < elements.length; i++) {\n                var srcElement = elements[i];\n                var children = srcElement.children;\n\n                var childNode = new NODE_MAP[srcElement.nodeType](srcElement, this$1$1.options);\n\n                if (defined(pos)) {\n                    this$1$1.insertAt(childNode, pos);\n                } else {\n                    this$1$1.append(childNode);\n                }\n\n                childNode.createDefinitions();\n\n                if (children && children.length > 0) {\n                    childNode.load(children);\n                }\n\n                var element = this$1$1.element;\n                if (element) {\n                    childNode.attachTo(element, pos);\n                }\n            }\n        };\n\n        Node.prototype.root = function root () {\n            var root = this;\n\n            while (root.parent) {\n                root = root.parent;\n            }\n\n            return root;\n        };\n\n        Node.prototype.attachTo = function attachTo (domElement, pos) {\n            var container = document.createElement(\"div\");\n            renderSVG$1(container,\n                \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" +\n                    this.render() +\n                \"</svg>\"\n            );\n\n            var element = container.firstChild.firstChild;\n            if (element) {\n                if (defined(pos)) {\n                    domElement.insertBefore(element, domElement.childNodes[pos] || null);\n                } else {\n                    domElement.appendChild(element);\n                }\n                this.setElement(element);\n            }\n        };\n\n        Node.prototype.setElement = function setElement (element) {\n            if (this.element) {\n                this.element._kendoNode = null;\n            }\n\n            this.element = element;\n            this.element._kendoNode = this;\n\n            var nodes = this.childNodes;\n            for (var i = 0; i < nodes.length; i++) {\n                var childElement = element.childNodes[i];\n                nodes[i].setElement(childElement);\n            }\n        };\n\n        Node.prototype.clear = function clear () {\n            this.clearDefinitions();\n\n            if (this.element) {\n                this.element.innerHTML = \"\";\n            }\n\n            var children = this.childNodes;\n            for (var i = 0; i < children.length; i++) {\n                children[i].destroy();\n            }\n\n            this.childNodes = [];\n        };\n\n        Node.prototype.removeSelf = function removeSelf () {\n            if (this.element) {\n                var parentNode = this.element.parentNode;\n                if (parentNode) {\n                    parentNode.removeChild(this.element);\n                }\n                this.element = null;\n            }\n\n            BaseNode$$1.prototype.removeSelf.call(this);\n        };\n\n        Node.prototype.template = function template () {\n            return this.renderChildren();\n        };\n\n        Node.prototype.render = function render () {\n            return this.template();\n        };\n\n        Node.prototype.renderChildren = function renderChildren () {\n            var nodes = this.childNodes;\n            var output = \"\";\n\n            for (var i = 0; i < nodes.length; i++) {\n                output += nodes[i].render();\n            }\n\n            return output;\n        };\n\n        Node.prototype.optionsChange = function optionsChange (e) {\n            var field = e.field;\n            var value = e.value;\n\n            if (field === \"visible\") {\n                this.css(\"display\", value ? \"\" : NONE);\n            } else if (DefinitionMap[field] && isDefinition(field, value)) {\n                this.updateDefinition(field, value);\n            } else if (field === \"opacity\") {\n                this.attr(\"opacity\", value);\n            } else if (field === \"cursor\") {\n                this.css(\"cursor\", value);\n            } else if (field === \"id\") {\n                if (value) {\n                    this.attr(\"id\", value);\n                } else {\n                    this.removeAttr(\"id\");\n                }\n            }\n\n            BaseNode$$1.prototype.optionsChange.call(this, e);\n        };\n\n        Node.prototype.attr = function attr (name, value) {\n            if (this.element) {\n                this.element.setAttribute(name, value);\n            }\n        };\n\n        Node.prototype.allAttr = function allAttr (attrs) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < attrs.length; i++) {\n                this$1$1.attr(attrs[i][0], attrs[i][1]);\n            }\n        };\n\n        Node.prototype.css = function css (name, value) {\n            if (this.element) {\n                this.element.style[name] = value;\n            }\n        };\n\n        Node.prototype.allCss = function allCss (styles) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < styles.length; i++) {\n                this$1$1.css(styles[i][0], styles[i][1]);\n            }\n        };\n\n        Node.prototype.removeAttr = function removeAttr (name) {\n            if (this.element) {\n                this.element.removeAttribute(name);\n            }\n        };\n\n        Node.prototype.mapTransform = function mapTransform (transform) {\n            var attrs = [];\n            if (transform) {\n                attrs.push([\n                    TRANSFORM,\n                    \"matrix(\" + transform.matrix().toString(6) + \")\"\n                ]);\n            }\n\n            return attrs;\n        };\n\n        Node.prototype.renderTransform = function renderTransform () {\n            return renderAllAttr(\n                this.mapTransform(this.srcElement.transform())\n            );\n        };\n\n        Node.prototype.transformChange = function transformChange (value) {\n            if (value) {\n                this.allAttr(this.mapTransform(value));\n            } else {\n                this.removeAttr(TRANSFORM);\n            }\n        };\n\n        Node.prototype.mapStyle = function mapStyle () {\n            var options = this.srcElement.options;\n            var style = [ [ \"cursor\", options.cursor ] ];\n\n            if (options.visible === false) {\n                style.push([ \"display\", NONE ]);\n            }\n\n            return style;\n        };\n\n        Node.prototype.renderStyle = function renderStyle$1 () {\n            return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n        };\n\n        Node.prototype.renderOpacity = function renderOpacity () {\n            return renderAttr(\"opacity\", this.srcElement.options.opacity);\n        };\n\n        Node.prototype.renderId = function renderId () {\n            return renderAttr(\"id\", this.srcElement.options.id);\n        };\n\n        Node.prototype.createDefinitions = function createDefinitions () {\n            var srcElement = this.srcElement;\n            var definitions = this.definitions;\n            if (srcElement) {\n                var options = srcElement.options;\n                var hasDefinitions;\n\n                for (var field in DefinitionMap) {\n                    var definition = options.get(field);\n                    if (definition && isDefinition(field, definition)) {\n                        definitions[field] = definition;\n                        hasDefinitions = true;\n                    }\n                }\n                if (hasDefinitions) {\n                    this.definitionChange({\n                        action: \"add\",\n                        definitions: definitions\n                    });\n                }\n            }\n        };\n\n        Node.prototype.definitionChange = function definitionChange (e) {\n            if (this.parent) {\n                this.parent.definitionChange(e);\n            }\n        };\n\n        Node.prototype.updateDefinition = function updateDefinition (type, value) {\n            var definitions = this.definitions;\n            var current = definitions[type];\n            var attr = DefinitionMap[type];\n            var definition = {};\n            if (current) {\n                definition[type] = current;\n                this.definitionChange({\n                    action: \"remove\",\n                    definitions: definition\n                });\n                delete definitions[type];\n            }\n\n            if (!value) {\n                if (current) {\n                    this.removeAttr(attr);\n                }\n            } else {\n                definition[type] = value;\n                this.definitionChange({\n                    action: \"add\",\n                    definitions: definition\n                });\n                definitions[type] = value;\n                this.attr(attr, this.refUrl(value.id));\n            }\n        };\n\n        Node.prototype.clearDefinitions = function clearDefinitions () {\n            var definitions = this.definitions;\n\n            this.definitionChange({\n                action: \"remove\",\n                definitions: definitions\n            });\n            this.definitions = {};\n        };\n\n        Node.prototype.renderDefinitions = function renderDefinitions () {\n            return renderAllAttr(this.mapDefinitions());\n        };\n\n        Node.prototype.mapDefinitions = function mapDefinitions () {\n            var this$1$1 = this;\n\n            var definitions = this.definitions;\n            var attrs = [];\n\n            for (var field in definitions) {\n                attrs.push([ DefinitionMap[field], this$1$1.refUrl(definitions[field].id) ]);\n            }\n\n            return attrs;\n        };\n\n        Node.prototype.refUrl = function refUrl (id) {\n            var skipBaseHref = (this.options || {}).skipBaseHref;\n            var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n            var base = skipBaseHref ? '' : baseHref;\n            return (\"url(\" + base + \"#\" + id + \")\");\n        };\n\n        Node.prototype.baseUrl = function baseUrl$1 () {\n            return baseUrl();\n        };\n\n        return Node;\n    }(BaseNode));\n\n    var GradientStopNode = (function (Node$$1) {\n        function GradientStopNode () {\n            Node$$1.apply(this, arguments);\n        }\n\n        extendStatic(GradientStopNode, Node$$1);\n        GradientStopNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        GradientStopNode.prototype.constructor = GradientStopNode;\n        GradientStopNode.fn = GradientStopNode.prototype;\n        GradientStopNode.fn.init = GradientStopNode.fn.constructor;\n\n        GradientStopNode.prototype.template = function template () {\n            return (\"<stop \" + (this.renderOffset()) + \" \" + (this.renderStyle()) + \" />\");\n        };\n\n        GradientStopNode.prototype.renderOffset = function renderOffset () {\n            return renderAttr(\"offset\", this.srcElement.offset());\n        };\n\n        GradientStopNode.prototype.mapStyle = function mapStyle () {\n            var srcElement = this.srcElement;\n            return [\n                [ \"stop-color\", srcElement.color() ],\n                [ \"stop-opacity\", srcElement.opacity() ]\n            ];\n        };\n\n        GradientStopNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"offset\") {\n                this.attr(e.field, e.value);\n            } else if (e.field === \"color\" || e.field === \"opacity\") {\n                this.css(\"stop-\" + e.field, e.value);\n            }\n        };\n\n        return GradientStopNode;\n    }(Node));\n\n    var GradientNode = (function (Node$$1) {\n        function GradientNode(srcElement) {\n            Node$$1.call(this, srcElement);\n\n            this.id = srcElement.id;\n\n            this.loadStops();\n        }\n\n        extendStatic(GradientNode, Node$$1);\n        GradientNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        GradientNode.prototype.constructor = GradientNode;\n        GradientNode.fn = GradientNode.prototype;\n        GradientNode.fn.init = GradientNode.fn.constructor;\n\n        GradientNode.prototype.loadStops = function loadStops () {\n            var this$1$1 = this;\n\n            var stops = this.srcElement.stops;\n            var element = this.element;\n\n            for (var idx = 0; idx < stops.length; idx++) {\n                var stopNode = new GradientStopNode(stops[idx]);\n                this$1$1.append(stopNode);\n                if (element) {\n                    stopNode.attachTo(element);\n                }\n            }\n        };\n\n        GradientNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"gradient.stops\") {\n                BaseNode.prototype.clear.call(this);\n                this.loadStops();\n            } else if (e.field === \"gradient\") {\n                this.allAttr(this.mapCoordinates());\n            }\n        };\n\n        GradientNode.prototype.renderCoordinates = function renderCoordinates () {\n            return renderAllAttr(this.mapCoordinates());\n        };\n\n        GradientNode.prototype.mapSpace = function mapSpace () {\n            return [ \"gradientUnits\", this.srcElement.userSpace() ? \"userSpaceOnUse\" : \"objectBoundingBox\" ];\n        };\n\n        return GradientNode;\n    }(Node));\n\n    var LinearGradientNode = (function (GradientNode$$1) {\n        function LinearGradientNode () {\n            GradientNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(LinearGradientNode, GradientNode$$1);\n        LinearGradientNode.prototype = Object.create( GradientNode$$1 && GradientNode$$1.prototype );\n        LinearGradientNode.prototype.constructor = LinearGradientNode;\n        LinearGradientNode.fn = LinearGradientNode.prototype;\n        LinearGradientNode.fn.init = LinearGradientNode.fn.constructor;\n\n        LinearGradientNode.prototype.template = function template () {\n            return (\"<linearGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</linearGradient>\");\n        };\n\n        LinearGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n            var srcElement = this.srcElement;\n            var start = srcElement.start();\n            var end = srcElement.end();\n            var attrs = [\n                [ \"x1\", start.x ],\n                [ \"y1\", start.y ],\n                [ \"x2\", end.x ],\n                [ \"y2\", end.y ],\n                this.mapSpace()\n            ];\n\n            return attrs;\n        };\n\n        return LinearGradientNode;\n    }(GradientNode));\n\n    var RadialGradientNode = (function (GradientNode$$1) {\n        function RadialGradientNode () {\n            GradientNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(RadialGradientNode, GradientNode$$1);\n        RadialGradientNode.prototype = Object.create( GradientNode$$1 && GradientNode$$1.prototype );\n        RadialGradientNode.prototype.constructor = RadialGradientNode;\n        RadialGradientNode.fn = RadialGradientNode.prototype;\n        RadialGradientNode.fn.init = RadialGradientNode.fn.constructor;\n\n        RadialGradientNode.prototype.template = function template () {\n            return (\"<radialGradient id='\" + (this.id) + \"' \" + (this.renderCoordinates()) + \">\" + (this.renderChildren()) + \"</radialGradient>\");\n        };\n\n        RadialGradientNode.prototype.mapCoordinates = function mapCoordinates () {\n            var srcElement = this.srcElement;\n            var center = srcElement.center();\n            var radius = srcElement.radius();\n            var attrs = [\n                [ \"cx\", center.x ],\n                [ \"cy\", center.y ],\n                [ \"r\", radius ],\n                this.mapSpace()\n            ];\n            return attrs;\n        };\n\n        return RadialGradientNode;\n    }(GradientNode));\n\n    var ClipNode = (function (Node$$1) {\n        function ClipNode(srcElement) {\n            Node$$1.call(this);\n\n            this.srcElement = srcElement;\n            this.id = srcElement.id;\n\n            this.load([ srcElement ]);\n        }\n\n        extendStatic(ClipNode, Node$$1);\n        ClipNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        ClipNode.prototype.constructor = ClipNode;\n        ClipNode.fn = ClipNode.prototype;\n        ClipNode.fn.init = ClipNode.fn.constructor;\n\n        ClipNode.prototype.template = function template () {\n            return (\"<clipPath id='\" + (this.id) + \"'>\" + (this.renderChildren()) + \"</clipPath>\");\n        };\n\n        return ClipNode;\n    }(Node));\n\n    var DefinitionNode = (function (Node$$1) {\n        function DefinitionNode() {\n            Node$$1.call(this);\n            this.definitionMap = {};\n        }\n\n        extendStatic(DefinitionNode, Node$$1);\n        DefinitionNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        DefinitionNode.prototype.constructor = DefinitionNode;\n        DefinitionNode.fn = DefinitionNode.prototype;\n        DefinitionNode.fn.init = DefinitionNode.fn.constructor;\n\n        DefinitionNode.prototype.attachTo = function attachTo (domElement) {\n            this.element = domElement;\n        };\n\n        DefinitionNode.prototype.template = function template () {\n            return (\"<defs>\" + (this.renderChildren()) + \"</defs>\");\n        };\n\n        DefinitionNode.prototype.definitionChange = function definitionChange (e) {\n            var definitions = e.definitions;\n            var action = e.action;\n\n            if (action === \"add\") {\n                this.addDefinitions(definitions);\n            } else if (action === \"remove\") {\n                this.removeDefinitions(definitions);\n            }\n        };\n\n        DefinitionNode.prototype.createDefinition = function createDefinition (type, item) {\n            var nodeType;\n            if (type === \"clip\") {\n                nodeType = ClipNode;\n            } else if (type === \"fill\") {\n                if (item instanceof LinearGradient) {\n                    nodeType = LinearGradientNode;\n                } else if (item instanceof RadialGradient) {\n                    nodeType = RadialGradientNode;\n                }\n            }\n            return new nodeType(item);\n        };\n\n        DefinitionNode.prototype.addDefinitions = function addDefinitions (definitions) {\n            var this$1$1 = this;\n\n            for (var field in definitions) {\n                this$1$1.addDefinition(field, definitions[field]);\n            }\n        };\n\n        DefinitionNode.prototype.addDefinition = function addDefinition (type, srcElement) {\n            var ref = this;\n            var element = ref.element;\n            var definitionMap = ref.definitionMap;\n            var id = srcElement.id;\n            var mapItem = definitionMap[id];\n            if (!mapItem) {\n                var node = this.createDefinition(type, srcElement);\n                definitionMap[id] = {\n                    element: node,\n                    count: 1\n                };\n                this.append(node);\n                if (element) {\n                    node.attachTo(this.element);\n                }\n            } else {\n                mapItem.count++;\n            }\n        };\n\n        DefinitionNode.prototype.removeDefinitions = function removeDefinitions (definitions) {\n            var this$1$1 = this;\n\n            for (var field in definitions) {\n                this$1$1.removeDefinition(definitions[field]);\n            }\n        };\n\n        DefinitionNode.prototype.removeDefinition = function removeDefinition (srcElement) {\n            var definitionMap = this.definitionMap;\n            var id = srcElement.id;\n            var mapItem = definitionMap[id];\n\n            if (mapItem) {\n                mapItem.count--;\n                if (mapItem.count === 0) {\n                    this.remove(this.childNodes.indexOf(mapItem.element), 1);\n                    delete definitionMap[id];\n                }\n            }\n        };\n\n        return DefinitionNode;\n    }(Node));\n\n    var RootNode = (function (Node$$1) {\n        function RootNode(options) {\n            Node$$1.call(this);\n            this.options = options;\n            this.defs = new DefinitionNode();\n        }\n\n        extendStatic(RootNode, Node$$1);\n        RootNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        RootNode.prototype.constructor = RootNode;\n        RootNode.fn = RootNode.prototype;\n        RootNode.fn.init = RootNode.fn.constructor;\n\n        RootNode.prototype.attachTo = function attachTo (domElement) {\n            this.element = domElement;\n            this.defs.attachTo(domElement.firstElementChild);\n        };\n\n        RootNode.prototype.clear = function clear () {\n            BaseNode.prototype.clear.call(this);\n        };\n\n        RootNode.prototype.template = function template () {\n            return this.defs.render() + this.renderChildren();\n        };\n\n        RootNode.prototype.definitionChange = function definitionChange (e) {\n            this.defs.definitionChange(e);\n        };\n\n        return RootNode;\n    }(Node));\n\n    var DASH_ARRAYS = {\n        dot: [ 1.5, 3.5 ],\n        dash: [ 4, 3.5 ],\n        longdash: [ 8, 3.5 ],\n        dashdot: [ 3.5, 3.5, 1.5, 3.5 ],\n        longdashdot: [ 8, 3.5, 1.5, 3.5 ],\n        longdashdotdot: [ 8, 3.5, 1.5, 3.5, 1.5, 3.5 ]\n    };\n\n    var SOLID = \"solid\";\n    var BUTT = \"butt\";\n\n    var ATTRIBUTE_MAP = {\n        \"fill.opacity\": \"fill-opacity\",\n        \"stroke.color\": \"stroke\",\n        \"stroke.width\": \"stroke-width\",\n        \"stroke.opacity\": \"stroke-opacity\"\n    };\n\n    var PathNode = (function (Node$$1) {\n        function PathNode () {\n            Node$$1.apply(this, arguments);\n        }\n\n        extendStatic(PathNode, Node$$1);\n        PathNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        PathNode.prototype.constructor = PathNode;\n        PathNode.fn = PathNode.prototype;\n        PathNode.fn.init = PathNode.fn.constructor;\n\n        PathNode.prototype.geometryChange = function geometryChange () {\n            this.attr(\"d\", this.renderData());\n            this.invalidate();\n        };\n\n        PathNode.prototype.optionsChange = function optionsChange (e) {\n            switch (e.field) {\n            case \"fill\":\n                if (e.value) {\n                    this.allAttr(this.mapFill(e.value));\n                } else {\n                    this.removeAttr(\"fill\");\n                }\n                break;\n\n            case \"fill.color\":\n                this.allAttr(this.mapFill({ color: e.value }));\n                break;\n\n            case \"stroke\":\n                if (e.value) {\n                    this.allAttr(this.mapStroke(e.value));\n                } else {\n                    this.removeAttr(\"stroke\");\n                }\n                break;\n\n            case \"transform\":\n                this.transformChange(e.value);\n                break;\n\n            default:\n                var name = ATTRIBUTE_MAP[e.field];\n                if (name) {\n                    this.attr(name, e.value);\n                }\n                break;\n            }\n\n            Node$$1.prototype.optionsChange.call(this, e);\n        };\n\n        PathNode.prototype.content = function content () {\n            if (this.element) {\n                this.element.textContent = this.srcElement.content();\n            }\n        };\n\n        PathNode.prototype.renderData = function renderData () {\n            return this.srcElement.toString(POINT_DIGITS) || undefined;\n        };\n\n        PathNode.prototype.mapStroke = function mapStroke (stroke) {\n            var attrs = [];\n\n            if (stroke && !isTransparent(stroke.color)) {\n                attrs.push([ \"stroke\", stroke.color ]);\n                attrs.push([ \"stroke-width\", stroke.width ]);\n                attrs.push([ \"stroke-linecap\", this.renderLinecap(stroke) ]);\n                attrs.push([ \"stroke-linejoin\", stroke.lineJoin ]);\n\n                if (defined(stroke.opacity)) {\n                    attrs.push([ \"stroke-opacity\", stroke.opacity ]);\n                }\n\n                if (defined(stroke.dashType)) {\n                    attrs.push([ \"stroke-dasharray\", this.renderDashType(stroke) ]);\n                }\n            } else {\n                attrs.push([ \"stroke\", NONE ]);\n            }\n\n            return attrs;\n        };\n\n        PathNode.prototype.renderStroke = function renderStroke () {\n            return renderAllAttr(\n                this.mapStroke(this.srcElement.options.stroke)\n            );\n        };\n\n        PathNode.prototype.renderDashType = function renderDashType (stroke) {\n            var dashType = stroke.dashType;\n            var width = stroke.width; if (width === void 0) { width = 1; }\n\n            if (dashType && dashType !== SOLID) {\n                var dashArray = DASH_ARRAYS[dashType.toLowerCase()];\n                var result = [];\n\n                for (var i = 0; i < dashArray.length; i++) {\n                    result.push(dashArray[i] * width);\n                }\n\n                return result.join(\" \");\n            }\n        };\n\n        PathNode.prototype.renderLinecap = function renderLinecap (stroke) {\n            var dashType = stroke.dashType;\n            var lineCap = stroke.lineCap;\n\n            return (dashType && dashType !== \"solid\") ? BUTT : lineCap;\n        };\n\n        PathNode.prototype.mapFill = function mapFill (fill) {\n            var attrs = [];\n            if (!(fill && fill.nodeType === \"Gradient\")) {\n                if (fill && !isTransparent(fill.color)) {\n                    attrs.push([ \"fill\", fill.color ]);\n\n                    if (defined(fill.opacity)) {\n                        attrs.push([ \"fill-opacity\", fill.opacity ]);\n                    }\n                } else {\n                    attrs.push([ \"fill\", NONE ]);\n                }\n            }\n\n            return attrs;\n        };\n\n        PathNode.prototype.renderFill = function renderFill () {\n            return renderAllAttr(\n                this.mapFill(this.srcElement.options.fill)\n            );\n        };\n\n        PathNode.prototype.template = function template () {\n            return \"<path \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" \" + (renderAttr('d', this.renderData())) +\n                    \"\" + (this.renderStroke()) + (this.renderFill()) + (this.renderDefinitions()) + (this.renderTransform()) + \"></path>\";\n        };\n\n        return PathNode;\n    }(Node));\n\n    var ArcNode = (function (PathNode$$1) {\n        function ArcNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(ArcNode, PathNode$$1);\n        ArcNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        ArcNode.prototype.constructor = ArcNode;\n        ArcNode.fn = ArcNode.prototype;\n        ArcNode.fn.init = ArcNode.fn.constructor;\n\n        ArcNode.prototype.renderData = function renderData () {\n            return this.srcElement.toPath().toString(POINT_DIGITS);\n        };\n\n        return ArcNode;\n    }(PathNode));\n\n    var CircleNode = (function (PathNode$$1) {\n        function CircleNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(CircleNode, PathNode$$1);\n        CircleNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        CircleNode.prototype.constructor = CircleNode;\n        CircleNode.fn = CircleNode.prototype;\n        CircleNode.fn.init = CircleNode.fn.constructor;\n\n        CircleNode.prototype.geometryChange = function geometryChange () {\n            var center = this.center();\n            this.attr(\"cx\", center.x);\n            this.attr(\"cy\", center.y);\n            this.attr(\"r\", this.radius());\n            this.invalidate();\n        };\n\n        CircleNode.prototype.center = function center () {\n            return this.srcElement.geometry().center;\n        };\n\n        CircleNode.prototype.radius = function radius () {\n            return this.srcElement.geometry().radius;\n        };\n\n        CircleNode.prototype.template = function template () {\n            return \"<circle \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                        \"cx='\" + (this.center().x) + \"' cy='\" + (this.center().y) + \"' r='\" + (this.radius()) + \"'\" +\n                        (this.renderStroke()) + \" \" + (this.renderFill()) + \" \" + (this.renderDefinitions()) +\n                        (this.renderTransform()) + \" ></circle>\";\n        };\n\n        return CircleNode;\n    }(PathNode));\n\n    var GroupNode = (function (Node$$1) {\n        function GroupNode () {\n            Node$$1.apply(this, arguments);\n        }\n\n        extendStatic(GroupNode, Node$$1);\n        GroupNode.prototype = Object.create( Node$$1 && Node$$1.prototype );\n        GroupNode.prototype.constructor = GroupNode;\n        GroupNode.fn = GroupNode.prototype;\n        GroupNode.fn.init = GroupNode.fn.constructor;\n\n        GroupNode.prototype.template = function template () {\n            return (\"<g\" + (this.renderId() + this.renderTransform() + this.renderStyle() + this.renderOpacity() + this.renderDefinitions()) + \">\" + (this.renderChildren()) + \"</g>\");\n        };\n\n        GroupNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"transform\") {\n                this.transformChange(e.value);\n            }\n\n            Node$$1.prototype.optionsChange.call(this, e);\n        };\n\n        return GroupNode;\n    }(Node));\n\n    var ImageNode = (function (PathNode$$1) {\n        function ImageNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(ImageNode, PathNode$$1);\n        ImageNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        ImageNode.prototype.constructor = ImageNode;\n        ImageNode.fn = ImageNode.prototype;\n        ImageNode.fn.init = ImageNode.fn.constructor;\n\n        ImageNode.prototype.geometryChange = function geometryChange () {\n            this.allAttr(this.mapPosition());\n            this.invalidate();\n        };\n\n        ImageNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"src\") {\n                this.allAttr(this.mapSource());\n            }\n\n            PathNode$$1.prototype.optionsChange.call(this, e);\n        };\n\n        ImageNode.prototype.mapPosition = function mapPosition () {\n            var rect = this.srcElement.rect();\n            var tl = rect.topLeft();\n\n            return [\n                [ \"x\", tl.x ],\n                [ \"y\", tl.y ],\n                [ \"width\", rect.width() + \"px\" ],\n                [ \"height\", rect.height() + \"px\" ]\n            ];\n        };\n\n        ImageNode.prototype.renderPosition = function renderPosition () {\n            return renderAllAttr(this.mapPosition());\n        };\n\n        ImageNode.prototype.mapSource = function mapSource (encode) {\n            var src = this.srcElement.src();\n\n            if (encode) {\n                src = kendo.htmlEncode(src);\n            }\n\n            return [ [ \"xlink:href\", src ] ];\n        };\n\n        ImageNode.prototype.renderSource = function renderSource () {\n            return renderAllAttr(this.mapSource(true));\n        };\n\n        ImageNode.prototype.template = function template () {\n            return \"<image preserveAspectRatio='none' \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderTransform()) + \" \" + (this.renderOpacity()) +\n                   (this.renderPosition()) + \" \" + (this.renderSource()) + \" \" + (this.renderDefinitions()) + \">\" +\n                   \"</image>\";\n        };\n\n        return ImageNode;\n    }(PathNode));\n\n    var MultiPathNode = (function (PathNode$$1) {\n        function MultiPathNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(MultiPathNode, PathNode$$1);\n        MultiPathNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        MultiPathNode.prototype.constructor = MultiPathNode;\n        MultiPathNode.fn = MultiPathNode.prototype;\n        MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n        MultiPathNode.prototype.renderData = function renderData () {\n            return this.srcElement.toString(POINT_DIGITS) || 'undefined';\n        };\n\n        return MultiPathNode;\n    }(PathNode));\n\n    var RectNode = (function (PathNode$$1) {\n        function RectNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(RectNode, PathNode$$1);\n        RectNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        RectNode.prototype.constructor = RectNode;\n        RectNode.fn = RectNode.prototype;\n        RectNode.fn.init = RectNode.fn.constructor;\n\n        RectNode.prototype.geometryChange = function geometryChange () {\n            var geometry = this.srcElement.geometry();\n            this.attr(\"x\", geometry.origin.x);\n            this.attr(\"y\", geometry.origin.y);\n            this.attr(\"width\", geometry.size.width);\n            this.attr(\"height\", geometry.size.height);\n            this.attr(\"rx\", geometry.cornerRadius[0]);\n            this.attr(\"ry\", geometry.cornerRadius[1]);\n            this.invalidate();\n        };\n\n        RectNode.prototype.size = function size () {\n            return this.srcElement.geometry().size;\n        };\n\n        RectNode.prototype.origin = function origin () {\n            return this.srcElement.geometry().origin;\n        };\n\n        RectNode.prototype.rx = function rx () {\n            return this.srcElement.geometry().cornerRadius[0];\n        };\n\n        RectNode.prototype.ry = function ry () {\n            return this.srcElement.geometry().cornerRadius[1];\n        };\n\n        RectNode.prototype.template = function template () {\n            return \"<rect \" + (this.renderId()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) + \" x='\" + (this.origin().x) + \"' y='\" + (this.origin().y) + \"' \" +\n                        \"rx='\" + (this.rx()) + \"' ry='\" + (this.ry()) + \"' \" +\n                        \"width='\" + (this.size().width) + \"' height='\" + (this.size().height) + \"' \" + (this.renderStroke()) + \" \" +\n                        (this.renderFill()) + \" \" + (this.renderDefinitions()) + \" \" + (this.renderTransform()) + \" />\";\n        };\n\n        return RectNode;\n    }(PathNode));\n\n    var ENTITY_REGEX = /&(?:[a-zA-Z]+|#\\d+);/g;\n\n    function decodeEntities(text) {\n        if (!text || typeof text !== \"string\" || !ENTITY_REGEX.test(text)) {\n            return text;\n        }\n\n        var element = decodeEntities._element;\n        ENTITY_REGEX.lastIndex = 0;\n\n        return text.replace(ENTITY_REGEX, function (match) {\n            element.innerHTML = match;\n\n            return element.textContent || element.innerText;\n        });\n    }\n\n    if (typeof document !== \"undefined\") {\n        decodeEntities._element = document.createElement(\"span\");\n    }\n\n    var TextNode = (function (PathNode$$1) {\n        function TextNode () {\n            PathNode$$1.apply(this, arguments);\n        }\n\n        extendStatic(TextNode, PathNode$$1);\n        TextNode.prototype = Object.create( PathNode$$1 && PathNode$$1.prototype );\n        TextNode.prototype.constructor = TextNode;\n        TextNode.fn = TextNode.prototype;\n        TextNode.fn.init = TextNode.fn.constructor;\n\n        TextNode.prototype.geometryChange = function geometryChange () {\n            var pos = this.pos();\n            this.attr(\"x\", pos.x);\n            this.attr(\"y\", pos.y);\n            this.invalidate();\n        };\n\n        TextNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"font\") {\n                this.attr(\"style\", renderStyle(this.mapStyle()));\n                this.geometryChange();\n            } else if (e.field === \"content\") {\n                PathNode$$1.prototype.content.call(this, this.srcElement.content());\n            }\n\n            PathNode$$1.prototype.optionsChange.call(this, e);\n        };\n\n        TextNode.prototype.mapStyle = function mapStyle (encode) {\n            var style = PathNode$$1.prototype.mapStyle.call(this, encode);\n            var font = this.srcElement.options.font;\n\n            if (encode) {\n                font = kendo.htmlEncode(font);\n            }\n\n            style.push([ \"font\", font ], [ \"white-space\", \"pre\" ]);\n\n            return style;\n        };\n\n        TextNode.prototype.pos = function pos () {\n            var pos = this.srcElement.position();\n            var size = this.srcElement.measure();\n            return pos.clone().setY(pos.y + size.baseline);\n        };\n\n        TextNode.prototype.renderContent = function renderContent () {\n            var content = this.srcElement.content();\n            content = decodeEntities(content);\n            content = kendo.htmlEncode(content);\n\n            return kendoUtil.normalizeText(content);\n        };\n\n        TextNode.prototype.renderTextAnchor = function renderTextAnchor () {\n            var anchor;\n\n            if ((this.options || {}).rtl && !(supportBrowser.msie || supportBrowser.edge)) {\n                anchor = 'end';\n            }\n\n            return renderAttr(\"text-anchor\", anchor);\n        };\n\n        TextNode.prototype.template = function template () {\n            return \"<text \" + (this.renderId()) + \" \" + (this.renderTextAnchor()) + \" \" + (this.renderStyle()) + \" \" + (this.renderOpacity()) +\n                        \"x='\" + (this.pos().x) + \"' y='\" + (this.pos().y) + \"' \" + (this.renderStroke()) + \" \" + (this.renderTransform()) + \" \" + (this.renderDefinitions()) +\n                        (this.renderFill()) + \">\" + (this.renderContent()) + \"</text>\";\n        };\n\n        return TextNode;\n    }(PathNode));\n\n    NODE_MAP.Arc = ArcNode;\n    NODE_MAP.Circle = CircleNode;\n    NODE_MAP.Group = GroupNode;\n    NODE_MAP.Image = ImageNode;\n    NODE_MAP.MultiPath = MultiPathNode;\n    NODE_MAP.Path = PathNode;\n    NODE_MAP.Rect = RectNode;\n    NODE_MAP.Text = TextNode;\n\n    var RTL = 'rtl';\n\n    function alignToScreen(element) {\n        var ctm;\n\n        try {\n            ctm = element.getScreenCTM ? element.getScreenCTM() : null;\n        } catch (e) { } // eslint-disable-line no-empty\n\n        if (ctm) {\n            var left = - ctm.e % 1;\n            var top = - ctm.f % 1;\n            var style = element.style;\n\n            if (left !== 0 || top !== 0) {\n                style.left = left + \"px\";\n                style.top = top + \"px\";\n            }\n        }\n    }\n\n    var Surface$3 = (function (BaseSurface) {\n        function Surface(element, options) {\n            BaseSurface.call(this, element, options);\n\n            this._root = new RootNode($.extend({\n                rtl: elementStyles(element, 'direction').direction === RTL\n            }, this.options));\n\n            renderSVG$1(this.element, this._template(''));\n\n            this._rootElement = this.element.firstElementChild;\n            this._rootElement.style.width = '100%';\n            this._rootElement.style.height = '100%';\n            this._rootElement.style.overflow = 'hidden';\n\n            alignToScreen(this._rootElement);\n\n            this._root.attachTo(this._rootElement);\n\n            bindEvents(this.element, {\n                click: this._click,\n                mouseover: this._mouseenter,\n                mouseout: this._mouseleave,\n                mousemove: this._mousemove\n            });\n\n            this.resize();\n        }\n\n        extendStatic(Surface, BaseSurface);\n        Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n        Surface.prototype.constructor = Surface;\n        Surface.fn = Surface.prototype;\n        Surface.fn.init = Surface.fn.constructor;\n\n        var prototypeAccessors = { type: {} };\n\n        prototypeAccessors.type.get = function () {\n            return \"svg\";\n        };\n\n        Surface.prototype.destroy = function destroy () {\n            if (this._root) {\n                this._root.destroy();\n                this._root = null;\n                this._rootElement = null;\n                unbindEvents(this.element, {\n                    click: this._click,\n                    mouseover: this._mouseenter,\n                    mouseout: this._mouseleave,\n                    mousemove: this._mousemove\n                });\n            }\n\n            BaseSurface.prototype.destroy.call(this);\n        };\n\n        Surface.prototype.translate = function translate (offset) {\n            var viewBox = (Math.round(offset.x)) + \" \" + (Math.round(offset.y)) + \" \" + (this._size.width) + \" \" + (this._size.height);\n\n            this._offset = offset;\n            this._rootElement.setAttribute(\"viewBox\", viewBox);\n        };\n\n        Surface.prototype.draw = function draw (element) {\n            BaseSurface.prototype.draw.call(this, element);\n            this._root.load([ element ]);\n        };\n\n        Surface.prototype.clear = function clear () {\n            BaseSurface.prototype.clear.call(this);\n            this._root.clear();\n        };\n\n        Surface.prototype.svg = function svg () {\n            return \"<?xml version='1.0' ?>\" + this._template();\n        };\n\n        Surface.prototype.exportVisual = function exportVisual () {\n            var ref = this;\n            var visual = ref._visual;\n            var offset = ref._offset;\n\n            if (offset) {\n                var wrap = new Group();\n                wrap.children.push(visual);\n\n                wrap.transform(\n                    transform$1().translate(-offset.x, -offset.y)\n                );\n\n                visual = wrap;\n            }\n\n            return visual;\n        };\n\n        Surface.prototype._resize = function _resize () {\n            if (this._offset) {\n                this.translate(this._offset);\n            }\n        };\n\n        Surface.prototype._template = function _template (svgStyles) {\n            var styles = typeof svgStyles === 'string' ? svgStyles :\n                \"style='width: 100%; height: 100%; overflow: hidden;' \";\n            return (\"<svg \" + styles + \"xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (this._root.render()) + \"</svg>\");\n        };\n\n        Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n        return Surface;\n    }(Surface$2));\n\n    var NODE_MAP$2 = {};\n\n    function renderPath(ctx, path) {\n        var segments = path.segments;\n\n        if (segments.length === 0) {\n            return;\n        }\n\n        var segment = segments[0];\n        var anchor = segment.anchor();\n        ctx.moveTo(anchor.x, anchor.y);\n\n        for (var i = 1; i < segments.length; i++) {\n            segment = segments[i];\n            anchor = segment.anchor();\n\n            var prevSeg = segments[i - 1];\n            var prevOut = prevSeg.controlOut();\n            var controlIn = segment.controlIn();\n\n            if (prevOut && controlIn) {\n                ctx.bezierCurveTo(prevOut.x, prevOut.y,\n                    controlIn.x, controlIn.y,\n                    anchor.x, anchor.y);\n            } else {\n                ctx.lineTo(anchor.x, anchor.y);\n            }\n        }\n\n        if (path.options.closed) {\n            ctx.closePath();\n        }\n    }\n\n    var Node$2 = (function (BaseNode$$1) {\n        function Node(srcElement) {\n            BaseNode$$1.call(this, srcElement);\n            if (srcElement) {\n                this.initClip();\n            }\n        }\n\n        extendStatic(Node, BaseNode$$1);\n        Node.prototype = Object.create( BaseNode$$1 && BaseNode$$1.prototype );\n        Node.prototype.constructor = Node;\n        Node.fn = Node.prototype;\n        Node.fn.init = Node.fn.constructor;\n\n        Node.prototype.initClip = function initClip () {\n            var clip = this.srcElement.clip();\n            if (clip) {\n                this.clip = clip;\n                clip.addObserver(this);\n            }\n        };\n\n        Node.prototype.clear = function clear () {\n            if (this.srcElement) {\n                this.srcElement.removeObserver(this);\n            }\n\n            this.clearClip();\n\n            BaseNode$$1.prototype.clear.call(this);\n        };\n\n        Node.prototype.clearClip = function clearClip () {\n            if (this.clip) {\n                this.clip.removeObserver(this);\n                delete this.clip;\n            }\n        };\n\n        Node.prototype.setClip = function setClip (ctx) {\n            if (this.clip) {\n                ctx.beginPath();\n                renderPath(ctx, this.clip);\n                ctx.clip();\n            }\n        };\n\n        Node.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"clip\") {\n                this.clearClip();\n                this.initClip();\n            }\n\n            BaseNode$$1.prototype.optionsChange.call(this, e);\n        };\n\n        Node.prototype.setTransform = function setTransform (ctx) {\n            if (this.srcElement) {\n                var transform = this.srcElement.transform();\n                if (transform) {\n                    ctx.transform.apply(ctx, transform.matrix().toArray(6));\n                }\n            }\n        };\n\n        Node.prototype.loadElements = function loadElements (elements, pos, cors) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < elements.length; i++) {\n                var srcElement = elements[i];\n                var children = srcElement.children;\n\n                var childNode = new NODE_MAP$2[srcElement.nodeType](srcElement, cors);\n\n                if (children && children.length > 0) {\n                    childNode.load(children, pos, cors);\n                }\n\n                if (defined(pos)) {\n                    this$1$1.insertAt(childNode, pos);\n                } else {\n                    this$1$1.append(childNode);\n                }\n            }\n        };\n\n        Node.prototype.load = function load (elements, pos, cors) {\n            this.loadElements(elements, pos, cors);\n\n            this.invalidate();\n        };\n\n        Node.prototype.setOpacity = function setOpacity (ctx) {\n            if (this.srcElement) {\n                var opacity = this.srcElement.opacity();\n                if (defined(opacity)) {\n                    this.globalAlpha(ctx, opacity);\n                }\n            }\n        };\n\n        Node.prototype.globalAlpha = function globalAlpha (ctx, value) {\n            var opactity = value;\n            if (opactity && ctx.globalAlpha) {\n                opactity *= ctx.globalAlpha;\n            }\n            ctx.globalAlpha = opactity;\n        };\n\n        Node.prototype.visible = function visible () {\n            var src = this.srcElement;\n            return !src || (src && src.options.visible !== false);\n        };\n\n        return Node;\n    }(BaseNode));\n\n    var GroupNode$2 = (function (superclass) {\n        function GroupNode () {\n            superclass.apply(this, arguments);\n        }\n\n        extendStatic(GroupNode, superclass);\n        GroupNode.prototype = Object.create( superclass && superclass.prototype );\n        GroupNode.prototype.constructor = GroupNode;\n        GroupNode.fn = GroupNode.prototype;\n        GroupNode.fn.init = GroupNode.fn.constructor;\n\n        GroupNode.prototype.renderTo = function renderTo (ctx) {\n            if (!this.visible()) {\n                return;\n            }\n\n            ctx.save();\n\n            this.setTransform(ctx);\n            this.setClip(ctx);\n            this.setOpacity(ctx);\n\n            var childNodes = this.childNodes;\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                if (child.visible()) {\n                    child.renderTo(ctx);\n                }\n            }\n\n            ctx.restore();\n        };\n\n        return GroupNode;\n    }(traversable(Node$2, \"childNodes\")));\n\n    var FRAME_DELAY = 1000 / 60;\n\n    var RootNode$2 = (function (superclass) {\n        function RootNode(canvas, size) {\n            superclass.call(this);\n\n            this.canvas = canvas;\n            this.size = size;\n            this.ctx = canvas.getContext(\"2d\");\n\n            var invalidateHandler = this._invalidate.bind(this);\n            this.invalidate = kendo.throttle(function () {\n                kendo.animationFrame(invalidateHandler);\n            }, FRAME_DELAY);\n        }\n\n        extendStatic(RootNode, superclass);\n        RootNode.prototype = Object.create( superclass && superclass.prototype );\n        RootNode.prototype.constructor = RootNode;\n        RootNode.fn = RootNode.prototype;\n        RootNode.fn.init = RootNode.fn.constructor;\n\n        RootNode.prototype.destroy = function destroy () {\n            superclass.prototype.destroy.call(this);\n            this.canvas = null;\n            this.ctx = null;\n        };\n\n        RootNode.prototype.load = function load (elements, pos, cors) {\n            this.loadElements(elements, pos, cors);\n            this._invalidate();\n        };\n\n        RootNode.prototype._rescale = function _rescale (scale) {\n            var ref = this;\n            var canvas = ref.canvas;\n            var size = ref.size;\n            canvas.width = size.width * scale;\n            canvas.height = size.height * scale;\n            this.ctx.scale(scale, scale);\n        };\n\n        RootNode.prototype._devicePixelRatio = function _devicePixelRatio () {\n            if (typeof window.devicePixelRatio === 'number') {\n                return window.devicePixelRatio;\n            }\n\n            return 1;\n        };\n\n        RootNode.prototype._invalidate = function _invalidate (options) {\n            if (!this.ctx) {\n                return;\n            }\n\n            var fixedScale = options && options.fixedScale;\n            var scale = fixedScale ? 1 : this._devicePixelRatio();\n            this._rescale(scale);\n\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n            this.renderTo(this.ctx);\n        };\n\n        return RootNode;\n    }(traversable(GroupNode$2, \"childNodes\")));\n\n    var QuadRoot = (function (Class$$1) {\n        function QuadRoot() {\n            Class$$1.call(this);\n\n            this.shapes = [];\n        }\n\n        extendStatic(QuadRoot, Class$$1);\n        QuadRoot.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        QuadRoot.prototype.constructor = QuadRoot;\n        QuadRoot.fn = QuadRoot.prototype;\n        QuadRoot.fn.init = QuadRoot.fn.constructor;\n\n        QuadRoot.prototype._add = function _add (shape, bbox) {\n            this.shapes.push({\n                bbox: bbox,\n                shape: shape\n            });\n            shape._quadNode = this;\n        };\n\n        QuadRoot.prototype.pointShapes = function pointShapes (point) {\n            var shapes = this.shapes;\n            var length = shapes.length;\n            var result = [];\n            for (var idx = 0; idx < length; idx++) {\n                if (shapes[idx].bbox.containsPoint(point)) {\n                    result.push(shapes[idx].shape);\n                }\n            }\n            return result;\n        };\n\n        QuadRoot.prototype.insert = function insert (shape, bbox) {\n            this._add(shape, bbox);\n        };\n\n        QuadRoot.prototype.remove = function remove (shape) {\n            var shapes = this.shapes;\n            var length = shapes.length;\n\n            for (var idx = 0; idx < length; idx++) {\n                if (shapes[idx].shape === shape) {\n                    shapes.splice(idx, 1);\n                    break;\n                }\n            }\n        };\n\n        return QuadRoot;\n    }(Class));\n\n    var QuadNode = (function (QuadRoot$$1) {\n        function QuadNode(rect) {\n            QuadRoot$$1.call(this);\n            this.children = [];\n            this.rect = rect;\n        }\n\n        extendStatic(QuadNode, QuadRoot$$1);\n        QuadNode.prototype = Object.create( QuadRoot$$1 && QuadRoot$$1.prototype );\n        QuadNode.prototype.constructor = QuadNode;\n        QuadNode.fn = QuadNode.prototype;\n        QuadNode.fn.init = QuadNode.fn.constructor;\n\n        QuadNode.prototype.inBounds = function inBounds (rect) {\n            var nodeRect = this.rect;\n            var nodeBottomRight = nodeRect.bottomRight();\n            var bottomRight = rect.bottomRight();\n            var inBounds = nodeRect.origin.x <= rect.origin.x && nodeRect.origin.y <= rect.origin.y && bottomRight.x <= nodeBottomRight.x &&\n                bottomRight.y <= nodeBottomRight.y;\n            return inBounds;\n        };\n\n        QuadNode.prototype.pointShapes = function pointShapes (point) {\n            var children = this.children;\n            var length = children.length;\n            var result = QuadRoot$$1.prototype.pointShapes.call(this, point);\n            for (var idx = 0; idx < length; idx++) {\n                append$1$1(result, children[idx].pointShapes(point));\n            }\n            return result;\n        };\n\n        QuadNode.prototype.insert = function insert (shape, bbox) {\n            var children = this.children;\n            var inserted = false;\n\n            if (this.inBounds(bbox)) {\n                if (this.shapes.length < 4) {\n                    this._add(shape, bbox);\n                } else {\n                    if (!children.length) {\n                        this._initChildren();\n                    }\n\n                    for (var idx = 0; idx < children.length; idx++) {\n                        if (children[idx].insert(shape, bbox)) {\n                            inserted = true;\n                            break;\n                        }\n                    }\n\n                    if (!inserted) {\n                        this._add(shape, bbox);\n                    }\n                }\n                inserted = true;\n            }\n\n            return inserted;\n        };\n\n        QuadNode.prototype._initChildren = function _initChildren () {\n            var ref = this;\n            var rect = ref.rect;\n            var children = ref.children;\n            var center = rect.center();\n            var halfWidth = rect.width() / 2;\n            var halfHeight = rect.height() / 2;\n\n            children.push(\n                new QuadNode(new Rect([ rect.origin.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n                new QuadNode(new Rect([ center.x, rect.origin.y ], [ halfWidth, halfHeight ])),\n                new QuadNode(new Rect([ rect.origin.x, center.y ], [ halfWidth, halfHeight ])),\n                new QuadNode(new Rect([ center.x, center.y ], [ halfWidth, halfHeight ]))\n            );\n        };\n\n        return QuadNode;\n    }(QuadRoot));\n\n    var ROOT_SIZE = 3000;\n    var LEVEL_STEP = 10000;\n    var MAX_LEVEL = 75;\n\n    var ShapesQuadTree = (function (Class$$1) {\n        function ShapesQuadTree() {\n            Class$$1.call(this);\n\n            this.initRoots();\n        }\n\n        extendStatic(ShapesQuadTree, Class$$1);\n        ShapesQuadTree.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        ShapesQuadTree.prototype.constructor = ShapesQuadTree;\n        ShapesQuadTree.fn = ShapesQuadTree.prototype;\n        ShapesQuadTree.fn.init = ShapesQuadTree.fn.constructor;\n\n        ShapesQuadTree.prototype.initRoots = function initRoots () {\n            this.rootMap = {};\n            this.root = new QuadRoot();\n            this.rootElements = [];\n        };\n\n        ShapesQuadTree.prototype.clear = function clear () {\n            var this$1$1 = this;\n\n            var rootElements = this.rootElements;\n            for (var idx = 0; idx < rootElements.length; idx++) {\n                this$1$1.remove(rootElements[idx]);\n            }\n            this.initRoots();\n        };\n\n        ShapesQuadTree.prototype.pointShape = function pointShape (point) {\n            var sectorRoot = ( this.rootMap[ Math.floor( point.x / ROOT_SIZE ) ] || {} )[ Math.floor( point.y / ROOT_SIZE ) ];\n            var result = this.root.pointShapes(point);\n\n            if (sectorRoot) {\n                result = result.concat(sectorRoot.pointShapes(point));\n            }\n\n            this.assignZindex(result);\n\n            result.sort(zIndexComparer);\n            for (var idx = 0; idx < result.length; idx++) {\n                if (result[idx].containsPoint(point)) {\n                    return result[idx];\n                }\n            }\n        };\n\n        ShapesQuadTree.prototype.assignZindex = function assignZindex (elements) {\n            var this$1$1 = this;\n\n            for (var idx = 0; idx < elements.length; idx++) {\n                var element = elements[idx];\n                var zIndex = 0;\n                var levelWeight = Math.pow(LEVEL_STEP, MAX_LEVEL);\n                var parents = [];\n\n                while (element) {\n                    parents.push(element);\n                    element = element.parent;\n                }\n\n                while (parents.length) {\n                    element = parents.pop();\n                    zIndex += ((element.parent ? element.parent.children : this$1$1.rootElements).indexOf(element) + 1) * levelWeight;\n                    levelWeight /= LEVEL_STEP;\n                }\n\n                elements[idx]._zIndex = zIndex;\n            }\n        };\n\n        ShapesQuadTree.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"transform\" || e.field === \"stroke.width\") {\n                this.bboxChange(e.element);\n            }\n        };\n\n        ShapesQuadTree.prototype.geometryChange = function geometryChange (e) {\n            this.bboxChange(e.element);\n        };\n\n        ShapesQuadTree.prototype.bboxChange = function bboxChange (element) {\n            var this$1$1 = this;\n\n            if (element.nodeType === \"Group\") {\n                for (var idx = 0; idx < element.children.length; idx++) {\n                    this$1$1.bboxChange(element.children[idx]);\n                }\n            } else {\n                if (element._quadNode) {\n                    element._quadNode.remove(element);\n                }\n                this._insertShape(element);\n            }\n        };\n\n        ShapesQuadTree.prototype.add = function add (elements) {\n            var elementsArray = Array.isArray(elements) ? elements.slice(0) : [ elements ];\n\n            append$1$1(this.rootElements, elementsArray);\n            this._insert(elementsArray);\n        };\n\n        ShapesQuadTree.prototype.childrenChange = function childrenChange (e) {\n            var this$1$1 = this;\n\n            if (e.action === \"remove\") {\n                for (var idx = 0; idx < e.items.length; idx++) {\n                    this$1$1.remove(e.items[idx]);\n                }\n            } else {\n                this._insert(Array.prototype.slice.call(e.items, 0));\n            }\n        };\n\n        ShapesQuadTree.prototype._insert = function _insert (elements) {\n            var this$1$1 = this;\n\n            var element;\n\n            while (elements.length > 0) {\n                element = elements.pop();\n                element.addObserver(this$1$1);\n                if (element.nodeType === \"Group\") {\n                    append$1$1(elements, element.children);\n                } else {\n                    this$1$1._insertShape(element);\n                }\n            }\n        };\n\n        ShapesQuadTree.prototype._insertShape = function _insertShape (shape) {\n            var bbox = shape.bbox();\n            if (bbox) {\n                var sectors = this.getSectors(bbox);\n                var x = sectors[0][0];\n                var y = sectors[1][0];\n\n                if (this.inRoot(sectors)) {\n                    this.root.insert(shape, bbox);\n                } else {\n                    var rootMap = this.rootMap;\n                    if (!rootMap[x]) {\n                        rootMap[x] = {};\n                    }\n\n                    if (!rootMap[x][y]) {\n                        rootMap[x][y] = new QuadNode(\n                            new Rect([ x * ROOT_SIZE, y * ROOT_SIZE ], [ ROOT_SIZE, ROOT_SIZE ])\n                        );\n                    }\n\n                    rootMap[x][y].insert(shape, bbox);\n                }\n            }\n        };\n\n        ShapesQuadTree.prototype.remove = function remove (element) {\n            var this$1$1 = this;\n\n            element.removeObserver(this);\n\n            if (element.nodeType === \"Group\") {\n                var children = element.children;\n                for (var idx = 0; idx < children.length; idx++) {\n                    this$1$1.remove(children[idx]);\n                }\n            } else if (element._quadNode) {\n                element._quadNode.remove(element);\n                delete element._quadNode;\n            }\n        };\n\n        ShapesQuadTree.prototype.inRoot = function inRoot (sectors) {\n            return sectors[0].length > 1 || sectors[1].length > 1;\n        };\n\n        ShapesQuadTree.prototype.getSectors = function getSectors (rect) {\n            var bottomRight = rect.bottomRight();\n            var bottomX = Math.floor(bottomRight.x / ROOT_SIZE);\n            var bottomY = Math.floor(bottomRight.y / ROOT_SIZE);\n            var sectors = [ [], [] ];\n            for (var x = Math.floor(rect.origin.x / ROOT_SIZE); x <= bottomX; x++) {\n                sectors[0].push(x);\n            }\n            for (var y = Math.floor(rect.origin.y / ROOT_SIZE); y <= bottomY; y++) {\n                sectors[1].push(y);\n            }\n            return sectors;\n        };\n\n        return ShapesQuadTree;\n    }(Class));\n\n    function zIndexComparer(x1, x2) {\n        if (x1._zIndex < x2._zIndex) {\n            return 1;\n        }\n        if (x1._zIndex > x2._zIndex) {\n            return -1;\n        }\n\n        return 0;\n    }\n\n    var SurfaceCursor = function SurfaceCursor(surface) {\n        surface.bind(\"mouseenter\", this._mouseenter.bind(this));\n        surface.bind(\"mouseleave\", this._mouseleave.bind(this));\n\n        this.element = surface.element;\n    };\n\n    SurfaceCursor.prototype.clear = function clear () {\n        this._resetCursor();\n    };\n\n    SurfaceCursor.prototype.destroy = function destroy () {\n        this._resetCursor();\n        delete this.element;\n    };\n\n    SurfaceCursor.prototype._mouseenter = function _mouseenter (e) {\n        var cursor = this._shapeCursor(e);\n\n        if (!cursor) {\n            this._resetCursor();\n        } else {\n            if (!this._current) {\n                this._defaultCursor = this._getCursor();\n            }\n\n            this._setCursor(cursor);\n        }\n    };\n\n    SurfaceCursor.prototype._mouseleave = function _mouseleave () {\n        this._resetCursor();\n    };\n\n    SurfaceCursor.prototype._shapeCursor = function _shapeCursor (e) {\n        var shape = e.element;\n\n        while (shape && !defined(shape.options.cursor)) {\n            shape = shape.parent;\n        }\n\n        if (shape) {\n            return shape.options.cursor;\n        }\n    };\n\n    SurfaceCursor.prototype._getCursor = function _getCursor () {\n        if (this.element) {\n            return this.element.style.cursor;\n        }\n    };\n\n    SurfaceCursor.prototype._setCursor = function _setCursor (cursor) {\n        if (this.element) {\n            this.element.style.cursor = cursor;\n            this._current = cursor;\n        }\n    };\n\n    SurfaceCursor.prototype._resetCursor = function _resetCursor () {\n        if (this._current) {\n            this._setCursor(this._defaultCursor || \"\");\n            delete this._current;\n        }\n    };\n\n    function addGradientStops(gradient, stops) {\n        for (var idx = 0; idx < stops.length; idx++) {\n            var stop = stops[idx];\n            var color = kendo.parseColor(stop.color());\n\n            color.a *= stop.opacity();\n\n            gradient.addColorStop(stop.offset(), color.toCssRgba());\n        }\n    }\n\n    var PathNode$2 = (function (Node) {\n        function PathNode () {\n            Node.apply(this, arguments);\n        }\n\n        extendStatic(PathNode, Node);\n        PathNode.prototype = Object.create( Node && Node.prototype );\n        PathNode.prototype.constructor = PathNode;\n        PathNode.fn = PathNode.prototype;\n        PathNode.fn.init = PathNode.fn.constructor;\n\n        PathNode.prototype.renderTo = function renderTo (ctx) {\n            ctx.save();\n\n            this.setTransform(ctx);\n            this.setClip(ctx);\n            this.setOpacity(ctx);\n\n            ctx.beginPath();\n\n            this.renderPoints(ctx, this.srcElement);\n\n            this.setLineDash(ctx);\n            this.setLineCap(ctx);\n            this.setLineJoin(ctx);\n\n            this.setFill(ctx);\n            this.setStroke(ctx);\n\n            ctx.restore();\n        };\n\n        PathNode.prototype.setFill = function setFill (ctx) {\n            var fill = this.srcElement.options.fill;\n            var hasFill = false;\n\n            if (fill) {\n                if (fill.nodeType === \"Gradient\") {\n                    this.setGradientFill(ctx, fill);\n                    hasFill = true;\n                } else if (!isTransparent(fill.color)) {\n                    ctx.fillStyle = fill.color;\n\n                    ctx.save();\n                    this.globalAlpha(ctx, fill.opacity);\n                    ctx.fill();\n                    ctx.restore();\n\n                    hasFill = true;\n                }\n            }\n\n            return hasFill;\n        };\n\n        PathNode.prototype.setGradientFill = function setGradientFill (ctx, fill) {\n            var bbox = this.srcElement.rawBBox();\n            var gradient;\n\n            if (fill instanceof LinearGradient) {\n                var start = fill.start();\n                var end = fill.end();\n                gradient = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            } else if (fill instanceof RadialGradient) {\n                var center = fill.center();\n                gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, fill.radius());\n            }\n\n            addGradientStops(gradient, fill.stops);\n\n            ctx.save();\n\n            if (!fill.userSpace()) {\n                ctx.transform(bbox.width(), 0, 0, bbox.height(), bbox.origin.x, bbox.origin.y);\n            }\n            ctx.fillStyle = gradient;\n            ctx.fill();\n\n            ctx.restore();\n        };\n\n        PathNode.prototype.setStroke = function setStroke (ctx) {\n            var stroke = this.srcElement.options.stroke;\n            if (stroke && !isTransparent(stroke.color) && stroke.width > 0) {\n                ctx.strokeStyle = stroke.color;\n                ctx.lineWidth = valueOrDefault(stroke.width, 1);\n\n                ctx.save();\n                this.globalAlpha(ctx, stroke.opacity);\n                ctx.stroke();\n                ctx.restore();\n\n                return true;\n            }\n        };\n\n        PathNode.prototype.dashType = function dashType () {\n            var stroke = this.srcElement.options.stroke;\n            if (stroke && stroke.dashType) {\n                return stroke.dashType.toLowerCase();\n            }\n        };\n\n        PathNode.prototype.setLineDash = function setLineDash (ctx) {\n            var dashType = this.dashType();\n            if (dashType && dashType !== SOLID) {\n                var dashArray = DASH_ARRAYS[dashType];\n                if (ctx.setLineDash) {\n                    ctx.setLineDash(dashArray);\n                } else {\n                    ctx.mozDash = dashArray;\n                    ctx.webkitLineDash = dashArray;\n                }\n            }\n        };\n\n        PathNode.prototype.setLineCap = function setLineCap (ctx) {\n            var dashType = this.dashType();\n            var stroke = this.srcElement.options.stroke;\n            if (dashType && dashType !== SOLID) {\n                ctx.lineCap = BUTT;\n            } else if (stroke && stroke.lineCap) {\n                ctx.lineCap = stroke.lineCap;\n            }\n        };\n\n        PathNode.prototype.setLineJoin = function setLineJoin (ctx) {\n            var stroke = this.srcElement.options.stroke;\n            if (stroke && stroke.lineJoin) {\n                ctx.lineJoin = stroke.lineJoin;\n            }\n        };\n\n        PathNode.prototype.renderPoints = function renderPoints (ctx, path) {\n            renderPath(ctx, path);\n        };\n\n        return PathNode;\n    }(Node$2));\n\n    var ArcNode$2 = (function (PathNode) {\n        function ArcNode () {\n            PathNode.apply(this, arguments);\n        }\n\n        extendStatic(ArcNode, PathNode);\n        ArcNode.prototype = Object.create( PathNode && PathNode.prototype );\n        ArcNode.prototype.constructor = ArcNode;\n        ArcNode.fn = ArcNode.prototype;\n        ArcNode.fn.init = ArcNode.fn.constructor;\n\n        ArcNode.prototype.renderPoints = function renderPoints (ctx) {\n            var path = this.srcElement.toPath();\n            renderPath(ctx, path);\n        };\n\n        return ArcNode;\n    }(PathNode$2));\n\n    var CircleNode$2 = (function (PathNode) {\n        function CircleNode () {\n            PathNode.apply(this, arguments);\n        }\n\n        extendStatic(CircleNode, PathNode);\n        CircleNode.prototype = Object.create( PathNode && PathNode.prototype );\n        CircleNode.prototype.constructor = CircleNode;\n        CircleNode.fn = CircleNode.prototype;\n        CircleNode.fn.init = CircleNode.fn.constructor;\n\n        CircleNode.prototype.renderPoints = function renderPoints (ctx) {\n            var ref = this.srcElement.geometry();\n            var center = ref.center;\n            var radius = ref.radius;\n\n            ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\n        };\n\n        return CircleNode;\n    }(PathNode$2));\n\n    var ImageNode$2 = (function (PathNode) {\n        function ImageNode(srcElement, cors) {\n            PathNode.call(this, srcElement);\n\n            this.onLoad = this.onLoad.bind(this);\n            this.onError = this.onError.bind(this);\n\n            this.loading = createPromise();\n\n            var img = this.img = new Image();\n            var src = srcElement.src();\n\n            if (cors && !(/^data:/i.test(src))) {\n                img.crossOrigin = cors;\n            }\n\n            if (src) {\n                img.src = src;\n            }\n\n            if (img.complete) {\n                this.onLoad();\n            } else {\n                img.onload = this.onLoad;\n                img.onerror = this.onError;\n            }\n        }\n\n        extendStatic(ImageNode, PathNode);\n        ImageNode.prototype = Object.create( PathNode && PathNode.prototype );\n        ImageNode.prototype.constructor = ImageNode;\n        ImageNode.fn = ImageNode.prototype;\n        ImageNode.fn.init = ImageNode.fn.constructor;\n\n        ImageNode.prototype.renderTo = function renderTo (ctx) {\n            if (this.loading.state() === \"resolved\") {\n                ctx.save();\n\n                this.setTransform(ctx);\n                this.setClip(ctx);\n\n                this.drawImage(ctx);\n\n                ctx.restore();\n            }\n        };\n\n        ImageNode.prototype.optionsChange = function optionsChange (e) {\n            if (e.field === \"src\") {\n                this.loading = createPromise();\n                this.img.src = this.srcElement.src();\n            } else {\n                PathNode.prototype.optionsChange.call(this, e);\n            }\n        };\n\n        ImageNode.prototype.onLoad = function onLoad () {\n            this.loading.resolve();\n            this.invalidate();\n        };\n\n        ImageNode.prototype.onError = function onError () {\n            this.loading.reject(new Error(\n                \"Unable to load image '\" + this.img.src +\n                \"'. Check for connectivity and verify CORS headers.\"\n            ));\n        };\n\n        ImageNode.prototype.drawImage = function drawImage (ctx) {\n            var rect = this.srcElement.rect();\n            var topLeft = rect.topLeft();\n\n            ctx.drawImage(\n                this.img, topLeft.x, topLeft.y, rect.width(), rect.height()\n            );\n        };\n\n        return ImageNode;\n    }(PathNode$2));\n\n    var MultiPathNode$2 = (function (PathNode) {\n        function MultiPathNode () {\n            PathNode.apply(this, arguments);\n        }\n\n        extendStatic(MultiPathNode, PathNode);\n        MultiPathNode.prototype = Object.create( PathNode && PathNode.prototype );\n        MultiPathNode.prototype.constructor = MultiPathNode;\n        MultiPathNode.fn = MultiPathNode.prototype;\n        MultiPathNode.fn.init = MultiPathNode.fn.constructor;\n\n        MultiPathNode.prototype.renderPoints = function renderPoints (ctx) {\n            var paths = this.srcElement.paths;\n            for (var i = 0; i < paths.length; i++) {\n                renderPath(ctx, paths[i]);\n            }\n        };\n\n        return MultiPathNode;\n    }(PathNode$2));\n\n    var RectNode$2 = (function (PathNode) {\n        function RectNode () {\n            PathNode.apply(this, arguments);\n        }\n\n        extendStatic(RectNode, PathNode);\n        RectNode.prototype = Object.create( PathNode && PathNode.prototype );\n        RectNode.prototype.constructor = RectNode;\n        RectNode.fn = RectNode.prototype;\n        RectNode.fn.init = RectNode.fn.constructor;\n\n        RectNode.prototype.renderPoints = function renderPoints (ctx) {\n            var geometry = this.srcElement.geometry();\n            var ref = geometry.cornerRadius;\n            var rx = ref[0];\n            var ry = ref[1];\n\n            if (rx === 0 && ry === 0) {\n                var origin = geometry.origin;\n                var size = geometry.size;\n                ctx.rect(origin.x, origin.y, size.width, size.height);\n            } else {\n                PathNode.prototype.renderPoints.call(this, ctx, Path.fromRect(geometry));\n            }\n        };\n\n        return RectNode;\n    }(PathNode$2));\n\n    var TextNode$2 = (function (PathNode) {\n        function TextNode () {\n            PathNode.apply(this, arguments);\n        }\n\n        extendStatic(TextNode, PathNode);\n        TextNode.prototype = Object.create( PathNode && PathNode.prototype );\n        TextNode.prototype.constructor = TextNode;\n        TextNode.fn = TextNode.prototype;\n        TextNode.fn.init = TextNode.fn.constructor;\n\n        TextNode.prototype.renderTo = function renderTo (ctx) {\n            var text = this.srcElement;\n            var pos = text.position();\n            var size = text.measure();\n\n            ctx.save();\n\n            this.setTransform(ctx);\n            this.setClip(ctx);\n            this.setOpacity(ctx);\n\n            ctx.beginPath();\n\n            ctx.font = text.options.font;\n            ctx.textAlign = 'left';\n\n            if (this.setFill(ctx)) {\n                ctx.fillText(text.content(), pos.x, pos.y + size.baseline);\n            }\n\n            if (this.setStroke(ctx)) {\n                this.setLineDash(ctx);\n                ctx.strokeText(text.content(), pos.x, pos.y + size.baseline);\n            }\n\n            ctx.restore();\n        };\n\n        return TextNode;\n    }(PathNode$2));\n\n    NODE_MAP$2.Arc = ArcNode$2;\n    NODE_MAP$2.Circle = CircleNode$2;\n    NODE_MAP$2.Group = GroupNode$2;\n    NODE_MAP$2.Image = ImageNode$2;\n    NODE_MAP$2.MultiPath = MultiPathNode$2;\n    NODE_MAP$2.Path = PathNode$2;\n    NODE_MAP$2.Rect = RectNode$2;\n    NODE_MAP$2.Text = TextNode$2;\n\n    var Surface$4 = (function (BaseSurface) {\n        function Surface(element, options) {\n            BaseSurface.call(this, element, options);\n\n            this.element.innerHTML = this._template(this);\n\n            var canvas = this.element.firstElementChild;\n            canvas.style.width = '100%';\n            canvas.style.height = '100%';\n\n            var size = elementSize(element);\n\n            canvas.width = size.width;\n            canvas.height = size.height;\n\n            this._rootElement = canvas;\n\n            this._root = new RootNode$2(canvas, size);\n\n            this._mouseTrackHandler = this._trackMouse.bind(this);\n\n            bindEvents(this.element, {\n                click: this._mouseTrackHandler,\n                mousemove: this._mouseTrackHandler\n            });\n        }\n\n        extendStatic(Surface, BaseSurface);\n        Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n        Surface.prototype.constructor = Surface;\n        Surface.fn = Surface.prototype;\n        Surface.fn.init = Surface.fn.constructor;\n\n        var prototypeAccessors = { type: {} };\n\n        prototypeAccessors.type.get = function () {\n            return \"canvas\";\n        };\n\n        Surface.prototype.destroy = function destroy () {\n            BaseSurface.prototype.destroy.call(this);\n\n            if (this._root) {\n                this._root.destroy();\n                this._root = null;\n            }\n\n            if (this._searchTree) {\n                this._searchTree.clear();\n                delete this._searchTree;\n            }\n\n            if (this._cursor) {\n                this._cursor.destroy();\n                delete this._cursor;\n            }\n\n            unbindEvents(this.element, {\n                click: this._mouseTrackHandler,\n                mousemove: this._mouseTrackHandler\n            });\n        };\n\n        Surface.prototype.draw = function draw (element) {\n            BaseSurface.prototype.draw.call(this, element);\n            this._root.load([ element ], undefined, this.options.cors);\n\n            if (this._searchTree) {\n                this._searchTree.add([ element ]);\n            }\n        };\n\n        Surface.prototype.clear = function clear () {\n            BaseSurface.prototype.clear.call(this);\n            this._root.clear();\n\n            if (this._searchTree) {\n                this._searchTree.clear();\n            }\n\n            if (this._cursor) {\n                this._cursor.clear();\n            }\n        };\n\n        Surface.prototype.eventTarget = function eventTarget (e) {\n            if (this._searchTree) {\n                var point = this._surfacePoint(e);\n                var shape = this._searchTree.pointShape(point);\n                return shape;\n            }\n        };\n\n        Surface.prototype.image = function image () {\n            var ref = this;\n            var root = ref._root;\n            var rootElement = ref._rootElement;\n            var loadingStates = [];\n\n            root.traverse(function (childNode) {\n                if (childNode.loading) {\n                    loadingStates.push(childNode.loading);\n                }\n            });\n\n            var promise = createPromise();\n            var resolveDataURL = function () {\n                root._invalidate({ fixedScale: true });\n\n                try {\n                    var data = rootElement.toDataURL();\n                    promise.resolve(data);\n                } catch (e) {\n                    promise.reject(e);\n                }\n            };\n\n            promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n\n            return promise;\n        };\n\n        Surface.prototype.suspendTracking = function suspendTracking () {\n            BaseSurface.prototype.suspendTracking.call(this);\n            if (this._searchTree) {\n                this._searchTree.clear();\n                delete this._searchTree;\n            }\n        };\n\n        Surface.prototype.resumeTracking = function resumeTracking () {\n            BaseSurface.prototype.resumeTracking.call(this);\n            if (!this._searchTree) {\n                this._searchTree = new ShapesQuadTree();\n\n                var childNodes = this._root.childNodes;\n                var rootElements = [];\n                for (var idx = 0; idx < childNodes.length; idx++) {\n                    rootElements.push(childNodes[idx].srcElement);\n                }\n                this._searchTree.add(rootElements);\n            }\n        };\n\n        Surface.prototype._resize = function _resize () {\n            this._rootElement.width = this._size.width;\n            this._rootElement.height = this._size.height;\n\n            this._root.size = this._size;\n            this._root.invalidate();\n        };\n\n        Surface.prototype._template = function _template () {\n            return \"<canvas></canvas>\";\n        };\n\n        Surface.prototype._enableTracking = function _enableTracking () {\n            this._searchTree = new ShapesQuadTree();\n            this._cursor = new SurfaceCursor(this);\n\n            BaseSurface.prototype._enableTracking.call(this);\n        };\n\n        Surface.prototype._trackMouse = function _trackMouse (e) {\n            if (this._suspendedTracking) {\n                return;\n            }\n\n            var shape = this.eventTarget(e);\n\n            if (e.type !== \"click\") {\n                var currentShape = this._currentShape;\n                if (currentShape && currentShape !== shape) {\n                    this.trigger(\"mouseleave\", {\n                        element: currentShape,\n                        originalEvent: e,\n                        type: \"mouseleave\"\n                    });\n                }\n\n                if (shape && currentShape !== shape) {\n                    this.trigger(\"mouseenter\", {\n                        element: shape,\n                        originalEvent: e,\n                        type: \"mouseenter\"\n                    });\n                }\n\n                this.trigger(\"mousemove\", {\n                    element: shape,\n                    originalEvent: e,\n                    type: \"mousemove\"\n                });\n\n                this._currentShape = shape;\n            } else if (shape) {\n                this.trigger(\"click\", {\n                    element: shape,\n                    originalEvent: e,\n                    type: \"click\"\n                });\n            }\n        };\n\n        Object.defineProperties( Surface.prototype, prototypeAccessors );\n\n        return Surface;\n    }(Surface$2));\n\n    var instance$2;\n    var support$1;\n\n    var hasDocument = function () { return typeof document !== \"undefined\"; };\n\n    var supportsCanvas = function () { return hasDocument() &&\n        document.createElement(\"canvas\").getContext; };\n\n    var supportsSVG = function () { return hasDocument() &&\n        document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"); };\n\n    var SurfaceFactory = (function (Class$$1) {\n        function SurfaceFactory() {\n            Class$$1.call(this);\n\n            this._items = [ {\n                name: \"svg\",\n                type: Surface$3\n            }, {\n                name: \"canvas\",\n                type: Surface$4\n            } ];\n        }\n\n        extendStatic(SurfaceFactory, Class$$1);\n        SurfaceFactory.prototype = Object.create( Class$$1 && Class$$1.prototype );\n        SurfaceFactory.prototype.constructor = SurfaceFactory;\n        SurfaceFactory.fn = SurfaceFactory.prototype;\n        SurfaceFactory.fn.init = SurfaceFactory.fn.constructor;\n\n        var staticAccessors = { support: {},current: {} };\n\n        staticAccessors.support.get = function () {\n            if (!support$1) {\n                support$1 = {\n                    canvas: supportsCanvas(),\n                    svg: supportsSVG()\n                };\n            }\n\n            return support$1;\n        };\n\n        staticAccessors.current.get = function () {\n            if (!instance$2) {\n                instance$2 = new SurfaceFactory();\n            }\n\n            return instance$2;\n        };\n\n        SurfaceFactory.prototype.create = function create (element, options) {\n            var items = this._items;\n            var match = items[0];\n\n            if (options && options.type) {\n                var preferred = options.type.toLowerCase();\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].name === preferred) {\n                        match = items[i];\n                        break;\n                    }\n                }\n            }\n\n            if (match) {\n                return new match.type(element, options);\n            }\n\n            kendo.logToConsole(\n                \"Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\\n\" +\n                \"- The browser does not support SVG and Canvas. User agent: \" + (navigator.userAgent));\n        };\n\n        Object.defineProperties( SurfaceFactory, staticAccessors );\n\n        return SurfaceFactory;\n    }(Class));\n\n    var Surface = (function (BaseSurface) {\n        function Surface () {\n            BaseSurface.apply(this, arguments);\n        }\n\n        extendStatic(Surface, BaseSurface);\n        Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n        Surface.prototype.constructor = Surface;\n        Surface.fn = Surface.prototype;\n        Surface.fn.init = Surface.fn.constructor;\n\n        var staticAccessors = { support: {} };\n\n        staticAccessors.support.get = function () {\n            return SurfaceFactory.support;\n        };\n\n        Surface.create = function create (element, options) {\n            return SurfaceFactory.current.create(element, options);\n        };\n\n        Object.defineProperties( Surface, staticAccessors );\n\n        return Surface;\n    }(Surface$2));\n\n    function exportGroup(group) {\n        var root = new RootNode({\n            skipBaseHref: true\n        });\n        var bbox = group.clippedBBox();\n        var rootGroup = group;\n\n        if (bbox) {\n            var origin = bbox.getOrigin();\n            var exportRoot = new Group();\n            exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n            exportRoot.children.push(group);\n            rootGroup = exportRoot;\n        }\n\n        root.load([ rootGroup ]);\n\n        var svg = \"<?xml version='1.0' ?><svg xmlns='\" + SVG_NS + \"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>\" + (root.render()) + \"</svg>\";\n\n        root.destroy();\n\n        return svg;\n    }\n\n    var svg$1 = {\n    \tSurface: Surface$3,\n    \tRootNode: RootNode,\n    \tNode: Node,\n    \tGroupNode: GroupNode,\n    \tArcNode: ArcNode,\n    \tCircleNode: CircleNode,\n    \tRectNode: RectNode,\n    \tImageNode: ImageNode,\n    \tTextNode: TextNode,\n    \tPathNode: PathNode,\n    \tMultiPathNode: MultiPathNode,\n    \tDefinitionNode: DefinitionNode,\n    \tClipNode: ClipNode,\n    \tGradientStopNode: GradientStopNode,\n    \tLinearGradientNode: LinearGradientNode,\n    \tRadialGradientNode: RadialGradientNode,\n    \texportGroup: exportGroup\n    };\n\n    var canvas = {\n    \tSurface: Surface$4,\n    \tRootNode: RootNode$2,\n    \tNode: Node$2,\n    \tGroupNode: GroupNode$2,\n    \tArcNode: ArcNode$2,\n    \tCircleNode: CircleNode$2,\n    \tRectNode: RectNode$2,\n    \tImageNode: ImageNode$2,\n    \tTextNode: TextNode$2,\n    \tPathNode: PathNode$2,\n    \tMultiPathNode: MultiPathNode$2\n    };\n\n    function exportImage(group, options) {\n        var defaults = {\n            width: \"800px\", height: \"600px\",\n            cors: \"Anonymous\"\n        };\n\n        var exportRoot = group;\n        var bbox = group.clippedBBox();\n\n        if (bbox) {\n            var origin = bbox.getOrigin();\n            exportRoot = new Group();\n            exportRoot.transform(transform$1().translate(-origin.x, -origin.y));\n            exportRoot.children.push(group);\n\n            var size = bbox.getSize();\n            defaults.width = size.width + \"px\";\n            defaults.height = size.height + \"px\";\n        }\n\n        var surfaceOptions = $.extend(defaults, options);\n\n        var container = document.createElement(\"div\");\n        var style = container.style;\n\n        style.display = \"none\";\n        style.width = surfaceOptions.width;\n        style.height = surfaceOptions.height;\n        document.body.appendChild(container);\n\n        var surface = new Surface$4(container, surfaceOptions);\n        surface.suspendTracking();\n        surface.draw(exportRoot);\n\n        var promise = surface.image();\n        var destroy = function () {\n            surface.destroy();\n            document.body.removeChild(container);\n        };\n        promise.then(destroy, destroy);\n\n        return promise;\n    }\n\n    function exportSVG(group, options) {\n        var svg = exportGroup(group);\n\n        if (!options || !options.raw) {\n            svg = \"data:image/svg+xml;base64,\" + encodeBase64(svg);\n        }\n\n        return createPromise().resolve(svg);\n    }\n\n    /* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n    /* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n    /* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty, yoda */\n    /* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\n    var browser = supportBrowser || {};\n    /*\n\n      XXX: to test:\n\n      - cloneNodes function:\n        - drawing document containing canvas with page breaking\n        - drawing document with named radio <input>-s (should not clear selection)\n        - IE9/IE10 don't support el.dataset; do they copy user data?\n\n      - repeating table headers/footers on page breaking\n\n      - forceBreak, keepTogether\n\n      - avoidLinks\n\n     */\n\n    /* -----[ local vars ]----- */\n\n    function slice$1$1(thing) {\n        return Array.prototype.slice.call(thing);\n    }\n\n    var KENDO_PSEUDO_ELEMENT = \"KENDO-PSEUDO-ELEMENT\";\n\n    var IMAGE_CACHE = {};\n\n    var nodeInfo = {};\n    nodeInfo._root = nodeInfo;\n\n    /* -----[ Custom Text node to speed up rendering in kendo.pdf ]----- */\n\n    var inBrowser = typeof window !== 'undefined';\n    var microsoft = inBrowser ? browser.msie || browser.edge : false;\n\n    var TextRect = (function (Text$$1) {\n      function TextRect(str, rect, options) {\n            Text$$1.call(this, str, rect.getOrigin(), options);\n            this._pdfRect = rect;\n        }\n\n      extendStatic(TextRect, Text$$1);\n      TextRect.prototype = Object.create( Text$$1 && Text$$1.prototype );\n      TextRect.prototype.constructor = TextRect;\n      TextRect.fn = TextRect.prototype;\n      TextRect.fn.init = TextRect.fn.constructor;\n        TextRect.prototype.rect = function rect () {\n            // this is the crux of it: we can avoid a call to\n            // measure(), which is what the base class does, since we\n            // already know the rect.  measure() is s-l-o-w.\n            return this._pdfRect;\n        };\n        TextRect.prototype.rawBBox = function rawBBox () {\n            // also let's avoid creating a new rectangle.\n            return this._pdfRect;\n        };\n\n      return TextRect;\n    }(Text));\n\n    function addClass(el, cls) {\n        if (el.classList) {\n            el.classList.add(cls);\n        } else {\n            el.className += \" \" + cls;\n        }\n    }\n\n    function removeClass(el, cls) {\n        if (el.classList) {\n            el.classList.remove(cls);\n        } else {\n            el.className = el.className.split(/\\s+/).reduce(function(a, word){\n                if (word != cls) {\n                    a.push(word);\n                }\n                return a;\n            }, []).join(\" \");\n        }\n    }\n\n    function setCSS(el, styles) {\n        Object.keys(styles).forEach(function(key){\n            el.style[key] = styles[key];\n        });\n    }\n\n    var matches = typeof Element !== \"undefined\" && Element.prototype && (function(p){\n        if (p.matches) {\n            return function(el, selector) { return el.matches(selector); };\n        }\n        if (p.webkitMatchesSelector) {\n            return function(el, selector) { return el.webkitMatchesSelector(selector); };\n        }\n        if (p.mozMatchesSelector) {\n            return function(el, selector) { return el.mozMatchesSelector(selector); };\n        }\n        if (p.msMatchesSelector) {\n            return function(el, selector) { return el.msMatchesSelector(selector); };\n        }\n        return function(s) {\n    \treturn [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n        };\n    })(Element.prototype);\n\n    function closest(el, selector) {\n        if (el.closest) {\n            return el.closest(selector);\n        }\n        // IE: stringifying rather than simply comparing with `document`,\n        // which is not iframe-proof and fails in editor export \n        // https://github.com/telerik/kendo/issues/6721\n        while (el && !/^\\[object (?:HTML)?Document\\]$/.test(String(el))) {\n            if (el.nodeType == 1 /* Element */ && matches(el, selector)) {\n                return el;\n            }\n            el = el.parentNode;\n        }\n    }\n\n    // clone nodes ourselves, so that we redraw <canvas> (DOM or\n    // jQuery clone will not)\n    var cloneNodes = (function($){\n        if ($) {\n            // if we have Kendo and jQuery, use this version as it will\n            // maintain proper links between cloned element and Kendo\n            // widgets (i.e. it clones jQuery data(), which isn't the same\n            // as element's data attributes).\n            // https://github.com/telerik/kendo-ui-core/issues/2750\n            return function cloneNodes(el) {\n                var clone = el.cloneNode(false);\n                if (el.nodeType == 1 /* Element */) {\n                    var $el = $(el), $clone = $(clone), i;\n                    var data = $el.data();\n                    for (i in data) {\n                        $clone.data(i, data[i]);\n                    }\n                    if (/^canvas$/i.test(el.tagName)) {\n                        clone.getContext(\"2d\").drawImage(el, 0, 0);\n                    } else if (/^(?:input|select|textarea|option)$/i.test(el.tagName)) {\n                        // drop the name attributes so that we don't affect the selection of the\n                        // original nodes (i.e. checked status of radio buttons) when we insert our copy\n                        // into the DOM.  https://github.com/telerik/kendo/issues/5409\n                        clone.removeAttribute(\"id\");\n                        clone.removeAttribute(\"name\");\n                        if (!/^textarea$/i.test(el.tagName)) {\n                            clone.value = el.value;\n                        }\n                        clone.checked = el.checked;\n                        clone.selected = el.selected;\n                    }\n                    for (i = el.firstChild; i; i = i.nextSibling) {\n                        clone.appendChild(cloneNodes(i));\n                    }\n                }\n                return clone;\n            };\n        } else {\n            // the no-jQuery version\n            return function cloneNodes(el) {\n                var clone = (function dive(node){\n                    var clone = node.cloneNode(false);\n                    if (node._kendoExportVisual) {\n                        clone._kendoExportVisual = node._kendoExportVisual;\n                    }\n                    for (var i = node.firstChild; i; i = i.nextSibling) {\n                        clone.appendChild(dive(i));\n                    }\n                    return clone;\n                })(el);\n\n                // re-draw canvases - https://github.com/telerik/kendo/issues/4872\n                var canvases = el.querySelectorAll(\"canvas\");\n                if (canvases.length) {\n                    slice$1$1(clone.querySelectorAll(\"canvas\")).forEach(function (canvas$$1, i) {\n                        canvas$$1.getContext(\"2d\").drawImage(canvases[i], 0, 0);\n                    });\n                }\n\n                // remove \"name\" attributes from <input> elements -\n                // https://github.com/telerik/kendo/issues/5409\n                var orig = el.querySelectorAll(\"input, select, textarea, option\");\n                slice$1$1(clone.querySelectorAll(\"input, select, textarea, option\")).forEach(function (el, i) {\n                    el.removeAttribute(\"id\");\n                    el.removeAttribute(\"name\");\n                    if (!/^textarea$/i.test(el.tagName)) {\n                        el.value = orig[i].value;\n                    }\n                    el.checked = orig[i].checked;\n                    el.selected = orig[i].selected;\n                });\n\n                return clone;\n            };\n        }\n    })(typeof window !== \"undefined\" && window.kendo && window.kendo.jQuery);\n\n    function getXY(thing) {\n        if (typeof thing == \"number\") {\n            return { x: thing, y: thing };\n        }\n        if (Array.isArray(thing)) {\n            return { x: thing[0], y: thing[1] };\n        }\n        return { x: thing.x, y: thing.y };\n    }\n\n    function drawDOM(element, options) {\n        if (!options) {\n            options = {};\n        }\n        var promise = createPromise();\n\n        if (!element) {\n            return promise.reject(\"No element to export\");\n        }\n\n        if (typeof window.getComputedStyle != \"function\") {\n            throw new Error(\"window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.\");\n        }\n\n        kendo.pdf.defineFont(getFontFaces(element.ownerDocument));\n\n        var scale = getXY(options.scale || 1);\n\n        function doOne(element) {\n            var group = new Group();\n\n            // translate to start of page\n            var pos = element.getBoundingClientRect();\n            setTransform$1(group, [\n                scale.x,\n                0,\n                0,\n                scale.y,\n                (-pos.left * scale.x),\n                (-pos.top * scale.y)\n            ]);\n\n            nodeInfo._clipbox = false;\n            nodeInfo._matrix = Matrix.unit();\n            nodeInfo._stackingContext = {\n                element: element,\n                group: group\n            };\n\n            if (options.avoidLinks === true) {\n                nodeInfo._avoidLinks = \"a\";\n            } else {\n                nodeInfo._avoidLinks = options.avoidLinks;\n            }\n\n            addClass(element, \"k-pdf-export\");\n            renderElement(element, group);\n            removeClass(element, \"k-pdf-export\");\n\n            return group;\n        }\n\n        cacheImages([ element ], function(){\n            var forceBreak = options && options.forcePageBreak;\n            var hasPaperSize = options && options.paperSize && options.paperSize != \"auto\";\n            var paperOptions = kendo.pdf.getPaperOptions(function(key, def){\n                if (key == \"paperSize\") {\n                    // PDF.getPaperOptions croaks on \"auto\", just pass dummy A4 as we might\n                    // still be interested in margins.\n                    return hasPaperSize ? options[key] : \"A4\";\n                }\n                return key in options ? options[key] : def;\n            });\n            var pageWidth = hasPaperSize && paperOptions.paperSize[0];\n            var pageHeight = hasPaperSize && paperOptions.paperSize[1];\n            var margin = options.margin && paperOptions.margin;\n            var hasMargin = Boolean(margin);\n            if (forceBreak || pageHeight) {\n                if (!margin) {\n                    margin = { left: 0, top: 0, right: 0, bottom: 0 };\n                }\n\n                // we want paper size and margin to be unaffected by\n                // scaling in the output, so we have to reverse-scale\n                // before our calculations begin.\n                if (pageWidth)  { pageWidth  /= scale.x; }\n                if (pageHeight) { pageHeight /= scale.y; }\n                margin.left   /= scale.x;\n                margin.right  /= scale.x;\n                margin.top    /= scale.y;\n                margin.bottom /= scale.y;\n\n                var group = new Group({\n                    pdf: {\n                        multiPage     : true,\n                        paperSize     : hasPaperSize ? paperOptions.paperSize : \"auto\",\n                        _ignoreMargin : hasMargin // HACK!  see exportPDF in pdf/drawing.js\n                    }\n                });\n                handlePageBreaks(\n                    function(x) {\n                        if (options.progress) {\n                            var canceled = false, pageNum = 0;\n                            (function next(){\n                                if (pageNum < x.pages.length) {\n                                    var page = doOne(x.pages[pageNum]);\n                                    group.append(page);\n                                    options.progress({\n                                        page: page,\n                                        pageNum: ++pageNum,\n                                        totalPages: x.pages.length,\n                                        cancel: function() {\n                                            canceled = true;\n                                        }\n                                    });\n                                    if (!canceled) {\n                                        setTimeout(next);\n                                    } else {\n                                        // XXX: should we also fail() the deferred object?\n                                        x.container.parentNode.removeChild(x.container);\n                                    }\n                                } else {\n                                    x.container.parentNode.removeChild(x.container);\n                                    promise.resolve(group);\n                                }\n                            })();\n                        } else {\n                            x.pages.forEach(function(page){\n                                group.append(doOne(page));\n                            });\n                            x.container.parentNode.removeChild(x.container);\n                            promise.resolve(group);\n                        }\n                    },\n                    element,\n                    forceBreak,\n                    pageWidth ? pageWidth - margin.left - margin.right : null,\n                    pageHeight ? pageHeight - margin.top - margin.bottom : null,\n                    margin,\n                    options\n                );\n            } else {\n                promise.resolve(doOne(element));\n            }\n        });\n\n        function makeTemplate(template) {\n            if (template != null) {\n                if (typeof template == \"string\") {\n                    template = kendo.template(template.replace(/^\\s+|\\s+$/g, \"\"));\n                }\n                if (typeof template == \"function\") {\n                    return function(data) {\n                        var el = template(data);\n                        if (el && typeof el == \"string\") {\n                            var div = document.createElement(\"div\");\n                            div.innerHTML = el;\n                            el = div.firstElementChild;\n                        }\n                        return el;\n                    };\n                }\n                // assumed DOM element\n                return function() {\n                    return template.cloneNode(true);\n                };\n            }\n        }\n\n        function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\n            var template = makeTemplate(options.template);\n            var doc = element.ownerDocument;\n            var pages = [];\n            var copy = options._destructive ? element : cloneNodes(element);\n            var container = doc.createElement(\"KENDO-PDF-DOCUMENT\");\n            var adjust = 0;\n\n            // make sure <tfoot> elements are at the end (Grid widget\n            // places TFOOT before TBODY, tricking our algorithm to\n            // insert a page break right after the header).\n            // https://github.com/telerik/kendo/issues/4699\n            slice$1$1(copy.querySelectorAll(\"tfoot\")).forEach(function(tfoot){\n                tfoot.parentNode.appendChild(tfoot);\n            });\n\n            // remember the index of each LI from an ordered list.\n            // we'll use it to reconstruct the proper numbering.\n            slice$1$1(copy.querySelectorAll(\"ol\")).forEach(function(ol){\n                slice$1$1(ol.children).forEach(function(li, index){\n                    li.setAttribute(\"kendo-split-index\", index);\n                });\n            });\n\n            setCSS(container, {\n                display   : \"block\",\n                position  : \"absolute\",\n                boxSizing : \"content-box\",\n                left      : \"-10000px\",\n                top       : \"-10000px\"\n            });\n\n            if (pageWidth) {\n                // subtle: if we don't set the width *and* margins here, the layout in this\n                // container will be different from the one in our final page elements, and we'll\n                // split at the wrong places.\n                setCSS(container, {\n                    width        : pageWidth + \"px\",\n                    paddingLeft  : margin.left + \"px\",\n                    paddingRight : margin.right + \"px\"\n                });\n\n                // when the first element has a margin-top (i.e. a <h1>) the page will be\n                // inadvertently enlarged by that number (the browser will report the container's\n                // bounding box top to start at the element's top, rather than including its\n                // margin).  Adding overflow: hidden seems to fix it.\n                //\n                // to understand the difference, try the following snippets in your browser:\n                //\n                // 1. <div style=\"background: yellow\">\n                //      <h1 style=\"margin: 3em\">Foo</h1>\n                //    </div>\n                //\n                // 2. <div style=\"background: yellow; overflow: hidden\">\n                //      <h1 style=\"margin: 3em\">Foo</h1>\n                //    </div>\n                //\n                // this detail is not important when automatic page breaking is not requested, hence\n                // doing it only if pageWidth is defined.\n                setCSS(copy, { overflow: \"hidden\" });\n            }\n\n            element.parentNode.insertBefore(container, element);\n            container.appendChild(copy);\n\n            // With cache disabled, images will still have height zero until their `complete` attribute\n            // is true.  `whenImagesAreActuallyLoaded` will wait for it.\n            if (options.beforePageBreak) {\n                whenImagesAreActuallyLoaded([ container ], function() {\n                    options.beforePageBreak(container, doPageBreak);\n                });\n            } else {\n                whenImagesAreActuallyLoaded([ container ], doPageBreak);\n            }\n\n            function doPageBreak() {\n                if (forceBreak != \"-\" || pageHeight) {\n                    splitElement(copy);\n                }\n\n                {\n                    var page = makePage();\n                    copy.parentNode.insertBefore(page, copy);\n                    page.appendChild(copy);\n                }\n\n                if (template) {\n                    pages.forEach(function(page, i){\n                        var el = template({\n                            element    : page,\n                            pageNum    : i + 1,\n                            totalPages : pages.length\n                        });\n                        if (el) {\n                            page.appendChild(el);\n                        }\n                    });\n                }\n\n                cacheImages(pages, callback.bind(null, { pages: pages, container: container }));\n            }\n\n            function keepTogether(el) {\n                if (options.keepTogether && matches(el, options.keepTogether) && el.offsetHeight <= pageHeight - adjust) {\n                    return true;\n                }\n\n                var tag = el.tagName;\n                if (/^h[1-6]$/i.test(tag) && el.offsetHeight >= pageHeight - adjust) {\n                    return false;\n                }\n\n                return (el.getAttribute(\"data-kendo-chart\") ||\n                        /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName));\n            }\n\n            function splitElement(element) {\n                if (element.tagName == \"TABLE\") {\n                    setCSS(element, { tableLayout: \"fixed\" });\n                }\n                if (keepTogether(element)) {\n                    return;\n                }\n                var style = getComputedStyle$1(element);\n                var bottomPadding = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n                var bottomBorder = parseFloat(getPropertyValue(style, \"border-bottom-width\"));\n                var saveAdjust = adjust;\n                adjust += bottomPadding + bottomBorder;\n                var isFirst = true;\n                for (var el = element.firstChild; el; el = el.nextSibling) {\n                    if (el.nodeType == 1 /* Element */) {\n                        isFirst = false;\n                        if (matches(el, forceBreak)) {\n                            breakAtElement(el);\n                            continue;\n                        }\n                        if (!pageHeight) {\n                            // we're in \"manual breaks mode\"\n                            splitElement(el);\n                            continue;\n                        }\n                        if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle$1(el), \"position\"))) {\n                            continue;\n                        }\n                        var fall = fallsOnMargin(el);\n                        if (fall == 1) {\n                            // element starts on next page, break before anyway.\n                            breakAtElement(el);\n                        }\n                        else if (fall) {\n                            // elements ends up on next page, or possibly doesn't fit on a page at\n                            // all.  break before it anyway if it's an <img> or <tr>, otherwise\n                            // attempt to split.\n                            if (keepTogether(el)) {\n                                breakAtElement(el);\n                            } else {\n                                splitElement(el);\n                            }\n                        }\n                        else {\n                            splitElement(el);\n                        }\n                    }\n                    else if (el.nodeType == 3 /* Text */ && pageHeight) {\n                        splitText(el, isFirst);\n                        isFirst = false;\n                    }\n                }\n                adjust = saveAdjust;\n            }\n\n            function firstInParent(el) {\n                var p = el.parentNode, first = p.firstChild;\n                if (el === first) {\n                    return true;\n                }\n                if (el === p.children[0]) {\n                    if (first.nodeType == 7 /* comment */ ||\n                        first.nodeType == 8 /* processing instruction */) {\n                        return true;\n                    }\n                    if (first.nodeType == 3 /* text */) {\n                        // if whitespace only we can probably consider it's first\n                        return !/\\S/.test(first.data);\n                    }\n                }\n                return false;\n            }\n\n            function breakAtElement(el) {\n                if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\n                    return breakAtElement(el.parentNode);\n                }\n                var table, colgroup, thead, grid, gridHead;\n                table = closest(el, \"table\");\n                colgroup = table && table.querySelector(\"colgroup\");\n                if (options.repeatHeaders) {\n                    thead = table && table.querySelector(\"thead\");\n\n                    // If we break page in a Kendo Grid, repeat its header.  This ugly hack is\n                    // necessary because a scrollable grid will keep the header in a separate\n                    // <table> element from its content.\n                    //\n                    // XXX: This is likely to break as soon as the widget HTML is modified.\n                    grid = closest(el, \".k-grid.k-widget\");\n                    if (grid && grid.querySelector(\".k-auto-scrollable\")) {\n                        gridHead = grid.querySelector(\".k-grid-header\");\n                    }\n                }\n                var page = makePage();\n                var range = doc.createRange();\n                range.setStartBefore(copy);\n                range.setEndBefore(el);\n                page.appendChild(range.extractContents());\n                copy.parentNode.insertBefore(page, copy);\n                preventBulletOnListItem(el.parentNode);\n                if (table) {\n                    table = closest(el, \"table\"); // that's the <table> on next page!\n                    if (options.repeatHeaders && thead) {\n                        table.insertBefore(thead.cloneNode(true), table.firstChild);\n                    }\n                    if (colgroup) {\n                        table.insertBefore(colgroup.cloneNode(true), table.firstChild);\n                    }\n                }\n                if (options.repeatHeaders && gridHead) {\n                    grid = closest(el, \".k-grid.k-widget\");\n                    grid.insertBefore(gridHead.cloneNode(true), grid.firstChild);\n                }\n            }\n\n            function makePage() {\n                var page = doc.createElement(\"KENDO-PDF-PAGE\");\n                setCSS(page, {\n                    display  : \"block\",\n                    boxSizing: \"content-box\",\n                    width    : pageWidth ? (pageWidth + \"px\") : \"auto\",\n                    padding  : (margin.top + \"px \" +\n                                margin.right + \"px \" +\n                                margin.bottom + \"px \" +\n                                margin.left + \"px\"),\n\n                    // allow absolutely positioned elements to be relative to current page\n                    position : \"relative\",\n\n                    // without the following we might affect layout of subsequent pages\n                    height   : pageHeight ? (pageHeight + \"px\") : \"auto\",\n                    overflow : pageHeight || pageWidth ? \"hidden\" : \"visible\",\n                    clear    : \"both\"\n                });\n\n                // debug\n                // $(\"<div>\").css({\n                //     position  : \"absolute\",\n                //     left      : margin.left,\n                //     top       : margin.top,\n                //     width     : pageWidth,\n                //     height    : pageHeight,\n                //     boxSizing : \"border-box\",\n                //     background: \"rgba(255, 255, 0, 0.5)\"\n                //     //border    : \"1px solid red\"\n                // }).appendTo(page);\n\n                if (options && options.pageClassName) {\n                    page.className = options.pageClassName;\n                }\n                pages.push(page);\n                return page;\n            }\n\n            function fallsOnMargin(thing) {\n                var box = thing.getBoundingClientRect();\n                if (box.width === 0 || box.height === 0) {\n                    // I'd say an element with dimensions zero fits on current page.\n                    return 0;\n                }\n                var top = copy.getBoundingClientRect().top;\n                var available = pageHeight - adjust;\n                return (box.height > available) ? 3\n                    : (box.top - top > available) ? 1\n                    : (box.bottom - top > available) ? 2\n                    : 0;\n            }\n\n            function splitText(node, isFirst) {\n                if (!/\\S/.test(node.data)) {\n                    return;\n                }\n\n                var len = node.data.length;\n                var range = doc.createRange();\n                range.selectNodeContents(node);\n                var fall = fallsOnMargin(range);\n                if (!fall) {\n                    return;     // the whole text fits on current page\n                }\n\n                var nextnode = node;\n                if (fall == 1) {\n                    // starts on next page, break before anyway.\n                    if (isFirst) {\n                        // avoid leaving an empty <p>, <li>, etc. on previous page.\n                        breakAtElement(node.parentNode);\n                    } else {\n                        breakAtElement(node);\n                    }\n                }\n                else {\n                    (function findEOP(min, pos, max) {\n                        range.setEnd(node, pos);\n                        if (min == pos || pos == max) {\n                            return pos;\n                        }\n                        if (fallsOnMargin(range)) {\n                            return findEOP(min, (min + pos) >> 1, pos);\n                        } else {\n                            return findEOP(pos, (pos + max) >> 1, max);\n                        }\n                    })(0, len >> 1, len);\n\n                    if (!/\\S/.test(range.toString()) && isFirst) {\n                        // avoid leaving an empty <p>, <li>, etc. on previous page.\n                        breakAtElement(node.parentNode);\n                    } else {\n                        // This is only needed for IE, but it feels cleaner to do it anyway.  Without\n                        // it, IE will truncate a very long text (playground/pdf-long-text-2.html).\n                        nextnode = node.splitText(range.endOffset);\n\n                        var page = makePage();\n                        range.setStartBefore(copy);\n                        page.appendChild(range.extractContents());\n                        copy.parentNode.insertBefore(page, copy);\n                        preventBulletOnListItem(nextnode.parentNode);\n                    }\n                }\n\n                splitText(nextnode);\n            }\n\n            function preventBulletOnListItem(el) {\n                // set a hint on continued LI elements, to tell the\n                // renderer not to draw the bullet again.\n                // https://github.com/telerik/kendo-ui-core/issues/2732\n                var li = closest(el, \"li\");\n                if (li) {\n                    li.setAttribute(\"kendo-no-bullet\", \"1\");\n                    preventBulletOnListItem(li.parentNode);\n                }\n            }\n        }\n\n        return promise;\n    }\n\n    // This is needed for the Spreadsheet print functionality.  Since\n    // there we only need to draw text, this cuts through the ceremony\n    // of drawDOM/renderElement and renders the text node directly.\n    function drawText(element) {\n        var group = new Group();\n        nodeInfo._clipbox = false;\n        nodeInfo._matrix = Matrix.unit();\n        nodeInfo._stackingContext = {\n            element: element,\n            group: group\n        };\n        pushNodeInfo(element, getComputedStyle$1(element), group);\n        if (element.firstChild.nodeType == 3 /* Text */) {\n            // avoid the penalty of renderElement\n            renderText(element, element.firstChild, group);\n        } else {\n            _renderElement(element, group);\n        }\n        popNodeInfo();\n        return group;\n    }\n\n    var parseBackgroundImage = (function(){\n        var tok_linear_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/;\n        //var tok_radial_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?radial-gradient\\s*)\\(/;\n        var tok_percent          = /^([-0-9.]+%)/;\n        var tok_length           = /^([-0-9.]+px)/;\n        var tok_keyword          = /^(left|right|top|bottom|to|center)\\W/;\n        var tok_angle            = /^([-0-9.]+(deg|grad|rad|turn)|0)/;\n        var tok_whitespace       = /^(\\s+)/;\n        var tok_popen            = /^(\\()/;\n        var tok_pclose           = /^(\\))/;\n        var tok_comma            = /^(,)/;\n        var tok_url              = /^(url)\\(/;\n        var tok_content          = /^(.*?)\\)/;\n\n        var cache1 = {}, cache2 = {};\n\n        function parse(input) {\n            var orig = input;\n            if (hasOwnProperty(cache1, orig)) {\n                return cache1[orig];\n            }\n            function skip_ws() {\n                var m = tok_whitespace.exec(input);\n                if (m) {\n                    input = input.substr(m[1].length);\n                }\n            }\n            function read(token) {\n                skip_ws();\n                var m = token.exec(input);\n                if (m) {\n                    input = input.substr(m[1].length);\n                    return m[1];\n                }\n            }\n\n            function read_stop() {\n                var color = kendo.parseColor(input, true);\n                var length, percent;\n                if (color) {\n                    var match =\n                        /^#[0-9a-f]+/i.exec(input) ||\n                        /^rgba?\\(.*?\\)/i.exec(input) ||\n                        /^..*?\\b/.exec(input); // maybe named color\n                    input = input.substr(match[0].length);\n                    color = color.toRGB();\n                    if (!(length = read(tok_length))) {\n                        percent = read(tok_percent);\n                    }\n                    return { color: color, length: length, percent: percent };\n                }\n            }\n\n            function read_linear_gradient(propName) {\n                var angle;\n                var to1, to2;\n                var stops = [];\n                var reverse = false;\n\n                if (read(tok_popen)) {\n                    // 1. [ <angle> || to <side-or-corner>, ]?\n                    angle = read(tok_angle);\n                    if (angle == \"0\") {\n                        angle = \"0deg\"; // Edge\n                    }\n                    if (angle) {\n                        angle = parseAngle(angle);\n                        read(tok_comma);\n                    }\n                    else {\n                        to1 = read(tok_keyword);\n                        if (to1 == \"to\") {\n                            to1 = read(tok_keyword);\n                        } else if (to1 && /^-/.test(propName)) {\n                            reverse = true;\n                        }\n                        to2 = read(tok_keyword);\n                        read(tok_comma);\n                    }\n\n                    if (/-moz-/.test(propName) && angle == null && to1 == null) {\n                        var x = read(tok_percent), y = read(tok_percent);\n                        reverse = true;\n                        if (x == \"0%\") {\n                            to1 = \"left\";\n                        } else if (x == \"100%\") {\n                            to1 = \"right\";\n                        }\n                        if (y == \"0%\") {\n                            to2 = \"top\";\n                        } else if (y == \"100%\") {\n                            to2 = \"bottom\";\n                        }\n                        read(tok_comma);\n                    }\n\n                    // 2. color stops\n                    while (input && !read(tok_pclose)) {\n                        var stop = read_stop();\n                        if (!stop) {\n                            break;\n                        }\n                        stops.push(stop);\n                        read(tok_comma);\n                    }\n\n                    return {\n                        type    : \"linear\",\n                        angle   : angle,\n                        to      : to1 && to2 ? to1 + \" \" + to2 : to1 ? to1 : to2 ? to2 : null,\n                        stops   : stops,\n                        reverse : reverse\n                    };\n                }\n            }\n\n            function read_url() {\n                if (read(tok_popen)) {\n                    var url = read(tok_content);\n                    url = url.replace(/^['\"]+|[\"']+$/g, \"\");\n                    read(tok_pclose);\n                    return { type: \"url\", url: url };\n                }\n            }\n\n            var tok;\n\n            if ((tok = read(tok_linear_gradient))) {\n                tok = read_linear_gradient(tok);\n            }\n            else if ((tok = read(tok_url))) {\n                tok = read_url();\n            }\n\n            return (cache1[orig] = tok || { type: \"none\" });\n        }\n\n        return function(input) {\n            if (hasOwnProperty(cache2, input)) {\n                return cache2[input];\n            }\n            return (cache2[input] = splitProperty(input).map(parse));\n        };\n    })();\n\n    var splitProperty = (function(){\n        var cache = {};\n        return function(input, separator) {\n            if (!separator) {\n                separator = /^\\s*,\\s*/;\n            }\n\n            var cacheKey = input + separator;\n\n            if (hasOwnProperty(cache, cacheKey)) {\n                return cache[cacheKey];\n            }\n\n            var ret = [];\n            var last$$1 = 0, pos = 0;\n            var in_paren = 0;\n            var in_string = false;\n            var m;\n\n            function looking_at(rx) {\n                return (m = rx.exec(input.substr(pos)));\n            }\n\n            function trim(str) {\n                return str.replace(/^\\s+|\\s+$/g, \"\");\n            }\n\n            while (pos < input.length) {\n                if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\n                    in_paren++;\n                    pos++;\n                }\n                else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\n                    in_paren--;\n                    pos++;\n                }\n                else if (!in_string && looking_at(/^[\\\"\\']/)) {\n                    in_string = m[0];\n                    pos++;\n                }\n                else if (in_string == \"'\" && looking_at(/^\\\\\\'/)) {\n                    pos += 2;\n                }\n                else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\n                    pos += 2;\n                }\n                else if (in_string == \"'\" && looking_at(/^\\'/)) {\n                    in_string = false;\n                    pos++;\n                }\n                else if (in_string == '\"' && looking_at(/^\\\"/)) {\n                    in_string = false;\n                    pos++;\n                }\n                else if (looking_at(separator)) {\n                    if (!in_string && !in_paren && pos > last$$1) {\n                        ret.push(trim(input.substring(last$$1, pos)));\n                        last$$1 = pos + m[0].length;\n                    }\n                    pos += m[0].length;\n                }\n                else {\n                    pos++;\n                }\n            }\n            if (last$$1 < pos) {\n                ret.push(trim(input.substring(last$$1, pos)));\n            }\n            return (cache[cacheKey] = ret);\n        };\n    })();\n\n    var getFontURL = (function(cache){\n        return function(el){\n            // XXX: for IE we get here the whole cssText of the rule,\n            // because the computedStyle.src is empty.  Next time we need\n            // to fix these regexps we better write a CSS parser. :-\\\n            var url = cache[el];\n            if (!url) {\n                var m;\n                if ((m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el))) {\n                    url = cache[el] = m[2];\n                } else if ((m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el))) {\n                    url = cache[el] = m[2];\n                }\n            }\n            return url;\n        };\n    })(Object.create ? Object.create(null) : {});\n\n    var getFontHeight = (function(cache){\n        return function(font) {\n            var height = cache[font];\n            if (height == null) {\n                height = cache[font] = kendoUtil.measureText(\"Mapq\", { font: font }).height;\n            }\n            return height;\n        };\n    })(Object.create ? Object.create(null) : {});\n\n    function getFontFaces(doc) {\n        if (doc == null) {\n            doc = document;\n        }\n        var result = {};\n        for (var i = 0; i < doc.styleSheets.length; ++i) {\n            doStylesheet(doc.styleSheets[i]);\n        }\n        return result;\n        function doStylesheet(ss) {\n            if (ss) {\n                var rules = null;\n                try {\n                    rules = ss.cssRules;\n                } catch (ex) {}\n                if (rules) {\n                    addRules(ss, rules);\n                }\n            }\n        }\n        function findFonts(rule) {\n            var src = getPropertyValue(rule.style, \"src\");\n            if (src) {\n                return splitProperty(src).reduce(function(a, el){\n                    var font = getFontURL(el);\n                    if (font) {\n                        a.push(font);\n                    }\n                    return a;\n                }, []);\n            } else {\n                // Internet Explorer\n                // XXX: this is gross.  should work though for valid CSS.\n                var font = getFontURL(rule.cssText);\n                return font ? [ font ] : [];\n            }\n        }\n        function addRules(styleSheet, rules) {\n            for (var i = 0; i < rules.length; ++i) {\n                var r = rules[i];\n                switch (r.type) {\n                  case 3:       // CSSImportRule\n                    doStylesheet(r.styleSheet);\n                    break;\n                  case 5:       // CSSFontFaceRule\n                    var style  = r.style;\n                    var family = splitProperty(getPropertyValue(style, \"font-family\"));\n                    var bold   = /^([56789]00|bold)$/i.test(getPropertyValue(style, \"font-weight\"));\n                    var italic = \"italic\" == getPropertyValue(style, \"font-style\");\n                    var src    = findFonts(r);\n                    if (src.length > 0) {\n                        addRule(styleSheet, family, bold, italic, src[0]);\n                    }\n                }\n            }\n        }\n        function addRule(styleSheet, names, bold, italic, url) {\n            // We get full resolved absolute URLs in Chrome, but sadly\n            // not in Firefox.\n            if (!(/^data:/i.test(url))) {\n                if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\n                    url = String(styleSheet.href).replace(/[^\\/]*$/, \"\") + url;\n                }\n            }\n            names.forEach(function(name){\n                name = name.replace(/^(['\"]?)(.*?)\\1$/, \"$2\"); // it's quoted\n                if (bold) {\n                    name += \"|bold\";\n                }\n                if (italic) {\n                    name += \"|italic\";\n                }\n                result[name] = url;\n            });\n        }\n    }\n\n    function hasOwnProperty(obj, key) {\n        return Object.prototype.hasOwnProperty.call(obj, key);\n    }\n\n    function getCounter(name) {\n        name = \"_counter_\" + name;\n        return nodeInfo[name];\n    }\n\n    function getAllCounters(name) {\n        var values = [], p = nodeInfo;\n        name = \"_counter_\" + name;\n        while (p) {\n            if (hasOwnProperty(p, name)) {\n                values.push(p[name]);\n            }\n            p = Object.getPrototypeOf(p);\n        }\n        return values.reverse();\n    }\n\n    function incCounter(name, inc) {\n        var p = nodeInfo;\n        name = \"_counter_\" + name;\n        while (p && !hasOwnProperty(p, name)) {\n            p = Object.getPrototypeOf(p);\n        }\n        if (!p) {\n            p = nodeInfo._root;\n        }\n        p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\n    }\n\n    function resetCounter(name, val) {\n        name = \"_counter_\" + name;\n        nodeInfo[name] = val == null ? 0 : val;\n    }\n\n    function doCounters(a, f, def) {\n        for (var i = 0; i < a.length;) {\n            var name = a[i++];\n            var val = parseFloat(a[i]);\n            if (isNaN(val)) {\n                f(name, def);\n            } else {\n                f(name, val);\n                ++i;\n            }\n        }\n    }\n\n    function updateCounters(style) {\n        var counterReset = getPropertyValue(style, \"counter-reset\");\n        if (counterReset) {\n            doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\n        }\n        var counterIncrement = getPropertyValue(style, \"counter-increment\");\n        if (counterIncrement) {\n            doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\n        }\n    }\n\n    function parseColor$1(str, css) {\n        var color = kendo.parseColor(str, true);\n        if (color) {\n            color = color.toRGB();\n            if (css) {\n                color = color.toCssRgba();\n            } else if (color.a === 0) {\n                color = null;\n            }\n        }\n        return color;\n    }\n\n    function whenImagesAreActuallyLoaded(elements, callback) {\n        var pending = 0;\n        var done = false;\n        elements.forEach(function(el){\n            var images = el.querySelectorAll(\"img\");\n            for (var i = 0; i < images.length; ++i) {\n                var img = images[i];\n                if (!img.complete) {\n                    pending++;\n                    img.onload = img.onerror = next;\n                }\n            }\n        });\n        next();\n\n        function next() {\n            if (!done && --pending <= 0) {\n                callback();\n                done = true;\n            }\n        }\n    }\n\n    function cacheImages(elements, callback) {\n        var urls = [];\n        function add(url) {\n            if (!IMAGE_CACHE[url]) {\n                IMAGE_CACHE[url] = true;\n                urls.push(url);\n            }\n        }\n\n        elements.forEach(function dive(element){\n            if (/^img$/i.test(element.tagName)) {\n                add(element.src);\n            }\n            parseBackgroundImage(\n                getPropertyValue(\n                    getComputedStyle$1(element), \"background-image\"\n                )\n            ).forEach(function(bg){\n                if (bg.type == \"url\") {\n                    add(bg.url);\n                }\n            });\n\n            if (element.children) {\n                slice$1$1(element.children).forEach(dive);\n            }\n        });\n\n        var count = urls.length;\n        function next() {\n            if (--count <= 0) {\n                // Even though we cached them, they simply won't be available immediately in the newly\n                // created DOM.  Previously we'd allow a 10ms timeout, but that's arbitrary and clearly\n                // not working in all cases (https://github.com/telerik/kendo/issues/5399), so this\n                // function will wait for their .complete attribute.\n                whenImagesAreActuallyLoaded(elements, callback);\n            }\n        }\n        if (count === 0) {\n            next();\n        }\n        urls.forEach(function(url){\n            var img = IMAGE_CACHE[url] = new window.Image();\n            if (!(/^data:/i.test(url))) {\n                img.crossOrigin = \"Anonymous\";\n            }\n            img.src = url;\n            if (img.complete) {\n                next();\n            } else {\n                img.onload = next;\n                img.onerror = function() {\n                    IMAGE_CACHE[url] = null;\n                    next();\n                };\n            }\n        });\n    }\n\n    function alphaNumeral(n) {\n        var result = \"\";\n        do {\n            var r = n % 26;\n            result = String.fromCharCode(97 + r) + result;\n            n = Math.floor(n / 26);\n        } while (n > 0);\n        return result;\n    }\n\n    function pushNodeInfo(element, style, group) {\n        nodeInfo = Object.create(nodeInfo);\n        nodeInfo[element.tagName.toLowerCase()] = {\n            element: element,\n            style: style\n        };\n        var decoration = getPropertyValue(style, \"text-decoration\");\n        if (decoration && decoration != \"none\") {\n            var color = getPropertyValue(style, \"text-decoration-color\");\n            decoration.split(/\\s+/g).forEach(function(name){\n                if (!nodeInfo[name]) {\n                    nodeInfo[name] = color;\n                    if (name == \"underline\") {\n                        var offset = getPropertyValue(style, \"text-underline-offset\");\n                        if (offset != \"auto\") {\n                            nodeInfo[\"underline-offset\"] = parseFloat(offset);\n                        }\n                    }\n                }\n            });\n        }\n\n        if (createsStackingContext(style)) {\n            nodeInfo._stackingContext = {\n                element: element,\n                group: group\n            };\n        }\n    }\n\n    function popNodeInfo() {\n        nodeInfo = Object.getPrototypeOf(nodeInfo);\n    }\n\n    function updateClipbox(path) {\n        if (nodeInfo._clipbox != null) {\n            var box = path.bbox(nodeInfo._matrix);\n            if (nodeInfo._clipbox) {\n                nodeInfo._clipbox = Rect.intersect(nodeInfo._clipbox, box);\n            } else {\n                nodeInfo._clipbox = box;\n            }\n        }\n    }\n\n    function emptyClipbox() {\n        var cb = nodeInfo._clipbox;\n        if (cb == null) {\n            return true;\n        }\n        if (cb) {\n            return cb.width() === 0 || cb.height() === 0;\n        }\n    }\n\n    function createsStackingContext(style) {\n        function prop(name) { return getPropertyValue(style, name); }\n        if (prop(\"transform\") != \"none\" ||\n            prop(\"position\") != \"static\" ||\n            prop(\"z-index\") != \"auto\" ||\n            prop(\"opacity\") < 1) {\n            return true;\n        }\n    }\n\n    function getComputedStyle$1(element, pseudoElt) {\n        return window.getComputedStyle(element, pseudoElt || null);\n    }\n\n    function getPropertyValue(style, prop, defa) {\n        var val = style.getPropertyValue(prop);\n        if (val == null || val === \"\") {\n            if (browser.webkit) {\n                val = style.getPropertyValue(\"-webkit-\" + prop );\n            } else if (browser.mozilla) {\n                val = style.getPropertyValue(\"-moz-\" + prop );\n            } else if (browser.opera) {\n                val = style.getPropertyValue(\"-o-\" + prop);\n            } else if (microsoft) {\n                val = style.getPropertyValue(\"-ms-\" + prop);\n            }\n        }\n        if (arguments.length > 2 && (val == null || val === \"\")) {\n            return defa;\n        } else {\n            return val;\n        }\n    }\n\n    function pleaseSetPropertyValue(style, prop, value, important) {\n        style.setProperty(prop, value, important);\n        if (browser.webkit) {\n            style.setProperty(\"-webkit-\" + prop, value, important);\n        } else if (browser.mozilla) {\n            style.setProperty(\"-moz-\" + prop, value, important);\n        } else if (browser.opera) {\n            style.setProperty(\"-o-\" + prop, value, important);\n        } else if (microsoft) {\n            style.setProperty(\"-ms-\" + prop, value, important);\n            prop = \"ms\" + prop.replace(/(^|-)([a-z])/g, function(s, p1, p2){\n                return p1 + p2.toUpperCase();\n            });\n            style[prop] = value;\n        }\n    }\n\n    function getBorder(style, side) {\n        side = \"border-\" + side;\n        return {\n            width: parseFloat(getPropertyValue(style, side + \"-width\")),\n            style: getPropertyValue(style, side + \"-style\"),\n            color: parseColor$1(getPropertyValue(style, side + \"-color\"), true)\n        };\n    }\n\n    function saveStyle(element, func) {\n        var prev = element.style.cssText;\n        var result = func();\n        element.style.cssText = prev;\n        return result;\n    }\n\n    function getBorderRadius(style, side) {\n        var r = getPropertyValue(style, \"border-\" + side + \"-radius\").split(/\\s+/g).map(parseFloat);\n        if (r.length == 1) {\n            r.push(r[0]);\n        }\n        return sanitizeRadius({ x: r[0], y: r[1] });\n    }\n\n    function getContentBox(element) {\n        var box = element.getBoundingClientRect();\n        box = innerBox(box, \"border-*-width\", element);\n        box = innerBox(box, \"padding-*\", element);\n        return box;\n    }\n\n    function innerBox(box, prop, element) {\n        var style, wt, wr, wb, wl;\n        if (typeof prop == \"string\") {\n            style = getComputedStyle$1(element);\n            wt = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"top\")));\n            wr = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"right\")));\n            wb = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"bottom\")));\n            wl = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"left\")));\n        }\n        else if (typeof prop == \"number\") {\n            wt = wr = wb = wl = prop;\n        }\n        return {\n            top    : box.top + wt,\n            right  : box.right - wr,\n            bottom : box.bottom - wb,\n            left   : box.left + wl,\n            width  : box.right - box.left - wr - wl,\n            height : box.bottom - box.top - wb - wt\n        };\n    }\n\n    function getTransform(style) {\n        var transform$$1 = getPropertyValue(style, \"transform\");\n        if (transform$$1 == \"none\") {\n            return null;\n        }\n        var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform$$1);\n        if (matrix) {\n            var origin = getPropertyValue(style, \"transform-origin\");\n            matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\n            origin = origin.split(/\\s+/g).map(parseFloat);\n            return {\n                matrix: matrix,\n                origin: origin\n            };\n        }\n    }\n\n    function radiansToDegrees(radians) {\n        return ((180 * radians) / Math.PI) % 360;\n    }\n\n    function parseAngle(angle) {\n        var num = parseFloat(angle);\n        if (/grad$/.test(angle)) {\n            return Math.PI * num / 200;\n        }\n        else if (/rad$/.test(angle)) {\n            return num;\n        }\n        else if (/turn$/.test(angle)) {\n            return Math.PI * num * 2;\n        }\n        else if (/deg$/.test(angle)) {\n            return Math.PI * num / 180;\n        }\n    }\n\n    function setTransform$1(shape, m) {\n        m = new Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\n        shape.transform(m);\n        return m;\n    }\n\n    function setClipping(shape, clipPath) {\n        shape.clip(clipPath);\n    }\n\n    function addArcToPath(path, x, y, options) {\n        var points = new Arc$2([ x, y ], options).curvePoints(), i = 1;\n        while (i < points.length) {\n            path.curveTo(points[i++], points[i++], points[i++]);\n        }\n    }\n\n    function sanitizeRadius(r) {\n        if (r.x <= 0 || r.y <= 0) {\n            r.x = r.y = 0;\n        }\n        return r;\n    }\n\n    function adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\n        // adjust border radiuses such that the sum of adjacent\n        // radiuses is not bigger than the length of the side.\n        // seems the correct algorithm is variant (3) from here:\n        // http://www.w3.org/Style/CSS/Tracker/issues/29?changelog\n        var tl_x = Math.max(0, rTL.x), tl_y = Math.max(0, rTL.y);\n        var tr_x = Math.max(0, rTR.x), tr_y = Math.max(0, rTR.y);\n        var br_x = Math.max(0, rBR.x), br_y = Math.max(0, rBR.y);\n        var bl_x = Math.max(0, rBL.x), bl_y = Math.max(0, rBL.y);\n\n        var f = Math.min(\n            box.width / (tl_x + tr_x),\n            box.height / (tr_y + br_y),\n            box.width / (br_x + bl_x),\n            box.height / (bl_y + tl_y)\n        );\n\n        if (f < 1) {\n            tl_x *= f; tl_y *= f;\n            tr_x *= f; tr_y *= f;\n            br_x *= f; br_y *= f;\n            bl_x *= f; bl_y *= f;\n        }\n\n        return {\n            tl: { x: tl_x, y: tl_y },\n            tr: { x: tr_x, y: tr_y },\n            br: { x: br_x, y: br_y },\n            bl: { x: bl_x, y: bl_y }\n        };\n    }\n\n    function elementRoundBox(element, box, type) {\n        var style = getComputedStyle$1(element);\n\n        var rTL = getBorderRadius(style, \"top-left\");\n        var rTR = getBorderRadius(style, \"top-right\");\n        var rBL = getBorderRadius(style, \"bottom-left\");\n        var rBR = getBorderRadius(style, \"bottom-right\");\n\n        if (type == \"padding\" || type == \"content\") {\n            var bt = getBorder(style, \"top\");\n            var br = getBorder(style, \"right\");\n            var bb = getBorder(style, \"bottom\");\n            var bl = getBorder(style, \"left\");\n            rTL.x -= bl.width; rTL.y -= bt.width;\n            rTR.x -= br.width; rTR.y -= bt.width;\n            rBR.x -= br.width; rBR.y -= bb.width;\n            rBL.x -= bl.width; rBL.y -= bb.width;\n            if (type == \"content\") {\n                var pt = parseFloat(getPropertyValue(style, \"padding-top\"));\n                var pr = parseFloat(getPropertyValue(style, \"padding-right\"));\n                var pb = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n                var pl = parseFloat(getPropertyValue(style, \"padding-left\"));\n                rTL.x -= pl; rTL.y -= pt;\n                rTR.x -= pr; rTR.y -= pt;\n                rBR.x -= pr; rBR.y -= pb;\n                rBL.x -= pl; rBL.y -= pb;\n            }\n        }\n\n        if (typeof type == \"number\") {\n            rTL.x -= type; rTL.y -= type;\n            rTR.x -= type; rTR.y -= type;\n            rBR.x -= type; rBR.y -= type;\n            rBL.x -= type; rBL.y -= type;\n        }\n\n        return roundBox(box, rTL, rTR, rBR, rBL);\n    }\n\n    // Create a drawing.Path for a rounded rectangle.  Receives the\n    // bounding box and the border-radiuses in CSS order (top-left,\n    // top-right, bottom-right, bottom-left).  The radiuses must be\n    // objects containing x (horiz. radius) and y (vertical radius).\n    function roundBox(box, rTL0, rTR0, rBR0, rBL0) {\n        var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n        var rTL = tmp.tl;\n        var rTR = tmp.tr;\n        var rBR = tmp.br;\n        var rBL = tmp.bl;\n        var path = new Path({ fill: null, stroke: null });\n        path.moveTo(box.left, box.top + rTL.y);\n        if (rTL.x) {\n            addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\n                startAngle: -180,\n                endAngle: -90,\n                radiusX: rTL.x,\n                radiusY: rTL.y\n            });\n        }\n        path.lineTo(box.right - rTR.x, box.top);\n        if (rTR.x) {\n            addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\n                startAngle: -90,\n                endAngle: 0,\n                radiusX: rTR.x,\n                radiusY: rTR.y\n            });\n        }\n        path.lineTo(box.right, box.bottom - rBR.y);\n        if (rBR.x) {\n            addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\n                startAngle: 0,\n                endAngle: 90,\n                radiusX: rBR.x,\n                radiusY: rBR.y\n            });\n        }\n        path.lineTo(box.left + rBL.x, box.bottom);\n        if (rBL.x) {\n            addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\n                startAngle: 90,\n                endAngle: 180,\n                radiusX: rBL.x,\n                radiusY: rBL.y\n            });\n        }\n        return path.close();\n    }\n\n    function formatCounter(val, style) {\n        var str = String(parseFloat(val));\n        switch (style) {\n          case \"decimal-leading-zero\":\n            if (str.length < 2) {\n                str = \"0\" + str;\n            }\n            return str;\n          case \"lower-roman\":\n            return arabicToRoman(val).toLowerCase();\n          case \"upper-roman\":\n            return arabicToRoman(val).toUpperCase();\n          case \"lower-latin\":\n          case \"lower-alpha\":\n            return alphaNumeral(val - 1);\n          case \"upper-latin\":\n          case \"upper-alpha\":\n            return alphaNumeral(val - 1).toUpperCase();\n          default:\n            return str;\n        }\n    }\n\n    function evalPseudoElementContent(element, content) {\n        function displayCounter(name, style, separator) {\n            if (!separator) {\n                return formatCounter(getCounter(name) || 0, style);\n            }\n            separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, \"$2\");\n            return getAllCounters(name).map(function(val){\n                return formatCounter(val, style);\n            }).join(separator);\n        }\n        var a = splitProperty(content, /^\\s+/);\n        var result = [], m;\n        a.forEach(function(el){\n            var tmp;\n            if ((m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el))) {\n                result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function(s, p){\n                    return String.fromCharCode(parseInt(p, 16));\n                }));\n            }\n            else if ((m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el))) {\n                tmp = splitProperty(m[1]);\n                result.push(displayCounter(tmp[0], tmp[1]));\n            }\n            else if ((m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el))) {\n                tmp = splitProperty(m[1]);\n                result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\n            }\n            else if ((m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el))) {\n                result.push(element.getAttribute(m[1]) || \"\");\n            }\n            else {\n                result.push(el);\n            }\n        });\n        return result.join(\"\");\n    }\n\n    function getCssText(style) {\n        if (style.cssText) {\n            return style.cssText;\n        }\n        // Status: NEW.  Report year: 2002.  Current year: 2014.\n        // Nice played, Mozillians.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n        var result = [];\n        for (var i = 0; i < style.length; ++i) {\n            result.push(style[i] + \": \" + getPropertyValue(style, style[i]));\n        }\n        return result.join(\";\\n\");\n    }\n\n    function _renderWithPseudoElements(element, group) {\n        if (element.tagName == KENDO_PSEUDO_ELEMENT) {\n            _renderElement(element, group);\n            return;\n        }\n        var fake = [];\n        function pseudo(kind, place) {\n            var style = getComputedStyle$1(element, kind), content = style.content;\n            updateCounters(style);\n            if (content && content != \"normal\" && content != \"none\" && style.width != \"0px\") {\n                var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                psel.style.cssText = getCssText(style);\n                psel.textContent = evalPseudoElementContent(element, content);\n                element.insertBefore(psel, place);\n                fake.push(psel);\n            }\n        }\n        pseudo(\":before\", element.firstChild);\n        pseudo(\":after\", null);\n        if (fake.length > 0) {\n            var saveClass = element.className;\n            element.className += \" kendo-pdf-hide-pseudo-elements\";\n            _renderElement(element, group);\n            element.className = saveClass;\n            fake.forEach(function(el){ element.removeChild(el); });\n        } else {\n            _renderElement(element, group);\n        }\n    }\n\n    function _renderElement(element, group) {\n        var style = getComputedStyle$1(element);\n\n        var top = getBorder(style, \"top\");\n        var right = getBorder(style, \"right\");\n        var bottom = getBorder(style, \"bottom\");\n        var left = getBorder(style, \"left\");\n\n        var rTL0 = getBorderRadius(style, \"top-left\");\n        var rTR0 = getBorderRadius(style, \"top-right\");\n        var rBL0 = getBorderRadius(style, \"bottom-left\");\n        var rBR0 = getBorderRadius(style, \"bottom-right\");\n\n        var dir = getPropertyValue(style, \"direction\");\n\n        var backgroundColor = getPropertyValue(style, \"background-color\");\n        backgroundColor = parseColor$1(backgroundColor);\n\n        var backgroundImage = parseBackgroundImage( getPropertyValue(style, \"background-image\") );\n        var backgroundRepeat = splitProperty( getPropertyValue(style, \"background-repeat\") );\n        var backgroundPosition = splitProperty( getPropertyValue(style, \"background-position\") );\n        var backgroundOrigin = splitProperty( getPropertyValue(style, \"background-origin\") );\n        var backgroundSize = splitProperty( getPropertyValue(style, \"background-size\") );\n\n        // IE shrinks the text with text-overflow: ellipsis,\n        // apparently because the returned bounding box for the range\n        // is limited to the visible area minus space for the dots,\n        // instead of being the full width of the text.\n        //\n        // https://github.com/telerik/kendo/issues/5232\n        // https://github.com/telerik/kendo-ui-core/issues/1868\n        //\n        // We have to test it here rather than in renderText because\n        // text-overflow: ellipsis could be set on a parent element (not\n        // necessarily the one containing the text); in this case,\n        // getComputedStyle(elementWithTheText) will return \"clip\", not\n        // \"ellipsis\" (which is probably a bug, but oh well...)\n        var textOverflow, saveTextOverflow;\n        if (microsoft) {\n            textOverflow = style.textOverflow;             // computed style\n            if (textOverflow == \"ellipsis\") {\n                saveTextOverflow = element.style.textOverflow; // own style.\n                element.style.textOverflow = \"clip\";\n            }\n        }\n\n        if (browser.msie && browser.version < 10) {\n            // IE9 hacks.  getPropertyValue won't return the correct\n            // value.  Sucks that we have to do it here, I'd prefer to\n            // move it in getPropertyValue, but we don't have the\n            // element.\n            backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\n        }\n\n        var innerbox = innerBox(element.getBoundingClientRect(), \"border-*-width\", element);\n\n        // CSS \"clip\" property - if present, replace the group with a\n        // new one which is clipped.  This must happen before drawing\n        // the borders and background.\n        (function(){\n            var clip = getPropertyValue(style, \"clip\");\n            var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\n            if (m) {\n                var a = m[1].split(/[ ,]+/g);\n                var top = a[0] == \"auto\" ? innerbox.top : parseFloat(a[0]) + innerbox.top;\n                var right = a[1] == \"auto\" ? innerbox.right : parseFloat(a[1]) + innerbox.left;\n                var bottom = a[2] == \"auto\" ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\n                var left = a[3] == \"auto\" ? innerbox.left : parseFloat(a[3]) + innerbox.left;\n                var tmp = new Group();\n                var clipPath = new Path()\n                    .moveTo(left, top)\n                    .lineTo(right, top)\n                    .lineTo(right, bottom)\n                    .lineTo(left, bottom)\n                    .close();\n                setClipping(tmp, clipPath);\n                group.append(tmp);\n                group = tmp;\n                updateClipbox(clipPath);\n            }\n        })();\n\n        var boxes, i, cells;\n        var display = getPropertyValue(style, \"display\");\n\n        if (display == \"table-row\") {\n            // because of rowspan/colspan, we shouldn't draw background of table row elements on the\n            // box given by its getBoundingClientRect, because if we do we risk overwritting a\n            // previously rendered cell.  https://github.com/telerik/kendo/issues/4881\n            boxes = [];\n            for (i = 0, cells = element.children; i < cells.length; ++i) {\n                boxes.push(cells[i].getBoundingClientRect());\n            }\n        } else {\n            boxes = element.getClientRects();\n            if (boxes.length == 1) {\n                // Workaround the missing borders in Chrome!  getClientRects() boxes contains values\n                // rounded to integer.  getBoundingClientRect() appears to work fine.  We still need\n                // getClientRects() to support cases where there are more boxes (continued inline\n                // elements that might have border/background).\n                boxes = [ element.getBoundingClientRect() ];\n            }\n        }\n\n        // This function workarounds another Chrome bug, where boxes returned for a table with\n        // border-collapse: collapse will overlap the table border.  Our rendering is not perfect in\n        // such case anyway, but with this is better than without it.\n        boxes = adjustBoxes(boxes);\n\n        for (i = 0; i < boxes.length; ++i) {\n            drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\n        }\n\n        // Render links as separate groups.  We can't use boxes returned by element's getClientRects\n        // because if display type is \"inline\" (default for <a>), boxes will not include the height of\n        // images inside.  https://github.com/telerik/kendo-ui-core/issues/3359\n        if (element.tagName == \"A\" && element.href && !/^#?$/.test(element.getAttribute(\"href\"))) {\n            if (!nodeInfo._avoidLinks || !matches(element, nodeInfo._avoidLinks)) {\n                var r = document.createRange();\n                r.selectNodeContents(element);\n                slice$1$1(r.getClientRects()).forEach(function(box){\n                    var g = new Group();\n                    g._pdfLink = {\n                        url    : element.href,\n                        top    : box.top,\n                        right  : box.right,\n                        bottom : box.bottom,\n                        left   : box.left\n                    };\n                    group.append(g);\n                });\n            }\n        }\n\n        if (boxes.length > 0 && display == \"list-item\" && !element.getAttribute(\"kendo-no-bullet\")) {\n            drawBullet(boxes[0]);\n        }\n\n        // overflow: hidden/auto - if present, replace the group with\n        // a new one clipped by the inner box.\n        (function(){\n            function clipit() {\n                var clipPath = elementRoundBox(element, innerbox, \"padding\");\n                var tmp = new Group();\n                setClipping(tmp, clipPath);\n                group.append(tmp);\n                group = tmp;\n                updateClipbox(clipPath);\n            }\n            if (isFormField(element)) {\n                clipit();\n            } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow\"))) {\n                clipit();\n            } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-x\"))) {\n                clipit();\n            } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-y\"))) {\n                clipit();\n            }\n        })();\n\n        if (!maybeRenderWidget(element, group)) {\n            renderContents(element, group);\n        }\n\n        if (microsoft && textOverflow == \"ellipsis\") {\n            element.style.textOverflow = saveTextOverflow;\n        }\n\n        return group; // only utility functions after this line.\n\n        function adjustBoxes(boxes) {\n            if (/^td$/i.test(element.tagName)) {\n                var table = nodeInfo.table;\n                if (table && getPropertyValue(table.style, \"border-collapse\") == \"collapse\") {\n                    var tableBorderLeft = getBorder(table.style, \"left\").width;\n                    var tableBorderTop = getBorder(table.style, \"top\").width;\n                    // check if we need to adjust\n                    if (tableBorderLeft === 0 && tableBorderTop === 0) {\n                        return boxes; // nope\n                    }\n                    var tableBox = table.element.getBoundingClientRect();\n                    var firstCell = table.element.rows[0].cells[0];\n                    var firstCellBox = firstCell.getBoundingClientRect();\n                    if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\n                        return slice$1$1(boxes).map(function(box){\n                            return {\n                                left   : box.left + tableBorderLeft,\n                                top    : box.top + tableBorderTop,\n                                right  : box.right + tableBorderLeft,\n                                bottom : box.bottom + tableBorderTop,\n                                height : box.height,\n                                width  : box.width\n                            };\n                        });\n                    }\n                }\n            }\n            return boxes;\n        }\n\n        // this function will be called to draw each border.  it\n        // draws starting at origin and the resulted path must be\n        // translated/rotated to be placed in the proper position.\n        //\n        // arguments are named as if it draws the top border:\n        //\n        //    - `len` the length of the edge\n        //    - `Wtop` the width of the edge (i.e. border-top-width)\n        //    - `Wleft` the width of the left edge (border-left-width)\n        //    - `Wright` the width of the right edge\n        //    - `rl` and `rl` -- the border radius on the left and right\n        //      (objects containing x and y, for horiz/vertical radius)\n        //    - `transform` -- transformation to apply\n        //\n        function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform$$1) {\n            if (Wtop <= 0) {\n                return;\n            }\n\n            var path, edge = new Group();\n            setTransform$1(edge, transform$$1);\n            group.append(edge);\n\n            sanitizeRadius(rl);\n            sanitizeRadius(rr);\n\n            // draw main border.  this is the area without the rounded corners\n            path = new Path({\n                fill: { color: color },\n                stroke: null\n            });\n            edge.append(path);\n            path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0)\n                .lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0)\n                .lineTo(len - Math.max(rr.x, Wright), Wtop)\n                .lineTo(Math.max(rl.x, Wleft), Wtop)\n                .close();\n\n            if (rl.x) {\n                drawRoundCorner(Wleft, rl, [ -1, 0, 0, 1, rl.x, 0 ]);\n            }\n\n            if (rr.x) {\n                drawRoundCorner(Wright, rr, [ 1, 0, 0, 1, len - rr.x, 0 ]);\n            }\n\n            // draws one round corner, starting at origin (needs to be\n            // translated/rotated to be placed properly).\n            function drawRoundCorner(Wright, r, transform$$1) {\n                var angle = Math.PI/2 * Wright / (Wright + Wtop);\n\n                // not sanitizing this one, because negative values\n                // are useful to fill the box correctly.\n                var ri = {\n                    x: r.x - Wright,\n                    y: r.y - Wtop\n                };\n\n                var path = new Path({\n                    fill: { color: color },\n                    stroke: null\n                }).moveTo(0, 0);\n\n                setTransform$1(path, transform$$1);\n\n                addArcToPath(path, 0, r.y, {\n                    startAngle: -90,\n                    endAngle: -radiansToDegrees(angle),\n                    radiusX: r.x,\n                    radiusY: r.y\n                });\n\n                if (ri.x > 0 && ri.y > 0) {\n                    path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\n                    addArcToPath(path, 0, r.y, {\n                        startAngle: -radiansToDegrees(angle),\n                        endAngle: -90,\n                        radiusX: ri.x,\n                        radiusY: ri.y,\n                        anticlockwise: true\n                    });\n                }\n                else if (ri.x > 0) {\n                    path.lineTo(ri.x, Wtop)\n                        .lineTo(0, Wtop);\n                }\n                else {\n                    path.lineTo(ri.x, Wtop)\n                        .lineTo(ri.x, 0);\n                }\n\n                edge.append(path.close());\n            }\n        }\n\n        function drawBackground(box) {\n            var background = new Group();\n            setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\n            group.append(background);\n\n            if (backgroundColor) {\n                var path = new Path({\n                    fill: { color: backgroundColor.toCssRgba() },\n                    stroke: null\n                });\n                path.moveTo(box.left, box.top)\n                    .lineTo(box.right, box.top)\n                    .lineTo(box.right, box.bottom)\n                    .lineTo(box.left, box.bottom)\n                    .close();\n                background.append(path);\n            }\n\n            for (var i = backgroundImage.length; --i >= 0;) {\n                drawOneBackground(\n                    background, box,\n                    backgroundImage[i],\n                    backgroundRepeat[i % backgroundRepeat.length],\n                    backgroundPosition[i % backgroundPosition.length],\n                    backgroundOrigin[i % backgroundOrigin.length],\n                    backgroundSize[i % backgroundSize.length]\n                );\n            }\n        }\n\n        function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\n            if (!background || (background == \"none\")) {\n                return;\n            }\n\n            if (background.type == \"url\") {\n                var img = IMAGE_CACHE[background.url];\n                if (img && img.width > 0 && img.height > 0) {\n                    drawBackgroundImage(group, box, img.width, img.height, function(group, rect){\n                        group.append(new Image$1(background.url, rect));\n                    });\n                }\n            } else if (background.type == \"linear\") {\n                drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\n            } else {\n                return;\n            }\n\n            function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\n                var aspect_ratio = img_width / img_height, f;\n\n                // for background-origin: border-box the box is already appropriate\n                var orgBox = box;\n                if (backgroundOrigin == \"content-box\") {\n                    orgBox = innerBox(orgBox, \"border-*-width\", element);\n                    orgBox = innerBox(orgBox, \"padding-*\", element);\n                } else if (backgroundOrigin == \"padding-box\") {\n                    orgBox = innerBox(orgBox, \"border-*-width\", element);\n                }\n\n                if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\n                    if (backgroundSize == \"contain\") {\n                        f = Math.min(orgBox.width / img_width,\n                                     orgBox.height / img_height);\n                        img_width *= f;\n                        img_height *= f;\n                    }\n                    else if (backgroundSize == \"cover\") {\n                        f = Math.max(orgBox.width / img_width,\n                                     orgBox.height / img_height);\n                        img_width *= f;\n                        img_height *= f;\n                    }\n                    else {\n                        var size = backgroundSize.split(/\\s+/g);\n                        // compute width\n                        if (/%$/.test(size[0])) {\n                            img_width = orgBox.width * parseFloat(size[0]) / 100;\n                        } else {\n                            img_width = parseFloat(size[0]);\n                        }\n                        // compute height\n                        if (size.length == 1 || size[1] == \"auto\") {\n                            img_height = img_width / aspect_ratio;\n                        } else if (/%$/.test(size[1])) {\n                            img_height = orgBox.height * parseFloat(size[1]) / 100;\n                        } else {\n                            img_height = parseFloat(size[1]);\n                        }\n                    }\n                }\n\n                var pos = String(backgroundPosition);\n\n                // IE sometimes reports single-word positions\n                // https://github.com/telerik/kendo-ui-core/issues/2786\n                //\n                // it seems to switch to percentages when the horizontal\n                // position is not \"center\", therefore we don't handle\n                // multi-word cases here.  All other browsers return\n                // percentages or pixels instead of keywords.  At least\n                // for now...\n                switch (pos) {\n                  case \"bottom\" : pos = \"50% 100%\"; break;\n                  case \"top\"    : pos = \"50% 0\"; break;\n                  case \"left\"   : pos = \"0 50%\"; break;\n                  case \"right\"  : pos = \"100% 50%\"; break;\n                  case \"center\" : pos = \"50% 50%\"; break;\n                }\n\n                pos = pos.split(/\\s+/);\n                if (pos.length == 1) {\n                    pos[1] = \"50%\";\n                }\n\n                if (/%$/.test(pos[0])) {\n                    pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\n                } else {\n                    pos[0] = parseFloat(pos[0]);\n                }\n                if (/%$/.test(pos[1])) {\n                    pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\n                } else {\n                    pos[1] = parseFloat(pos[1]);\n                }\n\n                var rect = new Rect([ orgBox.left + pos[0], orgBox.top + pos[1] ], [ img_width, img_height ]);\n\n                // XXX: background-repeat could be implemented more\n                //      efficiently as a fill pattern (at least for PDF\n                //      output, probably SVG too).\n\n                function rewX() {\n                    while (rect.origin.x > box.left) {\n                        rect.origin.x -= img_width;\n                    }\n                }\n\n                function rewY() {\n                    while (rect.origin.y > box.top) {\n                        rect.origin.y -= img_height;\n                    }\n                }\n\n                function repeatX() {\n                    while (rect.origin.x < box.right) {\n                        renderBG(group, rect.clone());\n                        rect.origin.x += img_width;\n                    }\n                }\n\n                if (backgroundRepeat == \"no-repeat\") {\n                    renderBG(group, rect);\n                }\n                else if (backgroundRepeat == \"repeat-x\") {\n                    rewX();\n                    repeatX();\n                }\n                else if (backgroundRepeat == \"repeat-y\") {\n                    rewY();\n                    while (rect.origin.y < box.bottom) {\n                        renderBG(group, rect.clone());\n                        rect.origin.y += img_height;\n                    }\n                }\n                else if (backgroundRepeat == \"repeat\") {\n                    rewX();\n                    rewY();\n                    var origin = rect.origin.clone();\n                    while (rect.origin.y < box.bottom) {\n                        rect.origin.x = origin.x;\n                        repeatX();\n                        rect.origin.y += img_height;\n                    }\n                }\n            }\n        }\n\n        function drawBullet() {\n            var listStyleType = getPropertyValue(style, \"list-style-type\");\n            if (listStyleType == \"none\") {\n                return;\n            }\n            var listStylePosition = getPropertyValue(style, \"list-style-position\");\n\n            function _drawBullet(f) {\n                saveStyle(element, function(){\n                    element.style.position = \"relative\";\n                    var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                    bullet.style.position = \"absolute\";\n                    bullet.style.boxSizing = \"border-box\";\n                    if (listStylePosition == \"outside\") {\n                        bullet.style.width = \"6em\";\n                        bullet.style.left = \"-6.8em\";\n                        bullet.style.textAlign = \"right\";\n                    } else {\n                        bullet.style.left = \"0px\";\n                    }\n                    f(bullet);\n                    element.insertBefore(bullet, element.firstChild);\n                    renderElement(bullet, group);\n                    element.removeChild(bullet);\n                });\n            }\n\n            function elementIndex(f) {\n                var a = element.parentNode.children;\n                var k = element.getAttribute(\"kendo-split-index\");\n                if (k != null) {\n                    return f(k|0, a.length);\n                }\n                for (var i = 0; i < a.length; ++i) {\n                    if (a[i] === element) {\n                        return f(i, a.length);\n                    }\n                }\n            }\n\n            switch (listStyleType) {\n              case \"circle\":\n              case \"disc\":\n              case \"square\":\n                _drawBullet(function(bullet){\n                    // XXX: the science behind these values is called \"trial and error\".\n                    bullet.style.fontSize = \"60%\";\n                    bullet.style.lineHeight = \"200%\";\n                    bullet.style.paddingRight = \"0.5em\";\n                    bullet.style.fontFamily = \"DejaVu Serif\";\n                    bullet.innerHTML = {\n                        \"disc\"   : \"\\u25cf\",\n                        \"circle\" : \"\\u25ef\",\n                        \"square\" : \"\\u25a0\"\n                    }[listStyleType];\n                });\n                break;\n\n              case \"decimal\":\n              case \"decimal-leading-zero\":\n                _drawBullet(function(bullet){\n                    elementIndex(function(idx){\n                        ++idx;\n                        if (listStyleType == \"decimal-leading-zero\" && idx < 10) {\n                            idx = \"0\" + idx;\n                        }\n                        bullet.innerHTML = idx + \".\";\n                    });\n                });\n                break;\n\n              case \"lower-roman\":\n              case \"upper-roman\":\n                _drawBullet(function(bullet){\n                    elementIndex(function(idx){\n                        idx = arabicToRoman(idx + 1);\n                        if (listStyleType == \"upper-roman\") {\n                            idx = idx.toUpperCase();\n                        }\n                        bullet.innerHTML = idx + \".\";\n                    });\n                });\n                break;\n\n              case \"lower-latin\":\n              case \"lower-alpha\":\n              case \"upper-latin\":\n              case \"upper-alpha\":\n                _drawBullet(function(bullet){\n                    elementIndex(function(idx){\n                        idx = alphaNumeral(idx);\n                        if (/^upper/i.test(listStyleType)) {\n                            idx = idx.toUpperCase();\n                        }\n                        bullet.innerHTML = idx + \".\";\n                    });\n                });\n                break;\n            }\n        }\n\n        // draws a single border box\n        function drawOneBox(box, isFirst, isLast) {\n            if (box.width === 0 || box.height === 0) {\n                return;\n            }\n\n            drawBackground(box);\n\n            var shouldDrawLeft = (left.width > 0 && ((isFirst && dir == \"ltr\") || (isLast && dir == \"rtl\")));\n            var shouldDrawRight = (right.width > 0 && ((isLast && dir == \"ltr\") || (isFirst && dir == \"rtl\")));\n\n            // The most general case is that the 4 borders have different widths and border\n            // radiuses.  The way that is handled is by drawing 3 Paths for each border: the\n            // straight line, and two round corners which represent half of the entire rounded\n            // corner.  To simplify code those shapes are drawed at origin (by the drawEdge\n            // function), then translated/rotated into the right position.\n            //\n            // However, this leads to poor results due to rounding in the simpler cases where\n            // borders are straight lines.  Therefore we handle a few such cases separately with\n            // straight lines. C^wC^wC^w -- nope, scratch that.  poor rendering was because of a bug\n            // in Chrome (getClientRects() returns rounded integer values rather than exact floats.\n            // web dev is still a ghetto.)\n\n            // first, just in case there is no border...\n            if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\n                return;\n            }\n\n            // START paint borders\n            // if all borders have equal colors...\n            if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\n\n                // if same widths too, we can draw the whole border by stroking a single path.\n                if (top.width == right.width && top.width == bottom.width && top.width == left.width)\n                {\n                    if (shouldDrawLeft && shouldDrawRight) {\n                        // reduce box by half the border width, so we can draw it by stroking.\n                        box = innerBox(box, top.width/2);\n\n                        // adjust the border radiuses, again by top.width/2, and make the path element.\n                        var path = elementRoundBox(element, box, top.width/2);\n                        path.options.stroke = {\n                            color: top.color,\n                            width: top.width\n                        };\n                        group.append(path);\n                        return;\n                    }\n                }\n            }\n\n            // if border radiuses are zero and widths are at most one pixel, we can again use simple\n            // paths.\n            if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\n                // alright, 1.9px will do as well.  the difference in color blending should not be\n                // noticeable.\n                if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\n                    // top border\n                    if (top.width > 0) {\n                        group.append(\n                            new Path({\n                                stroke: { width: top.width, color: top.color }\n                            })\n                                .moveTo(box.left, box.top + top.width/2)\n                                .lineTo(box.right, box.top + top.width/2)\n                        );\n                    }\n\n                    // bottom border\n                    if (bottom.width > 0) {\n                        group.append(\n                            new Path({\n                                stroke: { width: bottom.width, color: bottom.color }\n                            })\n                                .moveTo(box.left, box.bottom - bottom.width/2)\n                                .lineTo(box.right, box.bottom - bottom.width/2)\n                        );\n                    }\n\n                    // left border\n                    if (shouldDrawLeft) {\n                        group.append(\n                            new Path({\n                                stroke: { width: left.width, color: left.color }\n                            })\n                                .moveTo(box.left + left.width/2, box.top)\n                                .lineTo(box.left + left.width/2, box.bottom)\n                        );\n                    }\n\n                    // right border\n                    if (shouldDrawRight) {\n                        group.append(\n                            new Path({\n                                stroke: { width: right.width, color: right.color }\n                            })\n                                .moveTo(box.right - right.width/2, box.top)\n                                .lineTo(box.right - right.width/2, box.bottom)\n                        );\n                    }\n\n                    return;\n                }\n            }\n            // END paint borders\n\n            var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n            var rTL = tmp.tl;\n            var rTR = tmp.tr;\n            var rBR = tmp.br;\n            var rBL = tmp.bl;\n\n            // top border\n            drawEdge(top.color,\n                     box.width, top.width, left.width, right.width,\n                     rTL, rTR,\n                     [ 1, 0, 0, 1, box.left, box.top ]);\n\n            // bottom border\n            drawEdge(bottom.color,\n                     box.width, bottom.width, right.width, left.width,\n                     rBR, rBL,\n                     [ -1, 0, 0, -1, box.right, box.bottom ]);\n\n            // for left/right borders we need to invert the border-radiuses\n            function inv(p) {\n                return { x: p.y, y: p.x };\n            }\n\n            // left border\n            drawEdge(left.color,\n                     box.height, left.width, bottom.width, top.width,\n                     inv(rBL), inv(rTL),\n                     [ 0, -1, 1, 0, box.left, box.bottom ]);\n\n            // right border\n            drawEdge(right.color,\n                     box.height, right.width, top.width, bottom.width,\n                     inv(rTR), inv(rBR),\n                     [ 0, 1, -1, 0, box.right, box.top ]);\n        }\n    }\n\n    function gradientRenderer(gradient) {\n        return function(group, rect) {\n            var width = rect.width(), height = rect.height();\n\n            switch (gradient.type) {\n              case \"linear\":\n\n                // figure out the angle.\n                var angle = gradient.angle != null ? gradient.angle : Math.PI;\n                switch (gradient.to) {\n                  case \"top\":\n                    angle = 0;\n                    break;\n                  case \"left\":\n                    angle = -Math.PI / 2;\n                    break;\n                  case \"bottom\":\n                    angle = Math.PI;\n                    break;\n                  case \"right\":\n                    angle = Math.PI / 2;\n                    break;\n                  case \"top left\": case \"left top\":\n                    angle = -Math.atan2(height, width);\n                    break;\n                  case \"top right\": case \"right top\":\n                    angle = Math.atan2(height, width);\n                    break;\n                  case \"bottom left\": case \"left bottom\":\n                    angle = Math.PI + Math.atan2(height, width);\n                    break;\n                  case \"bottom right\": case \"right bottom\":\n                    angle = Math.PI - Math.atan2(height, width);\n                    break;\n                }\n\n                if (gradient.reverse) {\n                    angle -= Math.PI;\n                }\n\n                // limit the angle between 0..2PI\n                angle %= 2 * Math.PI;\n                if (angle < 0) {\n                    angle += 2 * Math.PI;\n                }\n\n                // compute gradient's start/end points.  here len is the length of the gradient line\n                // and x,y is the end point relative to the center of the rectangle in conventional\n                // (math) axis direction.\n\n                // this is the original (unscaled) length of the gradient line.  needed to deal with\n                // absolutely positioned color stops.  formula from the CSS spec:\n                // http://dev.w3.org/csswg/css-images-3/#linear-gradient-syntax\n                var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\n\n                // The math below is pretty simple, but it took a while to figure out.  We compute x\n                // and y, the *end* of the gradient line.  However, we want to transform them into\n                // element-based coordinates (SVG's gradientUnits=\"objectBoundingBox\").  That means,\n                // x=0 is the left edge, x=1 is the right edge, y=0 is the top edge and y=1 is the\n                // bottom edge.\n                //\n                // A naive approach would use the original angle for these calculations.  Say we'd\n                // like to draw a gradient angled at 45deg in a 100x400 box.  When we use\n                // objectBoundingBox, the renderer will draw it in a 1x1 *square* box, and then\n                // scale that to the desired dimensions.  The 45deg angle will look more like 70deg\n                // after scaling.  SVG (http://www.w3.org/TR/SVG/pservers.html#LinearGradients) says\n                // the following:\n                //\n                //     When gradientUnits=\"objectBoundingBox\" and 'gradientTransform' is the\n                //     identity matrix, the normal of the linear gradient is perpendicular to the\n                //     gradient vector in object bounding box space (i.e., the abstract coordinate\n                //     system where (0,0) is at the top/left of the object bounding box and (1,1) is\n                //     at the bottom/right of the object bounding box). When the object's bounding\n                //     box is not square, the gradient normal which is initially perpendicular to\n                //     the gradient vector within object bounding box space may render\n                //     non-perpendicular relative to the gradient vector in user space. If the\n                //     gradient vector is parallel to one of the axes of the bounding box, the\n                //     gradient normal will remain perpendicular. This transformation is due to\n                //     application of the non-uniform scaling transformation from bounding box space\n                //     to user space.\n                //\n                // which is an extremely long and confusing way to tell what I just said above.\n                //\n                // For this reason we need to apply the reverse scaling to the original angle, so\n                // that when it'll finally be rendered it'll actually be at the desired slope.  Now\n                // I'll let you figure out the math yourself.\n\n                var scaledAngle = Math.atan(width * Math.tan(angle) / height);\n                var sin = Math.sin(scaledAngle), cos = Math.cos(scaledAngle);\n                var len = Math.abs(sin) + Math.abs(cos);\n                var x = len/2 * sin;\n                var y = len/2 * cos;\n\n                // Because of the arctangent, our scaledAngle ends up between -PI/2..PI/2, possibly\n                // losing the intended direction of the gradient.  The following fixes it.\n                if (angle > Math.PI/2 && angle <= 3*Math.PI/2) {\n                    x = -x;\n                    y = -y;\n                }\n\n                // compute the color stops.\n                var implicit = [], right = 0;\n                var stops = gradient.stops.map(function(s, i){\n                    var offset = s.percent;\n                    if (offset) {\n                        offset = parseFloat(offset) / 100;\n                    } else if (s.length) {\n                        offset = parseFloat(s.length) / pxlen;\n                    } else if (i === 0) {\n                        offset = 0;\n                    } else if (i == gradient.stops.length - 1) {\n                        offset = 1;\n                    }\n                    var stop = {\n                        color: s.color.toCssRgba(),\n                        offset: offset\n                    };\n                    if (offset != null) {\n                        right = offset;\n                        // fix implicit offsets\n                        implicit.forEach(function(s, i){\n                            var stop = s.stop;\n                            stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\n                        });\n                        implicit = [];\n                    } else {\n                        implicit.push({ left: right, stop: stop });\n                    }\n                    return stop;\n                });\n\n                var start = [ 0.5 - x, 0.5 + y ];\n                var end = [ 0.5 + x, 0.5 - y ];\n\n                // finally, draw it.\n                group.append(\n                    Path.fromRect(rect)\n                        .stroke(null)\n                        .fill(new LinearGradient({\n                            start     : start,\n                            end       : end,\n                            stops     : stops,\n                            userSpace : false\n                        }))\n                );\n                break;\n              case \"radial\":\n                // XXX:\n                if (window.console && window.console.log) {\n                    window.console.log(\"Radial gradients are not yet supported in HTML renderer\");\n                }\n                break;\n            }\n        };\n    }\n\n    function maybeRenderWidget(element, group) {\n        var visual;\n\n        if (element._kendoExportVisual) {\n            visual = element._kendoExportVisual();\n        } else if (window.kendo && window.kendo.jQuery && element.getAttribute(window.kendo.attr(\"role\"))) {\n            var widget = window.kendo.widgetInstance(window.kendo.jQuery(element));\n            if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\n                if (widget.exportDOMVisual) {\n                    visual = widget.exportDOMVisual();\n                } else {\n                    visual = widget.exportVisual();\n                }\n            }\n        }\n\n        if (!visual) {\n            return false;\n        }\n\n        var wrap$$1 = new Group();\n        wrap$$1.children.push(visual);\n\n        var bbox = element.getBoundingClientRect();\n        wrap$$1.transform(transform$1().translate(bbox.left, bbox.top));\n\n        group.append(wrap$$1);\n\n        return true;\n    }\n\n    function renderImage(element, url, group) {\n        var box = getContentBox(element);\n        var rect = new Rect([ box.left, box.top ], [ box.width, box.height ]);\n        var image = new Image$1(url, rect);\n        setClipping(image, elementRoundBox(element, box, \"content\"));\n        group.append(image);\n    }\n\n    function zIndexSort(a, b) {\n        var sa = getComputedStyle$1(a);\n        var sb = getComputedStyle$1(b);\n        var za = parseFloat(getPropertyValue(sa, \"z-index\"));\n        var zb = parseFloat(getPropertyValue(sb, \"z-index\"));\n        var pa = getPropertyValue(sa, \"position\");\n        var pb = getPropertyValue(sb, \"position\");\n        if (isNaN(za) && isNaN(zb)) {\n            if ((/static|absolute/.test(pa)) && (/static|absolute/.test(pb))) {\n                return 0;\n            }\n            if (pa == \"static\") {\n                return -1;\n            }\n            if (pb == \"static\") {\n                return 1;\n            }\n            return 0;\n        }\n        if (isNaN(za)) {\n            return zb === 0 ? 0 : zb > 0 ? -1 : 1;\n        }\n        if (isNaN(zb)) {\n            return za === 0 ? 0 : za > 0 ? 1 : -1;\n        }\n        return parseFloat(za) - parseFloat(zb);\n    }\n\n    function isFormField(element) {\n        return /^(?:textarea|select|input)$/i.test(element.tagName);\n    }\n\n    function getSelectedOption(element) {\n        if (element.selectedOptions && element.selectedOptions.length > 0) {\n            return element.selectedOptions[0];\n        }\n        return element.options[element.selectedIndex];\n    }\n\n    function renderCheckbox(element, group) {\n        var style = getComputedStyle$1(element);\n        var color = getPropertyValue(style, \"color\");\n        var box = element.getBoundingClientRect();\n        if (element.type == \"checkbox\") {\n            group.append(\n                Path.fromRect(\n                    new Rect([ box.left+1, box.top+1 ],\n                                 [ box.width-2, box.height-2 ])\n                ).stroke(color, 1)\n            );\n            if (element.checked) {\n                // fill a rectangle inside?  looks kinda ugly.\n                // group.append(\n                //     Path.fromRect(\n                //         new geo.Rect([ box.left+4, box.top+4 ],\n                //                      [ box.width-8, box.height-8])\n                //     ).fill(color).stroke(null)\n                // );\n\n                // let's draw a checkmark instead.  artistic, eh?\n                group.append(\n                    new Path()\n                        .stroke(color, 1.2)\n                        .moveTo(box.left + 0.22 * box.width,\n                                box.top + 0.55 * box.height)\n                        .lineTo(box.left + 0.45 * box.width,\n                                box.top + 0.75 * box.height)\n                        .lineTo(box.left + 0.78 * box.width,\n                                box.top + 0.22 * box.width)\n                );\n            }\n        } else {\n            group.append(\n                new Circle(\n                    new Circle$2([\n                        (box.left + box.right) / 2,\n                        (box.top + box.bottom) / 2\n                    ], Math.min(box.width-2, box.height-2) / 2)\n                ).stroke(color, 1)\n            );\n            if (element.checked) {\n                group.append(\n                    new Circle(\n                        new Circle$2([\n                            (box.left + box.right) / 2,\n                            (box.top + box.bottom) / 2\n                        ], Math.min(box.width-8, box.height-8) / 2)\n                    ).fill(color).stroke(null)\n                );\n            }\n        }\n    }\n\n    function renderFormField(element, group) {\n        var tag = element.tagName.toLowerCase();\n        if (tag == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n            return renderCheckbox(element, group);\n        }\n        var p = element.parentNode;\n        var doc = element.ownerDocument;\n        var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\n        var option;\n        el.style.cssText = getCssText(getComputedStyle$1(element));\n        if (tag == \"input\") {\n            el.style.whiteSpace = \"pre\";\n        }\n        if (tag == \"select\" || tag == \"textarea\") {\n            el.style.overflow = \"auto\";\n        }\n        if (tag == \"select\") {\n            if (element.multiple) {\n                for (var i = 0; i < element.options.length; ++i) {\n                    option = doc.createElement(KENDO_PSEUDO_ELEMENT);\n                    option.style.cssText = getCssText(getComputedStyle$1(element.options[i]));\n                    option.style.display = \"block\"; // IE9 messes up without this\n                    option.textContent = element.options[i].textContent;\n                    el.appendChild(option);\n                }\n            } else {\n                option = getSelectedOption(element);\n                if (option) {\n                    el.textContent = option.textContent;\n                }\n            }\n        } else {\n            el.textContent = element.value;\n        }\n        p.insertBefore(el, element);\n        el.scrollLeft = element.scrollLeft;\n        el.scrollTop = element.scrollTop;\n\n        // must temporarily hide the original element, otherwise it\n        // may affect layout of the fake element we want to render.\n        element.style.display = \"none\";\n\n        renderContents(el, group);\n        element.style.display = \"\";\n        p.removeChild(el);\n    }\n\n    function serializeSVG(element) {\n        var serializer = new window.XMLSerializer();\n        var xml = serializer.serializeToString(element);\n\n        if (browser.mozilla && !(element.getAttribute(\"width\") && element.getAttribute(\"height\"))) {\n            var doc = new window.DOMParser().parseFromString(xml, \"image/svg+xml\");\n            var svg$$1 = doc.documentElement;\n            var box = getContentBox(element);\n            svg$$1.setAttribute(\"width\", box.width);\n            svg$$1.setAttribute(\"height\", box.height);\n            xml = serializer.serializeToString(svg$$1);\n        }\n\n        return xml;\n    }\n\n    function renderContents(element, group) {\n        if (nodeInfo._stackingContext.element === element) {\n            // the group that was set in pushNodeInfo might have\n            // changed due to clipping/transforms, update it here.\n            nodeInfo._stackingContext.group = group;\n        }\n        switch (element.tagName.toLowerCase()) {\n          case \"img\":\n            renderImage(element, element.src, group);\n            break;\n\n          case \"svg\":\n            var xml = serializeSVG(element);\n            var dataURL = \"data:image/svg+xml;base64,\" + (encodeBase64(xml));\n            renderImage(element, dataURL, group);\n            break;\n\n          case \"canvas\":\n            try {\n                renderImage(element, element.toDataURL(\"image/png\"), group);\n            } catch (ex) {\n                // tainted; can't draw it, ignore.\n            }\n            break;\n\n          case \"textarea\":\n          case \"input\":\n          case \"select\":\n            renderFormField(element, group);\n            break;\n\n          default:\n            var children = [], floats = [], positioned = [];\n            for (var i = element.firstChild; i; i = i.nextSibling) {\n                switch (i.nodeType) {\n                  case 3:         // Text\n                    if (/\\S/.test(i.data)) {\n                        renderText(element, i, group);\n                    }\n                    break;\n                  case 1:         // Element\n                    var style = getComputedStyle$1(i);\n                    var floating = getPropertyValue(style, \"float\");\n                    var position = getPropertyValue(style, \"position\");\n                    if (position != \"static\") {\n                        positioned.push(i);\n                    }\n                    else if (floating != \"none\") {\n                        floats.push(i);\n                    } else {\n                        children.push(i);\n                    }\n                    break;\n                }\n            }\n\n            mergeSort(children, zIndexSort).forEach(function(el){ renderElement(el, group); });\n            mergeSort(floats, zIndexSort).forEach(function(el){ renderElement(el, group); });\n            mergeSort(positioned, zIndexSort).forEach(function(el){ renderElement(el, group); });\n        }\n    }\n\n    function renderText(element, node, group) {\n        if (emptyClipbox()) {\n            return;\n        }\n        var style = getComputedStyle$1(element);\n\n        if (parseFloat(getPropertyValue(style, \"text-indent\")) < -500) {\n            // assume it should not be displayed.  the slider's\n            // draggable handle displays a Drag text for some reason,\n            // having text-indent: -3333px.\n            return;\n        }\n\n        var text = node.data;\n        var start = 0;\n        var end = text.search(/\\S\\s*$/) + 1;\n\n        if (!end) {\n            return; // whitespace-only node\n        }\n\n        var fontSize = getPropertyValue(style, \"font-size\");\n        var lineHeight = getPropertyValue(style, \"line-height\");\n\n        // simply getPropertyValue(\"font\") doesn't work in Firefox :-\\\n        var font = [\n            getPropertyValue(style, \"font-style\"),\n            getPropertyValue(style, \"font-variant\"),\n            getPropertyValue(style, \"font-weight\"),\n            fontSize, // no need for line height here; it breaks layout in FF\n            getPropertyValue(style, \"font-family\")\n        ].join(\" \");\n\n        fontSize = parseFloat(fontSize);\n        lineHeight = parseFloat(lineHeight);\n\n        if (fontSize === 0 || isNaN(fontSize)) {\n            return;\n        }\n\n        var color = getPropertyValue(style, \"color\");\n        var range = element.ownerDocument.createRange();\n        var align$$1 = getPropertyValue(style, \"text-align\");\n        var isJustified = align$$1 == \"justify\";\n        var columnCount = getPropertyValue(style, \"column-count\", 1);\n        var whiteSpace = getPropertyValue(style, \"white-space\");\n        var textTransform = getPropertyValue(style, \"text-transform\");\n\n        // A line of 500px, with a font of 12px, contains an average of 80 characters, but since we\n        // err, we'd like to guess a bigger number rather than a smaller one.  Multiplying by 5\n        // seems to be a good option.\n        var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\n        if (estimateLineLength === 0) {\n            estimateLineLength = 500;\n        }\n\n        // we'll maintain this so we can workaround bugs in Chrome's Range.getClientRects\n        // https://github.com/telerik/kendo/issues/5740\n        var prevLineBottom = null;\n\n        var underline = nodeInfo[\"underline\"];\n        var lineThrough = nodeInfo[\"line-through\"];\n        var overline = nodeInfo[\"overline\"];\n        var underlineOffset = nodeInfo[\"underline-offset\"];\n\n        if (underline) {\n            forEachRect(decorateUnder);\n        }\n\n        // doChunk returns true when all text has been rendered\n        while (!doChunk()) {}\n\n        if (lineThrough || overline) {\n            forEachRect(decorateOver);\n        }\n\n        return;                 // only function declarations after this line\n\n        function forEachRect(callback) {\n            range.selectNode(node);\n            var clientRects = slice$1$1(range.getClientRects());\n\n            forEachRect = function (cb) { return clientRects.forEach(cb); };\n            forEachRect(callback);\n        }\n\n        function actuallyGetRangeBoundingRect(range) {\n            // XXX: to be revised when this Chrome bug is fixed:\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=612459\n            if (microsoft || browser.chrome || browser.safari) {\n                // Workaround browser bugs: IE and Chrome would sometimes\n                // return 0 or 1-width rectangles before or after the main\n                // one.  https://github.com/telerik/kendo/issues/4674\n\n                // Actually Chrome 50 got worse, since the rectangles can now have the width of a\n                // full character, making it hard to tell whether it's a bogus rectangle or valid\n                // selection location.  The workaround is to ignore rectangles that fall on the\n                // previous line.  https://github.com/telerik/kendo/issues/5740\n                var rectangles = range.getClientRects(), box = {\n                    top    :  Infinity,\n                    right  : -Infinity,\n                    bottom : -Infinity,\n                    left   :  Infinity\n                }, done = false;\n                for (var i = 0; i < rectangles.length; ++i) {\n                    var b = rectangles[i];\n                    if (b.width <= 1 || b.bottom === prevLineBottom) {\n                        continue;   // bogus rectangle\n                    }\n                    box.left   = Math.min(b.left   , box.left);\n                    box.top    = Math.min(b.top    , box.top);\n                    box.right  = Math.max(b.right  , box.right);\n                    box.bottom = Math.max(b.bottom , box.bottom);\n                    done = true;\n                }\n                if (!done) {\n                    return range.getBoundingClientRect();\n                }\n                box.width = box.right - box.left;\n                box.height = box.bottom - box.top;\n                return box;\n            }\n            return range.getBoundingClientRect();\n        }\n\n        // Render a chunk of text, typically one line (but for justified text we render each word as\n        // a separate Text object, because spacing is variable).  Returns true when it finished the\n        // current node.  After each chunk it updates `start` to just after the last rendered\n        // character.\n        function doChunk() {\n            var origStart = start;\n            var box, pos = text.substr(start).search(/\\S/);\n            start += pos;\n            if (pos < 0 || start >= end) {\n                return true;\n            }\n\n            // Select a single character to determine the height of a line of text.  The box.bottom\n            // will be essential for us to figure out where the next line begins.\n            range.setStart(node, start);\n            range.setEnd(node, start + 1);\n            box = actuallyGetRangeBoundingRect(range);\n\n            // for justified text we must split at each space, because space has variable width.\n            var found = false;\n            if (isJustified || columnCount > 1) {\n                pos = text.substr(start).search(/\\s/);\n                if (pos >= 0) {\n                    // we can only split there if it's on the same line, otherwise we'll fall back\n                    // to the default mechanism (see findEOL below).\n                    range.setEnd(node, start + pos);\n                    var r = actuallyGetRangeBoundingRect(range);\n                    if (r.bottom == box.bottom) {\n                        box = r;\n                        found = true;\n                        start += pos;\n                    }\n                }\n            }\n\n            if (!found) {\n                // This code does three things: (1) it selects one line of text in `range`, (2) it\n                // leaves the bounding rect of that line in `box` and (3) it returns the position\n                // just after the EOL.  We know where the line starts (`start`) but we don't know\n                // where it ends.  To figure this out, we select a piece of text and look at the\n                // bottom of the bounding box.  If it changes, we have more than one line selected\n                // and should retry with a smaller selection.\n                //\n                // To speed things up, we first try to select all text in the node (`start` ->\n                // `end`).  If there's more than one line there, then select only half of it.  And\n                // so on.  When we find a value for `end` that fits in one line, we try increasing\n                // it (also in halves) until we get to the next line.  The algorithm stops when the\n                // right side of the bounding box does not change.\n                //\n                // One more thing to note is that everything happens in a single Text DOM node.\n                // There's no other tags inside it, therefore the left/top coordinates of the\n                // bounding box will not change.\n                pos = (function findEOL(min, eol, max){\n                    range.setEnd(node, eol);\n                    var r = actuallyGetRangeBoundingRect(range);\n                    if (r.bottom != box.bottom && min < eol) {\n                        return findEOL(min, (min + eol) >> 1, eol);\n                    } else if (r.right != box.right) {\n                        box = r;\n                        if (eol < max) {\n                            return findEOL(eol, (eol + max) >> 1, max);\n                        } else {\n                            return eol;\n                        }\n                    } else {\n                        return eol;\n                    }\n                })(start, Math.min(end, start + estimateLineLength), end);\n\n                if (pos == start) {\n                    // if EOL is at the start, then no more text fits on this line.  Skip the\n                    // remainder of this node entirely to avoid a stack overflow.\n                    return true;\n                }\n                start = pos;\n\n                pos = range.toString().search(/\\s+$/);\n                if (pos === 0) {\n                    return false; // whitespace only; we should not get here.\n                }\n                if (pos > 0) {\n                    // eliminate trailing whitespace\n                    range.setEnd(node, range.startOffset + pos);\n                    box = actuallyGetRangeBoundingRect(range);\n                }\n            }\n\n            // another workaround for IE: if we rely on getBoundingClientRect() we'll overlap with the bullet for LI\n            // elements.  Calling getClientRects() and using the *first* rect appears to give us the correct location.\n            // Note: not to be used in Chrome as it randomly returns a zero-width rectangle from the previous line.\n            if (microsoft) {\n                box = range.getClientRects()[0];\n            }\n\n            var str = range.toString();\n            if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\n                // node with non-significant space -- collapse whitespace.\n                str = str.replace(/\\s+/g, \" \");\n            }\n            else if (/\\t/.test(str)) {\n                // with significant whitespace we need to do something about literal TAB characters.\n                // There's no TAB glyph in a font so they would be rendered in PDF as an empty box,\n                // and the whole text will stretch to fill the original width.  The core PDF lib\n                // does not have sufficient context to deal with it.\n\n                // calculate the starting column here, since we initially discarded any whitespace.\n                var cc = 0;\n                for (pos = origStart; pos < range.startOffset; ++pos) {\n                    var code = text.charCodeAt(pos);\n                    if (code == 9) {\n                        // when we meet a TAB we must round up to the next tab stop.\n                        // in all browsers TABs seem to be 8 characters.\n                        cc += 8 - cc % 8;\n                    } else if (code == 10 || code == 13) {\n                        // just in case we meet a newline we must restart.\n                        cc = 0;\n                    } else {\n                        // ordinary character --> advance one column\n                        cc++;\n                    }\n                }\n\n                // based on starting column, replace any TAB characters in the string we actually\n                // have to display with spaces so that they align to columns multiple of 8.\n                while ((pos = str.search(\"\\t\")) >= 0) {\n                    var indent = \"        \".substr(0, 8 - (cc + pos) % 8);\n                    str = str.substr(0, pos) + indent + str.substr(pos + 1);\n                }\n            }\n\n            if (!found) {\n                prevLineBottom = box.bottom;\n            }\n            drawText(str, box);\n        }\n\n        function drawText(str, box) {\n            // In IE the box height will be approximately lineHeight, while in\n            // other browsers it'll (correctly) be the height of the bounding\n            // box for the current text/font.  Which is to say, IE sucks again.\n            // The only good solution I can think of is to measure the text\n            // ourselves and center the bounding box.\n            if (microsoft && !isNaN(lineHeight)) {\n                var height = getFontHeight(font);\n                var top = (box.top + box.bottom - height) / 2;\n                box = {\n                    top    : top,\n                    right  : box.right,\n                    bottom : top + height,\n                    left   : box.left,\n                    height : height,\n                    width  : box.right - box.left\n                };\n            }\n\n            // var path = new Path({ stroke: { color: \"red\" }});\n            // path.moveTo(box.left, box.top)\n            //     .lineTo(box.right, box.top)\n            //     .lineTo(box.right, box.bottom)\n            //     .lineTo(box.left, box.bottom)\n            //     .close();\n            // group.append(path);\n\n            switch (textTransform) {\n              case \"uppercase\":\n                str = str.toUpperCase();\n                break;\n              case \"lowercase\":\n                str = str.toLowerCase();\n                break;\n              case \"capitalize\":\n                str = str.replace(/(?:^|\\s)\\S/g, function (l) { return l.toUpperCase(); });\n                break;\n            }\n\n            var text = new TextRect(\n                str, new Rect([ box.left, box.top ],\n                                  [ box.width, box.height ]),\n                {\n                    font: font,\n                    fill: { color: color }\n                }\n            );\n            group.append(text);\n        }\n\n        function drawTextLine(lineWidth, textBox, color, ypos) {\n            if (color) {\n                var path = new Path({ stroke: {\n                    width: lineWidth,\n                    color: color\n                }});\n\n                ypos -= lineWidth;\n                path.moveTo(textBox.left, ypos)\n                    .lineTo(textBox.right, ypos);\n                group.append(path);\n            }\n        }\n\n        function decorateOver(box) {\n            var width = fontSize / 12;\n            drawTextLine(width, box, lineThrough, box.bottom - box.height / 2.7);\n            drawTextLine(width, box, overline, box.top);\n        }\n\n        function decorateUnder(box) {\n            var width = fontSize / 12;\n            var underlinePos = box.bottom;\n            if (underlineOffset != null) {\n                underlinePos += underlineOffset;\n            } else {\n                underlinePos += width; // for \"auto\" it seems better to add line width\n            }\n            drawTextLine(width, box, underline, underlinePos);\n        }\n    }\n\n    function groupInStackingContext(element, group, zIndex) {\n        var main;\n        if (zIndex != \"auto\") {\n            // use the current stacking context\n            main = nodeInfo._stackingContext.group;\n            zIndex = parseFloat(zIndex);\n        } else {\n            // normal flow  use given container.  we still have to\n            // figure out where should we insert this element with the\n            // assumption that its z-index is zero, as the group might\n            // already contain elements with higher z-index.\n            main = group;\n            zIndex = 0;\n        }\n        var a = main.children;\n        for (var i = 0; i < a.length; ++i) {\n            if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\n                break;\n            }\n        }\n\n        var tmp = new Group();\n        main.insert(i, tmp);\n        tmp._dom_zIndex = zIndex;\n\n        if (main !== group) {\n            // console.log(\"Placing\", element, \"in\", nodeInfo._stackingContext.element, \"at position\", i, \" / \", a.length);\n            // console.log(a.slice(i+1));\n\n            // if (nodeInfo._matrix) {\n            //     tmp.transform(nodeInfo._matrix);\n            // }\n            if (nodeInfo._clipbox) {\n                var m = nodeInfo._matrix.invert();\n                var r = nodeInfo._clipbox.transformCopy(m);\n                setClipping(tmp, Path.fromRect(r));\n                // console.log(r);\n                // tmp.append(Path.fromRect(r));\n                // tmp.append(new Text(element.className || element.id, r.topLeft()));\n            }\n        }\n\n        return tmp;\n    }\n\n    function renderElement(element, container) {\n        var style = getComputedStyle$1(element);\n\n        updateCounters(style);\n\n        if (/^(style|script|link|meta|iframe|col|colgroup)$/i.test(element.tagName)) {\n            return;\n        }\n\n        if (nodeInfo._clipbox == null) {\n            return;\n        }\n\n        var opacity = parseFloat(getPropertyValue(style, \"opacity\"));\n        var visibility = getPropertyValue(style, \"visibility\");\n        var display = getPropertyValue(style, \"display\");\n\n        if (opacity === 0 || visibility == \"hidden\" || display == \"none\") {\n            return;\n        }\n\n        var tr = getTransform(style);\n        var group;\n\n        var zIndex = getPropertyValue(style, \"z-index\");\n        if ((tr || opacity < 1) && zIndex == \"auto\") {\n            zIndex = 0;\n        }\n        group = groupInStackingContext(element, container, zIndex);\n\n        // XXX: remove at some point\n        // group._pdfElement = element;\n        // group.options._pdfDebug = \"\";\n        // if (element.id) {\n        //     group.options._pdfDebug = \"#\" + element.id;\n        // }\n        // if (element.className) {\n        //     group.options._pdfDebug += \".\" + element.className.split(\" \").join(\".\");\n        // }\n\n        if (opacity < 1) {\n            group.opacity(opacity * group.opacity());\n        }\n\n        pushNodeInfo(element, style, group);\n\n        if (!tr) {\n            _renderWithPseudoElements(element, group);\n        }\n        else {\n            saveStyle(element, function(){\n                // must clear transform, so getBoundingClientRect returns correct values.\n                pleaseSetPropertyValue(element.style, \"transform\", \"none\", \"important\");\n\n                // must also clear transitions, so correct values are returned *immediately*\n                pleaseSetPropertyValue(element.style, \"transition\", \"none\", \"important\");\n\n                // the presence of any transform makes it behave like it had position: relative,\n                // because why not.\n                // http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n                if (getPropertyValue(style, \"position\") == \"static\") {\n                    // but only if it's not already positioned. :-/\n                    pleaseSetPropertyValue(element.style, \"position\", \"relative\", \"important\");\n                }\n\n                // must translate to origin before applying the CSS\n                // transformation, then translate back.\n                var bbox = element.getBoundingClientRect();\n                var x = bbox.left + tr.origin[0];\n                var y = bbox.top + tr.origin[1];\n                var m = [ 1, 0, 0, 1, -x, -y ];\n                m = mmul(m, tr.matrix);\n                m = mmul(m, [ 1, 0, 0, 1, x, y ]);\n                m = setTransform$1(group, m);\n\n                nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\n\n                _renderWithPseudoElements(element, group);\n            });\n        }\n\n        popNodeInfo();\n\n        //drawDebugBox(element.getBoundingClientRect(), container);\n    }\n\n    // function drawDebugBox(box, group, color) {\n    //     var path = Path.fromRect(new geo.Rect([ box.left, box.top ], [ box.width, box.height ]));\n    //     if (color) {\n    //         path.stroke(color);\n    //     }\n    //     group.append(path);\n    // }\n\n    // function dumpTextNode(node) {\n    //     var txt = node.data.replace(/^\\s+/, \"\");\n    //     if (txt.length < 100) {\n    //         console.log(node.data.length + \": |\" + txt);\n    //     } else {\n    //         console.log(node.data.length + \": |\" + txt.substr(0, 50) + \"|...|\" + txt.substr(-50));\n    //     }\n    // }\n\n    function mmul(a, b) {\n        var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\n        var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\n        return [\n            a1*a2 + b1*c2,          a1*b2 + b1*d2,\n            c1*a2 + d1*c2,          c1*b2 + d1*d2,\n            e1*a2 + f1*c2 + e2,     e1*b2 + f1*d2 + f2\n        ];\n    }\n\n    var drawing = {\n    \tsvg: svg$1,\n    \tcanvas: canvas,\n    \tutil: util,\n    \tHasObservers: HasObservers,\n    \tPathParser: PathParser,\n    \tparsePath: parsePath,\n    \tBaseNode: BaseNode,\n    \tOptionsStore: OptionsStore,\n    \tSurface: Surface,\n    \tSurfaceFactory: SurfaceFactory,\n    \texportImage: exportImage,\n    \texportSVG: exportSVG,\n    \tQuadNode: QuadNode,\n    \tShapesQuadTree: ShapesQuadTree,\n    \tElement: Element$1,\n    \tCircle: Circle,\n    \tArc: Arc,\n    \tPath: Path,\n    \tMultiPath: MultiPath,\n    \tText: Text,\n    \tImage: Image$1,\n    \tGroup: Group,\n    \tLayout: Layout,\n    \tRect: Rect$2,\n    \talign: align,\n    \tvAlign: vAlign,\n    \tstack: stack,\n    \tvStack: vStack,\n    \twrap: wrap,\n    \tvWrap: vWrap,\n    \tfit: fit,\n    \tLinearGradient: LinearGradient,\n    \tRadialGradient: RadialGradient,\n    \tGradientStop: GradientStop,\n    \tGradient: Gradient,\n    \tAnimation: Animation,\n    \tAnimationFactory: AnimationFactory,\n    \tdrawDOM: drawDOM,\n    \tdrawText: drawText,\n    \tgetFontFaces: getFontFaces\n    };\n\n    kendo.deepExtend(kendo, {\n        drawing: drawing,\n        geometry: geometry\n    });\n\n    // Use unique SVG Definition IDs for Kendo UI\n    defId = 1000;\n\n    kendo.drawing.Segment = kendo.geometry.Segment;\n    kendo.dataviz.drawing = kendo.drawing;\n    kendo.dataviz.geometry = kendo.geometry;\n    kendo.drawing.util.measureText = kendo.util.measureText;\n    kendo.drawing.util.objectKey = kendo.util.objectKey;\n    kendo.drawing.Color = kendo.Color;\n    kendo.util.encodeBase64 = kendo.drawing.util.encodeBase64;\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        var NS = \".kendo\";\n        var kendo = window.kendo;\n        var deepExtend = kendo.deepExtend;\n        var utils = kendo.drawing.util;\n        var defined = utils.defined;\n        var limitValue = utils.limitValue;\n        var eventCoordinates = utils.eventCoordinates;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var TOOLTIP_TEMPLATE = '<div class=\"k-tooltip\">' +\n                '<div class=\"k-tooltip-content\"></div>' +\n            '</div>';\n        var TOOLTIP_CLOSE_TEMPLATE = \"<div class=\\\"k-tooltip-button\\\">\" + (kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" })) + \"</div>\";\n\n        var SurfaceTooltip = kendo.Class.extend({\n            init: function(surface, options) {\n                this.element = $(TOOLTIP_TEMPLATE);\n                this.content = this.element.children(\".k-tooltip-content\");\n\n                options = options || {};\n\n                this.options = deepExtend({}, this.options, this._tooltipOptions(options));\n                this.popupOptions = {\n                    appendTo: options.appendTo,\n                    animation: options.animation,\n                    copyAnchorStyles: false,\n                    collision: \"fit fit\"\n                };\n\n                this._openPopupHandler = this._openPopup.bind(this);\n\n                this.surface = surface;\n                this._bindEvents();\n            },\n\n            options: {\n                position: \"top\",\n                showOn: \"mouseenter\",\n                offset: 7,\n                autoHide: true,\n                hideDelay: 0,\n                showAfter: 100\n            },\n\n            _bindEvents: function() {\n                this._showHandler = this._showEvent.bind(this);\n                this._surfaceLeaveHandler = this._surfaceLeave.bind(this);\n                this._mouseleaveHandler = this._mouseleave.bind(this);\n                this._mousemoveHandler = this._mousemove.bind(this);\n\n                this.surface.bind(\"click\", this._showHandler);\n                this.surface.bind(\"mouseenter\", this._showHandler);\n                this.surface.bind(\"mouseleave\", this._mouseleaveHandler);\n                this.surface.bind(\"mousemove\", this._mousemoveHandler);\n\n                this.surface.element.on(\"mouseleave\" + NS, this._surfaceLeaveHandler);\n\n                this.element.on(\"click\" + NS, \".k-tooltip-button\", this._hideClick.bind(this));\n                this.element.on(\"mouseleave\" + NS, this._tooltipLeave.bind(this));\n            },\n\n            getPopup: function() {\n                if (!this.popup) {\n                    this.popup = new kendo.ui.Popup(this.element, this.popupOptions);\n                }\n\n                return this.popup;\n            },\n\n            destroy: function() {\n                var popup = this.popup;\n\n                this.surface.unbind(\"click\", this._showHandler);\n                this.surface.unbind(\"mouseenter\", this._showHandler);\n                this.surface.unbind(\"mouseleave\", this._mouseleaveHandler);\n                this.surface.unbind(\"mousemove\", this._mousemoveHandler);\n\n                this.surface.element.off(\"mouseleave\" + NS, this._surfaceLeaveHandler);\n                this.element.off(\"click\" + NS);\n                this.element.off(\"mouseleave\" + NS);\n\n                if (popup) {\n                    popup.destroy();\n                    delete this.popup;\n                }\n                delete this.popupOptions;\n\n                clearTimeout(this._timeout);\n\n                delete this.element;\n                delete this.content;\n                delete this.surface;\n            },\n\n            _tooltipOptions: function(options) {\n                options = options || {};\n                return {\n                    position: options.position,\n                    showOn: options.showOn,\n                    offset: options.offset,\n                    autoHide: options.autoHide,\n                    width: options.width,\n                    height: options.height,\n                    content: options.content,\n                    shared: options.shared,\n                    hideDelay: options.hideDelay,\n                    showAfter: options.showAfter\n                };\n            },\n\n            _tooltipShape: function(shape) {\n                while (shape && !shape.options.tooltip) {\n                    shape = shape.parent;\n                }\n                return shape;\n            },\n\n            _updateContent: function(target, shape, options) {\n                var content = options.content;\n                if (kendo.isFunction(content)) {\n                    content = content({\n                        element: shape,\n                        target: target\n                    });\n                }\n\n                if (content) {\n                    this.content.html(content);\n                    return true;\n                }\n            },\n\n            _position: function(shape, options, elementSize, event) {\n                var position = options.position;\n                var tooltipOffset = options.offset || 0;\n                var surface = this.surface;\n                var offset = surface._instance._elementOffset();\n                var size = surface.getSize();\n                var surfaceOffset = surface._instance._offset;\n                var bbox = shape.bbox();\n                var width = elementSize.width;\n                var height = elementSize.height;\n                var left = 0, top = 0;\n\n                bbox.origin.translate(offset.left, offset.top);\n                if (surfaceOffset) {\n                    bbox.origin.translate(-surfaceOffset.x, -surfaceOffset.y);\n                }\n\n                if (position == \"cursor\" && event) {\n                    var coord = eventCoordinates(event);\n                    left = coord.x - width / 2;\n                    top = coord.y - height - tooltipOffset;\n                } else if (position == \"left\") {\n                    left = bbox.origin.x - width - tooltipOffset;\n                    top = bbox.center().y - height / 2;\n                } else if (position == \"right\") {\n                    left = bbox.bottomRight().x + tooltipOffset;\n                    top = bbox.center().y - height / 2;\n                } else if (position == \"bottom\") {\n                    left = bbox.center().x - width / 2;\n                    top = bbox.bottomRight().y + tooltipOffset;\n                } else {\n                    left = bbox.center().x - width / 2;\n                    top = bbox.origin.y - height - tooltipOffset;\n                }\n\n                return {\n                    left: limitValue(left, offset.left, offset.left + size.width),\n                    top: limitValue(top, offset.top, offset.top + size.height)\n                };\n            },\n\n            show: function(shape, options) {\n                this._show(shape, shape, deepExtend({}, this.options, this._tooltipOptions(shape.options.tooltip), options));\n            },\n\n            hide: function() {\n                var popup = this.popup;\n                var current = this._current;\n\n                delete this._current;\n                clearTimeout(this._showTimeout);\n                if (popup && popup.visible() && current &&\n                    !this.surface.trigger(\"tooltipClose\", { element: current.shape, target: current.target, popup: popup })) {\n                    popup.close();\n                }\n            },\n\n            _hideClick: function(e) {\n                e.preventDefault();\n                this.hide();\n            },\n\n            _show: function(target, shape, options, event, delay) {\n                var current = this._current;\n\n                clearTimeout(this._timeout);\n\n                if (current && ((current.shape === shape && options.shared) || current.target === target)) {\n                    return;\n                }\n\n                clearTimeout(this._showTimeout);\n\n                var popup = this.getPopup();\n\n                if (!this.surface.trigger(\"tooltipOpen\", { element: shape, target: target, popup: popup }) &&\n                    this._updateContent(target, shape, options)) {\n\n                    this._autoHide(options);\n                    var elementSize = this._measure(options);\n\n                    if (popup.visible()) {\n                        popup.close(true);\n                    }\n\n                    this._current = {\n                        options: options,\n                        elementSize: elementSize,\n                        shape: shape,\n                        target: target,\n                        position: this._position(options.shared ? shape : target, options, elementSize, event)\n                    };\n\n                    if (delay) {\n                        this._showTimeout = setTimeout(this._openPopupHandler, options.showAfter || 0);\n                    } else {\n                        this._openPopup();\n                    }\n                }\n            },\n\n            _openPopup: function() {\n                var current = this._current;\n                var position = current.position;\n\n                this.getPopup().open(position.left, position.top);\n            },\n\n            _autoHide: function(options) {\n                if (options.autoHide && this._closeButton) {\n                    this.element.removeClass(\"k-tooltip-closable\");\n                    this._closeButton.remove();\n                    delete this._closeButton;\n                }\n\n                if (!options.autoHide && !this._closeButton) {\n                    this.element.addClass(\"k-tooltip-closable\");\n                    this._closeButton = $(TOOLTIP_CLOSE_TEMPLATE).appendTo(this.element);\n                }\n            },\n\n            _showEvent: function(e) {\n                var shape = this._tooltipShape(e.element);\n\n                if (shape) {\n                    var options = deepExtend({}, this.options, this._tooltipOptions(shape.options.tooltip));\n\n                    if (options && options.showOn == e.type) {\n                        this._show(e.element, shape, options, e.originalEvent, true);\n                    }\n                }\n            },\n\n            _measure: function(options) {\n                this.element.css({\n                    width: defined(options.width) ? options.width : 'auto',\n                    height: defined(options.height) ? options.height : 'auto'\n                });\n\n                var clone = this.element.clone().appendTo(document.body).css({ visibility: 'hidden' });\n                var width = outerWidth(clone);\n                var height = outerHeight(clone);\n                clone.remove();\n\n                this.element.css({\n                    width: width,\n                    height: height\n                });\n\n                return {\n                    width: width,\n                    height: height\n                };\n            },\n\n            _mouseleave: function(e) {\n                if (this.popup && !this._popupRelatedTarget(e.originalEvent)) {\n                    var tooltip = this;\n                    var current = tooltip._current;\n\n                    if (current && current.options.autoHide) {\n                        tooltip._timeout = setTimeout(function() {\n                            clearTimeout(tooltip._showTimeout);\n                            tooltip.hide();\n                        }, current.options.hideDelay || 0);\n                    }\n                }\n            },\n\n            _mousemove: function(e) {\n                var current = this._current;\n                if (current && e.element) {\n                    var options = current.options;\n                    if (options.position == \"cursor\") {\n                        var position = this._position(e.element, options, current.elementSize, e.originalEvent);\n                        current.position = position;\n                        this.getPopup().wrapper.css({ left: position.left, top: position.top });\n                    }\n                }\n            },\n\n            _surfaceLeave: function(e) {\n                if (this.popup && !this._popupRelatedTarget(e)) {\n                    clearTimeout(this._showTimeout);\n                    this.hide();\n                }\n            },\n\n            _popupRelatedTarget: function(e) {\n                return e.relatedTarget && $(e.relatedTarget).closest(this.popup.wrapper).length;\n            },\n\n            _tooltipLeave: function() {\n                var tooltip = this;\n                var current = tooltip._current;\n                if (current && current.options.autoHide) {\n                    tooltip._timeout = setTimeout(function() {\n                        tooltip.hide();\n                    }, current.options.hideDelay || 0);\n                }\n            }\n        });\n\n        kendo.drawing.SurfaceTooltip = SurfaceTooltip;\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        var kendo = window.kendo;\n        var draw = kendo.drawing;\n        var DrawingSurface = draw.Surface;\n        var Widget = kendo.ui.Widget;\n        var deepExtend = kendo.deepExtend;\n\n        kendo.support.svg = DrawingSurface.support.svg;\n        kendo.support.canvas = DrawingSurface.support.canvas;\n\n        var Surface = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, {});\n\n                this.options = deepExtend({}, this.options, options);\n\n                this._instance = DrawingSurface.create(this.element[0], options);\n                if (this._instance.translate) {\n                    this.translate = translate;\n                }\n\n                this._triggerInstanceHandler = this._triggerInstanceEvent.bind(this);\n                this._bindHandler(\"click\");\n                this._bindHandler(\"mouseenter\");\n                this._bindHandler(\"mouseleave\");\n                this._bindHandler(\"mousemove\");\n\n                this._enableTracking();\n            },\n\n            options: {\n                name: \"Surface\",\n                tooltip: {}\n            },\n\n            events: [\n                \"click\",\n                \"mouseenter\",\n                \"mouseleave\",\n                \"mousemove\",\n                \"resize\",\n                \"tooltipOpen\",\n                \"tooltipClose\"\n            ],\n\n            _triggerInstanceEvent: function(e) {\n                this.trigger(e.type, e);\n            },\n\n            _bindHandler: function(event) {\n                this._instance.bind(event, this._triggerInstanceHandler);\n            },\n\n            draw: function(element) {\n                this._instance.draw(element);\n            },\n\n            clear: function() {\n                if (this._instance) {\n                    this._instance.clear();\n                }\n                this.hideTooltip();\n            },\n\n            destroy: function() {\n                if (this._instance) {\n                    this._instance.destroy();\n                    delete this._instance;\n                }\n\n                if (this._tooltip) {\n                    this._tooltip.destroy();\n                    delete this._tooltip;\n                }\n\n                Widget.fn.destroy.call(this);\n            },\n\n            exportVisual: function() {\n                return this._instance.exportVisual();\n            },\n\n            eventTarget: function(e) {\n                return this._instance.eventTarget(e);\n            },\n\n            showTooltip: function(shape, options) {\n                if (this._tooltip) {\n                    this._tooltip.show(shape, options);\n                }\n            },\n\n            hideTooltip: function() {\n                if (this._tooltip) {\n                    this._tooltip.hide();\n                }\n            },\n\n            suspendTracking: function() {\n                this._instance.suspendTracking();\n                this.hideTooltip();\n            },\n\n            resumeTracking: function() {\n                this._instance.resumeTracking();\n            },\n\n            getSize: function() {\n                return {\n                    width: this.element.width(),\n                    height: this.element.height()\n                };\n            },\n\n            setSize: function(size) {\n                this.element.css({\n                    width: size.width,\n                    height: size.height\n                });\n\n                this._size = size;\n                this._instance.currentSize(size);\n                this._resize();\n            },\n\n            _resize: function() {\n                this._instance.currentSize(this._size);\n                this._instance._resize();\n            },\n\n            _enableTracking: function() {\n                if (kendo.ui.Popup) {\n                    this._tooltip = new draw.SurfaceTooltip(this, this.options.tooltip || {});\n                }\n            }\n        });\n\n        kendo.ui.plugin(Surface);\n\n        Surface.create = function(element, options) {\n            return new Surface(element, options);\n        };\n\n        kendo.drawing.Surface = Surface;\n\n        function translate(offset) {\n            this._instance.translate(offset);\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        var kendo = window.kendo;\n        var drawing = kendo.drawing;\n        var drawDOM = drawing.drawDOM;\n\n        drawing.drawDOM = function(element, options) {\n            return drawDOM($(element)[0], options);\n        };\n\n        // Aliases used by spreadsheet/print.js\n        drawing.drawDOM.drawText = drawing.drawText;\n        drawing.drawDOM.getFontFaces = drawing.getFontFaces;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"drawing\",\n            name: \"Drawing API\",\n            category: \"framework\",\n            description: \"The Kendo UI low-level drawing API\",\n            depends: [ \"core\", \"color\", \"popup\", \"icons\" ]\n        };\n\n}));\n"]}